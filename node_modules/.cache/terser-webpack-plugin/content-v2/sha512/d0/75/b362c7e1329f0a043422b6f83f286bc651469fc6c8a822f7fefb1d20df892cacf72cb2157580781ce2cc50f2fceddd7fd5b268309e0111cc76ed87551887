{"code":"(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[39],{2968:function(e,t,a){\"use strict\";var r=a(43),n=a(11),i=a(15),l=a(12),s=a(2996),u=(a(28),a(1)),o=a.n(u),c=a(82),d=a(33),f=a(7),g={},h=\"OwningSite.owning_site\";let p=\"_0Z0_\",m=[\"year\",\"year_month\",\"week\",\"year_month_day\"],N=\"~\";let F=l.default.ctx.preferences&&l.default.ctx.preferences.AW_FacetValue_Separator&&l.default.ctx.preferences.AW_FacetValue_Separator[0]?l.default.ctx.preferences.AW_FacetValue_Separator[0]:\"^\";const T=e=>{if(e&&e.filterValues&&e.filterValues.length>0)for(let t=0;t<e.filterValues.length;t++)e.filterValues[t].selected.dbValue=!1,e.filterValues[t].selected.value=!1;return e};let S=e=>(e&&(delete e.numericRangeString,delete e.numericrange),e),R=e=>(e&&(delete e.dateRangeString,e.daterange.endDate.value=-6213557904e4,e.daterange.endDate.dbValue=-6213557904e4,e.daterange.startDate.value=-6213557904e4,e.daterange.startDate.dbValue=-6213557904e4),e);const C=e=>{let t=[];if(e&&e.length>0)for(let a=0;a<e.length;a++)switch(e[a].searchFilterType){case\"DateFilter\":e[a].startDateValue.includes(s.a.BEGINNING_OF_TIME)?t.push(s.a.INTERNAL_DATE_FILTER+\"*_TO_\"+e[a].endDateValue):e[a].startDateValue.includes(s.a.ENDING_OF_TIME)?t.push(s.a.INTERNAL_DATE_FILTER+e[a].startDateValue+\"_TO_*\"):t.push(s.a.INTERNAL_DATE_FILTER+e[a].startDateValue+\"_TO_\"+e[a].endDateValue);break;case\"NumericFilter\":e[a].stringValue&&e[a].stringValue.length>0&&\"NumericRange\"!==e[a].startEndRange&&\"NumericRangeBlankStart\"!==e[a].startEndRange&&\"NumericRangeBlankEnd\"!==e[a].startEndRange?t.push(s.a.INTERNAL_NUMERIC_FILTER+e[a].stringValue):e[a].startNumericValue>0&&e[a].endNumericValue>0?t.push(s.a.INTERNAL_NUMERIC_RANGE+e[a].startNumericValue+\"_TO_\"+e[a].endNumericValue):e[a].startNumericValue>0?t.push(s.a.INTERNAL_NUMERIC_RANGE+e[a].startNumericValue+\"_TO_\"):t.push(s.a.INTERNAL_NUMERIC_RANGE+\"_TO_\"+e[a].endNumericValue);break;case\"RadioFilter\":case\"StringFilter\":t.push(e[a].stringValue)}return t.sort()};let y=function(e){let t=!1;o.a.forEach(e,((e,a)=>{if(o.a.indexOf(e[0],\"~\")>-1)return t=!0,!1})),N=t?\"##\":\"~\"};const v=e=>{let t={},a=Object.keys(e);a.sort();for(let r=0;r<a.length;r++){let n=e[a[r]];n.sort(),t[a[r]]=n}return t},E=e=>{for(let t=0;t<e.length;t++){let a=e[t];a=O(a),e[t]=a}return e};let I=function(e){return y(e),e=v(e),o.a.map(e,(function(e,t){return t+\"=\"+(e=E(e)).join(F)})).join(N)},V=function(e){var t=!1;if(e){var a=e.split(s.a.HIERARCHICAL_FACET_SEPARATOR);if(a&&a.length>2&&!isNaN(a[0]))parseInt(a[0],10)>0&&(t=!0)}return t},b=function(e,t){var a=[],r=e.split(s.a.HIERARCHICAL_FACET_SEPARATOR);if(!isNaN(r[0]))for(var n=parseInt(r[0],10),i=0;i<=n;i++){for(var l=i.toString(),u=1;u<=i+1;u++)l+=s.a.HIERARCHICAL_FACET_SEPARATOR+r[u];t?a.push(s.a.INTERNAL_OBJECT_FILTER+l):a.push(l)}return a},_=function(e,t,a,n,i){var l={};return r.a.instance.params.filter&&r.a.instance.params.filter.split(N).map((function(e){var t=e.search(\"=\"),r=e.slice(0,t),u=e.slice(t+1),o=[];if(o[0]=r,o[1]=u,2===o.length&&\"\"!==o[1]){var c=s.a.getRealFilterWithNoFilterType(o[1]);a&&V(c)&&D(o[0])?l[o[0]]=b(c,n):i?\"ShapeSearchProvider\"!==o[0]&&\"Geolus Criteria\"!==o[0]&&\"SS1shapeBeginFilter\"!==o[0]&&\"SS1shapeEndFilter\"!==o[0]&&\"SS1partShapeFilter\"!==o[0]&&\"UpdatedResults.updated_results\"!==o[0]&&(l[o[0]]=o[1].split(F)):l[o[0]]=o[1].split(F)}})),e?e(l):t?L(l):l},D=function(e){var t=!1,a=l.default.getCtx(\"searchResponseInfo.searchFilterMap\");if(a&&e&&a[e]){var r;(r=a[e])&&r.length>0&&\"ObjectFilter\"===r[0].searchFilterType&&(t=!0)}return t},L=function(e){return o.a.reduce(e,(function(e,t,a){var r=a.split(p)[0];return r!==a?o.a.forEach(t,(function(t){var n={};n.property=a,n.filter=t,e[r]||(e[r]=[]),e[r].push(n)})):e[a]?e[a]=e[a].concat(t):e[a]=t,e}),{})},A=function(e,t){o.a.forEach(t,(function(t,a){var r=\"StringFilter\";a===h?(r=\"RadioFilter\",e.activeFilterMap[a]=t.map((function(e){var t={searchFilterType:\"RadioFilter\"};return t.stringValue=e,t}))):e.activeFilterMap[a]=t.map((function(e){var t={};if(o.a.startsWith(e,s.a.INTERNAL_DATE_FILTER))t=s.a.getDateRangeFilter(e.substring(12,e.length));else if(o.a.startsWith(e,s.a.INTERNAL_NUMERIC_RANGE))t=s.a.getNumericRangeFilter(e.substring(14,e.length));else if(o.a.startsWith(e,s.a.INTERNAL_NUMERIC_FILTER)){t.searchFilterType=\"NumericFilter\";var a=parseFloat(e.substring(15,e.length));isNaN(a)||(t.startNumericValue=a,t.endNumericValue=a),t.stringValue=e.substring(15,e.length)}else o.a.startsWith(e,s.a.INTERNAL_OBJECT_FILTER)?(t.searchFilterType=\"StringFilter\",t.stringValue=e.substring(14,e.length)):\"$TODAY\"===e||\"$THIS_WEEK\"===e||\"$THIS_MONTH\"===e?(t.searchFilterType=\"DateFilter\",t.stringValue=e):(t.searchFilterType=\"StringFilter\",t.stringValue=e);return r=t.searchFilterType,t})),e.activeFilters.push({name:a,values:t,type:r})}))},x=function(e,t,a,r,n){var i=o.a.findIndex(n,(function(e){if(e.name===a&&e.values)return o.a.startsWith(e.values[0],s.a.INTERNAL_NUMERIC_FILTER)||o.a.startsWith(e.values[0],s.a.INTERNAL_NUMERIC_RANGE)}));return r.stringValue=i>-1?s.a.INTERNAL_NUMERIC_FILTER.concat(e[t].stringValue):e[t].stringValue,r},M=function(){return l.default.getCtx(\"user\").props.user_name.dbValue+\" ( \"+l.default.getCtx(\"user\").props.userid.dbValue+\" )\"};const O=e=>\"$ME\"===e?M():\"$TODAY\"===e?W().searchFilterVariableToday:\"$THIS_WEEK\"===e?W().searchFilterVariableThisWeek:\"$THIS_MONTH\"===e?W().searchFilterVariableThisMonth:\"$MY_GROUP\"===e?W().searchFilterVariableMyGroup:e;let w=function(e){return\"$ME\"===e?M():\"$TODAY\"===e?W().searchFilterVariableToday:\"$THIS_WEEK\"===e?W().searchFilterVariableThisWeek:\"$THIS_MONTH\"===e?W().searchFilterVariableThisMonth:\"$MY_GROUP\"===e?W().searchFilterVariableMyGroup:\"\"},W=function(){return g},P=function(e,t,a){var r=w(t);if(\"\"===r)if(o.a.startsWith(t,s.a.INTERNAL_DATE_FILTER)){var n=s.a.getDate(U(e[0].startDateValue)),i=s.a.getDate(U(e[0].endDateValue));r=s.a.getDateRangeDisplayString(n,i).displayName}else if(o.a.startsWith(t,s.a.INTERNAL_NUMERIC_RANGE)){var l=e[0].startNumericValue,u=e[0].endNumericValue,c=e[0].startEndRange;r=s.a.getNumericRangeDisplayString(l,u,c).displayName}else{var d=o.a.findIndex(e,(function(e){return e.stringValue===t}));if(d>-1)if(e[d].stringDisplayValue)r=e[d].stringDisplayValue;else if(o.a.endsWith(t,\"$NONE\"))r=g.noFilterValue;else if(a){var f=o.a.find(a,(function(e){return e.stringValue===t}));r=f&&f.stringDisplayValue?f.stringDisplayValue:t}else r=t}return r},U=function(e){if(e.length>19){var t=e.substring(19);if(t.length>4&&-1===t.indexOf(\":\")){var a=t.substring(0,t.length-2),r=t.substring(t.length-2),n=a.concat(\":\",r);e=e.replace(t,n)}}return e},B=function(e){r.a.instance.go(\".\",{filter:I(e)})},k=function(){return i.default.getLocalizedText(\"UIMessages\",\"clearBreadCrumb\")},G=function(e,t,a,r){return e&&void 0!==a?n.a.instance.all({label:\"string\"===typeof e?n.a.instance.when(e):i.default.getLocalizedText(e.source,e.key),selectionCountLabel:i.default.getLocalizedTextFromKey(\"XRTMessages.selectionCountLabel\"),noSearchResultsWithSearchBox:i.default.getLocalizedTextFromKey(\"UIMessages.noSearchResultsWithSearchBox\"),noSearchResults:i.default.getLocalizedTextFromKey(\"UIMessages.noSearchResults\"),resultsCountLabelWithSearchBox:i.default.getLocalizedTextFromKey(\"UIMessages.resultsCountLabelWithSearchBox\"),resultsCountLabel:i.default.getLocalizedTextFromKey(\"UIMessages.resultsCountLabel\")}).then((function(e){return 0===a?t?e.noSearchResults.format(\"\",t):e.noSearchResults.format(\"\",e.label):(n=t?e.resultsCountLabel.format(a,\"\",t):e.resultsCountLabel.format(a,\"\",e.label),r&&r.multiSelectEnabled?e.selectionCountLabel.format(r.getCurrentSelectedCount(),n):n);var n})):i.default.getLocalizedText(\"BaseMessages\",\"LOADING_TEXT\")},z=function(){let e=l.default.ctx.search&&l.default.ctx.search.reqFilters;return e=e&&l.default.ctx.search.reqFilters.ShapeSearchProvider&&\"true\"===l.default.ctx.search.reqFilters.ShapeSearchProvider[0],e},K=function(e,t,a){var r=l.default.getCtx(\"search.totalFound\"),s=l.default.getCtx(\"search.criteria.searchString\"),u=l.default.getCtx(\"searchInfo\"),o=l.default.ctx.searchSearch;return e&&void 0!==r?n.a.instance.all({label:\"string\"===typeof e?n.a.instance.when(e):i.default.getLocalizedText(e.source,e.key),selectionCountLabel:i.default.getLocalizedTextFromKey(\"XRTMessages.selectionCountLabel\"),noSearchResultsWithInContentSearch:i.default.getLocalizedTextFromKey(\"UIMessages.noSearchResultsWithInContentSearch\"),thresholdExceeded:i.default.getLocalizedTextFromKey(\"UIMessages.thresholdExceeded\"),noSearchResultsWithoutInContentSearch:i.default.getLocalizedTextFromKey(\"UIMessages.noSearchResultsWithoutInContentSearch\"),noSearchResults:i.default.getLocalizedTextFromKey(\"UIMessages.noSearchResults\"),resultsCountLabel:i.default.getLocalizedTextFromKey(\"UIMessages.resultsCountLabel\"),shapesCountLabelPart1:i.default.getLocalizedTextFromKey(\"UIMessages.shapesCountLabelPart1\"),shapesCountLabelPart2:i.default.getLocalizedTextFromKey(\"UIMessages.shapesCountLabelPart2\"),oneShapeCountLabelPart1:i.default.getLocalizedTextFromKey(\"UIMessages.oneShapeCountLabelPart1\"),resultsCountLabelWithInContentSearch:i.default.getLocalizedTextFromKey(\"UIMessages.resultsCountLabelWithInContentSearch\"),resultsCountLabelWithoutInContentSearch:i.default.getLocalizedTextFromKey(\"UIMessages.resultsCountLabelWithoutInContentSearch\")}).then((function(e){return 0===t?s?o&&o.searchStringSecondary&&s===o.searchStringPrimary+\" AND \"+o.searchStringSecondary?e.noSearchResultsWithInContentSearch.format(o.searchStringPrimary,o.searchStringSecondary):u&&\"true\"===u.thresholdExceeded?(u.noResultsFound=e.thresholdExceeded.format(s),\"\"):e.noSearchResultsWithoutInContentSearch.format(s):e.noSearchResults.format(\"\",e.label):(r=s?H(o,s,e,t,r):e.resultsCountLabel.format(t,\"\",e.label),a&&a.multiSelectEnabled?e.selectionCountLabel.format(a.getCurrentSelectedCount(),r):r);var r})):i.default.getLocalizedText(\"BaseMessages\",\"LOADING_TEXT\")},j=function(e,t,a,r,n){var i=l.default.getCtx(\"shapeSearch\");return(n={}).seedObjectLink=i.seedObjectItemId+\"/\"+i.seedObjectItemName,e.searchStringSecondary?r>1?(n.part1=a.shapesCountLabelPart1.format(r),n.part2=a.shapesCountLabelPart2.format(e.searchStringSecondary)):(n.part1=a.oneShapeCountLabelPart1.format(r),n.part2=a.shapesCountLabelPart2.format(e.searchStringSecondary)):n.part1=r>1?a.shapesCountLabelPart1.format(r):a.oneShapeCountLabelPart1.format(r),n},H=function(e,t,a,r,n){if(z())n=j(e,0,a,r,n);else if(e&&e.searchStringSecondary&&t===e.searchStringPrimary+\" AND \"+e.searchStringSecondary){n=a.resultsCountLabelWithInContentSearch.format(r,e.searchStringPrimary,e.searchStringSecondary)}else n=a.resultsCountLabelWithoutInContentSearch.format(r,t);return n},$=function(e,t){var a=o.a.dropRightWhile(e,(function(e){return e.indexBreadCrumb>t})),r={};o.a.forEach(a,(function(e){r[e.internalName]?r[e.internalName].push(e.internalValue):r[e.internalName]=[e.internalValue]}));var n=l.default.getCtx(\"search\").reqFilters;n&&o.a.forEach(n,(function(e,t){r[t]?r[t].push(e):r[t]=[e]})),B(r)},Y=function(e,t,a,r){var l={};return n.a.instance.all({noCriteriaSpecifiedMessage:i.default.getLocalizedText(e.noCriteriaSpecifiedMessage.source,e.noCriteriaSpecifiedMessage.key),noResultsFoundMessage:i.default.getLocalizedText(e.noResultsFoundMessage.source,e.noResultsFoundMessage.key),resultsFoundMessage:i.default.getLocalizedText(e.resultsFoundMessage.source,e.resultsFoundMessage.key)}).then((function(e){l.title=r?void 0===a||0===a?e.noResultsFoundMessage.format(t):e.resultsFoundMessage.format(t):e.noCriteriaSpecifiedMessage.format()})),l},q=function(){return{crumbs:[],clear:function(){c.a.logCommands({sanAnalyticsType:\"Commands\",sanCommandId:\"clearSearchFilter\",sanCommandTitle:\"Clear All Search Filters\"});var e=l.default.getCtx(\"search\").reqFilters;B(e||[])},onRemove:function(e){c.a.logCommands({sanAnalyticsType:\"Commands\",sanCommandId:\"removeSearchFilterCrumb\",sanCommandTitle:\"Remove Crumb Filter\",sanCmdLocation:\"primarySearchPanel\"})},onSelect:function(e){c.a.logCommands({sanAnalyticsType:\"Commands\",sanCommandId:\"clickSearchFilterCrumb\",sanCommandTitle:\"Click Search Filter Crumb\",sanCmdLocation:\"primarySearchPanel\"}),$(this.crumbs,e.indexBreadCrumb)}}},J=function(e){if(e.internalValue&&\"\"!==e.internalValue&&e.internalValue===e.value){var t=l.default.getCtx(\"searchSearch\");if(t&&t.originalInputCategories){var a=o.a.findIndex(t.originalInputCategories,(function(t){return e.internalName===t.internalName}));if(t.originalInputCategories[a]&&t.originalInputCategories[a].filterValues&&t.originalInputCategories[a].filterValues.parentnodes){var r=o.a.findIndex(t.originalInputCategories[a].filterValues.parentnodes,(function(t){return e.internalValue===t.stringValue}));e.value=t.originalInputCategories[a].filterValues.parentnodes[r].stringDisplayValue}}}},Z=function(e,t){o.a.findIndex(t,(function(t){return t===e.displayName}))<0?t.push(e.displayName):e.displayName=\"\"},X=function(e,t,a,r,n){k().then((function(t){e.clearBreadCrumb=t})),n?K(t,a,r).then((function(t){e.title=t})):G(t,a,r).then((function(t){e.title=t}))},Q=function(e,t,a,r,n,i,l){return n&&(r.value=P(n[i],l)),r.value&&\"\"!==r.value&&(J(r),Z(r,a),++t,r.indexBreadCrumb=t,e.crumbs.push(r)),r.internalName===h&&(r.filterType=\"RadioFilter\"),r.internalName===h&&\"local\"===r.internalValue?r.showRemoveButton=!1:r.showRemoveButton=!0,e},ee=function(e){var t=\"\",a=l.default.getCtx(\"searchSearch\");if(a&&a.originalInputCategories&&a.originalInputCategories.length>0){var r=o.a.findIndex(a.originalInputCategories,(function(t){return t.internalName===e}));if(r>-1)return t=a.originalInputCategories[r].displayName}var n=e.split(\".\");if(n&&2===n.length){var i=d.a.getType(n[0]);if(i){var u=s.a.getPropertyFromFilter(n[1]),c=i.propertyDescriptorsMap[u];t=c?c.displayName:n[1]}else{var f=n[1];t=f[0].toUpperCase()+f.slice(1).toLowerCase()}}return t},te=function(){i.default.getLocalizedTextFromKey(\"UIMessages.noFilterValue\",!0).then((e=>g.noFilterValue=e)),i.default.getLocalizedTextFromKey(\"SearchMessages.searchFilterVariableMyGroup\",!0).then((e=>g.searchFilterVariableMyGroup=e)),i.default.getLocalizedTextFromKey(\"SearchMessages.searchFilterVariableThisMonth\",!0).then((e=>g.searchFilterVariableThisMonth=e)),i.default.getLocalizedTextFromKey(\"SearchMessages.searchFilterVariableThisWeek\",!0).then((e=>g.searchFilterVariableThisWeek=e)),i.default.getLocalizedTextFromKey(\"dateTimeServiceMessages.currentText\",!0).then((e=>g.searchFilterVariableToday=e))};te();const ae={_dateFilterMarker:p,_dateFilterLevels:m,_filterSeparator:N,_filterValueSeparator:F,chooseFilterSeparator:y,buildFilterString:I,isHierarchicalChildFilter:V,parseHierarchicalChildFilters:b,getFilters:_,checkIfObjectFilterType:D,getSortedFilterMap:L,buildSearchFiltersInt:A,buildSearchFilters:function(e){let t={};return t.activeFilterMap=e&&e.search&&e.search.activeFilterMap?o.a.cloneDeep(e.search.activeFilterMap):{},t.activeFilters=[],A(t,_()),t},getFilterStringFromActiveFilterMap:function(e,t){var a=_(!1),r=\"\";return o.a.map(a,(function(n,i){var l=i.split(p)[0],u=o.a.findIndex(t,(function(e){return e.internalName===l})),c=\"\";if(u>-1)c=t[u].displayName;else{if(t&&!(t&&t.length<1))return\"\";c=ee(i)}var d=\"\";if(o.a.forEach(a[i],(function(t){var a=P(e[i],s.a.getRealFilterWithNoFilterType(t),e[i]);d+=\"\"===d?a:\", \"+a})),\"\"!==d){var f=c+\"=\"+d;r+=\"\"===r?f:\", \"+f}})),r},convertFilterMapToSavedSearchFilterMap:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=e.activeFilterMap,a=e.activeFilters,r={};return t&&o.a.forEach(t,(function(e,t){for(var n=[],i=0;i<e.length;i++){var l={searchFilterType:\"SearchStringFilter\",startNumericValue:0,endNumericValue:0,startDateValue:0,endDateValue:0};if(\"DateFilter\"!==e[i].searchFilterType||e[i].stringValue)\"NumericFilter\"===e[i].searchFilterType?e[i].stringValue?l.stringValue=s.a.INTERNAL_NUMERIC_FILTER.concat(e[i].stringValue):l.stringValue=s.a.getNumericRangeString(e[i].startNumericValue,e[i].endNumericValue):l=x(e,i,t,l,a);else{var u=e[i].startDateValue.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/),o=e[i].endDateValue.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);if(!u||!o)continue;var c=new Date(u),d=new Date(o);l.stringValue=s.a.getDateRangeString(c,new Date(d))}n.push(l)}r[t]=n})),r},getFilterDisplayValue:function(e,t){var a=\"\",r=[];if(o.a.startsWith(t,s.a.INTERNAL_DATE_FILTER)){if((r=t.replace(s.a.INTERNAL_DATE_FILTER,\"\").split(\"_TO_\")).length>1){var n=new Date(r[0]),i=new Date(r[1]);a=s.a.getDateRangeDisplayString(n,i).displayName}}else if(o.a.startsWith(t,s.a.INTERNAL_NUMERIC_RANGE)){if((r=t.replace(s.a.INTERNAL_NUMERIC_RANGE,\"\").split(\"_TO_\")).length>1)a=s.a.getNumericRangeDisplayString(r[0],r[1]).displayName}else{var l=o.a.findIndex(e,(function(e){return e.stringValue===t}));l>-1&&(a=o.a.endsWith(e[l].stringValue,\"$NONE\")?g.noFilterValue:e[l].stringDisplayValue)}return a},getSpecialDisplayName:w,getLocalTextBundle:W,getBreadCrumbDisplayValue:P,processDateStringOffset:U,groupByCategory:function(e){return o.a.reduce(e,(function(e,t,a){var r=a.split(p)[0];return r!==a&&o.a.forEach(t,(function(e){e.startEndRange=a.substring(r.length,a.length)})),e[r]?e[r]=e[r].concat(t):e[r]=t,e}),{})},setFilters:B,addOrRemoveObjectFilter:function(e,t,a,r){},addOrRemoveFilter:function(e,t,a,r){},getFilterExtension:function(e){return\"+1YEAR\"===e.startEndRange?p+m[0]:\"+1MONTH\"===e.startEndRange?p+m[1]:\"+7DAYS\"===e.startEndRange?p+m[2]:\"+1DAY\"===e.startEndRange?p+m[3]:e.startEndRange},doSearch:function(e,t,a){r.a.instance.go(e||\".\",{filter:I(a),searchCriteria:t})},doSearchKeepFilter:function(e,t,a,n){\"true\"===a||n?r.a.instance.go(e||\".\",{filter:I(_(!1,void 0,void 0,void 0,!0)),searchCriteria:t}):r.a.instance.go(e||\".\",{filter:I(_(!1)),searchCriteria:t})},isShapeSearchContext:z,loadBreadcrumbClearTitle:k,doShapeSearch:function(e,t,a){var n=l.default.getCtx(\"searchSearch\");n&&(delete n.savedSearchUid,delete n.searchStringPrimary,n.searchStringSecondary&&(delete n.searchStringSecondary,f.a.publish(\"search.clearSearchBox\")),l.default.updateCtx(\"searchSearch\",n));var i=l.default.getCtx(\"shapeSearch\");i||(i={},l.default.registerCtx(\"shapeSearch\",i));var s=l.default.getCtx(\"selected\");return s&&s.props&&s.props.awb0ArchetypeId&&s.props.awb0ArchetypeName?(i.seedObjectItemId=s.props.awb0ArchetypeId.uiValues[0],i.seedObjectItemName=s.props.awb0ArchetypeName.uiValues[0]):s&&s.props&&(i.seedObjectItemId=s.props.item_id.uiValues[0],i.seedObjectItemName=s.props.object_name.uiValues[0]),r.a.instance.go(e||\".\",{filter:a,searchCriteria:t}),i},loadBreadcrumbTitle:G,loadInContentBreadcrumbTitle:K,setFiltersFromCrumbs:$,displayNoBreadCrumbProvider:Y,getBreadcrumbProvider:q,setBreadcrumbValue:J,setBreadcrumbDisplayName:Z,setBreadcrumbProviderTitle:X,buildBreadcrumbProvider:function(e,t,a,r,n,i,l,u){if(e&&\"true\"===e.noBreadCrumb)return Y(e,t,a,u);var c=q(),d=_(!1,!0,!0,!0),f=[];return o.a.forEach(d,(function(e){!function(e){e&&Array.isArray(e)&&o.a.forEach(e,(function(e,t,a){e&&!e.hasOwnProperty(\"property\")&&0!==e.trim().length&&(a[t]=a[t].replace(\"AW_PreFilter_\",\"\"))}))}(e)})),o.a.map(d,(function(e,t){var a=o.a.findIndex(n,(function(e){return e.internalName===t})),r={};o.a.forEach(d[t],(function(e){var l=t,u=s.a.getRealFilterWithNoFilterType(e),o=s.a.getFilterTypeFromFilterValue(e);if(e.hasOwnProperty(\"property\")&&(l=e.property,u=e.filter),a>-1)r={displayName:n[a].displayName+\":\",displayNameHidden:n[a].displayName+\":\",internalName:l,internalValue:u,filterType:o};else{if(n&&!(n&&n.length<1))return c;var d=ee(t);if(!d)return c;r={displayName:d+\":\",displayNameHidden:d+\":\",internalName:t,internalValue:u,filterType:o}}c=Q(c,-1,f,r,i,l,u)}))})),X(c,t,a,r,l),c},getCategoryDisplayName:ee,loadConfiguration:te,processLoadInContentBreadcrumbTitleShape:j,processLoadInContentBreadcrumbTitle:H,processConvertFilterMapToSavedSearchFilterMap:x,processBreadCrumbsSearchFilters:Q,buildSearchFiltersFromSearchState:function(e){let t={activeFilterMap:{},activeFilters:[]};return A(t,e),t},getFilterMapWithPrefilters:()=>{var e={};return r.a.instance.params.filter&&r.a.instance.params.filter.split(N).map((function(t){var a=t.search(\"=\"),r=t.slice(0,a),n=t.slice(a+1),i=[];i[0]=r,i[1]=n,2===i.length&&\"\"!==i[1]&&(e[i[0]]=i[1].split(F))})),e},getDisplayNameForSpecialKeyWord:O,getUserValue:M,sortFilterMapKeys:v,processFilterValues:E,removeDependentDateFilters:e=>{let t=o.a.cloneDeep(e),a=Object.keys(t),r={};if(a&&a.length>0){for(let e=0;e<a.length;e++)if(a[e].includes(p)&&a[e].substr(a[e].length-4,4)===m[0]){let t=a[e].indexOf(p),n=a[e].substr(0,t);if(r[n]){let e=r[n];e.push(1),r[n]=e}else r[n]=[1]}else if(a[e].includes(p)&&a[e].substr(a[e].length-10,10)===m[1]){let t=a[e].indexOf(p),n=a[e].substr(0,t);if(r[n]){let e=r[n];e.push(2),r[n]=e}else r[n]=[2]}else if(a[e].includes(p)&&a[e].substr(a[e].length-4,4)===m[2]){let t=a[e].indexOf(p),n=a[e].substr(0,t);if(r[n]){let e=r[n];e.push(3),r[n]=e}else r[n]=[3]}else if(a[e].includes(p)&&a[e].substr(a[e].length-14,14)===m[3]){let t=a[e].indexOf(p),n=a[e].substr(0,t);if(r[n]){let e=r[n];e.push(4),r[n]=e}else r[n]=[4]}for(let[e,a]of Object.entries(r)){let r=0;const n=e+p+m[0],i=e+p+m[1],l=e+p+m[2],s=e+p+m[3];let u=!1;if(a&&a.length>0){a.sort();for(let e=0;e<a.length;e++){if(a[e]!==e+1){u=!0;break}r++}}if(u)switch(r){case 0:t[n]&&delete t[n],t[i]&&delete t[i],t[l]&&delete t[l],t[s]&&delete t[s];break;case 1:t[i]&&delete t[i],t[l]&&delete t[l],t[s]&&delete t[s];break;case 2:t[l]&&delete t[l],t[s]&&delete t[s];break;case 3:t[s]&&delete t[s]}}}return t},getPendingFiltersMap:(e,t)=>{let a={},r={};const n=Object.keys(e).sort().reduce(((t,a)=>(t[a]=e[a],t)),{}),i=Object.keys(t).sort().reduce(((e,a)=>(e[a]=t[a],e)),{});for(const[l,s]of Object.entries(n))if(i[l]){if(i[l]){let e=C(i[l]),t=o.a.difference(s,e),n=o.a.difference(e,s);t&&t.length>0&&(a[l]=t),n&&n.length>0&&(r[l]=n)}}else a[l]=n[l];for(const[l,s]of Object.entries(i))n[l]||(r[l]=i[l]);return{positivePendingFilterMap:a,negativePendingFilterMap:r}},clearAllSelectedFiltersAndRanges:(e,t,a)=>{if(e&&e.length>0&&t&&t.length>0){let r=new Set;for(let e=0;e<t.length;e++){let a=t[e].name,n=a&&a.length>0?a.indexOf(p):-1;a=a&&n>-1?a.substring(0,n):a,a&&a.length>0&&r.add(a)}if(a&&a.length>0)for(let e=0;e<a.length;e++){let t=a[e].name,n=t.indexOf(p);t=t&&n>-1?t.substring(0,n):t,t&&t.length>0&&r.add(t)}for(let t=0;t<e.length;t++){let a=e[t].internalName;if(a&&r.has(a)){let a=e[t];switch(a=T(a),a.type){case\"DateFilter\":a=R(a);break;case\"NumericFilter\":a=S(a)}e[t]=a}}}return e},clearNumericRangeInfoFromCategory:S,clearDateRangeInfoFromCategory:R,removeDependentClassificationFilters:e=>{let t=\"\",a=e.internalName.split(\"/\");if(a&&a.length>0){let e=parseInt(a[0]);if(0===e)return[];if(e>0){let r=e;e-=1,t=e.toString();for(let e=1;e<r+1;e++)t+=\"/\"+a[e];return[t]}}return[]}};t.a=ae},2996:function(e,t,a){\"use strict\";var r=a(12),n=a(20),i=a(46),l=a(15),s=a(54),u=a.n(s),o=a(6),c=a(1),d=a.n(c),f=\"\",g=\"\",h=\"\";let p=\"WorkspaceObject.object_type\",m=\"_DateFilter_\",N=\"DateRangeFilter\",F=\"NumericRangeFilter\",T=\"_NumericFilter_\",S=\"_ObjectFilter_\",R=\"_NumericRange_\",C=\"NumericFilter\",y=\"NumericRange\",v=\"NumericRangeBlankStart\",E=\"NumericRangeBlankEnd\";var I=\"_TO_\";let V=\"2100-12-31\",b=\"0001-01-01T00:00:00\",_=\"2100-12-31T23:59:59\";var D=!0,L=!1,A=!1,x={};let M=function(e){return!e||e.getFullYear()<=1},O=function(e,t,a,r,n){var i=!1,l=e.numericrange.filter.startNumericValue,s=e.numericrange.filter.endNumericValue,u=parseFloat(r),o=parseFloat(n),c=r===l||u===l||isNaN(u)&&\"\"===l;e.numericrange.filter.startEndRange===v&&(c=isNaN(u));var d=n===s||o===s||isNaN(o)&&\"\"===s;return e.numericrange.filter.startEndRange===E&&(d=isNaN(o)),c&&d&&(e.showSearch=!1,i=!0),i};function w(e){return n.default.isNullDate(e)||e.setHours(0,0,0),e}let W=function(){return L},P=function(e,t,a){var r=a.categoryName.indexOf(\".\"),n=(-1!==r?a.categoryName.slice(r+1):a.categoryName)+\".\"+a.name,i={};if(a.color&&x[n]){i.propertyGroupID=a.color;var l=U(a.color);i.colorValue=l}else i.propertyGroupID=B(a.colorIndex),i.colorIndex=a.colorIndex,i.colorValue=U(\"aw-charts-chartColor\"+(a.colorIndex%9+1));return\"DateFilter\"===e?a.colorIndex>=t&&(\"$NONE\"!==a.internalName?(i.startValue=a.startDateValue,i.endValue=a.endDateValue):i.startValue=\"$NONE\"):(i.startValue=a.internalName,i.endValue=\"\"),i},U=function(e){var t=\".aw-ui-filterNameColorBlock\",a=u()(t),r=a&&a.length>0;if(r||(t=\".aw-layout-globalToolbarPanel\",r=(a=u()(t))&&a.length>0),r){var n=a[0],i=n.className;n.className=\"aw-ui-filterNameColorBlock \"+e;var l=window.getComputedStyle(n,null).getPropertyValue(\"background-color\");return n.className=i,l}return\"\"},B=function(e){return e>-1?\"aw-charts-chartColor\"+(e%9+1):\"\"},k=function(e,t){var a;if(\"*\"===e)a=t?_:b;else try{var r=function(e){var t=e.getTime(),a=e.getTimezoneOffset(),r=new Date(t+60*a*1e3);return new Date(r.getTime())}(new Date(e));a=n.default.formatUTC(r)}catch(i){return o.a.error(\"The specified date is invalid and will be ignored for the search:\",e),null}return a},G=function(e){var t={},a=e.split(\" TO \"),r=parseFloat(a[0]),n=parseFloat(a[1]);if(isNaN(r)&&isNaN(n))return o.a.error(\"The specified range is invalid and will be ignored for the search:\",e),null;if(\"*\"===a[0])t={searchFilterType:\"NumericFilter\",startNumericValue:0,endNumericValue:n,startEndRange:v};else if(\"*\"===a[1])t={searchFilterType:\"NumericFilter\",startNumericValue:r,endNumericValue:0,startEndRange:E};else{if(isNaN(r)||isNaN(n))return o.a.error(\"The specified range is invalid and will be ignored for the search:\",e),null;t={searchFilterType:\"NumericFilter\",startNumericValue:r,endNumericValue:n,startEndRange:y}}return t},z=()=>{let e=r.default.getCtx(\"preferences.AWC_CustomPropValueColor\");if(e&&e[0])for(var t=0;t<e.length;t++){var a=e[t],n=a.indexOf(\":\"),i=a.slice(n+1),l=a.slice(0,n);x[l]=i}},K=function(e){return!!(e.filterValues&&e.filterValues.length>0)},j=e=>!(!e.filterValues||!(e.filterValues.parentnodes&&e.filterValues.parentnodes.length>0||e.filterValues.childnodes&&e.filterValues.childnodes.length>0));l.default.getLocalizedTextFromKey(\"UIMessages.invalidDate\",!0).then((e=>f=e)),l.default.getLocalizedTextFromKey(\"UIMessages.invalidRange\",!0).then((e=>g=e)),l.default.getLocalizedTextFromKey(\"UIMessages.invalidPrefilter\",!0).then((e=>h=e)),t.a={HIERARCHICAL_FACET_SEPARATOR:\"/\",PRESET_CATEGORY:p,DATE_FILTER:\"DateFilter\",INTERNAL_DATE_FILTER:m,DATE_RANGE_FILTER:N,DATE_DRILLDOWN_FILTER:\"DrilldownDateFilter\",NUMERIC_RANGE_FILTER:F,INTERNAL_NUMERIC_FILTER:T,INTERNAL_OBJECT_FILTER:S,INTERNAL_NUMERIC_RANGE:R,NUMERIC_FILTER:C,NUMERIC_RANGE:y,NumericRangeBlankStart:v,NumericRangeBlankEnd:E,NO_STARTDATE:\"*\",NO_ENDDATE:V,NO_STARTRANGE:\"\",NO_ENDRANGE:\"\",BEGINNING_OF_TIME:b,ENDING_OF_TIME:_,getDate:function(e){var t,a=e.substring(0,10);if(d.a.startsWith(a,\"0001-01-0\")||d.a.startsWith(a,\"2100-12-3\"))t=n.default.getNullDate();else{var r=e.substring(11,e.length-6);a=-1!==r.indexOf(\"59\")?e.replace(r,\"00:00:00\"):e,t=new Date(a)}return t},isNullDate:M,validateDates:function(e,t,a,r,l){e.showSearch=!0;var s=e.daterange.startDate,u=e.daterange.endDate;if(!e.daterange.dateRangeSelected||s.valueUpdated||u.valueUpdated){var o=w(t),c=w(r),d=n.default.isNullDate(o),g=n.default.isNullDate(c);if(d&&g)e.showSearch=!1;else{var h,p=n.default.compare(t,r);if(!d&&!g&&null!==t&&1===p)return i.a.showError(f),void(e.showSearch=!1);var m=w(l);if(d)h=null===e.daterange.startDate&&0===n.default.compare(c,m);else if(g)h=null===e.daterange.endDate&&0===n.default.compare(t,e.daterange.startDate.dateApi.dateObject);else{var N=0===n.default.compare(t,a),F=0===n.default.compare(r,m);h=N&&F}e.showSearch=!h}}else e.showSearch=!1},getDateRangeString:function(e,t){var a=M(e),r=M(t),i=a?\"*\":n.default.formatUTC(e);r&&(t=new Date(V));var l=n.default.formatUTC(function(e){if(!n.default.isNullDate(e))return e.setHours(23,59,59),e;return e}(t));return m+i+I+l},getDateRangeFilter:function(e){var t={},a=e.split(I);return t.searchFilterType=\"DateFilter\",a[0]=\"*\"===a[0]?n.default.NULLDATE:n.default.formatUTC(a[0]),t.startDateValue=a[0],t.endDateValue=a[1],t},getDateRangeDisplayString:function(e,t){var a,r={},i=n.default.isNullDate(e),l=n.default.isNullDate(t);return a=i?\"To \"+n.default.formatDate(new Date(t)).substring(0,11):l?\"From \"+n.default.formatDate(new Date(e)).substring(0,11):n.default.formatDate(new Date(e)).substring(0,11)+\" - \"+n.default.formatDate(new Date(t)).substring(0,11),r.displayName=a,r.categoryType=N,r},checkIfValidRange:function(e,t,a){if(e.showSearch=!0,null!==t&&null!==a&&t>a){var r=t+\"-\"+a,n=g.replace(\"{0}\",r);return i.a.showError(n),e.showSearch=!1,!1}return!0},validateNumericRangeSelected:O,validateNumericRange:function(e,t,a){e.showSearch=!0;var r=e.numericrange.startValue.dbValue,n=e.numericrange.endValue.dbValue;if(!e.numericrange.numericRangeSelected||!O(e,0,0,r,n)){var i=void 0===r||null===r||\"\"===r,l=void 0===n||null===n||\"\"===n;if(i&&l)e.showSearch=!1;else{var s=!1;s=i?null===a||isNaN(a):l?null===t||isNaN(t):!isFinite(t)||isNaN(t)||!isFinite(a)||isNaN(a),e.showSearch=!s}}},getNumericRangeString:function(e,t){var a=e&&e.toString();(void 0===a||null===a||0===a.length||isNaN(a))&&(a=\"\");var r=t&&t.toString();return(void 0===r||null===r||0===r.length||isNaN(r))&&(r=\"\"),R+a+I+r},getNumericRangeFilter:function(e){var t={},a=e.split(I);return t.searchFilterType=C,t.startNumericValue=parseFloat(a[0]),t.endNumericValue=parseFloat(a[1]),isNaN(t.startNumericValue)?t.startEndRange=v:isNaN(t.endNumericValue)?t.startEndRange=E:t.startEndRange=y,t},getNumericRangeDisplayString:function(e,t,a){var r,n={},i=a===E||0!==t&&!t;return r=a===v||0!==e&&!e?\"To \"+t.toString():i?\"From \"+e.toString():e.toString()+\" - \"+t.toString(),n.displayName=r,n.categoryType=F,n},getRealFilterWithNoFilterType:function(e){var t=e;return e.hasOwnProperty(\"property\")||(t=e.replace(T,\"\").replace(S,\"\")),t},getFilterTypeFromFilterValue:function(e){return d.a.startsWith(e,S)?\"ObjectFilter\":d.a.startsWith(e,T)?\"NumericFilter\":\"DateFilter\"},isPresetFilters:function(){return D},setPresetFilters:function(e){D=e},getHasTypeFilter:W,setHasTypeFilter:function(e){L=e},setIncontext:function(e){A=e},getIncontext:function(){return A},saveIncontextFilterMap:function(e){let t={};if(W()){let a=e.searchFilterMap[p];t[p]=a}return t},getCategoryInternalName:function(e){return e.internalName},getCurrentCategory:function(e){return e.groupedObjectsList[0].internalPropertyName},getPropGroupValues:function(e){z();for(var t=[],a=0;a<e.filterValues.length;a++){var r=e.filterValues[a];r&&(a<9||r.color)&&t.push(P(e.type,e.drilldown,r))}return t},getPropGroupValue:P,getFilterColorRGBValue:U,getFilterColorValue:B,getPropertyFromFilter:function(e){var t=e,a=\"_0Z0_year\",r=\"_0Z0_year_month\",n=\"_0Z0_week\",i=\"_0Z0_year_month_day\";return!0===d.a.endsWith(e,i)&&(t=e.replace(i,\"\")),!0===d.a.endsWith(e,n)&&(t=e.replace(n,\"\")),!0===d.a.endsWith(e,r)&&(t=e.replace(r,\"\")),!0===d.a.endsWith(e,a)&&(t=e.replace(a,\"\")),t},getFormattedFilterDate:k,getFormattedFilterNumber:G,getRangeSearchFilter:function(e,t){var a,r=t.split(\" TO \");if(\"NumericFilter\"===e)a=G(t);else if(\"DateFilter\"===e){var n=k(r[0].trim(),!1),i=k(r[1].trim(),!0);n&&i&&(a={searchFilterType:e,startDateValue:n,endDateValue:i})}else a={searchFilterType:e,stringValue:t};return a},getSingleSearchFilter:function(e,t){var a;if(\"NumericFilter\"===e)try{var r=parseFloat(t);isNaN(r)?o.a.error(\"The specified number is invalid and will be ignored for the search:\",t):a={searchFilterType:e,startNumericValue:r,endNumericValue:r,stringValue:t}}catch(n){o.a.error(\"The specified number is invalid and will be ignored for the search:\",t)}else a={searchFilterType:\"StringFilter\",stringValue:t};return a},getFilterType:function(e){var t;switch(e){case 2:t=\"DateFilter\";break;case 3:case 4:case 5:case 7:t=\"NumericFilter\";break;default:t=\"StringFilter\"}return t},displayPrefilterError:function(e){var t=h.replace(\"{0}\",e);i.a.showError(t)},getPreferenceValue:z,getCustomPropValueColorMap:function(e){return x[e]},setCustomPropValueColorMap:function(e,t){x[e]=t},applyCustomColor:function(e,t,a){var r=e.indexOf(\".\"),n=(-1!==r?e.slice(r+1):e)+\".\"+t.stringValue;x[n]&&(t.colorValue?a.color=t.colorValue:a.color=x[n])},checkIfFilterValuesExist:K,isLimitedCategoriesFeatureEnabled:function(){var e=r.default.getCtx(\"preferences.AWC_Limited_Filter_Categories_Enabled\");return!(!e||\"true\"!==e[0].toLowerCase())},ifFilterSelectedForCategory:function(e){if(K(e))for(var t=0;t<e.filterValues.length;t++)if(e.filterValues[t].selected)return!0;return!1},isClsCategory:j,ifFilterSelectedForCls:e=>{if(j(e))for(var t=0;t<e.filterValues.parentnodes.length;t++)if(e.filterValues.parentnodes[t].selected)return!0;return!1},getFilterFocus:(e,t,a,r)=>{switch(e?e.lastAction:\"\"){case\"selectFilter\":return!(!e||e.lastSelectedFilter.categoryName!==t.categoryName||e.lastSelectedFilter.internalName!==t.internalName);case\"dateRangeSearch\":return!(0!==r||!e||e.lastDateRangeSearchCategory!==a);case\"numericRangeSearch\":return!(1!==r||!e||e.lastNumericRangeSearchCategory!==a);default:return!1}}}}}]);","name":"static/js/39.296af3d8.chunk.js","input":"(this[\"webpackJsonpcreatingjsxcomponent\"] = this[\"webpackJsonpcreatingjsxcomponent\"] || []).push([[39],{\n\n/***/ 2968:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export _dateFilterMarker */\n/* unused harmony export _dateFilterLevels */\n/* unused harmony export _filterSeparator */\n/* unused harmony export _filterValueSeparator */\n/* unused harmony export clearNumericRangeInfoFromCategory */\n/* unused harmony export clearDateRangeInfoFromCategory */\n/* unused harmony export clearAllSelectedFiltersAndRanges */\n/* unused harmony export getPendingFiltersMap */\n/* unused harmony export removeDependentDateFilters */\n/* unused harmony export removeDependentClassificationFilters */\n/* unused harmony export chooseFilterSeparator */\n/* unused harmony export sortFilterMapKeys */\n/* unused harmony export processFilterValues */\n/* unused harmony export buildFilterString */\n/* unused harmony export isHierarchicalChildFilter */\n/* unused harmony export parseHierarchicalChildFilters */\n/* unused harmony export getFilters */\n/* unused harmony export getFilterMapWithPrefilters */\n/* unused harmony export checkIfObjectFilterType */\n/* unused harmony export getSortedFilterMap */\n/* unused harmony export buildSearchFiltersInt */\n/* unused harmony export buildSearchFilters */\n/* unused harmony export buildSearchFiltersFromSearchState */\n/* unused harmony export getFilterStringFromActiveFilterMap */\n/* unused harmony export convertFilterMapToSavedSearchFilterMap */\n/* unused harmony export processConvertFilterMapToSavedSearchFilterMap */\n/* unused harmony export getFilterDisplayValue */\n/* unused harmony export getUserValue */\n/* unused harmony export getDisplayNameForSpecialKeyWord */\n/* unused harmony export getSpecialDisplayName */\n/* unused harmony export getLocalTextBundle */\n/* unused harmony export getBreadCrumbDisplayValue */\n/* unused harmony export processDateStringOffset */\n/* unused harmony export groupByCategory */\n/* unused harmony export setFilters */\n/* unused harmony export addOrRemoveObjectFilter */\n/* unused harmony export addOrRemoveFilter */\n/* unused harmony export getFilterExtension */\n/* unused harmony export doSearch */\n/* unused harmony export doSearchKeepFilter */\n/* unused harmony export loadBreadcrumbClearTitle */\n/* unused harmony export doShapeSearch */\n/* unused harmony export loadBreadcrumbTitle */\n/* unused harmony export isShapeSearchContext */\n/* unused harmony export loadInContentBreadcrumbTitle */\n/* unused harmony export processLoadInContentBreadcrumbTitleShape */\n/* unused harmony export processLoadInContentBreadcrumbTitle */\n/* unused harmony export setFiltersFromCrumbs */\n/* unused harmony export displayNoBreadCrumbProvider */\n/* unused harmony export getBreadcrumbProvider */\n/* unused harmony export setBreadcrumbValue */\n/* unused harmony export setBreadcrumbDisplayName */\n/* unused harmony export setBreadcrumbProviderTitle */\n/* unused harmony export buildBreadcrumbProvider */\n/* unused harmony export processBreadCrumbsSearchFilters */\n/* unused harmony export getCategoryDisplayName */\n/* unused harmony export loadConfiguration */\n/* harmony import */ var js_awStateService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43);\n/* harmony import */ var js_awPromiseService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11);\n/* harmony import */ var js_localeService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(15);\n/* harmony import */ var js_appCtxService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(12);\n/* harmony import */ var js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2996);\n/* harmony import */ var soa_kernel_clientDataModel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(28);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var js_analyticsService__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(82);\n/* harmony import */ var soa_kernel_clientMetaModel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(33);\n/* harmony import */ var js_eventBus__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(7);\n/* eslint-disable max-lines */ // Copyright (c) 2020 Siemens\n/**\n * Note: This module does not return an API object. The API is only available when the service defined this module is\n * injected by AngularJS.\n *\n * @module js/aw.searchFilter.service\n * @requires js/filterPanelUtils\n */var localTextBundle={};var _local='local';var OWNING_SITE='OwningSite.owning_site';let _dateFilterMarker='_0Z0_';let _dateFilterLevels=['year','year_month','week','year_month_day'];let _filterSeparator='~';const _filterSeparatorOption1='~';const _filterSeparatorOption2='##';let _filterValueSeparator=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.preferences&&js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.preferences.AW_FacetValue_Separator&&js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.preferences.AW_FacetValue_Separator[0]?js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.preferences.AW_FacetValue_Separator[0]:'^';const removeSelectedFiltersFromCategory=category=>{if(category&&category.filterValues&&category.filterValues.length>0){for(let filterIndex=0;filterIndex<category.filterValues.length;filterIndex++){category.filterValues[filterIndex].selected.dbValue=false;category.filterValues[filterIndex].selected.value=false;}}return category;};let clearNumericRangeInfoFromCategory=category=>{if(category){delete category.numericRangeString;delete category.numericrange;}return category;};let clearDateRangeInfoFromCategory=category=>{if(category){delete category.dateRangeString;category.daterange.endDate.value=-62135579040000;category.daterange.endDate.dbValue=-62135579040000;category.daterange.startDate.value=-62135579040000;category.daterange.startDate.dbValue=-62135579040000;}return category;};let clearAllSelectedFiltersAndRanges=(categories,activeFilters,positivePendingFilters)=>{if(categories&&categories.length>0&&activeFilters&&activeFilters.length>0){let categoriesToRemoveSelectionsAndRangesFrom=new Set();for(let activeFilterIndex=0;activeFilterIndex<activeFilters.length;activeFilterIndex++){let categoryName=activeFilters[activeFilterIndex].name;let dateMarkerIndex=categoryName&&categoryName.length>0?categoryName.indexOf(_dateFilterMarker):-1;categoryName=categoryName&&dateMarkerIndex>-1?categoryName.substring(0,dateMarkerIndex):categoryName;if(categoryName&&categoryName.length>0){categoriesToRemoveSelectionsAndRangesFrom.add(categoryName);}}if(positivePendingFilters&&positivePendingFilters.length>0){for(let positivePendingFilterIndex=0;positivePendingFilterIndex<positivePendingFilters.length;positivePendingFilterIndex++){let categoryName=positivePendingFilters[positivePendingFilterIndex].name;let dateMarkerIndex=categoryName.indexOf(_dateFilterMarker);categoryName=categoryName&&dateMarkerIndex>-1?categoryName.substring(0,dateMarkerIndex):categoryName;if(categoryName&&categoryName.length>0){categoriesToRemoveSelectionsAndRangesFrom.add(categoryName);}}}for(let categoryIndex=0;categoryIndex<categories.length;categoryIndex++){let categoryName=categories[categoryIndex].internalName;if(categoryName&&categoriesToRemoveSelectionsAndRangesFrom.has(categoryName)){let eachCategory=categories[categoryIndex];eachCategory=removeSelectedFiltersFromCategory(eachCategory);switch(eachCategory.type){case'DateFilter':eachCategory=clearDateRangeInfoFromCategory(eachCategory);break;case'NumericFilter':eachCategory=clearNumericRangeInfoFromCategory(eachCategory);break;default:break;}categories[categoryIndex]=eachCategory;}}}return categories;};const getOnlyFilterValuesFromActiveFilterMap=activeFilterMapValue=>{let values=[];if(activeFilterMapValue&&activeFilterMapValue.length>0){for(let index=0;index<activeFilterMapValue.length;index++){switch(activeFilterMapValue[index].searchFilterType){case'DateFilter':{if(activeFilterMapValue[index].startDateValue.includes(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].BEGINNING_OF_TIME)){values.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_DATE_FILTER+'*'+'_TO_'+activeFilterMapValue[index].endDateValue);}else if(activeFilterMapValue[index].startDateValue.includes(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].ENDING_OF_TIME)){values.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_DATE_FILTER+activeFilterMapValue[index].startDateValue+'_TO_'+'*');}else{values.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_DATE_FILTER+activeFilterMapValue[index].startDateValue+'_TO_'+activeFilterMapValue[index].endDateValue);}break;}case'NumericFilter':{if(activeFilterMapValue[index].stringValue&&activeFilterMapValue[index].stringValue.length>0&&activeFilterMapValue[index].startEndRange!=='NumericRange'&&activeFilterMapValue[index].startEndRange!=='NumericRangeBlankStart'&&activeFilterMapValue[index].startEndRange!=='NumericRangeBlankEnd'){values.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_FILTER+activeFilterMapValue[index].stringValue);}else{if(activeFilterMapValue[index].startNumericValue>0&&activeFilterMapValue[index].endNumericValue>0){values.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE+activeFilterMapValue[index].startNumericValue+'_TO_'+activeFilterMapValue[index].endNumericValue);}else if(activeFilterMapValue[index].startNumericValue>0){values.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE+activeFilterMapValue[index].startNumericValue+'_TO_');}else{values.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE+'_TO_'+activeFilterMapValue[index].endNumericValue);}}break;}case'RadioFilter':case'StringFilter':values.push(activeFilterMapValue[index].stringValue);break;default:break;}}}return values.sort();};let getPendingFiltersMap=(selectedFiltersMap,activeFilterMap)=>{let positivePendingFilterMap={};let negativePendingFilterMap={};const orderedSelectedFiltersMap=Object.keys(selectedFiltersMap).sort().reduce((obj,key)=>{obj[key]=selectedFiltersMap[key];return obj;},{});const orderedActiveFiltersMap=Object.keys(activeFilterMap).sort().reduce((obj,key)=>{obj[key]=activeFilterMap[key];return obj;},{});for(const[orderedSelectedFiltersMapKey,orderedSelectedFiltersMapValue]of Object.entries(orderedSelectedFiltersMap)){if(!orderedActiveFiltersMap[orderedSelectedFiltersMapKey]){positivePendingFilterMap[orderedSelectedFiltersMapKey]=orderedSelectedFiltersMap[orderedSelectedFiltersMapKey];}else if(orderedActiveFiltersMap[orderedSelectedFiltersMapKey]){let activeFiltersWithJustFilterValues=getOnlyFilterValuesFromActiveFilterMap(orderedActiveFiltersMap[orderedSelectedFiltersMapKey]);let positivePendingFiltersWithJustValues=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.difference(orderedSelectedFiltersMapValue,activeFiltersWithJustFilterValues);let negativePendingFiltersWithJustValues=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.difference(activeFiltersWithJustFilterValues,orderedSelectedFiltersMapValue);if(positivePendingFiltersWithJustValues&&positivePendingFiltersWithJustValues.length>0){// these are positive filters, meaning they are filters which got selected.\npositivePendingFilterMap[orderedSelectedFiltersMapKey]=positivePendingFiltersWithJustValues;}if(negativePendingFiltersWithJustValues&&negativePendingFiltersWithJustValues.length>0){// these are negative filters, meaning they are filters which got deselected.\nnegativePendingFilterMap[orderedSelectedFiltersMapKey]=negativePendingFiltersWithJustValues;}}}for(const[orderedActiveFiltersMapKey,orderedActiveFiltersMapValue]of Object.entries(orderedActiveFiltersMap)){if(!orderedSelectedFiltersMap[orderedActiveFiltersMapKey]){negativePendingFilterMap[orderedActiveFiltersMapKey]=orderedActiveFiltersMap[orderedActiveFiltersMapKey];}}return{positivePendingFilterMap:positivePendingFilterMap,negativePendingFilterMap:negativePendingFilterMap};};let removeDependentDateFilters=searchFilterMap=>{let searchFilterMapWithNonRedundantDateCategories=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.cloneDeep(searchFilterMap);let keys=Object.keys(searchFilterMapWithNonRedundantDateCategories);let mapWithKeyAsCategoryNameAndValueAsLevelsOfDate={};if(keys&&keys.length>0){for(let index=0;index<keys.length;index++){if(keys[index].includes(_dateFilterMarker)&&keys[index].substr(keys[index].length-4,4)===_dateFilterLevels[0]){let indexOfYear=keys[index].indexOf(_dateFilterMarker);let catName=keys[index].substr(0,indexOfYear);if(mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]){let existingLevels=mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName];existingLevels.push(1);mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=existingLevels;}else{mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=[1];}}else if(keys[index].includes(_dateFilterMarker)&&keys[index].substr(keys[index].length-10,10)===_dateFilterLevels[1]){let indexOfYear=keys[index].indexOf(_dateFilterMarker);let catName=keys[index].substr(0,indexOfYear);if(mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]){let existingLevels=mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName];existingLevels.push(2);mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=existingLevels;}else{mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=[2];}}else if(keys[index].includes(_dateFilterMarker)&&keys[index].substr(keys[index].length-4,4)===_dateFilterLevels[2]){let indexOfYear=keys[index].indexOf(_dateFilterMarker);let catName=keys[index].substr(0,indexOfYear);if(mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]){let existingLevels=mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName];existingLevels.push(3);mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=existingLevels;}else{mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=[3];}}else if(keys[index].includes(_dateFilterMarker)&&keys[index].substr(keys[index].length-14,14)===_dateFilterLevels[3]){let indexOfYear=keys[index].indexOf(_dateFilterMarker);let catName=keys[index].substr(0,indexOfYear);if(mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]){let existingLevels=mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName];existingLevels.push(4);mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=existingLevels;}else{mapWithKeyAsCategoryNameAndValueAsLevelsOfDate[catName]=[4];}}}for(let[key,value]of Object.entries(mapWithKeyAsCategoryNameAndValueAsLevelsOfDate)){let minLevel=0;const dateLevelOne=key+_dateFilterMarker+_dateFilterLevels[0];const dateLevelTwo=key+_dateFilterMarker+_dateFilterLevels[1];const dateLevelThree=key+_dateFilterMarker+_dateFilterLevels[2];const dateLevelFour=key+_dateFilterMarker+_dateFilterLevels[3];let isMissingSomeDateLevel=false;if(value&&value.length>0){value.sort();for(let index2=0;index2<value.length;index2++){if(value[index2]===index2+1){minLevel++;}else{isMissingSomeDateLevel=true;break;}}}if(isMissingSomeDateLevel){switch(minLevel){case 0:{if(searchFilterMapWithNonRedundantDateCategories[dateLevelOne]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelOne];}if(searchFilterMapWithNonRedundantDateCategories[dateLevelTwo]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelTwo];}if(searchFilterMapWithNonRedundantDateCategories[dateLevelThree]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelThree];}if(searchFilterMapWithNonRedundantDateCategories[dateLevelFour]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelFour];}break;}case 1:{if(searchFilterMapWithNonRedundantDateCategories[dateLevelTwo]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelTwo];}if(searchFilterMapWithNonRedundantDateCategories[dateLevelThree]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelThree];}if(searchFilterMapWithNonRedundantDateCategories[dateLevelFour]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelFour];}break;}case 2:{if(searchFilterMapWithNonRedundantDateCategories[dateLevelThree]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelThree];}if(searchFilterMapWithNonRedundantDateCategories[dateLevelFour]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelFour];}break;}case 3:{if(searchFilterMapWithNonRedundantDateCategories[dateLevelFour]){delete searchFilterMapWithNonRedundantDateCategories[dateLevelFour];}break;}default:break;}}}}return searchFilterMapWithNonRedundantDateCategories;};let removeDependentClassificationFilters=filterValue=>{let value=filterValue.internalName;let stringValue='';let values=value.split('/');if(values&&values.length>0){let level=parseInt(values[0]);if(level===0){return[];}else if(level>0){let currentLevel=level;level-=1;stringValue=level.toString();for(let index=1;index<currentLevel+1;index++){stringValue+='/'+values[index];}return[stringValue];}}return[];};let chooseFilterSeparator=function(filters){let conflictFound=false;lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(filters,(value,key)=>{if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.indexOf(value[0],_filterSeparatorOption1)>-1){conflictFound=true;return false;}});if(conflictFound){_filterSeparator=_filterSeparatorOption2;}else{_filterSeparator=_filterSeparatorOption1;}};const sortFilterMapKeys=filters=>{let sortedFilterMap={};let keys=Object.keys(filters);keys.sort();for(let index=0;index<keys.length;index++){let values=filters[keys[index]];values.sort();sortedFilterMap[keys[index]]=values;}return sortedFilterMap;};const processFilterValues=filterVals=>{for(let index=0;index<filterVals.length;index++){let eachValue=filterVals[index];eachValue=getDisplayNameForSpecialKeyWord(eachValue);filterVals[index]=eachValue;}return filterVals;};let buildFilterString=function(filters){chooseFilterSeparator(filters);filters=sortFilterMapKeys(filters);return lodash__WEBPACK_IMPORTED_MODULE_6___default.a.map(filters,function(value,key){value=processFilterValues(value);return key+'='+value.join(_filterValueSeparator);}).join(_filterSeparator);};let isHierarchicalChildFilter=function(filterString){var isChildFilter=false;if(filterString){var nodes=filterString.split(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].HIERARCHICAL_FACET_SEPARATOR);if(nodes&&nodes.length>2&&!isNaN(nodes[0])){var level=parseInt(nodes[0],10);if(level>0){isChildFilter=true;}}}return isChildFilter;};let parseHierarchicalChildFilters=function(filterString,keepIdentifier){var filterValues=[];var nodes=filterString.split(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].HIERARCHICAL_FACET_SEPARATOR);if(!isNaN(nodes[0])){var level=parseInt(nodes[0],10);for(var i=0;i<=level;i++){var filterValue=i.toString();for(var j=1;j<=i+1;j++){filterValue+=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].HIERARCHICAL_FACET_SEPARATOR+nodes[j];}if(keepIdentifier){filterValues.push(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_OBJECT_FILTER+filterValue);}else{filterValues.push(filterValue);}}}return filterValues;};let getFilters=function(groupByCategory,sort,checkHierarchy,keepHierarchyIdentifier,isShapeOrSavedSearch){var filterMap={};if(js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.params.filter){// Build the filter map\njs_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.params.filter.split(_filterSeparator).map(function(filterVal){var separatorIndex=filterVal.search('=');var key=filterVal.slice(0,separatorIndex);var valuePart=filterVal.slice(separatorIndex+1);var filterPair=[];filterPair[0]=key;filterPair[1]=valuePart;if(filterPair.length===2&&filterPair[1]!==''){var realFilter=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getRealFilterWithNoFilterType(filterPair[1]);if(checkHierarchy&&isHierarchicalChildFilter(realFilter)&&checkIfObjectFilterType(filterPair[0])){filterMap[filterPair[0]]=parseHierarchicalChildFilters(realFilter,keepHierarchyIdentifier);}else if(isShapeOrSavedSearch){if(filterPair[0]!=='ShapeSearchProvider'&&filterPair[0]!=='Geolus Criteria'&&filterPair[0]!=='SS1shapeBeginFilter'&&filterPair[0]!=='SS1shapeEndFilter'&&filterPair[0]!=='SS1partShapeFilter'&&filterPair[0]!=='UpdatedResults.updated_results'){filterMap[filterPair[0]]=filterPair[1].split(_filterValueSeparator);}}else{filterMap[filterPair[0]]=filterPair[1].split(_filterValueSeparator);}}});}if(groupByCategory){return groupByCategory(filterMap);}return sort?getSortedFilterMap(filterMap):filterMap;};let getFilterMapWithPrefilters=()=>{var filterMap={};if(js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.params.filter){js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.params.filter.split(_filterSeparator).map(function(filterVal){var separatorIndex=filterVal.search('=');var key=filterVal.slice(0,separatorIndex);var valuePart=filterVal.slice(separatorIndex+1);var filterPair=[];filterPair[0]=key;filterPair[1]=valuePart;if(filterPair.length===2&&filterPair[1]!==''){filterMap[filterPair[0]]=filterPair[1].split(_filterValueSeparator);}});}return filterMap;};let checkIfObjectFilterType=function(filterCategoryName){var isObjectFilterType=false;var responseFilterMap=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('searchResponseInfo.searchFilterMap');if(responseFilterMap&&filterCategoryName&&responseFilterMap[filterCategoryName]){var filters=[];filters=responseFilterMap[filterCategoryName];if(filters&&filters.length>0){if(filters[0].searchFilterType==='ObjectFilter'){isObjectFilterType=true;}}}return isObjectFilterType;};let getSortedFilterMap=function(params){return lodash__WEBPACK_IMPORTED_MODULE_6___default.a.reduce(params,function(acc,nxt,key){var trueKey=key.split(_dateFilterMarker)[0];if(trueKey!==key){lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(nxt,function(nxtValue){var decoratedNxt={};decoratedNxt.property=key;decoratedNxt.filter=nxtValue;if(acc[trueKey]){acc[trueKey].push(decoratedNxt);}else{acc[trueKey]=[];acc[trueKey].push(decoratedNxt);}});}else{if(acc[key]){acc[key]=acc[key].concat(nxt);}else{acc[key]=nxt;}}return acc;},{});};let buildSearchFiltersInt=function(searchContext,filterMap){lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(filterMap,function(value,key){// If it's a valid filter\n// get filter type\nvar filterType='StringFilter';if(key===OWNING_SITE){filterType='RadioFilter';searchContext.activeFilterMap[key]=value.map(function(v1){var filter={};filter.searchFilterType='RadioFilter';filter.stringValue=v1;return filter;});}else{// Map is used directly by data provider\nsearchContext.activeFilterMap[key]=value.map(function(v1){var filter={};if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(v1,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_DATE_FILTER)){filter=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getDateRangeFilter(v1.substring(12,v1.length));}else if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(v1,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE)){filter=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getNumericRangeFilter(v1.substring(14,v1.length));}else if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(v1,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_FILTER)){filter.searchFilterType='NumericFilter';var numericValue=parseFloat(v1.substring(15,v1.length));if(!isNaN(numericValue)){filter.startNumericValue=numericValue;filter.endNumericValue=numericValue;}filter.stringValue=v1.substring(15,v1.length);}else if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(v1,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_OBJECT_FILTER)){// SOA handles object filters differently in aw4.0.\n// So we need to pass \"StringFilter\" until server side is changed to be the same as aw3.4\n// filter.searchFilterType = \"ObjectFilter\";\nfilter.searchFilterType='StringFilter';filter.stringValue=v1.substring(14,v1.length);}else if(v1==='$TODAY'||v1==='$THIS_WEEK'||v1==='$THIS_MONTH'){// For special Solr filters like TODAY, THIS_WEEK or THIS_MONTH, mark the filter as DateFilter but keep string values\nfilter.searchFilterType='DateFilter';filter.stringValue=v1;}else{filter.searchFilterType='StringFilter';filter.stringValue=v1;}filterType=filter.searchFilterType;return filter;});}// Array to maintain the order\nsearchContext.activeFilters.push({name:key,values:value,type:filterType});});};let buildSearchFilters=function(context){// Initialize the search context if necessary\nlet searchContext={};// Filter map and filter array are both required\n// Input to performSearch needs filter map\nsearchContext.activeFilterMap=context&&context.search&&context.search.activeFilterMap?lodash__WEBPACK_IMPORTED_MODULE_6___default.a.cloneDeep(context.search.activeFilterMap):{};// But order matters in some cases and so array is needed\nsearchContext.activeFilters=[];// Build up filter map and array\nbuildSearchFiltersInt(searchContext,getFilters());return searchContext;};let buildSearchFiltersFromSearchState=function(activeSelectedFiltersMap){let activeFiltersMap={activeFilterMap:{},activeFilters:[]};// Build up filter map and array\nbuildSearchFiltersInt(activeFiltersMap,activeSelectedFiltersMap);return activeFiltersMap;};let getFilterStringFromActiveFilterMap=function(searchFilterMap,searchFilterCategories){var searchParams=getFilters(false);var displayString='';lodash__WEBPACK_IMPORTED_MODULE_6___default.a.map(searchParams,function(value,property){var trueProperty=property.split(_dateFilterMarker)[0];// If it's a valid filter\nvar index=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(searchFilterCategories,function(o){return o.internalName===trueProperty;});// Get the filter name first\nvar filterName='';if(index>-1){filterName=searchFilterCategories[index].displayName;}else if(!searchFilterCategories||searchFilterCategories&&searchFilterCategories.length<1){filterName=getCategoryDisplayName(property);}else{return'';}// Get display name for all the filter values\nvar filterValues='';lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(searchParams[property],function(filter){var filterValue=getBreadCrumbDisplayValue(searchFilterMap[property],js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getRealFilterWithNoFilterType(filter),searchFilterMap[property]);filterValues+=filterValues===''?filterValue:', '+filterValue;});if(filterValues!==''){var individualFilterString=filterName+'='+filterValues;displayString+=displayString===''?individualFilterString:', '+individualFilterString;}});return displayString;};let convertFilterMapToSavedSearchFilterMap=function(){let searchContext=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};//var searchContext = appCtxService.getCtx( 'search' );\nvar activeFilterMap=searchContext.activeFilterMap;var activeFilters=searchContext.activeFilters;var searchStringFilterMap={};if(activeFilterMap){lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(activeFilterMap,function(value,key){var filters=[];for(var indx=0;indx<value.length;indx++){var filter={};// Saved search object only store SearchStringFilter types\nfilter.searchFilterType='SearchStringFilter';filter.startNumericValue=0;filter.endNumericValue=0;filter.startDateValue=0;filter.endDateValue=0;// Handle date range filters and numeric range filters\nif(value[indx].searchFilterType==='DateFilter'&&!value[indx].stringValue){var dateParts1=value[indx].startDateValue.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);var dateParts2=value[indx].endDateValue.match(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/);if(dateParts1&&dateParts2){var fromDate=new Date(dateParts1);var toDate=new Date(dateParts2);filter.stringValue=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getDateRangeString(fromDate,new Date(toDate));}else{continue;}}else if(value[indx].searchFilterType==='NumericFilter'){if(!value[indx].stringValue){filter.stringValue=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getNumericRangeString(value[indx].startNumericValue,value[indx].endNumericValue);}else{filter.stringValue=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_FILTER.concat(value[indx].stringValue);}}else{filter=processConvertFilterMapToSavedSearchFilterMap(value,indx,key,filter,activeFilters);}filters.push(filter);}searchStringFilterMap[key]=filters;});}return searchStringFilterMap;};/**\n * processConvertFilterMapToSavedSearchFilterMap\n * @param {Object} value Value\n * @param {Integer} indx  The index\n * @param {Integer} key  Key\n * @param {Object} filter  The filter object\n * @param {ObjectArray} activeFilters The array of active filters\n * @returns {Object} filter\n */let processConvertFilterMapToSavedSearchFilterMap=function(value,indx,key,filter,activeFilters){// Currently NumericFilters are also being treated as String Filters\n// verify this filter is numeric filter by checking against activeFilters data structure\nvar numericFilterIndex=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(activeFilters,function(object){if(object.name===key&&object.values){return lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(object.values[0],js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_FILTER)||lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(object.values[0],js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE);}});if(numericFilterIndex>-1){filter.stringValue=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_FILTER.concat(value[indx].stringValue);}else{filter.stringValue=value[indx].stringValue;}return filter;};let getFilterDisplayValue=function(values,value){var dispValue='';var filterValue='';var dArray=[];if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(value,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_DATE_FILTER)){filterValue=value.replace(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_DATE_FILTER,'');dArray=filterValue.split('_TO_');if(dArray.length>1){var startDate=new Date(dArray[0]);var endDate=new Date(dArray[1]);var dateRange=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getDateRangeDisplayString(startDate,endDate);dispValue=dateRange.displayName;}}else if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(value,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE)){filterValue=value.replace(js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE,'');dArray=filterValue.split('_TO_');if(dArray.length>1){var numericRange=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getNumericRangeDisplayString(dArray[0],dArray[1]);dispValue=numericRange.displayName;}}else{var ind=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(values,function(o){return o.stringValue===value;});if(ind>-1){if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.endsWith(values[ind].stringValue,'$NONE')){dispValue=localTextBundle.noFilterValue;}else{dispValue=values[ind].stringDisplayValue;}}}return dispValue;};let getUserValue=function(){let userName=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('user').props.user_name.dbValue;let userId=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('user').props.userid.dbValue;return userName+' ( '+userId+' )';};const getDisplayNameForSpecialKeyWord=value=>{if(value==='$ME'){return getUserValue();}if(value==='$TODAY'){return getLocalTextBundle().searchFilterVariableToday;}if(value==='$THIS_WEEK'){return getLocalTextBundle().searchFilterVariableThisWeek;}if(value==='$THIS_MONTH'){return getLocalTextBundle().searchFilterVariableThisMonth;}if(value==='$MY_GROUP'){return getLocalTextBundle().searchFilterVariableMyGroup;}return value;};let getSpecialDisplayName=function(value){if(value==='$ME'){return getUserValue();}if(value==='$TODAY'){return getLocalTextBundle().searchFilterVariableToday;}if(value==='$THIS_WEEK'){return getLocalTextBundle().searchFilterVariableThisWeek;}if(value==='$THIS_MONTH'){return getLocalTextBundle().searchFilterVariableThisMonth;}if(value==='$MY_GROUP'){return getLocalTextBundle().searchFilterVariableMyGroup;}return'';};let getLocalTextBundle=function(){return localTextBundle;};let getBreadCrumbDisplayValue=function(values,value,searchFilters){var dispValue=getSpecialDisplayName(value);if(dispValue===''){if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(value,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_DATE_FILTER)){var startDate=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getDate(processDateStringOffset(values[0].startDateValue));var endDate=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getDate(processDateStringOffset(values[0].endDateValue));var dateRange=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getDateRangeDisplayString(startDate,endDate);dispValue=dateRange.displayName;}else if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(value,js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].INTERNAL_NUMERIC_RANGE)){var startRange=values[0].startNumericValue;var endRange=values[0].endNumericValue;var startEndRange=values[0].startEndRange;var numericRange=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getNumericRangeDisplayString(startRange,endRange,startEndRange);dispValue=numericRange.displayName;}else{var ind=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(values,function(o){return o.stringValue===value;});if(ind>-1){// some \"$NONE\" stringValue actually has non-empty stringDisplayValue, so we don't want to display the default \"Unassigned\" in that case.\nif(values[ind].stringDisplayValue){dispValue=values[ind].stringDisplayValue;}else if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.endsWith(value,'$NONE')){dispValue=localTextBundle.noFilterValue;}else if(searchFilters){var theFilter=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.find(searchFilters,function(o){return o.stringValue===value;});if(theFilter&&theFilter.stringDisplayValue){dispValue=theFilter.stringDisplayValue;}else{dispValue=value;}}else{dispValue=value;}}}}return dispValue;};let processDateStringOffset=function(dateString){if(dateString.length>19){var offsetString=dateString.substring(19);if(offsetString.length>4&&offsetString.indexOf(':')===-1){var hour=offsetString.substring(0,offsetString.length-2);var min=offsetString.substring(offsetString.length-2);var newOffset=hour.concat(':',min);dateString=dateString.replace(offsetString,newOffset);}}return dateString;};let groupByCategory=function(params){return lodash__WEBPACK_IMPORTED_MODULE_6___default.a.reduce(params,function(acc,nxt,key){var trueKey=key.split(_dateFilterMarker)[0];if(trueKey!==key){lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(nxt,function(aFilter){aFilter.startEndRange=key.substring(trueKey.length,key.length);});}if(acc[trueKey]){acc[trueKey]=acc[trueKey].concat(nxt);}else{acc[trueKey]=nxt;}return acc;},{});};let setFilters=function(params){js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.go('.',{filter:buildFilterString(params)});};let addOrRemoveObjectFilter=function(newParams,category,filter,addRemoveOnly){};let removePrefilter=function(value){if(value&&Array.isArray(value)){// remove prefix from prefilter\nlodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(value,function(removePrefix,index,arr){if(removePrefix&&!removePrefix.hasOwnProperty('property')&&removePrefix.trim().length!==0){arr[index]=arr[index].replace('AW_PreFilter_','');}});}};let addOrRemoveFilter=function(category,filter,addRemoveOnly,filterType){};let getFilterExtension=function(filter){if(filter.startEndRange==='+1YEAR'){return _dateFilterMarker+_dateFilterLevels[0];}if(filter.startEndRange==='+1MONTH'){return _dateFilterMarker+_dateFilterLevels[1];}if(filter.startEndRange==='+7DAYS'){return _dateFilterMarker+_dateFilterLevels[2];}if(filter.startEndRange==='+1DAY'){return _dateFilterMarker+_dateFilterLevels[3];}return filter.startEndRange;};let doSearch=function(targetState,searchCriteria,filters){js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.go(targetState?targetState:'.',{filter:buildFilterString(filters),searchCriteria:searchCriteria});};let doSearchKeepFilter=function(targetState,searchCriteria,shapeSearchProviderActive,savedSearchUid){// If we are in Shape Search or Saved Search context we do not want to keep the filters related to\n// either when we perform this search.\nif(shapeSearchProviderActive==='true'||savedSearchUid){js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.go(targetState?targetState:'.',{filter:buildFilterString(getFilters(false,undefined,undefined,undefined,true)),searchCriteria:searchCriteria});}else{js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.go(targetState?targetState:'.',{filter:buildFilterString(getFilters(false)),searchCriteria:searchCriteria});}};let loadBreadcrumbClearTitle=function(){return js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText('UIMessages','clearBreadCrumb');};let doShapeSearch=function(targetState,searchCriteria,filter){var ctx=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('searchSearch');if(ctx){delete ctx.savedSearchUid;delete ctx.searchStringPrimary;if(ctx.searchStringSecondary){delete ctx.searchStringSecondary;js_eventBus__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].publish('search.clearSearchBox');}js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateCtx('searchSearch',ctx);}var shapeSearchCtx=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('shapeSearch');if(!shapeSearchCtx){shapeSearchCtx={};js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].registerCtx('shapeSearch',shapeSearchCtx);}var selectedCtx=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('selected');if(selectedCtx&&selectedCtx.props&&selectedCtx.props.awb0ArchetypeId&&selectedCtx.props.awb0ArchetypeName){shapeSearchCtx.seedObjectItemId=selectedCtx.props.awb0ArchetypeId.uiValues[0];shapeSearchCtx.seedObjectItemName=selectedCtx.props.awb0ArchetypeName.uiValues[0];}else if(selectedCtx&&selectedCtx.props){shapeSearchCtx.seedObjectItemId=selectedCtx.props.item_id.uiValues[0];shapeSearchCtx.seedObjectItemName=selectedCtx.props.object_name.uiValues[0];}js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.go(targetState?targetState:'.',{filter:filter,searchCriteria:searchCriteria});return shapeSearchCtx;};let loadBreadcrumbTitle=function(label,searchCriteria,totalResultCount,selectionModel){// If no label is provided return the loading message\nif(!label||totalResultCount===undefined){return js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText('BaseMessages','LOADING_TEXT');}return js_awPromiseService__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].instance.all({label:typeof label==='string'?js_awPromiseService__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].instance.when(label):js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText(label.source,label.key),selectionCountLabel:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('XRTMessages.selectionCountLabel'),noSearchResultsWithSearchBox:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.noSearchResultsWithSearchBox'),noSearchResults:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.noSearchResults'),resultsCountLabelWithSearchBox:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.resultsCountLabelWithSearchBox'),resultsCountLabel:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.resultsCountLabel')}).then(function(localizedText){// If no results return the no results message\nif(totalResultCount===0){if(searchCriteria){return localizedText.noSearchResults.format('',searchCriteria);}return localizedText.noSearchResults.format('',localizedText.label);}var resultsCountLabel;if(searchCriteria){resultsCountLabel=localizedText.resultsCountLabel.format(totalResultCount,'',searchCriteria);}else{resultsCountLabel=localizedText.resultsCountLabel.format(totalResultCount,'',localizedText.label);}// If not in multiselect mode return the result count message\nif(!selectionModel||!selectionModel.multiSelectEnabled){return resultsCountLabel;}// Otherwise return the selection count message\nreturn localizedText.selectionCountLabel.format(selectionModel.getCurrentSelectedCount(),resultsCountLabel);});};let isShapeSearchContext=function(){let isShapeSearch=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.search&&js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.search.reqFilters;isShapeSearch=isShapeSearch&&js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.search.reqFilters.ShapeSearchProvider&&js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.search.reqFilters.ShapeSearchProvider[0]==='true';return isShapeSearch;};let loadInContentBreadcrumbTitle=function(label,totalResultCount,selectionModel){// If no label is provided return the loading message\nvar totalFound=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('search.totalFound');var searchString=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('search.criteria.searchString');var searchInfoCtx=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('searchInfo');var ctxSearchSearch=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].ctx.searchSearch;if(!label||totalFound===undefined){return js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText('BaseMessages','LOADING_TEXT');}return js_awPromiseService__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].instance.all({label:typeof label==='string'?js_awPromiseService__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].instance.when(label):js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText(label.source,label.key),selectionCountLabel:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('XRTMessages.selectionCountLabel'),noSearchResultsWithInContentSearch:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.noSearchResultsWithInContentSearch'),thresholdExceeded:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.thresholdExceeded'),noSearchResultsWithoutInContentSearch:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.noSearchResultsWithoutInContentSearch'),noSearchResults:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.noSearchResults'),resultsCountLabel:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.resultsCountLabel'),shapesCountLabelPart1:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.shapesCountLabelPart1'),shapesCountLabelPart2:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.shapesCountLabelPart2'),oneShapeCountLabelPart1:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.oneShapeCountLabelPart1'),resultsCountLabelWithInContentSearch:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.resultsCountLabelWithInContentSearch'),resultsCountLabelWithoutInContentSearch:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.resultsCountLabelWithoutInContentSearch')}).then(function(localizedText){// If no results return the no results message\nif(totalResultCount===0){if(searchString){if(ctxSearchSearch&&ctxSearchSearch.searchStringSecondary&&searchString===ctxSearchSearch.searchStringPrimary+' AND '+ctxSearchSearch.searchStringSecondary){return localizedText.noSearchResultsWithInContentSearch.format(ctxSearchSearch.searchStringPrimary,ctxSearchSearch.searchStringSecondary);}if(searchInfoCtx&&searchInfoCtx.thresholdExceeded==='true'){searchInfoCtx.noResultsFound=localizedText.thresholdExceeded.format(searchString);return'';}return localizedText.noSearchResultsWithoutInContentSearch.format(searchString);}return localizedText.noSearchResults.format('',localizedText.label);}var resultsCountLabel;if(searchString){resultsCountLabel=processLoadInContentBreadcrumbTitle(ctxSearchSearch,searchString,localizedText,totalResultCount,resultsCountLabel);}else{resultsCountLabel=localizedText.resultsCountLabel.format(totalResultCount,'',localizedText.label);}// If not in multiselect mode return the result count message\nif(!selectionModel||!selectionModel.multiSelectEnabled){return resultsCountLabel;}// Otherwise return the selection count message\nreturn localizedText.selectionCountLabel.format(selectionModel.getCurrentSelectedCount(),resultsCountLabel);});};/**\n * Process Localized text search results.\n * @function processLoadInContentBreadcrumbTitleShape\n * @param {Object} ctxSearchSearch searchString context object\n * @param {Object} searchString searchString context object\n * @param {Object} localizedText The localized text\n * @param {Object} totalResultCount Total Result count\n * @param {Object} resultsCountLabel Results Count Label\n * @return {Object} resultsCountLabel\n */let processLoadInContentBreadcrumbTitleShape=function(ctxSearchSearch,searchString,localizedText,totalResultCount,resultsCountLabel){var shapeSearchCtx=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('shapeSearch');resultsCountLabel={};resultsCountLabel.seedObjectLink=shapeSearchCtx.seedObjectItemId+'/'+shapeSearchCtx.seedObjectItemName;if(ctxSearchSearch.searchStringSecondary){if(totalResultCount>1){resultsCountLabel.part1=localizedText.shapesCountLabelPart1.format(totalResultCount);resultsCountLabel.part2=localizedText.shapesCountLabelPart2.format(ctxSearchSearch.searchStringSecondary);}else{resultsCountLabel.part1=localizedText.oneShapeCountLabelPart1.format(totalResultCount);resultsCountLabel.part2=localizedText.shapesCountLabelPart2.format(ctxSearchSearch.searchStringSecondary);}}else{if(totalResultCount>1){resultsCountLabel.part1=localizedText.shapesCountLabelPart1.format(totalResultCount);}else{resultsCountLabel.part1=localizedText.oneShapeCountLabelPart1.format(totalResultCount);}}return resultsCountLabel;};/**\n * Process Localized text search results.\n * @function processLoadInContentBreadcrumbTitle\n * @param {Object} ctxSearchSearch searchString context object\n * @param {String} searchString searchString\n * @param {Object} localizedText The localized text\n * @param {Object} totalResultCount Total Result count\n * @param {Object} resultsCountLabel Results Count Label\n * @return {Object} resultsCountLabel\n */let processLoadInContentBreadcrumbTitle=function(ctxSearchSearch,searchString,localizedText,totalResultCount,resultsCountLabel){if(isShapeSearchContext()){resultsCountLabel=processLoadInContentBreadcrumbTitleShape(ctxSearchSearch,searchString,localizedText,totalResultCount,resultsCountLabel);}else if(ctxSearchSearch&&ctxSearchSearch.searchStringSecondary&&searchString===ctxSearchSearch.searchStringPrimary+' AND '+ctxSearchSearch.searchStringSecondary){// define a variable so that the line length does not exceed 207 max-len...\nlet labelText=localizedText.resultsCountLabelWithInContentSearch;resultsCountLabel=labelText.format(totalResultCount,ctxSearchSearch.searchStringPrimary,ctxSearchSearch.searchStringSecondary);}else{resultsCountLabel=localizedText.resultsCountLabelWithoutInContentSearch.format(totalResultCount,searchString);}return resultsCountLabel;};let setFiltersFromCrumbs=function(crumbs,indexBreadCrumb){var newCrumbs=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.dropRightWhile(crumbs,function(c){return c.indexBreadCrumb>indexBreadCrumb;});var filterMap={};lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(newCrumbs,function(c){if(filterMap[c.internalName]){filterMap[c.internalName].push(c.internalValue);}else{filterMap[c.internalName]=[c.internalValue];}});var searchContext=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('search');var reqFilters=searchContext.reqFilters;if(reqFilters){lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(reqFilters,function(value,key){if(filterMap[key]){filterMap[key].push(value);}else{filterMap[key]=[value];}});}setFilters(filterMap);};let displayNoBreadCrumbProvider=function(breadcrumbConfig,label,totalResultCount,searchCriteria){var provider={};js_awPromiseService__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].instance.all({noCriteriaSpecifiedMessage:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText(breadcrumbConfig.noCriteriaSpecifiedMessage.source,breadcrumbConfig.noCriteriaSpecifiedMessage.key),noResultsFoundMessage:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText(breadcrumbConfig.noResultsFoundMessage.source,breadcrumbConfig.noResultsFoundMessage.key),resultsFoundMessage:js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedText(breadcrumbConfig.resultsFoundMessage.source,breadcrumbConfig.resultsFoundMessage.key)}).then(function(localizedText){if(!searchCriteria){provider.title=localizedText.noCriteriaSpecifiedMessage.format();}else if(totalResultCount===undefined||totalResultCount===0){provider.title=localizedText.noResultsFoundMessage.format(label);}else{provider.title=localizedText.resultsFoundMessage.format(label);}});return provider;};let getBreadcrumbProvider=function(){return{crumbs:[],clear:function(){// Publish to AW analytics\nvar sanEvent={sanAnalyticsType:'Commands',sanCommandId:'clearSearchFilter',sanCommandTitle:'Clear All Search Filters'};js_analyticsService__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"].logCommands(sanEvent);var searchContext=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('search');var reqFilters=searchContext.reqFilters;if(reqFilters){setFilters(reqFilters);}else{setFilters([]);}},onRemove:function(crumb){// Publish to analytics\nvar sanEvent={sanAnalyticsType:'Commands',sanCommandId:'removeSearchFilterCrumb',sanCommandTitle:'Remove Crumb Filter',sanCmdLocation:'primarySearchPanel'};js_analyticsService__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"].logCommands(sanEvent);},onSelect:function(crumb){// Publish to analytics\nvar sanEvent={sanAnalyticsType:'Commands',sanCommandId:'clickSearchFilterCrumb',sanCommandTitle:'Click Search Filter Crumb',sanCmdLocation:'primarySearchPanel'};js_analyticsService__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"].logCommands(sanEvent);setFiltersFromCrumbs(this.crumbs,crumb.indexBreadCrumb);}};};let setBreadcrumbValue=function(newBreadcrumb){if(newBreadcrumb.internalValue&&newBreadcrumb.internalValue!==''&&newBreadcrumb.internalValue===newBreadcrumb.value){var searchContext=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('searchSearch');if(searchContext&&searchContext.originalInputCategories){var categoryId=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(searchContext.originalInputCategories,function(aCat){return newBreadcrumb.internalName===aCat.internalName;});if(searchContext.originalInputCategories[categoryId]&&searchContext.originalInputCategories[categoryId].filterValues){if(searchContext.originalInputCategories[categoryId].filterValues.parentnodes){var foundFilter=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(searchContext.originalInputCategories[categoryId].filterValues.parentnodes,function(aFilter){return newBreadcrumb.internalValue===aFilter.stringValue;});newBreadcrumb.value=searchContext.originalInputCategories[categoryId].filterValues.parentnodes[foundFilter].stringDisplayValue;}}}}};let setBreadcrumbDisplayName=function(newBreadcrumb,categoriesDisplayed){var foundCategory=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(categoriesDisplayed,function(aCategory){return aCategory===newBreadcrumb.displayName;});if(foundCategory<0){categoriesDisplayed.push(newBreadcrumb.displayName);}else{newBreadcrumb.displayName='';}};let setBreadcrumbProviderTitle=function(provider,label,totalResultCount,selectionModel,secondarySearchEnabled){loadBreadcrumbClearTitle().then(function(result){provider.clearBreadCrumb=result;});// Load and set the title async\nif(secondarySearchEnabled){loadInContentBreadcrumbTitle(label,totalResultCount,selectionModel).then(function(result){provider.title=result;});}else{loadBreadcrumbTitle(label,totalResultCount,selectionModel).then(function(result){provider.title=result;});}};let buildBreadcrumbProvider=function(breadcrumbConfig,label,totalResultCount,selectionModel,searchFilterCategories,searchFilterMap,secondarySearchEnabled,searchCriteria){if(breadcrumbConfig&&breadcrumbConfig.noBreadCrumb==='true'){return displayNoBreadCrumbProvider(breadcrumbConfig,label,totalResultCount,searchCriteria);}var provider=getBreadcrumbProvider();// For each of the current search params\nvar searchParams=getFilters(false,true,true,true);var categoriesDisplayed=[];var indexBreadCrumb=-1;lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(searchParams,function(value){removePrefilter(value);});lodash__WEBPACK_IMPORTED_MODULE_6___default.a.map(searchParams,function(value,property){// If it's a valid filter\nvar index=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(searchFilterCategories,function(o){return o.internalName===property;});var newBreadcrumb={};lodash__WEBPACK_IMPORTED_MODULE_6___default.a.forEach(searchParams[property],function(filter){var origProperty=property;var origFilter=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getRealFilterWithNoFilterType(filter);var filterType=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getFilterTypeFromFilterValue(filter);if(filter.hasOwnProperty('property')){origProperty=filter.property;origFilter=filter.filter;}if(index>-1){// Make a breadcrumb for it\nnewBreadcrumb={displayName:searchFilterCategories[index].displayName+':',displayNameHidden:searchFilterCategories[index].displayName+':',internalName:origProperty,internalValue:origFilter,filterType:filterType};}else if(!searchFilterCategories||searchFilterCategories&&searchFilterCategories.length<1){// Need still display the crumbs\nvar categoryDisplayName=getCategoryDisplayName(property);if(!categoryDisplayName){return provider;}newBreadcrumb={displayName:categoryDisplayName+':',displayNameHidden:categoryDisplayName+':',internalName:property,internalValue:origFilter,filterType:filterType};}else{return provider;}provider=processBreadCrumbsSearchFilters(provider,indexBreadCrumb,categoriesDisplayed,newBreadcrumb,searchFilterMap,origProperty,origFilter);});});setBreadcrumbProviderTitle(provider,label,totalResultCount,selectionModel,secondarySearchEnabled);return provider;};/**\n * Process Breadcrumbs with Search Filters.\n * @function processBreadCrumbsSearchFilters\n * @param {Object} provider The object newBreadCrumb\n * @param {Object} indexBreadCrumb The object newBreadCrumb\n * @param {Object} categoriesDisplayed The object newBreadCrumb\n * @param {Object} newBreadcrumb The object newBreadCrumb\n * @param {Object} searchFilterMap The search filter map\n * @param {Object} origProperty Original Property\n * @param {Object} origFilter Original filter\n * @return {Object} BreadCrumd Provider\n */let processBreadCrumbsSearchFilters=function(provider,indexBreadCrumb,categoriesDisplayed,newBreadcrumb,searchFilterMap,origProperty,origFilter){if(searchFilterMap){newBreadcrumb.value=getBreadCrumbDisplayValue(searchFilterMap[origProperty],origFilter);}if(newBreadcrumb.value&&newBreadcrumb.value!==''){setBreadcrumbValue(newBreadcrumb);setBreadcrumbDisplayName(newBreadcrumb,categoriesDisplayed);++indexBreadCrumb;newBreadcrumb.indexBreadCrumb=indexBreadCrumb;provider.crumbs.push(newBreadcrumb);}if(newBreadcrumb.internalName===OWNING_SITE){newBreadcrumb.filterType='RadioFilter';}/* the OwningSite.owning_site is a property which server side filters on to return local or remote objects.\n    This property does not exists in DB. It's a hardcoded value that server side expects and returns.*/if(newBreadcrumb.internalName===OWNING_SITE&&newBreadcrumb.internalValue===_local){newBreadcrumb.showRemoveButton=false;}else{newBreadcrumb.showRemoveButton=true;}return provider;};// Return display name for a category\nlet getCategoryDisplayName=function(property){var categoryDisplayName='';// first check if it can be found in the prior search.\nvar context=js_appCtxService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCtx('searchSearch');if(context&&context.originalInputCategories&&context.originalInputCategories.length>0){var index=lodash__WEBPACK_IMPORTED_MODULE_6___default.a.findIndex(context.originalInputCategories,function(o){return o.internalName===property;});if(index>-1){categoryDisplayName=context.originalInputCategories[index].displayName;return categoryDisplayName;}}var aTypeProperty=property.split('.');if(aTypeProperty&&aTypeProperty.length===2){var type=soa_kernel_clientMetaModel__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].getType(aTypeProperty[0]);if(!type){// Category.category\nvar catName=aTypeProperty[1];categoryDisplayName=catName[0].toUpperCase()+catName.slice(1).toLowerCase();}else{var propName=js_filterPanelUtils__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].getPropertyFromFilter(aTypeProperty[1]);var pd=type.propertyDescriptorsMap[propName];if(!pd){categoryDisplayName=aTypeProperty[1];}else{categoryDisplayName=pd.displayName;}}}return categoryDisplayName;};let loadConfiguration=function(){js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('UIMessages.noFilterValue',true).then(result=>localTextBundle.noFilterValue=result);js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('SearchMessages.searchFilterVariableMyGroup',true).then(result=>localTextBundle.searchFilterVariableMyGroup=result);js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('SearchMessages.searchFilterVariableThisMonth',true).then(result=>localTextBundle.searchFilterVariableThisMonth=result);js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('SearchMessages.searchFilterVariableThisWeek',true).then(result=>localTextBundle.searchFilterVariableThisWeek=result);js_localeService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLocalizedTextFromKey('dateTimeServiceMessages.currentText',true).then(result=>localTextBundle.searchFilterVariableToday=result);};loadConfiguration();const awSearchFilterService={_dateFilterMarker,_dateFilterLevels,_filterSeparator,_filterValueSeparator,chooseFilterSeparator,buildFilterString,isHierarchicalChildFilter,parseHierarchicalChildFilters,getFilters,checkIfObjectFilterType,getSortedFilterMap,buildSearchFiltersInt,buildSearchFilters,getFilterStringFromActiveFilterMap,convertFilterMapToSavedSearchFilterMap,getFilterDisplayValue,getSpecialDisplayName,getLocalTextBundle,getBreadCrumbDisplayValue,processDateStringOffset,groupByCategory,setFilters,addOrRemoveObjectFilter,addOrRemoveFilter,getFilterExtension,doSearch,doSearchKeepFilter,isShapeSearchContext,loadBreadcrumbClearTitle,doShapeSearch,loadBreadcrumbTitle,loadInContentBreadcrumbTitle,setFiltersFromCrumbs,displayNoBreadCrumbProvider,getBreadcrumbProvider,setBreadcrumbValue,setBreadcrumbDisplayName,setBreadcrumbProviderTitle,buildBreadcrumbProvider,getCategoryDisplayName,loadConfiguration,processLoadInContentBreadcrumbTitleShape,processLoadInContentBreadcrumbTitle,processConvertFilterMapToSavedSearchFilterMap,processBreadCrumbsSearchFilters,buildSearchFiltersFromSearchState,getFilterMapWithPrefilters,getDisplayNameForSpecialKeyWord,getUserValue,sortFilterMapKeys,processFilterValues,removeDependentDateFilters,getPendingFiltersMap,clearAllSelectedFiltersAndRanges,clearNumericRangeInfoFromCategory,clearDateRangeInfoFromCategory,removeDependentClassificationFilters};/* harmony default export */ __webpack_exports__[\"a\"] = (awSearchFilterService);\n\n/***/ }),\n\n/***/ 2996:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export HIERARCHICAL_FACET_SEPARATOR */\n/* unused harmony export PRESET_CATEGORY */\n/* unused harmony export DATE_FILTER */\n/* unused harmony export INTERNAL_DATE_FILTER */\n/* unused harmony export DATE_RANGE_FILTER */\n/* unused harmony export DATE_DRILLDOWN_FILTER */\n/* unused harmony export NUMERIC_RANGE_FILTER */\n/* unused harmony export INTERNAL_NUMERIC_FILTER */\n/* unused harmony export INTERNAL_OBJECT_FILTER */\n/* unused harmony export INTERNAL_NUMERIC_RANGE */\n/* unused harmony export NUMERIC_FILTER */\n/* unused harmony export NUMERIC_RANGE */\n/* unused harmony export NumericRangeBlankStart */\n/* unused harmony export NumericRangeBlankEnd */\n/* unused harmony export NO_STARTDATE */\n/* unused harmony export NO_ENDDATE */\n/* unused harmony export NO_STARTRANGE */\n/* unused harmony export NO_ENDRANGE */\n/* unused harmony export BEGINNING_OF_TIME */\n/* unused harmony export ENDING_OF_TIME */\n/* unused harmony export getDate */\n/* unused harmony export isNullDate */\n/* unused harmony export validateDates */\n/* unused harmony export getDateRangeString */\n/* unused harmony export getDateRangeFilter */\n/* unused harmony export getDateRangeDisplayString */\n/* unused harmony export checkIfValidRange */\n/* unused harmony export validateNumericRangeSelected */\n/* unused harmony export validateNumericRange */\n/* unused harmony export getNumericRangeString */\n/* unused harmony export getNumericRangeFilter */\n/* unused harmony export getNumericRangeDisplayString */\n/* unused harmony export getRealFilterWithNoFilterType */\n/* unused harmony export getFilterTypeFromFilterValue */\n/* unused harmony export isPresetFilters */\n/* unused harmony export setPresetFilters */\n/* unused harmony export getHasTypeFilter */\n/* unused harmony export setHasTypeFilter */\n/* unused harmony export setIncontext */\n/* unused harmony export getIncontext */\n/* unused harmony export saveIncontextFilterMap */\n/* unused harmony export getCategoryInternalName */\n/* unused harmony export getCurrentCategory */\n/* unused harmony export getPropGroupValues */\n/* unused harmony export getPropGroupValue */\n/* unused harmony export getFilterColorRGBValue */\n/* unused harmony export getFilterColorValue */\n/* unused harmony export getPropertyFromFilter */\n/* unused harmony export getFormattedFilterDate */\n/* unused harmony export getFormattedFilterNumber */\n/* unused harmony export getRangeSearchFilter */\n/* unused harmony export getSingleSearchFilter */\n/* unused harmony export getFilterType */\n/* unused harmony export displayPrefilterError */\n/* unused harmony export getPreferenceValue */\n/* unused harmony export getCustomPropValueColorMap */\n/* unused harmony export setCustomPropValueColorMap */\n/* unused harmony export applyCustomColor */\n/* unused harmony export checkIfFilterValuesExist */\n/* unused harmony export isLimitedCategoriesFeatureEnabled */\n/* unused harmony export ifFilterSelectedForCategory */\n/* unused harmony export isClsCategory */\n/* unused harmony export ifFilterSelectedForCls */\n/* unused harmony export getFilterFocus */\n/* unused harmony export loadConfiguration */\n/* harmony import */ var js_appCtxService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12);\n/* harmony import */ var js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(20);\n/* harmony import */ var js_messagingService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46);\n/* harmony import */ var js_localeService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(15);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(54);\n/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_6__);\n// Copyright (c) 2020 Siemens\n/**\n * Note: This module does not return an API object. The API is only available when the service defined this module is\n * injected by AngularJS.\n *\n * @module js/filterPanelUtils\n */var _invalidDateText='';var _invalidRangeText='';var _invalidPrefilter='';var AWC_LIMITED_FILTER_CATEGORIES_ENABLED='AWC_Limited_Filter_Categories_Enabled';let HIERARCHICAL_FACET_SEPARATOR='/';let PRESET_CATEGORY='WorkspaceObject.object_type';let DATE_FILTER='DateFilter';let INTERNAL_DATE_FILTER='_DateFilter_';let DATE_RANGE_FILTER='DateRangeFilter';let DATE_DRILLDOWN_FILTER='DrilldownDateFilter';let NUMERIC_RANGE_FILTER='NumericRangeFilter';let INTERNAL_NUMERIC_FILTER='_NumericFilter_';let INTERNAL_OBJECT_FILTER='_ObjectFilter_';let INTERNAL_NUMERIC_RANGE='_NumericRange_';let NUMERIC_FILTER='NumericFilter';let NUMERIC_RANGE='NumericRange';let NumericRangeBlankStart='NumericRangeBlankStart';let NumericRangeBlankEnd='NumericRangeBlankEnd';var INTERNAL_TO='_TO_';let NO_STARTDATE='*';let NO_ENDDATE='2100-12-31';let NO_STARTRANGE='';let NO_ENDRANGE='';let BEGINNING_OF_TIME='0001-01-01T00:00:00';let ENDING_OF_TIME='2100-12-31T23:59:59';var START_OF_DAY='00:00:00';var _presetFilters=true;var _hasTypeFilter=false;var _incontextFlag=false;var customPropValueColorMap={};/**\n * Returns a date object.\n *\n * @function getDate\n * @memberOf filterPanelUtils\n *\n * @param {String}dateString - date string to be converted to date object\n *\n * @return {JsDate} a date object.\n */let getDate=function(dateString){var dateStr=dateString.substring(0,10);var date;// change open start/end date to null dates\nif(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(dateStr,'0001-01-0')||lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(dateStr,'2100-12-3')){date=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getNullDate();}else{var timeStr=dateString.substring(11,dateString.length-6);if(timeStr.indexOf('59')!==-1){dateStr=dateString.replace(timeStr,START_OF_DAY);}else{dateStr=dateString;}date=new Date(dateStr);}return date;};/**\n * Returns a UTC date object.\n *\n * @function convertToUTC\n * @memberOf filterPanelUtils\n *\n * @param {Object}date - date object\n *\n * @return {JsDate} a UTC date object.\n */function convertToUTC(date){var gmtTime=date.getTime();var offset=date.getTimezoneOffset();var jsDate=new Date(gmtTime+offset*60*1000);return new Date(jsDate.getTime());}/**\n * Check if a date is null. The dateTimeService.isNullDate is not adequate, as the blank date from date widget can\n * sometimes be 0-0-0 0:0:0, or 0-0-0 23:59:XX, or 0-0-1 0:0:0, etc, only the first case is evaluated to true by the\n * dateTimeService.isNullDate.\n *\n * @function isNullDate\n * @memberOf filterPanelUtils\n *\n * @param {Object} dateToTest - a Date object.\n * @returns {Boolean} - true if it's a null date.\n */let isNullDate=function(dateToTest){if(!dateToTest){return true;}return dateToTest.getFullYear()<=1;};/**\n * Validate dates for category date range.\n *\n * @function validateDates\n * @memberOf filterPanelUtils\n *\n * @param {Object}category - category. This object is modified in this function.\n * @param {Object}startDate - startDate\n * @param {Object}origStartDate - origStartDate\n * @param {Object}endDate - endDate\n * @param {Object}origEndDate - origEndDate\n */let validateDates=function(category,startDate,origStartDate,endDate,origEndDate){category.showSearch=true;var cStartDate=category.daterange.startDate;var eEndDate=category.daterange.endDate;if(category.daterange.dateRangeSelected&&!cStartDate.valueUpdated&&!eEndDate.valueUpdated){category.showSearch=false;return;}// The blank date in date range widget sometimes show up as 0-0-0 23:59:58 which is the end of the day,\n// which makes the isNullDate return false. Need to move to start of day then do the isNullDate check.\nvar tmpStartDate=moveDateToStartOfDay(startDate);var tmpEndDate=moveDateToStartOfDay(endDate);var noStartDate=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNullDate(tmpStartDate);var noEndDate=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNullDate(tmpEndDate);// if both dates are not set, disable search button\nif(noStartDate&&noEndDate){category.showSearch=false;return;}var temp1=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(startDate,endDate);// if start date is later than end date, disable search button\nif(!noStartDate&&!noEndDate&&startDate!==null&&temp1===1){js_messagingService__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].showError(_invalidDateText);category.showSearch=false;return;}var disable;// check if dates vary from previous search to avoid enabling search\nvar tmpOrigEndDate=moveDateToStartOfDay(origEndDate);if(noStartDate){// check if there is no startdate and if end date is same, disable search button\ndisable=category.daterange.startDate===null&&js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(tmpEndDate,tmpOrigEndDate)===0;}else if(noEndDate){// check if there is no enddate and  start date is same, disable search button\ndisable=category.daterange.endDate===null&&js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(startDate,category.daterange.startDate.dateApi.dateObject)===0;}else{// if the dates are same as previous search, disable search button\nvar compare1=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(startDate,origStartDate)===0;var compare2=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].compare(endDate,tmpOrigEndDate)===0;disable=compare1&&compare2;}category.showSearch=!disable;};/**\n * get date range filter.\n *\n * @function getDateRangeString\n * @memberOf filterPanelUtils\n *\n * @param {Object}startDate - startDate\n * @param {Object}endDate - endDate\n *\n * @return {String} a string that represents the date range.\n */let getDateRangeString=function(startDate,endDate){var noStartDate=isNullDate(startDate);var noEndDate=isNullDate(endDate);var fromDateString=noStartDate?NO_STARTDATE:js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatUTC(startDate);if(noEndDate){endDate=new Date(NO_ENDDATE);}var toDateString=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatUTC(moveDateToEndOfDay(endDate));return INTERNAL_DATE_FILTER+fromDateString+INTERNAL_TO+toDateString;};/**\n * get filter of date range.\n *\n * @function getDateRangeString\n * @memberOf filterPanelUtils\n *\n * @param {String}filter - filter\n *\n * @return {Object} a filter object of date range for the filter string.\n */let getDateRangeFilter=function(filter){var searchFilter={};var sArr=filter.split(INTERNAL_TO);searchFilter.searchFilterType='DateFilter';sArr[0]=sArr[0]===NO_STARTDATE?js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].NULLDATE:js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatUTC(sArr[0]);searchFilter.startDateValue=sArr[0];searchFilter.endDateValue=sArr[1];return searchFilter;};/**\n * get a date range filter with display name and category type.\n *\n * @function getDateRangeDisplayString\n * @memberOf filterPanelUtils\n *\n * @param {String}startDate - startDate\n * @param {String}endDate - endDate\n *\n * @return {Object} a date range filter with display name and category type.\n */let getDateRangeDisplayString=function(startDate,endDate){var dateRangeFilter={};var noStartDate=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNullDate(startDate);var noEndDate=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNullDate(endDate);var dateRangeString;if(noStartDate){dateRangeString='To '+js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatDate(new Date(endDate)).substring(0,11);}else if(noEndDate){dateRangeString='From '+js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatDate(new Date(startDate)).substring(0,11);}else{dateRangeString=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatDate(new Date(startDate)).substring(0,11)+' - '+js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatDate(new Date(endDate)).substring(0,11);}dateRangeFilter.displayName=dateRangeString;dateRangeFilter.categoryType=DATE_RANGE_FILTER;return dateRangeFilter;};/**\n * Simple check to validate the given category numeric range.\n *\n * @function checkIfValidRange\n * @memberOf filterPanelUtils\n *\n * @param {String}category - category\n * @param {Number}startRange - startRange\n * @param {Number}endRange - endRange\n *\n * @return {Boolean} true if valid range.\n */let checkIfValidRange=function(category,startRange,endRange){category.showSearch=true;if(startRange!==null&&endRange!==null&&startRange>endRange){var errorValue=startRange+'-'+endRange;var msg=_invalidRangeText.replace('{0}',errorValue);js_messagingService__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].showError(msg);category.showSearch=false;return false;}return true;};/**\n * Validate the given category numeric range if the range is selected.\n *\n * @function validateNumericRangeSelected\n * @memberOf filterPanelUtils\n *\n * @param {String}category - category\n * @param {Number}startRange - startRange\n * @param {Number}endRange - endRange\n * @param {Number}cStartRange - current startRange\n * @param {Number}cEndRange - current endRange\n * @return {Boolean} true if valid range.\n */let validateNumericRangeSelected=function(category,startRange,endRange,cStartRange,cEndRange){var hasValidated=false;var oStartRange=category.numericrange.filter.startNumericValue;var oEndRange=category.numericrange.filter.endNumericValue;var pStartRange=parseFloat(cStartRange);var pEndRange=parseFloat(cEndRange);var invalidStart=cStartRange===oStartRange||pStartRange===oStartRange||isNaN(pStartRange)&&oStartRange===NO_STARTRANGE;// when the start range goes from blank to 0, it's a real change, so the search button should be enabled.\nif(category.numericrange.filter.startEndRange===NumericRangeBlankStart){invalidStart=isNaN(pStartRange);}var invalidEnd=cEndRange===oEndRange||pEndRange===oEndRange||isNaN(pEndRange)&&oEndRange===NO_ENDRANGE;if(category.numericrange.filter.startEndRange===NumericRangeBlankEnd){invalidEnd=isNaN(pEndRange);}// when the end range goes from blank to 0, it's a real change, so the search button should be enabled.\nif(invalidStart&&invalidEnd){category.showSearch=false;hasValidated=true;}return hasValidated;};/**\n * Validate ranges for category numeric range.\n *\n * @function validateNumericRange\n * @memberOf filterPanelUtils\n *\n * @param {String} category - category\n * @param {String} startRange - startRange\n * @param {String} endRange - endRange\n *\n */let validateNumericRange=function(category,startRange,endRange){category.showSearch=true;// Validate values to be numbers\nvar cStartRange=category.numericrange.startValue.dbValue;var cEndRange=category.numericrange.endValue.dbValue;var oStartRange=null;var oEndRange=null;if(category.numericrange.numericRangeSelected&&validateNumericRangeSelected(category,startRange,endRange,cStartRange,cEndRange)){return;}var noStartRange=cStartRange===undefined||cStartRange===null||cStartRange==='';var noEndRange=cEndRange===undefined||cEndRange===null||cEndRange==='';// if both numbers are not set, disable search button\nif(noStartRange&&noEndRange){category.showSearch=false;return;}var disable=false;if(noStartRange){disable=endRange===oEndRange||isNaN(endRange);}else if(noEndRange){// check if there is no endRange and  start number is same, disable search button\ndisable=startRange===oStartRange||isNaN(startRange);}else{disable=!isFinite(startRange)||isNaN(startRange)||!isFinite(endRange)||isNaN(endRange);}category.showSearch=!disable;};/**\n * get numeric range filter string.\n *\n * @function getNumericRangeString\n * @memberOf filterPanelUtils\n *\n * @param {String}startRange - startRange\n * @param {String}endRange - endRange\n *\n * @return {String} a numeric range string.\n */let getNumericRangeString=function(startRange,endRange){var fromValue=startRange&&startRange.toString();if(fromValue===undefined||fromValue===null||fromValue.length===0||isNaN(fromValue)){fromValue=NO_STARTRANGE;}var toValue=endRange&&endRange.toString();if(toValue===undefined||toValue===null||toValue.length===0||isNaN(toValue)){toValue=NO_ENDRANGE;}return INTERNAL_NUMERIC_RANGE+fromValue+INTERNAL_TO+toValue;};/**\n * get numeric range filter from a filter string.\n *\n * @function getDateRangeDisplayString\n * @memberOf filterPanelUtils\n *\n * @param {String}filter - filter\n *\n * @return {Object} a numeric range filter.\n */let getNumericRangeFilter=function(filter){var searchFilter={};var sArr=filter.split(INTERNAL_TO);searchFilter.searchFilterType=NUMERIC_FILTER;searchFilter.startNumericValue=parseFloat(sArr[0]);searchFilter.endNumericValue=parseFloat(sArr[1]);if(isNaN(searchFilter.startNumericValue)){searchFilter.startEndRange=NumericRangeBlankStart;}else if(isNaN(searchFilter.endNumericValue)){searchFilter.startEndRange=NumericRangeBlankEnd;}else{searchFilter.startEndRange=NUMERIC_RANGE;}return searchFilter;};/**\n * get a numeric range filter.\n *\n * @function getNumericRangeDisplayString\n * @memberOf filterPanelUtils\n *\n * @param {Number}startRange - startRange\n * @param {Number}endRange - endRange\n * @param {String}startEndRange - startEndRange\n *\n * @return {Object} a numeric range filter with display name and category type.\n */let getNumericRangeDisplayString=function(startRange,endRange,startEndRange){var numericRangeFilter={};var noStartRange=startEndRange===NumericRangeBlankStart||startRange!==0&&!startRange;var noEndRange=startEndRange===NumericRangeBlankEnd||endRange!==0&&!endRange;var numericRangeString;if(noStartRange){numericRangeString='To '+endRange.toString();}else if(noEndRange){numericRangeString='From '+startRange.toString();}else{numericRangeString=startRange.toString()+' - '+endRange.toString();}numericRangeFilter.displayName=numericRangeString;numericRangeFilter.categoryType=NUMERIC_RANGE_FILTER;return numericRangeFilter;};/**\n * get a real filter.\n *\n * @function getRealFilterWithNoFilterType\n * @memberOf filterPanelUtils\n *\n * @param {String}filter - filter\n *\n * @return {Object} the real filter stripped off the identifiers.\n */let getRealFilterWithNoFilterType=function(filter){var realFilter=filter;if(!filter.hasOwnProperty('property')){realFilter=filter.replace(INTERNAL_NUMERIC_FILTER,'').replace(INTERNAL_OBJECT_FILTER,'');}return realFilter;};/**\n * get filter type from filter value.\n *\n * @function getFilterTypeFromFilterValue\n * @memberOf filterPanelUtils\n *\n * @param {String}filter - filter\n *\n * @return {String} filter type, if it can be derived.\n */let getFilterTypeFromFilterValue=function(filter){var filterType;if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(filter,INTERNAL_OBJECT_FILTER)){filterType='ObjectFilter';}else if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.startsWith(filter,INTERNAL_NUMERIC_FILTER)){filterType='NumericFilter';}else{filterType='DateFilter';}return filterType;};/**\n * /** Return date to start of the day\n *\n * @param {Date} date a given date\n * @return {Date} date\n */function moveDateToStartOfDay(date){if(!js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNullDate(date)){date.setHours(0,0,0);return date;}return date;}/**\n * Return date to start of the day\n *\n * @param {Date} date a given date\n * @return {Date} date\n */function moveDateToEndOfDay(date){if(!js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].isNullDate(date)){date.setHours(23,59,59);return date;}return date;}/**\n * Returns true if preset filters are hidden\n *\n * @returns {Object} preset filter flag\n */let isPresetFilters=function(){return _presetFilters;};/**\n * Sets preset filters flag\n *\n * @param {Object} flag flag\n */let setPresetFilters=function(flag){_presetFilters=flag;};/**\n * Returns true if preset filters are hidden\n *\n * @returns {Object} preset filter flag\n */let getHasTypeFilter=function(){return _hasTypeFilter;};/**\n * Sets preset filters flag\n *\n * @param {Object} flag preset filter flag\n */let setHasTypeFilter=function(flag){_hasTypeFilter=flag;};/**\n * Sets incontext flag\n *\n * @param {Object} flag incontext flag\n */let setIncontext=function(flag){_incontextFlag=flag;};/**\n * Gets incontext flag\n *\n * @returns {Object} incontext flag\n */let getIncontext=function(){return _incontextFlag;};/**\n * Save source filter map in appcontext for incontext\n *\n * @param {Object} data data\n */let saveIncontextFilterMap=function(data){let inContextMap={};if(getHasTypeFilter()){// Create a filter value for each category value\nlet tmpValues=data.searchFilterMap[PRESET_CATEGORY];inContextMap[PRESET_CATEGORY]=tmpValues;}return inContextMap;};/**\n * Returns category internal name\n * @param {Object} category category\n * @returns {Object} The category internal name\n */let getCategoryInternalName=function(category){return category.internalName;};/**\n * Returns current category\n *\n * @param {Object} response the response from the search SOA\n * @returns {Object} The current category\n */let getCurrentCategory=function(response){return response.groupedObjectsList[0].internalPropertyName;};/**\n * Returns filter values for a category to be shown in panel\n *\n * @param {Object} category the category to get values for\n *\n * @returns {ObjectArray} The array of filters to show in panel\n */let getPropGroupValues=function(category){getPreferenceValue();var values=[];for(var i=0;i<category.filterValues.length;i++){var categoryValue=category.filterValues[i];if(categoryValue&&(i<9||categoryValue.color)){values.push(getPropGroupValue(category.type,category.drilldown,categoryValue));}}return values;};/**\n * Returns filter values for a category to be shown in panel\n * @param {String} categoryType categoryType\n * @param {Integer} categoryDrillDown category Drill Down\n * @param {String} categoryValue categoryValue\n * @returns {Object} filter value\n */let getPropGroupValue=function(categoryType,categoryDrillDown,categoryValue){var pos=categoryValue.categoryName.indexOf('.');var propertyName;if(pos!==-1){propertyName=categoryValue.categoryName.slice(pos+1);}else{propertyName=categoryValue.categoryName;}var mapKey=propertyName+'.'+categoryValue.name;var filterValue={};if(categoryValue.color&&customPropValueColorMap[mapKey]){filterValue.propertyGroupID=categoryValue.color;var rgbColorValue=getFilterColorRGBValue(categoryValue.color);filterValue.colorValue=rgbColorValue;}else{filterValue.propertyGroupID=getFilterColorValue(categoryValue.colorIndex);filterValue.colorIndex=categoryValue.colorIndex;filterValue.colorValue=getFilterColorRGBValue('aw-charts-chartColor'+(categoryValue.colorIndex%9+1));}if(categoryType==='DateFilter'){if(categoryValue.colorIndex>=categoryDrillDown){if(categoryValue.internalName!=='$NONE'){filterValue.startValue=categoryValue.startDateValue;filterValue.endValue=categoryValue.endDateValue;}else{filterValue.startValue='$NONE';}}}else{filterValue.startValue=categoryValue.internalName;filterValue.endValue='';}return filterValue;};/**\n * Returns filter RGB values for a category to be shown in viewer\n * @param {STRING} color color\n * @returns {Object} filter Color RGB value\n */let getFilterColorRGBValue=function(color){var colorBlock='.aw-ui-filterNameColorBlock';var colorBlockElement=jquery__WEBPACK_IMPORTED_MODULE_4___default()(colorBlock);var elementExists=colorBlockElement&&colorBlockElement.length>0;if(!elementExists){//in the case of ACE filter panel, the rendering of the panel is delayed\ncolorBlock='.aw-layout-globalToolbarPanel';colorBlockElement=jquery__WEBPACK_IMPORTED_MODULE_4___default()(colorBlock);elementExists=colorBlockElement&&colorBlockElement.length>0;}if(elementExists){var p=colorBlockElement[0];var replacedClassName=p.className;p.className='aw-ui-filterNameColorBlock '+color;var style2=window.getComputedStyle(p,null).getPropertyValue('background-color');p.className=replacedClassName;return style2;}return'';};/**\n * Returns filter values for a category to be shown in panel\n * @param {Integer} index index\n * @returns {Object} filter value\n */let getFilterColorValue=function(index){return index>-1?'aw-charts-chartColor'+(index%9+1):'';};/**\n * Get property name from filter name.\n *\n * @param {String} filterName - The filter name\n * @return {propName} property name\n */let getPropertyFromFilter=function(filterName){var propName=filterName;var YEAR_SUFFIX='_0Z0_year';var YEAR_MONTH_SUFFIX='_0Z0_year_month';var WEEK_SUFFIX='_0Z0_week';var YEAR_MONTH_DAY_SUFFIX='_0Z0_year_month_day';if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.endsWith(filterName,YEAR_MONTH_DAY_SUFFIX)===true){propName=filterName.replace(YEAR_MONTH_DAY_SUFFIX,'');}if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.endsWith(filterName,WEEK_SUFFIX)===true){propName=filterName.replace(WEEK_SUFFIX,'');}if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.endsWith(filterName,YEAR_MONTH_SUFFIX)===true){propName=filterName.replace(YEAR_MONTH_SUFFIX,'');}if(lodash__WEBPACK_IMPORTED_MODULE_6___default.a.endsWith(filterName,YEAR_SUFFIX)===true){propName=filterName.replace(YEAR_SUFFIX,'');}return propName;};/**\n * Get formatted date.\n *\n * @param {String} dateString - input date\n *\n * @param {Boolean} isDateRangeToDate - indicate if it's an end date in a date range\n *\n * @return {formattedDate} formatted date\n */let getFormattedFilterDate=function(dateString,isDateRangeToDate){var formattedDate;if(dateString==='*'){if(isDateRangeToDate){formattedDate=ENDING_OF_TIME;}else{formattedDate=BEGINNING_OF_TIME;}}else{try{var date=convertToUTC(new Date(dateString));formattedDate=js_dateTimeService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].formatUTC(date);}catch(e){js_logger__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].error('The specified date is invalid and will be ignored for the search:',dateString);return null;}}return formattedDate;};/**\n * Get formatted numeric range filter.\n *\n * @param {String} filterValue - filterValue\n *\n * @return {formattedNumber} formatted filter\n */let getFormattedFilterNumber=function(filterValue){var formattedFilter={};var startToEnd=filterValue.split(' TO ');var startNumber=parseFloat(startToEnd[0]);var endNumber=parseFloat(startToEnd[1]);if(isNaN(startNumber)&&isNaN(endNumber)){js_logger__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].error('The specified range is invalid and will be ignored for the search:',filterValue);return null;}else if(startToEnd[0]==='*'){formattedFilter={searchFilterType:'NumericFilter',startNumericValue:0,endNumericValue:endNumber,startEndRange:NumericRangeBlankStart};}else if(startToEnd[1]==='*'){formattedFilter={searchFilterType:'NumericFilter',startNumericValue:startNumber,endNumericValue:0,startEndRange:NumericRangeBlankEnd};}else{if(isNaN(startNumber)||isNaN(endNumber)){js_logger__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].error('The specified range is invalid and will be ignored for the search:',filterValue);return null;}formattedFilter={searchFilterType:'NumericFilter',startNumericValue:startNumber,endNumericValue:endNumber,startEndRange:NUMERIC_RANGE};}return formattedFilter;};/**\n * Get Range Filter.\n *\n * @param {String} filterType - filter type\n *\n * @param {String} filterValue - filter value\n *\n * @return {searchFilter} Search Filter\n */let getRangeSearchFilter=function(filterType,filterValue){// range search.\nvar searchFilter;var startToEnd=filterValue.split(' TO ');if(filterType==='NumericFilter'){searchFilter=getFormattedFilterNumber(filterValue);}else if(filterType==='DateFilter'){var startDate=getFormattedFilterDate(startToEnd[0].trim(),false);var endDate=getFormattedFilterDate(startToEnd[1].trim(),true);if(startDate&&endDate){searchFilter={searchFilterType:filterType,startDateValue:startDate,endDateValue:endDate};}}else{// String type, but string type should not support range search,\n// so treat the \" TO \" as just part of the filter value\nsearchFilter={searchFilterType:filterType,stringValue:filterValue};}return searchFilter;};/**\n * Get Single Filter.\n *\n * @param {String} filterType - filter type\n *\n * @param {String} filterValue - filter value\n *\n * @return {searchFilter} Search Filter\n */let getSingleSearchFilter=function(filterType,filterValue){// range search.\nvar searchFilter;if(filterType==='NumericFilter'){try{var formattedNumber=parseFloat(filterValue);if(isNaN(formattedNumber)){js_logger__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].error('The specified number is invalid and will be ignored for the search:',filterValue);}else{searchFilter={searchFilterType:filterType,startNumericValue:formattedNumber,endNumericValue:formattedNumber,stringValue:filterValue};}}catch(e){js_logger__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].error('The specified number is invalid and will be ignored for the search:',filterValue);}}else{// Date type is also treated as String, if it's not date range.\nsearchFilter={searchFilterType:'StringFilter',stringValue:filterValue};}return searchFilter;};/**\n * Get filter type based on the value type.\n *\n * @param {Integer} valueType - The valueType for this property\n *\n * @return {filterType} filter type based off the integer value of valueType (String/Double/char etc.)\n */let getFilterType=function(valueType){var filterType;switch(valueType){case 2:filterType='DateFilter';break;case 3:case 4:case 5:case 7:filterType='NumericFilter';break;case 9:case 10:case 11:case 12:case 13:case 14:// filterType = 'ObjectFilter';\n// ObjectFilter will be treated as StringFilter for the searchInput of performSearch SOA.\nfilterType='StringFilter';break;default:filterType='StringFilter';break;}return filterType;};/**\n * Display search prefilter error\n *\n * @param {String} prefilter - The search prefilter\n *\n */let displayPrefilterError=function(prefilter){var msg=_invalidPrefilter.replace('{0}',prefilter);js_messagingService__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].showError(msg);};/**\n * This function reads the AWC_CustomPropValueColor preference value and populates the customPropValueColorMap.\n * This is used to overide filter color in filter panel.\n * Preference value is in formate <propertyname>.<value>:<colorValue>\n */let getPreferenceValue=()=>{let values=js_appCtxService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCtx('preferences.AWC_CustomPropValueColor');if(values&&values[0]){for(var i=0;i<values.length;i++){var prefVal=values[i];var pos=prefVal.indexOf(':');var color=prefVal.slice(pos+1);var property=prefVal.slice(0,pos);customPropValueColorMap[property]=color;}}};/**\n * get filter color\n *\n * @param propertyName filter name\n *\n * @returns color color code need to be applied for filter\n */let getCustomPropValueColorMap=function(propertyName){return customPropValueColorMap[propertyName];};/**\n * set filter color\n *\n * @param propertyName filter name\n *\n * @param color color code need to be applied for filter\n */let setCustomPropValueColorMap=function(propertyName,color){customPropValueColorMap[propertyName]=color;};/**\n * This function reads the AWC_CustomPropValueColor preference value and applies the color to the filter.\n */let applyCustomColor=function(categoryName,categoryValue,filterValue){var pos=categoryName.indexOf('.');var propertyName;if(pos!==-1){propertyName=categoryName.slice(pos+1);}else{propertyName=categoryName;}var mapKey=propertyName+'.'+categoryValue.stringValue;//Overriding the filter color based on preference AWC_CustomPropValueColor value if this property's color is defined in this preference\nif(customPropValueColorMap[mapKey]){if(categoryValue.colorValue){//This scenario will be hit in the cases where color value is being populated by server response - searchFilter3 or later\nfilterValue.color=categoryValue.colorValue;}else{//This scenario will be hit in the cases where color value is not being populated by server response\nfilterValue.color=customPropValueColorMap[mapKey];}}};/**\n * @function checkIfFilterValuesExist - this function checks if the category has filtervalues or not\n * @param { Object } category - the current category\n * @returns { Boolean } true/false\n */let checkIfFilterValuesExist=function(category){if(category.filterValues&&category.filterValues.length>0){return true;}return false;};/**\n * @function isLimitedCategoriesFeatureEnabled - this function checks if AWC_LIMITED_FILTER_CATEGORIES_ENABLED is true\n * @returns { Boolean } true/false\n */let isLimitedCategoriesFeatureEnabled=function(){var preferenceValue=js_appCtxService__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCtx('preferences.'+AWC_LIMITED_FILTER_CATEGORIES_ENABLED);if(preferenceValue&&preferenceValue[0].toLowerCase()==='true'){return true;}return false;};/**\n * ifFilterSelectedForCategory - check if the current category has some filter as selected\n * @param { Object } category the current category\n * @returns { Boolean } true/false\n */let ifFilterSelectedForCategory=function(category){var filterValuesExist=checkIfFilterValuesExist(category);if(filterValuesExist){for(var index=0;index<category.filterValues.length;index++){if(category.filterValues[index].selected){return true;}}}return false;};/**\n * isClsCategory - check if the current category is a classification type\n * @param { Object } category the current category\n * @returns { Boolean } true/false\n */let isClsCategory=category=>{if(category.filterValues&&(category.filterValues.parentnodes&&category.filterValues.parentnodes.length>0||category.filterValues.childnodes&&category.filterValues.childnodes.length>0)){return true;}return false;};/**\n * ifFilterSelectedForCls - check if the current category is a classification category with a filter selected\n * @param { Object } category the current category\n * @returns { Boolean } true/false\n */let ifFilterSelectedForCls=category=>{var filterValuesExist=isClsCategory(category);if(filterValuesExist){for(var index=0;index<category.filterValues.parentnodes.length;index++){if(category.filterValues.parentnodes[index].selected){return true;}}}return false;};/**\n * getFilterFocus - return whether to set autoFocus for a filter as true or false\n * @param { Object } lastSelectedFilterAndCategoryInfo last selected filter and category info\n * @param { Object } filter current filter\n * @param { Object } categoryInternalName current category internal name\n * @param { Integer } index - current filter index\n * @returns { Boolean } autoFocus value for the filter - true/false\n */const getFilterFocus=(lastSelectedFilterAndCategoryInfo,filter,categoryInternalName,index)=>{let lastAction=lastSelectedFilterAndCategoryInfo?lastSelectedFilterAndCategoryInfo.lastAction:'';switch(lastAction){case'selectFilter':if(lastSelectedFilterAndCategoryInfo&&lastSelectedFilterAndCategoryInfo.lastSelectedFilter.categoryName===filter.categoryName&&lastSelectedFilterAndCategoryInfo.lastSelectedFilter.internalName===filter.internalName){return true;}return false;case'dateRangeSearch':if(index===0&&lastSelectedFilterAndCategoryInfo&&lastSelectedFilterAndCategoryInfo.lastDateRangeSearchCategory===categoryInternalName){return true;}return false;case'numericRangeSearch':if(index===1&&lastSelectedFilterAndCategoryInfo&&lastSelectedFilterAndCategoryInfo.lastNumericRangeSearchCategory===categoryInternalName){return true;}return false;default:return false;}};let loadConfiguration=function(){js_localeService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLocalizedTextFromKey('UIMessages.invalidDate',true).then(result=>_invalidDateText=result);js_localeService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLocalizedTextFromKey('UIMessages.invalidRange',true).then(result=>_invalidRangeText=result);js_localeService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLocalizedTextFromKey('UIMessages.invalidPrefilter',true).then(result=>_invalidPrefilter=result);};loadConfiguration();/* harmony default export */ __webpack_exports__[\"a\"] = ({HIERARCHICAL_FACET_SEPARATOR,PRESET_CATEGORY,DATE_FILTER,INTERNAL_DATE_FILTER,DATE_RANGE_FILTER,DATE_DRILLDOWN_FILTER,NUMERIC_RANGE_FILTER,INTERNAL_NUMERIC_FILTER,INTERNAL_OBJECT_FILTER,INTERNAL_NUMERIC_RANGE,NUMERIC_FILTER,NUMERIC_RANGE,NumericRangeBlankStart,NumericRangeBlankEnd,NO_STARTDATE,NO_ENDDATE,NO_STARTRANGE,NO_ENDRANGE,BEGINNING_OF_TIME,ENDING_OF_TIME,getDate,isNullDate,validateDates,getDateRangeString,getDateRangeFilter,getDateRangeDisplayString,checkIfValidRange,validateNumericRangeSelected,validateNumericRange,getNumericRangeString,getNumericRangeFilter,getNumericRangeDisplayString,getRealFilterWithNoFilterType,getFilterTypeFromFilterValue,isPresetFilters,setPresetFilters,getHasTypeFilter,setHasTypeFilter,setIncontext,getIncontext,saveIncontextFilterMap,getCategoryInternalName,getCurrentCategory,getPropGroupValues,getPropGroupValue,getFilterColorRGBValue,getFilterColorValue,getPropertyFromFilter,getFormattedFilterDate,getFormattedFilterNumber,getRangeSearchFilter,getSingleSearchFilter,getFilterType,displayPrefilterError,getPreferenceValue,getCustomPropValueColorMap,setCustomPropValueColorMap,applyCustomColor,checkIfFilterValuesExist,isLimitedCategoriesFeatureEnabled,ifFilterSelectedForCategory,isClsCategory,ifFilterSelectedForCls,getFilterFocus});\n\n/***/ })\n\n}]);","inputSourceMap":null}