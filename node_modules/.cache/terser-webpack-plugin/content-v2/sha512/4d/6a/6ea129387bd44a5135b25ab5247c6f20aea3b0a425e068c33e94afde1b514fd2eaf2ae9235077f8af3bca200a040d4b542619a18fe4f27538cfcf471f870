{"code":"(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[60],{2945:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"initializeDefaultSublocation\",(function(){return p})),a.d(t,\"cleanUp\",(function(){return S})),a.d(t,\"handleSelectionChange\",(function(){return x})),a.d(t,\"getContext\",(function(){return f})),a.d(t,\"getStdContext\",(function(){return g})),a.d(t,\"updateSelection\",(function(){return m}));var n=a(1),o=a.n(n),i=a(2968),r=a(12),s=a(43),c=a(39),l=a.n(c),u=a(2993),d=a(80),b=a(58);const C=new l.a(\"selection\"),p=e=>{let t=e.breadcrumbConfig?Object.assign({},e.breadcrumbConfig):{};t.id||(t.id=\"wabc\"),r.default.registerCtx(\"breadCrumbConfig\",t),(e=>{var t=r.default.getCtx(e.clientScopeURI+\".sortCriteria\");void 0===t||\"\"===t?(r.default.updatePartialCtx(e.clientScopeURI+\".sortCriteria\",[]),r.default.updatePartialCtx(\"sublocation.sortCriteria\",[])):r.default.updatePartialCtx(\"sublocation.sortCriteria\",t),r.default.updateCtx(\"search.activeFilterMap\",{});const a=function(t){if(e.params){var a=i.a.buildSearchFilters(e.context);e.params.hasOwnProperty(\"searchCriteria\")&&(a.criteria||(a.criteria={}),a.criteria.searchString=e.params.searchCriteria?e.params.searchCriteria:\"\"),!o.a.isEqual(r.default.getCtx(\"search\"),a)&&r.default.registerCtx(\"search\",a)}};s.a.instance.transitionHooks.onSuccess({},(e=>{a(e.params())})),a(s.a.instance.params)})(e)},S=()=>{r.default.unRegisterCtx(\"breadCrumbConfig\")},x=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"s_uid\";if(!o.a.isEmpty(e)){if(t)t.update(e);else if(u.a.updateSelection(e.selected,e.pselected,e.relationInfo),a&&s.a.instance.params.hasOwnProperty(a)){var n={};1===e.selected.length&&\"primary\"===e.source?n[a]=Object(b.b)(e.selected[0]):\"secondary\"!==e.source&&(n[a]=null),s.a.instance.go(\".\",n)}C(\"AwDefaultSublocation selectionData: \",e)}},f=(e,t)=>[new d.a({ctxParameters:[],additionalParameters:[t.subPanelContext,t.selectionData,t.baseSelection,t.sublocationState],compute:()=>{let e=t.subPanelContext&&t.subPanelContext.selectionQueryParamKey?t.subPanelContext.selectionQueryParamKey:\"s_uid\",a={...t.subPanelContext.pageContext,secondaryActiveTabId:t.sublocationState&&t.sublocationState.secondaryActiveTabId,sublocationState:t.sublocationState};return{providerForBaseSublocation:{...t.subPanelContext,selectionQueryParamKey:e},subPanelContextForBaseSublocation:{selectionData:t.selectionData,baseSelection:t.baseSelection,pageContext:a},subPanelContextForAwWorkarea:{...t.subPanelContext,baseSelection:t.baseSelection,selectionQueryParamKey:e,pageContext:a}}}})],g=(e,t)=>[new d.a({ctxParameters:[],additionalParameters:[t.subPanelContext,t.provider,t.baseSelection,t.sublocationState],compute:()=>{let e={};return e=t.subPanelContext&&t.subPanelContext.pageContext?{...t.subPanelContext.pageContext,secondaryActiveTabId:\"\"!==t.sublocationState.secondaryActiveTabId?t.sublocationState.secondaryActiveTabId:void 0,sublocationState:t.sublocationState}:{secondaryActiveTabId:\"\"!==t.sublocationState.secondaryActiveTabId?t.sublocationState.secondaryActiveTabId:void 0,sublocationState:t.sublocationState},{...t.subPanelContext,...t.provider,baseSelection:t.baseSelection,pageContext:e}}})],m=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"s_uid\",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o={};const i=s.a.instance.params;for(var r in i)i[r]!==n[r]&&(o[r]=i[r]);let c=t||e;if(o.hasOwnProperty(a)&&c.getCurrentSelectedCount()<2){const e=s.a.instance.params[a]?[s.a.instance.params[a]]:[];c.setSelection(e)}return{changedParams:i}}}}]);","name":"static/js/60.adbd83a2.chunk.js","input":"(this[\"webpackJsonpcreatingjsxcomponent\"] = this[\"webpackJsonpcreatingjsxcomponent\"] || []).push([[60],{\n\n/***/ 2945:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initializeDefaultSublocation\", function() { return initializeDefaultSublocation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cleanUp\", function() { return cleanUp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleSelectionChange\", function() { return handleSelectionChange; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getContext\", function() { return getContext; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getStdContext\", function() { return getStdContext; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateSelection\", function() { return updateSelection; });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var js_aw_searchFilter_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2968);\n/* harmony import */ var js_appCtxService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12);\n/* harmony import */ var js_awStateService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43);\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39);\n/* harmony import */ var debug__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_selection_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2993);\n/* harmony import */ var js_derivedContextService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80);\n/* harmony import */ var js_uwUtilService__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(58);\nconst trace=new debug__WEBPACK_IMPORTED_MODULE_4___default.a('selection');const updateSearchContext=provider=>{// Set the sort criteria for sublocation if its not already populated in ctx.ClientScopeURI.sortCriteria\n// This sort criteria will be shared across all views in a sublocation in a given session.\nvar sortCriteria=js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getCtx(provider.clientScopeURI+'.sortCriteria');if(sortCriteria===undefined||sortCriteria===''){js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updatePartialCtx(provider.clientScopeURI+'.sortCriteria',[]);js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updatePartialCtx('sublocation.sortCriteria',[]);}else{js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updatePartialCtx('sublocation.sortCriteria',sortCriteria);}js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateCtx('search.activeFilterMap',{});// revisitme- dependency of serch ctx should be removed and replaced by subPanelContext.searchContext\n// but search is dependent on this, refactor those usages and remove this code\n// listen to state change\nconst onLocationChange=function(changedParams){if(provider.params){// Build up filter map and array\nvar searchContext=js_aw_searchFilter_service__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].buildSearchFilters(provider.context);// Put the searchCriteria property on the state into the params\nif(provider.params.hasOwnProperty('searchCriteria')){if(!searchContext.criteria){searchContext.criteria={};}searchContext.criteria.searchString=provider.params.searchCriteria?provider.params.searchCriteria:'';}// Otherwise just update the context\nvar contextChanged=!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEqual(js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getCtx('search'),searchContext);if(contextChanged){js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].registerCtx('search',searchContext);}}};js_awStateService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].instance.transitionHooks.onSuccess({},transition=>{onLocationChange(transition.params());});return onLocationChange(js_awStateService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].instance.params);};const initializeDefaultSublocation=provider=>{// init breadcrumb\nlet breadcrumbConfig=provider.breadcrumbConfig?Object.assign({},provider.breadcrumbConfig):{};if(!breadcrumbConfig.id){breadcrumbConfig.id='wabc';}js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].registerCtx('breadCrumbConfig',breadcrumbConfig);// search context logic\nupdateSearchContext(provider);};const cleanUp=()=>{js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].unRegisterCtx('breadCrumbConfig');};const handleSelectionChange=function(localSelectionData,parentSelectionData){let selectionQueryParamKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'s_uid';if(!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(localSelectionData)){if(parentSelectionData){parentSelectionData.update(localSelectionData);}else{js_selection_service__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].updateSelection(localSelectionData.selected,localSelectionData.pselected,localSelectionData.relationInfo);if(selectionQueryParamKey&&js_awStateService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].instance.params.hasOwnProperty(selectionQueryParamKey)){var newParams={};if(localSelectionData.selected.length===1&&localSelectionData.source==='primary'){newParams[selectionQueryParamKey]=Object(js_uwUtilService__WEBPACK_IMPORTED_MODULE_7__[/* getEvaluatedId */ \"b\"])(localSelectionData.selected[0]);}else if(localSelectionData.source!=='secondary'){newParams[selectionQueryParamKey]=null;}js_awStateService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].instance.go('.',newParams);}}trace('AwDefaultSublocation selectionData: ',localSelectionData);}};const getContext=(vmDef,props)=>{return[new js_derivedContextService__WEBPACK_IMPORTED_MODULE_6__[/* DerivedStateResult */ \"a\"]({ctxParameters:[],additionalParameters:[props.subPanelContext,props.selectionData,props.baseSelection,props.sublocationState],compute:()=>{let selectionQueryParamKey=props.subPanelContext&&props.subPanelContext.selectionQueryParamKey?props.subPanelContext.selectionQueryParamKey:'s_uid';let pageContext={...props.subPanelContext.pageContext,secondaryActiveTabId:props.sublocationState&&props.sublocationState.secondaryActiveTabId,sublocationState:props.sublocationState};return{providerForBaseSublocation:{...props.subPanelContext,selectionQueryParamKey:selectionQueryParamKey},subPanelContextForBaseSublocation:{selectionData:props.selectionData,baseSelection:props.baseSelection,pageContext:pageContext},subPanelContextForAwWorkarea:{...props.subPanelContext,baseSelection:props.baseSelection,selectionQueryParamKey:selectionQueryParamKey,pageContext:pageContext}};}})];};const getStdContext=(vmDef,props)=>{return[new js_derivedContextService__WEBPACK_IMPORTED_MODULE_6__[/* DerivedStateResult */ \"a\"]({ctxParameters:[],additionalParameters:[props.subPanelContext,props.provider,props.baseSelection,props.sublocationState],compute:()=>{let pageContext={};if(props.subPanelContext&&props.subPanelContext.pageContext){pageContext={...props.subPanelContext.pageContext,secondaryActiveTabId:props.sublocationState.secondaryActiveTabId!==''?props.sublocationState.secondaryActiveTabId:undefined,sublocationState:props.sublocationState};}else{pageContext={secondaryActiveTabId:props.sublocationState.secondaryActiveTabId!==''?props.sublocationState.secondaryActiveTabId:undefined,sublocationState:props.sublocationState};}return{...props.subPanelContext,...props.provider,baseSelection:props.baseSelection,pageContext:pageContext};}})];};const updateSelection=function(selectionModel,parentSelectionModel){let selectionQueryParamKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'s_uid';let originalParams=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};let changeInParams={};const changedParams=js_awStateService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].instance.params;for(var i in changedParams){if(changedParams[i]!==originalParams[i]){changeInParams[i]=changedParams[i];}}let activeSelectionModel=parentSelectionModel||selectionModel;if(changeInParams.hasOwnProperty(selectionQueryParamKey)&&activeSelectionModel.getCurrentSelectedCount()<2){const selection=js_awStateService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].instance.params[selectionQueryParamKey]?[js_awStateService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].instance.params[selectionQueryParamKey]]:[];activeSelectionModel.setSelection(selection);}return{changedParams:changedParams};};\n\n/***/ })\n\n}]);","inputSourceMap":null}