{"code":"(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[98],{3102:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"initializePage\",(function(){return h})),n.d(t,\"cleanupPage\",(function(){return T})),n.d(t,\"updateContextProperties\",(function(){return y})),n.d(t,\"getSublocationTabsAndApi\",(function(){return w})),n.d(t,\"handleStateChange\",(function(){return x}));var a=n(43),r=n(3026),i=n(12),o=n(15),s=n(11),c=n(51),u=n(214),l=n(6);let d,p,f=\"locationContext\",g=\"location.titles\",b=[\"browserTitle\",\"browserSubTitle\",\"headerTitle\",\"showsearchbox\"];const h=async(e,t)=>{d=a.a.instance.current.parent.replace(/_/g,\".\"),r.a.registerKeyDownEvent(),i.default.registerCtx(f,{\"ActiveWorkspace:Location\":d});let n=await u.default.queryAll()||[];return(()=>{let e={};var t=[];return b.forEach((function(n){var r=a.a.instance.current.data[n];r&&(\"string\"===typeof r?(e[n]=r,t.push(s.a.instance.when(e))):t.push(o.default.getLocalizedText(r.source,r.key).then((function(t){return e[n]=t,e}))))})),s.a.instance.all(t).then((function(){return i.default.updateCtx(g,e),e}))})().then((r=>{var i=a.a.instance.current.data.propertyPolicy;return i?c.a.registerPolicyAsync(i).then((function(a){return{pageContext:Object.assign(r,{propertyPolicyId:a,prefs:n,locationPanelStyle:e,overriddenHeaderTitle:t})}})):Promise.resolve({pageContext:{...r,prefs:n,locationPanelStyle:e,overriddenHeaderTitle:t}})}))},T=e=>{i.default.unRegisterCtx(f),i.default.unRegisterCtx(g),r.a.unRegisterKeyDownEvent(),(e=>{e&&c.a.unregister(e)})(e)},y=(e,t)=>{let n={browserTitle:e.browserTitle,browserSubTitle:e.browserSubTitle,headerTitle:e.headerTitle};return b.forEach((function(e){t.value[e]&&(n[e]=t.value[e])})),n},w=e=>({sublocationTabs:e.filter((e=>!0===e.displayTab)),tabCallbackApi:v}),v=(e,t,n)=>{var r;(r=t?n.filter((function(e){return e.name===t}))[0]:n.filter((function(t){return t.pageId===e}))[0])?r.state!==a.a.instance.current.name&&(r.params?a.a.instance.go(r.state,r.params):a.a.instance.go(r.state)):l.a.error(\"Missing tab was selected: \"+t)},x=e=>{const t=e.filter((e=>e.selectedTab))[0];return t&&t.state!==a.a.instance.current.name?e.map((e=>(e.state===a.a.instance.current.name?e.selectedTab=!0:e.selectedTab=!1,e))):e};p={initializePage:h,cleanupPage:T,updateContextProperties:y,getSublocationTabsAndApi:w,handleStateChange:x},t.default=p}}]);","name":"static/js/98.2294d7eb.chunk.js","input":"(this[\"webpackJsonpcreatingjsxcomponent\"] = this[\"webpackJsonpcreatingjsxcomponent\"] || []).push([[98],{\n\n/***/ 3102:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initializePage\", function() { return initializePage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cleanupPage\", function() { return cleanupPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"updateContextProperties\", function() { return updateContextProperties; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSublocationTabsAndApi\", function() { return getSublocationTabsAndApi; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleStateChange\", function() { return handleStateChange; });\n/* harmony import */ var js_awStateService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43);\n/* harmony import */ var js_keyboardService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3026);\n/* harmony import */ var js_appCtxService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12);\n/* harmony import */ var js_localeService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(15);\n/* harmony import */ var js_awPromiseService__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(11);\n/* harmony import */ var soa_kernel_propertyPolicyService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(51);\n/* harmony import */ var soa_preferenceService__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(214);\n/* harmony import */ var js_logger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(6);\nlet _locationContext='locationContext';let _contextName='location.titles';let _contextProperties=['browserTitle','browserSubTitle','headerTitle','showsearchbox'];let _context;let exports;const populateContextProperties=()=>{let contextProps={};var promises=[];_contextProperties.forEach(function(key){var property=js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.current.data[key];if(property){if(typeof property==='string'){contextProps[key]=property;promises.push(js_awPromiseService__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].instance.when(contextProps));}else{promises.push(js_localeService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLocalizedText(property.source,property.key).then(function(result){contextProps[key]=result;return contextProps;}));}}});return js_awPromiseService__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].instance.all(promises).then(function(){js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateCtx(_contextName,contextProps);return contextProps;});};/**\n * The policy is unregistered when the location is removed.\n */const unregisterPropertyPolicy=propertyPolicyId=>{if(propertyPolicyId){soa_kernel_propertyPolicyService__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].unregister(propertyPolicyId);}};const initializePage=async(locationPanelStyle,overriddenHeaderTitle)=>{//let subLocationTabs = []; // revisitMe\n_context=js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.current.parent.replace(/_/g,'.');js_keyboardService__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].registerKeyDownEvent();js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].registerCtx(_locationContext,{'ActiveWorkspace:Location':_context});let prefs=(await soa_preferenceService__WEBPACK_IMPORTED_MODULE_6__[\"default\"].queryAll())||[];return populateContextProperties().then(contextProps=>{/**\n         * The property policy for this location. Extracted from the state data. The policy can be embedded\n         * directly as an object or it can be a string path to the json file. The policy is registered when the\n         * location is activated and unregistered when the location is removed.\n         */var propertyPolicy=js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.current.data.propertyPolicy;if(propertyPolicy){return soa_kernel_propertyPolicyService__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].registerPolicyAsync(propertyPolicy).then(function(propertyPolicyId){return{pageContext:Object.assign(contextProps,{propertyPolicyId:propertyPolicyId,prefs,locationPanelStyle,overriddenHeaderTitle})};});}return Promise.resolve({pageContext:{...contextProps,prefs,locationPanelStyle,overriddenHeaderTitle}});});};const cleanupPage=propertyPolicyId=>{js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].unRegisterCtx(_locationContext);js_appCtxService__WEBPACK_IMPORTED_MODULE_2__[\"default\"].unRegisterCtx(_contextName);js_keyboardService__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"].unRegisterKeyDownEvent();unregisterPropertyPolicy(propertyPolicyId);};const updateContextProperties=(data,eventData)=>{let updatedContextProps={browserTitle:data.browserTitle,browserSubTitle:data.browserSubTitle,headerTitle:data.headerTitle};_contextProperties.forEach(function(prop){if(eventData.value[prop]){updatedContextProps[prop]=eventData.value[prop];}});return updatedContextProps;};const getSublocationTabsAndApi=sublocationTabs=>{return{sublocationTabs:sublocationTabs.filter(tab=>tab.displayTab===true),tabCallbackApi:tabCallbackApi};};const tabCallbackApi=(pageId,tabTitle,sublocationTabs)=>{var tabToSelect;if(tabTitle){tabToSelect=sublocationTabs.filter(function(tab){return tab.name===tabTitle;})[0];}else{// Should only happen when api is called before tapTitle is loaded from i18n file\ntabToSelect=sublocationTabs.filter(function(tab){return tab.pageId===pageId;})[0];}if(tabToSelect){// When the tab widget is forced to update after the state has already changed it will still trigger callback\nif(tabToSelect.state!==js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.current.name){// Switch to the new state\nif(tabToSelect.params){js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.go(tabToSelect.state,tabToSelect.params);}else{js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.go(tabToSelect.state);}}}else{js_logger__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"].error('Missing tab was selected: '+tabTitle);}};const handleStateChange=sublocationTabs=>{const activeTab=sublocationTabs.filter(tab=>tab.selectedTab)[0];if(activeTab&&activeTab.state!==js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.current.name){return sublocationTabs.map(tab=>{if(tab.state===js_awStateService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.current.name){tab.selectedTab=true;}else{tab.selectedTab=false;}return tab;});}return sublocationTabs;};exports={initializePage,cleanupPage,updateContextProperties,getSublocationTabsAndApi,handleStateChange};/* harmony default export */ __webpack_exports__[\"default\"] = (exports);\n\n/***/ })\n\n}]);","inputSourceMap":null}