{"code":"(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[83],{962:function(t,e,s){\"use strict\";s.r(e),s.d(e,\"default\",(function(){return l}));var a=s(7),i=s(6),n=s(12),r=s(139),o=s(43),c=s(86);const h=t=>e=>{switch(t){case\"string\":return Object(c.f)(e);case void 0:throw new Error(\"set type first using typeOf method\")}};var S={instance:{type:t=>({decode:h(t)})}},p=s(15),m=s(29),_=s(1),u=s.n(_);class l extends r.a{static reset(){r.a.reset.apply(this),o.a.reset()}constructor(){super(),this._state=o.a.instance,this._stateStackNames=null,this._stateStack=null,this._popState=null,this._goBackInProgress=!1,this._xrtShowObjectState=[\"com_siemens_splm_clientfx_tcui_xrt_showObject\",\"com_siemens_splm_clientfx_tcui_xrt_showMultiObject\"],this._persistentStatesCount=24,this.init(),a.a.subscribe(\"locationChangeSuccess\",(t=>{let{event:e,oldUrl:s,newUrl:n}=t;var r=this.parseUrl(n),o=this.parseUrl(s);r.params&&r.params.uid&&(o.params?(o.params.uid&&r.params.uid!==o.params.uid||r.params.uid===o.params.uid&&r.state.name!==o.state.name)&&this.routeStateChangeSuccess(r.state,r.params,o.state,o.params):this.routeStateChangeSuccess(r.state,r.params,o.state,o.params)),!0===this._goBackInProgress&&(this._goBackInProgress=!1),a.a.publish(\"$locationChangeSuccess\",{event:e,newUrl:n,oldUrl:s}),i.a.trace(\"#### locationChangeSuccess changed! new: \"+n+\", oldUrl: \"+s)})),window.addEventListener(\"resize\",(()=>{a.a.publish(\"aw.windowResize\")}))}init(){this._stateStack=[],this._stateStackNames=[];try{sessionStorage.getItem(\"STATES_ARRAY_NAMES\")&&sessionStorage.getItem(\"STATES_ARRAY\")&&(this._stateStackNames=JSON.parse(sessionStorage.getItem(\"STATES_ARRAY_NAMES\")),this._stateStack=JSON.parse(sessionStorage.getItem(\"STATES_ARRAY\")))}catch(t){i.a.trace(\"Error in location initiation\",t)}}parseUrl(t){let e=S.instance;var s=t.lastIndexOf(\"#\"),a=t.lastIndexOf(\"?\"),i=t.substring(s+1),n={};if(a>-1){i=t.substring(s+1,a);for(var r=t.substr(a+1).split(\"&\"),o=0;o<r.length;o++){var c=r[o].split(\"=\");2===c.length&&(n[c[0]]=e.type(\"string\").decode(decodeURIComponent(c[1])))}}return\"/com.siemens.splm.clientfx.tcui.xrt.showObject\"===i?i=this._xrtShowObjectState[0]:\"/com.siemens.splm.clientfx.tcui.xrt.showMultiObject\"===i?i=this._xrtShowObjectState[1]:\"/\"===i.charAt(0)&&(i=i.substring(1)),{state:{name:i.split(\"/\").slice(-1)[0]},params:n,url:t}}goBack(){this._popState=this._stateStack.pop(),sessionStorage.setItem(\"STATES_ARRAY\",JSON.stringify(this._stateStack)),this._stateStackNames.pop(),sessionStorage.setItem(\"STATES_ARRAY_NAMES\",JSON.stringify(this._stateStackNames)),n.default.registerCtx(\"previousLocationDisplayName\",this.getGoBackLocation()),this._popState&&this._popState.state&&(i.a.trace(\"&&&&& go pop state\"+this._popState.state.name),this._goBackInProgress=!0,this._state.go(this._popState.state.name,this._popState.params,{inherit:!1}))}peekLastState(){if(this._stateStack&&this._stateStack.length>0)return this._stateStack[this._stateStack.length-1]}getGoBackLocation(){return this._stateStackNames&&this._stateStackNames.length>0?this._stateStackNames[this._stateStackNames.length-1]:p.default.getLoadedTextFromKey(\"UIMessages.noPreviousLocation\")}updateCurrentDisplayName(){var t=document.title;if(this._stateStackNames&&this._stateStackNames.length>0){let e=this._stateStackNames.length;this._stateStackNames[e-1]=\"\"!==t?t.substr(t.indexOf(\"-\")+1):this._stateStackNames[e-1].substr(this._stateStackNames[e-1].indexOf(\"-\")+1),sessionStorage.setItem(\"STATES_ARRAY\",JSON.stringify(this._stateStack))}this._stateStackNames&&0===this._stateStackNames.length&&!u.a.isEmpty(t)&&(this._stateStackNames[0]=t.substr(t.indexOf(\"-\")+1),sessionStorage.setItem(\"STATES_ARRAY\",JSON.stringify(this._stateStack)))}ifCurrentDisplayNameToBeUpdated(t,e){(\"\"===t.name&&\"^\"===t.url||t.parent&&e.parent||!e.parent&&e.name===t.name)&&this.updateCurrentDisplayName()}routeStateChangeSuccess(t,e,s,a){if(m.a.debug(\"routes\",s.name,t.name),s&&\"checkAuthentication\"!==s.name){if(this._popState&&this._popState.state.name===t.name&&!0===this._goBackInProgress)return void(this._popState=null);if(!0===this._goBackInProgress&&null===this._popState)return void(this._goBackInProgress=!1);if(t&&t.parent&&s&&s.parent&&t.parent===s.parent)return;var r={state:s,params:a,displayName:u.a.isEmpty(document.title)?p.default.getLoadedTextFromKey(\"UIMessages.noPreviousLocation\"):document.title};if(this._stateStack.length>0){var o=this.peekLastState();o.state.name!==r.state.name&&\"\"!==r.state.name?(this._stateStack.push(r),this._stateStackNames.push(r.displayName),i.a.trace(\"^^^^1 pushing newState \"+r.state.name)):\"\"===r.state.name||o.params.uid===r.params.uid||r.params.uid===e.uid&&r.state.name===t.name||(this._stateStack.push(r),this._stateStackNames.push(r.displayName),i.a.trace(\"^^^^2 pushing newState \"+r.state.name))}else r.state.abstract||(this._stateStack.push(r),this._stateStackNames.push(r.displayName),i.a.trace(\"^^^^3 pushing newState \"+r.state.name));this._stateStack.length>this._persistentStatesCount&&(this._stateStack.shift(),this._stateStackNames.shift()),sessionStorage.setItem(\"STATES_ARRAY_NAMES\",JSON.stringify(this._stateStackNames)),sessionStorage.setItem(\"STATES_ARRAY\",JSON.stringify(this._stateStack)),this.ifCurrentDisplayNameToBeUpdated(s,t)}let c=document.querySelector(\".aw-skip-to-main-container\");null!==c&&c.focus(),n.default.registerCtx(\"previousLocationDisplayName\",this.getGoBackLocation())}updateStateParameter(t,e){this._state.params[t]=e,this._state.go(\".\",this._state.params,{inherit:!0})}go(t,e,s){this._state.go(t,e,s)}}}}]);","name":"static/js/83.ad625642.chunk.js","input":"(this[\"webpackJsonpcreatingjsxcomponent\"] = this[\"webpackJsonpcreatingjsxcomponent\"] || []).push([[83],{\n\n/***/ 962:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"default\", function() { return /* binding */ locationNavigation_service_LocationNavigationService; });\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/eventBus.js\nvar eventBus = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/logger.js\nvar logger = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/declarativeui/src/js/appCtxService.js\nvar appCtxService = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/services/src/js/awBaseService.js\nvar awBaseService = __webpack_require__(139);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/services/src/js/awStateService.js\nvar awStateService = __webpack_require__(43);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/services/src/js/serviceUtils.js\nvar serviceUtils = __webpack_require__(86);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/services/src/js/awUrlMatcherFactoryService.js\n// Copyright (c) 2020 Siemens\n/* eslint-env es6 */ /**\n * This module provides core angularJS services abstraction.\n *\n * @module js/awUrlMatcherFactoryService\n */const decode=type=>{return param=>{switch(type){case'string':{return Object(serviceUtils[\"f\" /* valFromString */])(param);}case undefined:{throw new Error('set type first using typeOf method');}}};};const awUrlMatcherFactoryService_type=type=>{return{decode:decode(type)};};const instance={type: awUrlMatcherFactoryService_type};/* harmony default export */ var awUrlMatcherFactoryService = ({instance});\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/localeService.js + 1 modules\nvar localeService = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/debugService.js + 1 modules\nvar debugService = __webpack_require__(29);\n\n// EXTERNAL MODULE: ./node_modules/lodash/lodash.js\nvar lodash = __webpack_require__(1);\nvar lodash_default = /*#__PURE__*/__webpack_require__.n(lodash);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/ui/src/js/locationNavigation.service.js\n// Copyright (c) 2020 Siemens\n/* eslint-env es6 */ /**\n * This represents the Location Navigation and tracking\n *\n * @module js/locationNavigation.service\n */ // module\n// service\nclass locationNavigation_service_LocationNavigationService extends awBaseService[\"a\" /* default */]{// Only for unit test purpose\nstatic reset(){// leavePlaceSvc.reset();\nawBaseService[\"a\" /* default */].reset.apply(this);awStateService[\"a\" /* default */].reset();}constructor(){super();// service and module references\nthis._state=awStateService[\"a\" /* default */].instance;// members\nthis._stateStackNames=null;this._stateStack=null;this._popState=null;this._goBackInProgress=false;this._xrtShowObjectState=['com_siemens_splm_clientfx_tcui_xrt_showObject','com_siemens_splm_clientfx_tcui_xrt_showMultiObject'];/**\n         * {Integer} The number of previous states that will be persisted for navigation from back button.\n         * If the number of states exceeds this count, the earliest state will be forgotten.\n         */this._persistentStatesCount=24;this.init();eventBus[\"a\" /* default */].subscribe('locationChangeSuccess',_ref=>{let{event,oldUrl,newUrl}=_ref;var newLocation=this.parseUrl(newUrl);var oldLocation=this.parseUrl(oldUrl);/*\n             * Several location changes are made during show object location as query parameters are added do not\n             * want to check changes until toLocation are valid locations\n             */if(newLocation.params&&newLocation.params.uid){if(oldLocation.params){if(oldLocation.params.uid&&newLocation.params.uid!==oldLocation.params.uid||newLocation.params.uid===oldLocation.params.uid&&newLocation.state.name!==oldLocation.state.name){this.routeStateChangeSuccess(newLocation.state,newLocation.params,oldLocation.state,oldLocation.params);}}else{this.routeStateChangeSuccess(newLocation.state,newLocation.params,oldLocation.state,oldLocation.params);}}if(this._goBackInProgress===true){this._goBackInProgress=false;}eventBus[\"a\" /* default */].publish('$locationChangeSuccess',{event,newUrl,oldUrl});logger[\"a\" /* default */].trace('#### locationChangeSuccess changed! new: '+newUrl+', oldUrl: '+oldUrl);});window.addEventListener('resize',()=>{eventBus[\"a\" /* default */].publish('aw.windowResize');});}/**\n     * Initializes the previous routes and route names if they are present in sessionStorage\n     */init(){this._stateStack=[];this._stateStackNames=[];try{if(sessionStorage.getItem('STATES_ARRAY_NAMES')&&sessionStorage.getItem('STATES_ARRAY')){this._stateStackNames=JSON.parse(sessionStorage.getItem('STATES_ARRAY_NAMES'));this._stateStack=JSON.parse(sessionStorage.getItem('STATES_ARRAY'));}}catch(e){logger[\"a\" /* default */].trace('Error in location initiation',e);}}/**\n     * Function parses a URL and returns an object consisting of state and params\n     * @param {string} url url input as string\n     * @returns {object} URL object with parse result\n     */parseUrl(url){let urlMatcherFactory=awUrlMatcherFactoryService.instance;var stateStart=url.lastIndexOf('#');var paramsStart=url.lastIndexOf('?');var state=url.substring(stateStart+1);var paramsStr='';var params={};if(paramsStart>-1){state=url.substring(stateStart+1,paramsStart);paramsStr=url.substr(paramsStart+1);var paramPairs=paramsStr.split('&');for(var i=0;i<paramPairs.length;i++){var keyValue=paramPairs[i].split('=');if(keyValue.length===2){params[keyValue[0]]=urlMatcherFactory.type('string').decode(decodeURIComponent(keyValue[1]));}}}if(state==='/com.siemens.splm.clientfx.tcui.xrt.showObject'){state=this._xrtShowObjectState[0];}else if(state==='/com.siemens.splm.clientfx.tcui.xrt.showMultiObject'){state=this._xrtShowObjectState[1];}else if(state.charAt(0)==='/'){state=state.substring(1);}return{state:{name:state.split('/').slice(-1)[0]},params:params,url:url};}/**\n     * goBack function wired to the goBack Button\n     */goBack(){this._popState=this._stateStack.pop();sessionStorage.setItem('STATES_ARRAY',JSON.stringify(this._stateStack));this._stateStackNames.pop();sessionStorage.setItem('STATES_ARRAY_NAMES',JSON.stringify(this._stateStackNames));appCtxService[\"default\"].registerCtx('previousLocationDisplayName',this.getGoBackLocation());if(this._popState&&this._popState.state){logger[\"a\" /* default */].trace('&&&&& go pop state'+this._popState.state.name);this._goBackInProgress=true;this._state.go(this._popState.state.name,this._popState.params,{inherit:false});}}peekLastState(){if(this._stateStack&&this._stateStack.length>0){return this._stateStack[this._stateStack.length-1];}return undefined;}getGoBackLocation(){if(this._stateStackNames&&this._stateStackNames.length>0){return this._stateStackNames[this._stateStackNames.length-1];}return localeService[\"default\"].getLoadedTextFromKey('UIMessages.noPreviousLocation');}updateCurrentDisplayName(){var title=document.title;if(this._stateStackNames&&this._stateStackNames.length>0){let stackNameLen=this._stateStackNames.length;title!==''?this._stateStackNames[stackNameLen-1]=title.substr(title.indexOf('-')+1):this._stateStackNames[stackNameLen-1]=this._stateStackNames[stackNameLen-1].substr(this._stateStackNames[stackNameLen-1].indexOf('-')+1);sessionStorage.setItem('STATES_ARRAY',JSON.stringify(this._stateStack));}if(this._stateStackNames&&this._stateStackNames.length===0&&!lodash_default.a.isEmpty(title)){this._stateStackNames[0]=title.substr(title.indexOf('-')+1);sessionStorage.setItem('STATES_ARRAY',JSON.stringify(this._stateStack));}return undefined;}ifCurrentDisplayNameToBeUpdated(fromState,toState){// following conditions when to update the current display name:\n// a. When current page is refreshed\n// b. When this fn is invoked from routeChangeHandler\n// c. When this fn invoked from locationChangeSuccess however previous state and nextState is same\nif(fromState.name===''&&fromState.url==='^'||fromState.parent&&toState.parent||!toState.parent&&toState.name===fromState.name){this.updateCurrentDisplayName();}}/**\n     * Invoked when the state change was successful from UI router\n     * @param {object} event event body\n     * @param {object} toState state object transit to\n     * @param {object} toParams paramters for toState\n     * @param {object} fromState state object transit from\n     * @param {object} fromParams parameters for fromState\n     */routeStateChangeSuccess(toState,toParams,fromState,fromParams){debugService[\"a\" /* default */].debug('routes',fromState.name,toState.name);if(fromState&&fromState.name!=='checkAuthentication'){if(this._popState&&this._popState.state.name===toState.name&&this._goBackInProgress===true){this._popState=null;return;// revisitme- ported as it is during rebase in uirouter react there are no events\n// This condition needed to restrict to save state on stack once user clicked on back button more than once\n// and state name is different (Reference defect -LCS-462441)\n// if( !( event.name === '$locationChangeSuccess' && fromState.name !== toState.name ) ) {\n//     this._popState = null;\n// }\n// return;\n}// the below check is required in afx-next to restrict locationChangeSuccess code to\n// invoke the state persisting logic down below during a goBack operation; During a goBack\n// operation, routeChangeHandler triggers routeStateChangeSuccess to persist the state information;\n// we do not want the locationChangeSuccess to invoke this fn again in turn saving the goback\n// state as a new state again in turn causing the goBack command to navigate in circles between 2 locations\nif(this._goBackInProgress===true&&this._popState===null){this._goBackInProgress=false;return;}if(toState&&toState.parent&&fromState&&fromState.parent&&toState.parent===fromState.parent){return;}let title=lodash_default.a.isEmpty(document.title)?localeService[\"default\"].getLoadedTextFromKey('UIMessages.noPreviousLocation'):document.title;var newState={state:fromState,params:fromParams,displayName:title};if(this._stateStack.length>0){var lastState=this.peekLastState();if(lastState.state.name!==newState.state.name&&newState.state.name!==''){this._stateStack.push(newState);this._stateStackNames.push(newState.displayName);logger[\"a\" /* default */].trace('^^^^1 pushing newState '+newState.state.name);}else if(newState.state.name!==''&&lastState.params.uid!==newState.params.uid&&(newState.params.uid!==toParams.uid||newState.state.name!==toState.name)){this._stateStack.push(newState);this._stateStackNames.push(newState.displayName);logger[\"a\" /* default */].trace('^^^^2 pushing newState '+newState.state.name);}}else if(!newState.state.abstract){this._stateStack.push(newState);this._stateStackNames.push(newState.displayName);logger[\"a\" /* default */].trace('^^^^3 pushing newState '+newState.state.name);}// If persisted states count exceeds allowed count, remove earliest state\nif(this._stateStack.length>this._persistentStatesCount){this._stateStack.shift();this._stateStackNames.shift();}sessionStorage.setItem('STATES_ARRAY_NAMES',JSON.stringify(this._stateStackNames));sessionStorage.setItem('STATES_ARRAY',JSON.stringify(this._stateStack));this.ifCurrentDisplayNameToBeUpdated(fromState,toState);}// Once location is changed, fix focus navigation starting point ( check solution )\n//https://sarahmhigley.com/writing/focus-navigation-start-point/#assistive-tech-support\nlet eleToFocus=document.querySelector('.aw-skip-to-main-container');if(eleToFocus!==null){eleToFocus.focus();}appCtxService[\"default\"].registerCtx('previousLocationDisplayName',this.getGoBackLocation());}/**\n     * Function to update the state parameter\n     * @param {string} paramName parameter name\n     * @param {string} paramValue parameter value\n     */updateStateParameter(paramName,paramValue){this._state.params[paramName]=paramValue;this._state.go('.',this._state.params,{inherit:true});}/**\n     * Function to transition to a new state\n     * @param {string} transitionTo URL that transit to\n     * @param {object} toParams parameter for transitionTo\n     * @param {object} options transition options\n     */go(transitionTo,toParams,options){this._state.go(transitionTo,toParams,options);}}\n\n/***/ })\n\n}]);","inputSourceMap":null}