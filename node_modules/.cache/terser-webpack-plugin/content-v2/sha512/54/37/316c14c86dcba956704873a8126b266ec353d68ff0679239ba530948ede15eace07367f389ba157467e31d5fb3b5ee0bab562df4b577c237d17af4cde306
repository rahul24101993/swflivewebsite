{"code":"(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[76],{3115:function(e,t,n){var i;!function(l,o,a,r){\"use strict\";var s,d=[\"\",\"webkit\",\"Moz\",\"MS\",\"ms\",\"o\"],c=o.createElement(\"div\"),u=Math.round,p=Math.abs,m=Date.now;function f(e,t,n){return setTimeout(S(e,n),t)}function h(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function E(e,t,n){var i=\"DEPRECATED METHOD: \"+t+\"\\n\"+n+\" AT \\n\";return function(){var t=new Error(\"get-stack-trace\"),n=t&&t.stack?t.stack.replace(/^[^\\(]+?[\\n$]/gm,\"\").replace(/^\\s+at\\s+/gm,\"\").replace(/^Object.<anonymous>\\s*\\(/gm,\"{anonymous}()@\"):\"Unknown Stack Trace\",o=l.console&&(l.console.warn||l.console.log);return o&&o.call(l.console,i,n),e.apply(this,arguments)}}s=\"function\"!==typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError(\"Cannot convert undefined or null to object\");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==r&&null!==i)for(var l in i)i.hasOwnProperty(l)&&(t[l]=i[l])}return t}:Object.assign;var C=E((function(e,t,n){for(var i=Object.keys(t),l=0;l<i.length;)(!n||n&&e[i[l]]===r)&&(e[i[l]]=t[i[l]]),l++;return e}),\"extend\",\"Use `assign`.\"),v=E((function(e,t){return C(e,t,!0)}),\"merge\",\"Use `assign`.\");function b(e,t,n){var i,l=t.prototype;(i=e.prototype=Object.create(l)).constructor=e,i._super=l,n&&s(i,n)}function S(e,t){return function(){return e.apply(t,arguments)}}function L(e,t){return\"function\"==typeof e?e.apply(t&&t[0]||r,t):e}function T(e,t){return e===r?t:e}function A(e,t,n){g(I(t),(function(t){e.addEventListener(t,n,!1)}))}function _(e,t,n){g(I(t),(function(t){e.removeEventListener(t,n,!1)}))}function w(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function y(e,t){return e.indexOf(t)>-1}function I(e){return e.trim().split(/\\s+/g)}function R(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function x(e){return Array.prototype.slice.call(e,0)}function D(e,t,n){for(var i=[],l=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];R(l,a)<0&&i.push(e[o]),l[o]=a,o++}return n&&(i=t?i.sort((function(e,n){return e[t]>n[t]})):i.sort()),i}function N(e,t){for(var n,i,l=t[0].toUpperCase()+t.slice(1),o=0;o<d.length;){if((i=(n=d[o])?n+l:t)in e)return i;o++}return r}var P=1;function M(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||l}var O=\"ontouchstart\"in l,H=N(l,\"PointerEvent\")!==r,F=O&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B=\"touch\",V=\"mouse\",W=24,k=[\"x\",\"y\"],U=[\"clientX\",\"clientY\"];function j(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){L(e.options.enable,[e])&&n.handler(t)},this.init()}function G(e,t,n){var i=n.pointers.length,l=n.changedPointers.length,o=1&t&&i-l===0,a=12&t&&i-l===0;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,i=t.pointers,l=i.length;n.firstInput||(n.firstInput=z(t));l>1&&!n.firstMultiple?n.firstMultiple=z(t):1===l&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,d=t.center=q(i);t.timeStamp=m(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=Z(s,d),t.distance=K(s,d),function(e,t){var n=t.center,i=e.offsetDelta||{},l=e.prevDelta||{},o=e.prevInput||{};1!==t.eventType&&4!==o.eventType||(l=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y});t.deltaX=l.x+(n.x-i.x),t.deltaY=l.y+(n.y-i.y)}(n,t),t.offsetDirection=X(t.deltaX,t.deltaY);var c=Y(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=p(c.x)>p(c.y)?c.x:c.y,t.scale=a?(u=a.pointers,f=i,K(f[0],f[1],U)/K(u[0],u[1],U)):1,t.rotation=a?function(e,t){return Z(t[1],t[0],U)+Z(e[1],e[0],U)}(a.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,i,l,o,a=e.lastInterval||t,s=t.timeStamp-a.timeStamp;if(8!=t.eventType&&(s>25||a.velocity===r)){var d=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,u=Y(s,d,c);i=u.x,l=u.y,n=p(u.x)>p(u.y)?u.x:u.y,o=X(d,c),e.lastInterval=t}else n=a.velocity,i=a.velocityX,l=a.velocityY,o=a.direction;t.velocity=n,t.velocityX=i,t.velocityY=l,t.direction=o}(n,t);var u,f;var h=e.element;w(t.srcEvent.target,h)&&(h=t.srcEvent.target);t.target=h}(e,n),e.emit(\"hammer.input\",n),e.recognize(n),e.session.prevInput=n}function z(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:u(e.pointers[n].clientX),clientY:u(e.pointers[n].clientY)},n++;return{timeStamp:m(),pointers:t,center:q(t),deltaX:e.deltaX,deltaY:e.deltaY}}function q(e){var t=e.length;if(1===t)return{x:u(e[0].clientX),y:u(e[0].clientY)};for(var n=0,i=0,l=0;l<t;)n+=e[l].clientX,i+=e[l].clientY,l++;return{x:u(n/t),y:u(i/t)}}function Y(e,t,n){return{x:t/e||0,y:n/e||0}}function X(e,t){return e===t?1:p(e)>=p(t)?e<0?2:4:t<0?8:16}function K(e,t,n){n||(n=k);var i=t[n[0]]-e[n[0]],l=t[n[1]]-e[n[1]];return Math.sqrt(i*i+l*l)}function Z(e,t,n){n||(n=k);var i=t[n[0]]-e[n[0]],l=t[n[1]]-e[n[1]];return 180*Math.atan2(l,i)/Math.PI}j.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(M(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4},$=\"mousedown\",Q=\"mousemove mouseup\";function ee(){this.evEl=$,this.evWin=Q,this.pressed=!1,j.apply(this,arguments)}b(ee,j,{handler:function(e){var t=J[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:V,srcEvent:e}))}});var te={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},ne={2:B,3:\"pen\",4:V,5:\"kinect\"},ie=\"pointerdown\",le=\"pointermove pointerup pointercancel\";function oe(){this.evEl=ie,this.evWin=le,j.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}l.MSPointerEvent&&!l.PointerEvent&&(ie=\"MSPointerDown\",le=\"MSPointerMove MSPointerUp MSPointerCancel\"),b(oe,j,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace(\"ms\",\"\"),l=te[i],o=ne[e.pointerType]||e.pointerType,a=o==B,r=R(t,e.pointerId,\"pointerId\");1&l&&(0===e.button||a)?r<0&&(t.push(e),r=t.length-1):12&l&&(n=!0),r<0||(t[r]=e,this.callback(this.manager,l,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(r,1))}});var ae={touchstart:1,touchmove:2,touchend:4,touchcancel:8},re=\"touchstart\",se=\"touchstart touchmove touchend touchcancel\";function de(){this.evTarget=re,this.evWin=se,this.started=!1,j.apply(this,arguments)}function ce(e,t){var n=x(e.touches),i=x(e.changedTouches);return 12&t&&(n=D(n.concat(i),\"identifier\",!0)),[n,i]}b(de,j,{handler:function(e){var t=ae[e.type];if(1===t&&(this.started=!0),this.started){var n=ce.call(this,e,t);12&t&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:e})}}});var ue={touchstart:1,touchmove:2,touchend:4,touchcancel:8},pe=\"touchstart touchmove touchend touchcancel\";function me(){this.evTarget=pe,this.targetIds={},j.apply(this,arguments)}function fe(e,t){var n=x(e.touches),i=this.targetIds;if(3&t&&1===n.length)return i[n[0].identifier]=!0,[n,n];var l,o,a=x(e.changedTouches),r=[],s=this.target;if(o=n.filter((function(e){return w(e.target,s)})),1===t)for(l=0;l<o.length;)i[o[l].identifier]=!0,l++;for(l=0;l<a.length;)i[a[l].identifier]&&r.push(a[l]),12&t&&delete i[a[l].identifier],l++;return r.length?[D(o.concat(r),\"identifier\",!0),r]:void 0}b(me,j,{handler:function(e){var t=ue[e.type],n=fe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:e})}});function he(){j.apply(this,arguments);var e=S(this.handler,this);this.touch=new me(this.manager,e),this.mouse=new ee(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ge(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,Ee.call(this,t)):12&e&&Ee.call(this,t)}function Ee(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)}),2500)}}function Ce(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var l=this.lastTouches[i],o=Math.abs(t-l.x),a=Math.abs(n-l.y);if(o<=25&&a<=25)return!0}return!1}b(he,j,{handler:function(e,t,n){var i=n.pointerType==B,l=n.pointerType==V;if(!(l&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)ge.call(this,t,n);else if(l&&Ce.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ve=N(c.style,\"touchAction\"),be=ve!==r,Se=\"compute\",Le=\"auto\",Te=\"manipulation\",Ae=\"none\",_e=\"pan-x\",we=\"pan-y\",ye=function(){if(!be)return!1;var e={},t=l.CSS&&l.CSS.supports;return[\"auto\",\"manipulation\",\"pan-y\",\"pan-x\",\"pan-x pan-y\",\"none\"].forEach((function(n){e[n]=!t||l.CSS.supports(\"touch-action\",n)})),e}();function Ie(e,t){this.manager=e,this.set(t)}Ie.prototype={set:function(e){e==Se&&(e=this.compute()),be&&this.manager.element.style&&ye[e]&&(this.manager.element.style[ve]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){L(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(y(e,Ae))return Ae;var t=y(e,_e),n=y(e,we);if(t&&n)return Ae;if(t||n)return t?_e:we;if(y(e,Te))return Te;return Le}(e.join(\" \"))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var i=this.actions,l=y(i,Ae)&&!ye.none,o=y(i,we)&&!ye[\"pan-y\"],a=y(i,_e)&&!ye[\"pan-x\"];if(l){var r=1===e.pointers.length,s=e.distance<2,d=e.deltaTime<250;if(r&&s&&d)return}if(!a||!o)return l||o&&6&n||a&&n&W?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Re=32;function xe(e){this.options=s({},this.defaults,e||{}),this.id=P++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function De(e){return 16&e?\"cancel\":8&e?\"end\":4&e?\"move\":2&e?\"start\":\"\"}function Ne(e){return 16==e?\"down\":8==e?\"up\":2==e?\"left\":4==e?\"right\":\"\"}function Pe(e,t){var n=t.manager;return n?n.get(e):e}function Me(){xe.apply(this,arguments)}function Oe(){Me.apply(this,arguments),this.pX=null,this.pY=null}function He(){Me.apply(this,arguments)}function Fe(){xe.apply(this,arguments),this._timer=null,this._input=null}function Be(){Me.apply(this,arguments)}function Ve(){Me.apply(this,arguments)}function We(){xe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ke(e,t){return(t=t||{}).recognizers=T(t.recognizers,ke.defaults.preset),new Ue(e,t)}xe.prototype={defaults:{},set:function(e){return s(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(h(e,\"recognizeWith\",this))return this;var t=this.simultaneous;return t[(e=Pe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return h(e,\"dropRecognizeWith\",this)||(e=Pe(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(h(e,\"requireFailure\",this))return this;var t=this.requireFail;return-1===R(t,e=Pe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(h(e,\"dropRequireFailure\",this))return this;e=Pe(e,this);var t=R(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function i(n){t.manager.emit(n,e)}n<8&&i(t.options.event+De(n)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),n>=8&&i(t.options.event+De(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Re},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=s({},e);if(!L(this.options.enable,[this,t]))return this.reset(),void(this.state=Re);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},b(Me,xe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=6&t,l=this.attrTest(e);return i&&(8&n||!l)?16|t:i||l?4&n?8|t:2&t?4|t:2:Re}}),b(Oe,Me,{defaults:{event:\"pan\",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(we),e&W&&t.push(_e),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,l=e.direction,o=e.deltaX,a=e.deltaY;return l&t.direction||(6&t.direction?(l=0===o?1:o<0?2:4,n=o!=this.pX,i=Math.abs(e.deltaX)):(l=0===a?1:a<0?8:16,n=a!=this.pY,i=Math.abs(e.deltaY))),e.direction=l,n&&i>t.threshold&&l&t.direction},attrTest:function(e){return Me.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ne(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),b(He,Me,{defaults:{event:\"pinch\",threshold:0,pointers:2},getTouchAction:function(){return[Ae]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?\"in\":\"out\";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),b(Fe,xe,{defaults:{event:\"press\",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Le]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,l=e.deltaTime>t.time;if(this._input=e,!i||!n||12&e.eventType&&!l)this.reset();else if(1&e.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return Re},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+\"up\",e):(this._input.timeStamp=m(),this.manager.emit(this.options.event,this._input)))}}),b(Be,Me,{defaults:{event:\"rotate\",threshold:0,pointers:2},getTouchAction:function(){return[Ae]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),b(Ve,Me,{defaults:{event:\"swipe\",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Oe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&W&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Ne(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),b(We,xe,{defaults:{event:\"tap\",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Te]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,l=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(i&&l&&n){if(4!=e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||K(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return Re},failTimeout:function(){return this._timer=f((function(){this.state=Re}),this.options.interval,this),Re},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ke.VERSION=\"2.0.7\",ke.defaults={domEvents:!1,touchAction:Se,enable:!0,inputTarget:null,inputClass:null,preset:[[Be,{enable:!1}],[He,{enable:!1},[\"rotate\"]],[Ve,{direction:6}],[Oe,{direction:6},[\"swipe\"]],[We],[We,{event:\"doubletap\",taps:2},[\"tap\"]],[Fe]],cssProps:{userSelect:\"none\",touchSelect:\"none\",touchCallout:\"none\",contentZooming:\"none\",userDrag:\"none\",tapHighlightColor:\"rgba(0,0,0,0)\"}};function Ue(e,t){var n;this.options=s({},ke.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(H?oe:F?me:O?he:ee))(n,G),this.touchAction=new Ie(this,this.options.touchAction),je(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function je(e,t){var n,i=e.element;i.style&&(g(e.options.cssProps,(function(l,o){n=N(i.style,o),t?(e.oldCssProps[n]=i.style[n],i.style[n]=l):i.style[n]=e.oldCssProps[n]||\"\"})),t||(e.oldCssProps={}))}Ue.prototype={set:function(e){return s(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var i=this.recognizers,l=t.curRecognizer;(!l||l&&8&l.state)&&(l=t.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===t.stopped||l&&n!=l&&!n.canRecognizeWith(l)?n.reset():n.recognize(e),!l&&14&n.state&&(l=t.curRecognizer=n),o++}},get:function(e){if(e instanceof xe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(h(e,\"add\",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(h(e,\"remove\",this))return this;if(e=this.get(e)){var t=this.recognizers,n=R(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var n=this.handlers;return g(I(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==r){var n=this.handlers;return g(I(e),(function(e){t?n[e]&&n[e].splice(R(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent(\"Event\");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&je(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(ke,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Re,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:W,DIRECTION_ALL:30,Manager:Ue,Input:j,TouchAction:Ie,TouchInput:me,MouseInput:ee,PointerEventInput:oe,TouchMouseInput:he,SingleTouchInput:de,Recognizer:xe,AttrRecognizer:Me,Tap:We,Pan:Oe,Swipe:Ve,Pinch:He,Rotate:Be,Press:Fe,on:A,off:_,each:g,merge:v,extend:C,assign:s,inherit:b,bindFn:S,prefixed:N}),(\"undefined\"!==typeof l?l:\"undefined\"!==typeof self?self:{}).Hammer=ke,(i=function(){return ke}.call(t,n,t,e))===r||(e.exports=i)}(window,document)},3218:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"initializeTable\",(function(){return Ce}));var i=n(7),l=n(1),o=n.n(l),a=n(6),r=n(122),s=n(2902),d=n(2908),c={},u=function(e){var t=e.currentTarget,n=function(e){return e.originalEvent&&(e=e.originalEvent),e.preventDefault(),!1},i=function(e){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),e.cancelBubble=!0,t.dispatchEvent(d.a.createCustomEvent(s.a.EVENT_ON_ELEM_DRAG,e))},l=function(o){o.originalEvent&&(o=e.originalEvent),o.preventDefault(),document.removeEventListener(\"mouseup\",l),document.removeEventListener(\"mousemove\",i),document.removeEventListener(\"mousedown\",n),document.removeEventListener(\"mouseover\",n),o.cancelBubble=!0,t.dispatchEvent(d.a.createCustomEvent(s.a.EVENT_ON_ELEM_DRAG_END,o))};!function(e){var o=!1,a=function(){t.removeEventListener(\"mouseup\",a),o=!1};o=!0,t.addEventListener(\"mouseup\",a),setTimeout((function(){var r;!0===o&&(a(),(r=e).originalEvent&&(r=r.originalEvent),r.preventDefault(),r.cancelBubble=!0,document.addEventListener(\"mouseup\",l),document.addEventListener(\"mousemove\",i),document.addEventListener(\"mousedown\",n),document.addEventListener(\"mouseover\",n),t.dispatchEvent(d.a.createCustomEvent(s.a.EVENT_ON_ELEM_DRAG_START,r)))}),160)}(e)};i.a.subscribe(\"dragDropEvent.highlight\",(function(e){c.handleDragDropHighlightPLTable(e)}));var p=function(e,t,n){t?n?e.classList.add(n):(e.classList.add(s.a.CLASS_THEME_DROP_FRAME),e.classList.add(s.a.CLASS_WIDGETS_DROP_FRAME)):n?e.classList.remove(n):(e.classList.remove(s.a.CLASS_THEME_DROP_FRAME),e.classList.remove(s.a.CLASS_WIDGETS_DROP_FRAME))},m=function(e,t,n,i){o.a.forEach(e,(function(e){e.children&&(p(e,i,n?s.a.CLASS_DONOT_HIGHLIGHT_INDIVIDUAL_ROWS:t?s.a.CLASS_PINNED_CONTAINER_DROP_FRAME:s.a.CLASS_SCROLL_CONTAINER_DROP_FRAME),o.a.forEach(e.children,(function(e){n?p(e,i,s.a.CLASS_DONOT_HIGHLIGHT_INDIVIDUAL_ROWS):p(e,i)})))}))},f=function(e,t,n){var i=null,l=null;if(n)p(e,t),i=e.querySelector(\".aw-splm-tablePinnedContainer\"),l=e.querySelector(\".aw-splm-tableScrollContainer\");else{var a=d.a.closestElement(e,\".aw-splm-table\");i=a.querySelector(\".aw-splm-tablePinnedContainer\"),l=a.querySelector(\".aw-splm-tableScrollContainer\");var r=parseInt(e.getAttribute(\"data-indexnumber\"))}if(i&&l){var s,c,u=[],f=[];o.a.isUndefined(r)?(u=i.querySelectorAll(\"div.ui-grid-row\"),f=l.querySelectorAll(\"div.ui-grid-row\")):((u=i.querySelectorAll(\"div.ui-grid-row[data-indexnumber='\"+r+\"']\"))&&u.length>0&&(s=u[0]),(f=l.querySelectorAll(\"div.ui-grid-row[data-indexnumber='\"+r+\"']\"))&&f.length>0&&(c=f[0])),!n&&!o.a.isUndefined(r)&&s&&c&&(p(s,t),p(c,t)),m(u,!0,n,t),m(f,!1,n,t)}};var h=c={enableDragging:function(e){e.addEventListener(\"mousedown\",u)},disableDragging:function(e){e.removeEventListener(\"mousedown\",u)},handleDragDropHighlightPLTable:function(e){if(!o.a.isUndefined(e)&&!o.a.isUndefined(e.targetElement)&&e.targetElement.classList){var t=e.isHighlightFlag,n=e.targetElement;t?n.classList.contains(s.a.CLASS_ROW)?f(n,!0,!1):n.classList.contains(s.a.CLASS_TABLE)&&f(n,!0,!0):n.classList.contains(s.a.CLASS_ROW)?f(n,!1,!1):n.classList.contains(s.a.CLASS_TABLE)&&f(n,!1,!0)}}},g=function(e){var t=!1,n=!1,i=this,l=function(e,t){var n=e.getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0],i=t.getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0];if(n&&n.columnDef&&i&&i.columnDef){var l=n.columnDef.index;return n.columnDef.index=i.columnDef.index,i.columnDef.index=l,!0}return!1},a=function(i){var o,a,r,c=0,u=0;i.classList.add(s.a.CLASS_HEADER_DRAGGABLE);var p=i.getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0],m=i.getElementsByClassName(s.a.CLASS_CELL_CONTENTS)[0];h.enableDragging(m),m.addEventListener(s.a.EVENT_ON_ELEM_DRAG_START,(function(t){d.a.getTableMenuService(e).ensureAllTableMenusDismissed();var n=t?t.detail:window.event;(o=i.cloneNode(!0)).classList.add(s.a.CLASS_UTILITY_HIDDEN),o.setAttribute(\"id\",o.id+\"ClonedHeader\");var l=d.a.closestElement(i,\".\"+s.a.CLASS_PIN_CONTAINER+\",.\"+s.a.CLASS_SCROLL_CONTAINER),c=l.getElementsByClassName(s.a.CLASS_VIEWPORT)[0].scrollLeft;l.appendChild(o),o.style.left=i.offsetLeft-c+\"px\",o.style.top=i.offsetTop+\"px\",u=n.clientX,p&&p.columnDef&&(a=p.columnDef,r=a.index)})),m.addEventListener(s.a.EVENT_ON_ELEM_DRAG,(function(e){var a=e?e.detail:window.event;t||(i.classList.add(\"stationaryHeader\"),o.classList.add(\"dragHeader\"),o.classList.remove(s.a.CLASS_UTILITY_HIDDEN),t=!0),c=u-a.clientX,u=a.clientX,o.style.left=o.offsetLeft-c+\"px\",n=function(e,t){var n=e.getBoundingClientRect(),i=e.nextSibling,o=e.previousSibling;return i&&t>n.right+i.getBoundingClientRect().width/3&&i.classList.contains(s.a.CLASS_HEADER_DRAGGABLE)&&l(i,e)?(e.parentNode.insertBefore(i,e),!0):!!(o&&t<n.left-o.getBoundingClientRect().width/2&&o.classList.contains(s.a.CLASS_HEADER_DRAGGABLE)&&l(o,e))&&(e.parentNode.insertBefore(e,o),!0)}(i,a.clientX)||n})),m.addEventListener(s.a.EVENT_ON_ELEM_DRAG_END,(function(){if(i.classList.remove(\"stationaryHeader\"),o.parentNode.removeChild(o),t=!1,n){n=!1;var l={name:a.name,originalPosition:r};e._tableInstance.tableInstanceCallbacks.columnsRearranged(l),function(t,n){if(t!==n.index)for(var i=t<n.index?-1:1,l=d.a.getColumnContentCellElementsByIndex(e,n.index+i),o=d.a.getColumnContentCellElementsByIndex(e,n.index),a=0;a<o.length;a++){var r=o[a],s=l[a];t<n.index&&(s=s.nextSibling),r.parentNode.insertBefore(r,s)}}(r,a)}}))};return i.initialize=function(){var t=e.getElementsByClassName(s.a.CLASS_HEADER_CELL);o.a.forEach(t,(function(e){var t,n=e.getElementsByClassName(s.a.CLASS_COLUMN_DEF);n.length>0&&(t=n[0].columnDef),t&&!1!==t.enableColumnMoving&&a(e)}))},i.initialize(),i},E=n(26),C=function(){var e,t,n,i,l,o,a,r,s=null,d=null,c=0,u=0,p=function(e){return e.touches[0].pageY},m=function(e){return e.touches[0].pageX},f=function(){d.scrollTop-u>=0&&(d.scrollTop-=u),d.scrollLeft-c>=0&&(d.scrollLeft-=c)},h=function(){var e=Date.now(),t=e-l;l=e;var o=1e3*u/(1+t),a=1e3*c/(1+t);u=0,c=0,i=Math.round(.4*o+.2*i),n=Math.round(.4*a+.2*n)},g=function(){if(r||a){var e=Date.now()-l;u=-r*Math.exp(-e/325),c=-a*Math.exp(-e/325),u>.5||u<-.5||c>.5||c<-.5?(f(),requestAnimationFrame(g)):f()}},E=function(s){e=p(s),t=m(s),i=0,n=0,r=0,a=0,l=Date.now(),clearInterval(o),o=setInterval(h,50)},C=function(n){if(d.scrollTop-(e-p(n))<=0||d.scrollLeft-(t-m(n))<=0)n.preventDefault(),n.stopPropagation();else{var i=p(n);u=e-i,e=i;var l=m(n);c=t-l,t=l}},v=function(){clearInterval(o),(i>10||i<-10||n>10||n<-10)&&(r=.6*i,a=.6*n,l=Date.now(),requestAnimationFrame(g))};this.enable=function(e,t){null!==e&&((s=e).addEventListener(\"touchstart\",E,{passive:!0}),s.addEventListener(\"touchmove\",C,{passive:!0}),s.addEventListener(\"touchend\",v,{passive:!0})),null!==t&&((d=t).addEventListener(\"touchstart\",E,{passive:!0}),d.addEventListener(\"touchmove\",C,{passive:!0}),d.addEventListener(\"touchend\",v,{passive:!0}))},this.disable=function(){null!==s&&(s.removeEventListener(\"touchstart\",E),s.removeEventListener(\"touchmove\",C),s.removeEventListener(\"touchend\",v),s=null),null!==d&&(d.removeEventListener(\"touchstart\",E),d.removeEventListener(\"touchmove\",C),d.removeEventListener(\"touchend\",v),d=null)}};var v=function(e){let t=this,n={},i=0,l=0,r=[],d=[],c=!1,u=!1,p=e,m=p-n.headerHeight,f=0,h=14,g=0,v=0,b=!1,S=null,L=!1,T=!1,A=0,_=0,w=E.default.isIE||E.default.isFirefox?200:0,y=E.default.isIE?500:0,I=E.default.isIE||E.default.isFirefox?1/0:0,R=new C,x=new Date,D=0,N=0,P=o.a.debounce((function(){n.scrollViewportElem&&n.scrollViewportElem.offsetWidth&&(_=n.scrollViewportElem.offsetWidth),n.updateScrollColumnsInView(v,_),n.updateVisibleCells(n.scrollParentElem)}),y),M=o.a.debounce((function(){!function(){let e;e=i>l?t.handleScrollDown:Y;l=i,i>0?n.tableElem.classList.contains(s.a.CLASS_TABLE_SCROLLED)||n.tableElem.classList.add(s.a.CLASS_TABLE_SCROLLED):n.tableElem.classList.contains(s.a.CLASS_TABLE_SCROLLED)&&n.tableElem.classList.remove(s.a.CLASS_TABLE_SCROLLED);e.call()}()}),w,{maxWait:I});t.initializeGrid=function(e){n=e,n.pinParentElem=n.pinViewportElem.children[0],n.scrollParentElem=n.scrollViewportElem.children[0],n.totalFound=n.loadedVMObjects.length,n.dynamicRowHeightStatus=n.dynamicRowHeightStatus||!1,n.scrollViewportElem.removeEventListener(\"scroll\",z),n.scrollViewportElem.removeEventListener(\"scroll\",U),n.pinViewportElem.removeEventListener(\"scroll\",q),n.scrollViewportElem.addEventListener(\"scroll\",z),n.scrollViewportElem.addEventListener(\"scroll\",U),n.pinViewportElem.addEventListener(\"scroll\",q),R.enable(n.pinViewportElem,n.scrollViewportElem),c=!0};let O,H=function(){return p-n.headerHeight};function F(e){g=e,function(e){h=Math.max(10,Math.min(30,e))}(e)}function B(e){return d[e]?e===d.length-1?d[e]:d[e]-1:n.rowHeight}function V(e){let t=0;for(let n=0;n<e;n++)t+=B(n);return t}function W(e){let t=0,n=0;for(;t<e;)t+=B(n),n++;return n}function k(){return W(i+m)-1}function U(){O&&clearTimeout(O),O=setTimeout((function(){!function(){const e=n.scrollParentElem;if(r=e.querySelectorAll(n.rowSelector),0===r.length)a.a.error(\"Rendering error\");else{let e,t,l;const o=r[0],a=parseInt(o.getAttribute(\"data-indexNumber\"));l=n.treeTableEditSettings?(a-n.treeTableEditSettings.firstIndex)*n.rowHeight-i:V(a)-i,l<0&&(t=Math.abs(W(i)-a),e=t-h,e>0&&X(e,0));const s=r[r.length-1],d=parseInt(s.getAttribute(\"data-indexNumber\")),c=g*n.rowHeight+i,u=k();l=n.treeTableEditSettings?(d-n.treeTableEditSettings.firstIndex)*n.rowHeight+n.rowHeight-c:d-u,l>0&&(t=d-u,e=t-h,e>0&&X(r.length-1,r.length-e-1))}t.updateRowAlignment()}()}),300)}function j(e){n.pinViewportElem.style.top=String(-1*e)+\"px\",N=e}function G(){n.pinViewportElem.style.top=\"0px\",N=0}function z(e){x=new Date;let t=i;i=n.scrollViewportElem.scrollTop;let l=v;v=n.scrollViewportElem.scrollLeft,t===i&&i<0&&l===v&&v<0&&(e.preventDefault(),e.stopPropagation());let o=n.pinViewportElem;if(0!==A||t===i&&0!==i||(T=!0,o.scrollTop=i),n.onStartScroll(),l!==v&&v>=0&&(n.syncHeader(!1,v),P()),t!==i&&i>=0){let e=o.offsetHeight+i-o.scrollHeight;e>0?n.scrollViewportElem.clientWidth>0&&j(e):N>0&&G(),M()}A-=1,A<0&&(A=0)}function q(e){if(!0!==T){var t=n.pinViewportElem.scrollLeft;n.syncHeader(!0,t),n.pinViewportElem.scrollTop!==i&&(A+=1,n.pinViewportElem.scrollTop!==n.pinViewportElem.scrollHeight-n.pinViewportElem.offsetHeight?n.scrollViewportElem.scrollTop=n.pinViewportElem.scrollTop:n.scrollViewportElem.scrollTop=n.pinViewportElem.scrollTop+40,e.preventDefault())}else T=!1}function Y(){if(r&&r.length){var e,l=r[0],o=parseInt(l.getAttribute(\"data-indexNumber\"));e=n.treeTableEditSettings?(o-n.treeTableEditSettings.firstIndex)*n.rowHeight:V(o);var a=W(i);if(!0===e>i+m)t.handleScroll();else if(e>V(a-h)){var s=o-a,d=o-1;Z(d-h-(s=s<0?0:s),d)}}else t.handleScroll()}function X(e,t){n.removeRows(e,t),r=n.scrollParentElem.querySelectorAll(n.rowSelector)}function K(e,t){if(n.renderRows(e,t),r=n.scrollParentElem.querySelectorAll(n.rowSelector),n.dynamicRowHeightStatus){let e=d.length-1,t=r[0].getAttribute(\"data-indexnumber\"),n=r[r.length-1].getAttribute(\"data-indexnumber\");(e<t||e>n)&&(d[d.length-1]=null);for(let i of r){let e=parseInt(i.getAttribute(\"data-indexnumber\"));d[e]=i.offsetHeight}}}function Z(e,i,l){var o;n.treeTableEditSettings?(e<n.treeTableEditSettings.firstIndex&&(e=n.treeTableEditSettings.firstIndex),i>n.treeTableEditSettings.lastIndex&&(i=n.treeTableEditSettings.lastIndex),o=n.treeTableEditSettings.totalDataLength):(e<0&&(e=0),o=n.totalFound),e>=o&&(0===o?(X(r.length-1,0),t.updateRowAlignment()):(n.updateScrollColumnsInView(v,_),K(e,i)),e===o)?a.a.trace(\"Table scroll service: Rendering of page data complete. No more data to render.\"):(e>o&&(i-=e,e=0),i>=o&&(i=o-1),l&&X(r.length-1,0),K(e,i),t.updateRowAlignment(),function(){var e=0,t=0,i=r[0];e=parseInt(i.getAttribute(\"data-indexNumber\"));var l=r[r.length-1];t=parseInt(l.getAttribute(\"data-indexNumber\"));var o={index:e,uid:i.vmo.uid,levelNdx:i.vmo.levelNdx},a={index:t,uid:l.vmo.uid,levelNdx:l.vmo.levelNdx};n.afterGridRenderCallback(o,a)}())}t.checkForResize=o.a.debounce((async function(){if(D=new Date-x,D<200)return;let e=n.scrollViewportElem.offsetWidth;if(e!==_&&(e>_?(_=e,n.updateScrollColumnsInView(v)):(_=e,n.updateScrollColumnsInView(v,_)),n.updateVisibleCells(n.scrollParentElem),t.handlePinViewportScrollbarPadding()),n.directiveElem.clientHeight!==p){p=n.directiveElem.clientHeight;let e=n.scrollViewportElem.clientHeight||n.pinViewportElem.clientHeight||p,i=Math.floor(e/n.rowHeight);m=H(),F(i),await t.handleScroll()}}),200),t.isInitialized=function(){return c},t.renderInitialRows=function(){t.initializeProperties(),n.initialRowIndex=f,t.handleScroll()},t.getFirstRenderedItemIndex=function(){var e=r[0];return parseInt(e.getAttribute(\"data-indexNumber\"))},t.getLastRenderedItemIndex=function(){var e=r[r.length-1];return parseInt(e.getAttribute(\"data-indexNumber\"))},t.setContainerHeight=function(e){p=e,m=H(),n.scrollViewportElem.style.maxHeight=String(m)+\"px\",n.pinViewportElem.style.maxHeight=String(m)+\"px\"},t.setDynamicRowHeight=function(e){n.dynamicRowHeightStatus=e,n.tableElem._tableInstance&&(n.tableElem._tableInstance.dynamicRowHeightStatus=e)},t.initializeProperties=function(){d=[],void 0===p?(p=e>0?e:n.directiveElem.clientHeight,m=H()):!1===u&&t.setContainerHeight(p),u=!0,n.scrollViewportElem.style.minHeight=String(n.rowHeight)+\"px\",n.pinViewportElem.style.minHeight=String(n.rowHeight)+\"px\";let i=m;i<0&&(i=0),F(Math.floor(i/n.rowHeight)),a.a.trace(\"Table scroll service: Visible row count - \"+g)},t.updateRowAlignment=function(){let e,t=0;if(r){let e=r[0];if(e&&e.getAttribute(\"data-indexNumber\")){let i=parseInt(e.getAttribute(\"data-indexNumber\"));t=n.treeTableEditSettings?(i-n.treeTableEditSettings.firstIndex)*n.rowHeight:V(i)}}n.pinParentElem.style.top=t+\"px\",n.scrollParentElem.style.top=t+\"px\",e=n.treeTableEditSettings?(n.treeTableEditSettings.lastIndex-n.treeTableEditSettings.firstIndex+1)*n.rowHeight-t:V(n.totalFound)-t,n.pinParentElem.style.height=e+\"px\",n.scrollParentElem.style.height=e+\"px\"},t.getRowHeight=function(){return n.rowHeight},t.manualScroll=function(e){let i=e?t.getRowHeight():-t.getRowHeight();return n.scrollViewportElem.scrollTop+=i,n.scrollViewportElem.scrollTop},t.getScrollTop=function(){return n.scrollViewportElem.scrollTop},t.setRowHeight=function(e){n.rowHeight=e},t.getTotalFound=function(){return n.totalFound},t.setLoadedVMObjects=function(e){!0===L&&function(e){L=!1,b=!0;let t=W(n.scrollViewportElem.scrollTop);S=V(t+e)}(e.length-n.totalFound),n.loadedVMObjects=e,n.totalFound=e.length},t.setScrollPositionToBeMaintained=function(){L=!0},t.isScrollToRowInProgress=function(){return b},t.handlePinViewportScrollbarPadding=function(){const e=n.pinViewportElem,t=n.scrollViewportElem;if(i>=0)if(\"0px\"===e.style.top&&t.clientWidth>0){let t=e.offsetHeight+i-e.scrollHeight;t>0&&j(t)}else\"0px\"!==e.style.top&&t.clientWidth<=0&&G()},t.handleScrollDown=function(){if(r&&r.length){let e,l=r[r.length-1],o=parseInt(l.getAttribute(\"data-indexNumber\"));e=n.treeTableEditSettings?(o-n.treeTableEditSettings.firstIndex)*n.rowHeight+n.rowHeight:V(o+1);let a=k();if(!0===e<i)o+1<n.totalFound&&t.handleScroll();else if(e<V(a+h)){let e=a-o;e=e<0?0:e;let t=o+1;Z(t,t+h+e)}}else t.handleScroll()},t.handleScroll=function(){var e;if(n.initialRowIndex){t.updateRowAlignment();var o=W(V(n.initialRowIndex)-.75*m),a=V(o);delete n.initialRowIndex,i=a<0?0:a,e=o,n.scrollViewportElem.scrollTop=i}!0===b&&(t.updateRowAlignment(),n.scrollViewportElem.scrollTop=S,b=!1,S=null),e||(e=W(i));var r=e-h,s=e+g+h;if(s>n.totalFound-1){var d=s-n.totalFound-1;s-=d,r-=d}Z(r,s,!0),l=i},t.setupTreeEditScroll=function(e){if(e){if(r&&r[0]){for(var i=r[0],l=parseInt(i.getAttribute(\"data-indexNumber\")),o=n.loadedVMObjects[l].props;o&&l>0;)(o=n.loadedVMObjects[l-1].props)&&l--;var a=r[r.length-1],s=parseInt(a.getAttribute(\"data-indexNumber\"));for(o=n.loadedVMObjects[s].props;o&&s<n.totalFound-1;)(o=n.loadedVMObjects[s+1].props)&&s++;n.treeTableEditSettings={firstIndex:l,lastIndex:s,totalDataLength:s+1},t.updateRowAlignment()}}else if(n.treeTableEditSettings){var d=(n.scrollViewportElem.scrollTop/t.getRowHeight()+n.treeTableEditSettings.firstIndex-1)*t.getRowHeight();delete n.treeTableEditSettings,t.updateRowAlignment(),t.handleScroll(),n.pinViewportElem.scrollTop=d,n.scrollViewportElem.scrollTop=d}},t.resetInfiniteScroll=function(){t.setLoadedVMObjects([]),t.resetInitialRowIndex(),d=[],n.scrollViewportElem.scrollTop=0,n.pinViewportElem.style.top=\"0px\",n.scrollViewportElem.style.top=\"0px\",i=0,t.handleScroll()},t.resetRowHeightCache=function(){d=[]},t.destroyGrid=function(){n.scrollViewportElem&&n.scrollViewportElem.removeEventListener(\"scroll\",z),n.scrollViewportElem&&n.scrollViewportElem.removeEventListener(\"scroll\",U),n.pinViewportElem&&n.pinViewportElem.removeEventListener(\"scroll\",q),R.disable(),t.checkForResize.cancel(),P.cancel(),M.cancel()},t.scrollToRowIndex=function(e){if(!0===t.isInitialized()){var i=null,l=0,o=0;r.length>0&&(l=Number(r[0].getAttribute(\"data-indexnumber\")),o=Number(r[r.length-1].getAttribute(\"data-indexnumber\")));for(var a=n.scrollViewportElem.getBoundingClientRect(),s=0;s<e.length;s++){var d=e[s];if(r.length>0){if(d>o||d<l){f=d;continue}if((i=r[d-l].getBoundingClientRect()).top<a.top||i.bottom>a.bottom){f=d;continue}f=d}return!1}var c=n.scrollViewportElem.scrollHeight-n.scrollViewportElem.clientHeight,u=Math.floor(V(f)-.75*m),p=f-l;r[p]&&((i=r[p].getBoundingClientRect()).top<a.top&&i.bottom>a.top?u=V(f):i.top<a.bottom&&i.bottom>a.bottom&&(u=n.scrollViewportElem.scrollTop+(i.bottom-a.bottom))),u>c&&(b=!0,S=u),n.scrollViewportElem.scrollTop=u}else f=e[0];return!0},t.scrollToColumn=function(e){(e.startPosition<=v||e.startPosition>v+_)&&(n.scrollViewportElem.scrollLeft=e.startPosition-10)},t.isInitialRowIndexInView=function(){let e=Number(r[0].getAttribute(\"data-indexnumber\")),t=r[f-e];if(void 0===t)return!1;let n=t.getAttribute(\"data-indexnumber\"),l=W(i),o=k();return!(n<l||f>o)},t.resetInitialRowIndex=function(){f=0}},b=n(12),S=n(65),L=n(2943),T=n(27),A=n(2944);var _=function(e,t){let n=this,i=e,l=t,o=d.a.getTableInstance(i),a=new A.a(e);const r=\"data-indexNumber\",c=function(e){e.preventDefault(),e.stopPropagation()},u=function(e){switch(e){case\"Up\":case\"ArrowUp\":return\"UP\";case\"Down\":case\"ArrowDown\":return\"DOWN\";case\"Left\":case\"ArrowLeft\":return\"LEFT\";case\"Right\":case\"ArrowRight\":return\"RIGHT\";default:return null}},p=function(e){e.target.tabIndex=\"0\"},m=function(e){e.target.tabIndex=\"-1\"};n.setOnFocusAndBlur=function(e){e.addEventListener(\"focus\",p),e.addEventListener(\"blur\",m)};const f=function(e){return e.classList.contains(s.a.CLASS_HEADER_CELL)},h=function(e){return e.classList.contains(s.a.CLASS_CELL)},g=function(e){return e.classList.contains(s.a.CLASS_TABLE_CONTAINER)},E=function(e){return d.a.closestElement(e,\".\".concat(s.a.CLASS_TABLE_MENU_BUTTON))},C=function(){i.querySelector(\".\".concat(s.a.CLASS_TABLE_MENU_BUTTON,\" button\")).focus()},v=function(){let e;return o.gridOptions.transpose?e=o.controller.getColumnDefs():(e=o.dataProvider.cols,e=e.filter((function(e){return!0!==e.hiddenFlag}))),e},_=(e,t,n,i,l)=>{let o={newRowIdx:null,newColIdx:null,scrollLeft:null};if(!e)return o.newColIdx=1,o.newRowIdx=1,o;if(E(e))return\"LEFT\"===t?(o.newColIdx=n.length,o.newRowIdx=1):\"DOWN\"===t&&(o.newRowIdx=2,o.newColIdx=n.length,o.scrollLeft=n[n.length-1].startPosition),o;const a=parseInt(e.getAttribute(\"aria-colindex\"));switch(t){case\"UP\":if(i<=1)return null;o.newColIdx=a,o.newRowIdx=i-1;break;case\"DOWN\":if(i>=l)return null;o.newColIdx=a,o.newRowIdx=i+1;break;case\"LEFT\":if(a<=1)return null;o.newColIdx=a-1,o.newRowIdx=i;break;case\"RIGHT\":if(a>=n.length)return f(e)&&C(),null;o.newColIdx=a+1,o.newRowIdx=i}return o.newColIdx!==a&&(o.scrollLeft=function(e,t,n,i){const l=v();let o=e.columnDef||e.getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0].columnDef,a=l.indexOf(o),r=null,d=l[a+(i-n)];return o&&d&&o.pinnedLeft&&!d.pinnedLeft?r=0:1===t&&d&&!d.pinnedLeft&&(r=d.startPosition),r}(e,i,a,o.newColIdx)),o},w=(e,t)=>{const n=v();let l;l=o.gridOptions.transpose?o.dataProvider.cols.length+1:o.dataProvider.viewModelCollection.getLoadedViewModelObjects().length+1;const r=e?parseInt(e.parentElement.getAttribute(\"aria-rowindex\")):null,d=_(e,t,n,r,l);if(!d)return;const c=d.newRowIdx,u=d.newColIdx,p=d.scrollLeft;let m=a.getScrollContainerElementFromTable().getElementsByClassName(s.a.CLASS_VIEWPORT)[0];1===r&&2===c&&(m.scrollTop=0),null!==p&&(m.scrollLeft=p),setTimeout((function(){let e=\"[aria-rowindex='\".concat(c,\"'] [aria-colindex='\").concat(u,\"']\"),t=i.querySelector(e);t&&t.focus()}),100)},y=function(e,t){const n=v();if(f(e))if(t)w();else{const e=n[n.length-1],t=e.startPosition;if(!e.pinnedLeft){a.getScrollContainerElementFromTable().getElementsByClassName(s.a.CLASS_VIEWPORT)[0].scrollLeft=t}setTimeout((function(){let e=\"[aria-rowindex='1'] [aria-colindex='\".concat(n.length,\"']\"),t=i.querySelector(e);t&&t.focus()}),50)}else if(h(e)||d.a.closestElement(e,\".\".concat(s.a.CLASS_CELL))){let l,o=d.a.closestElement(e,\".\".concat(s.a.CLASS_CELL));const c=o?o.parentElement.getAttribute(r):e.parentElement.getAttribute(r);if(t){if(l=n[0],!l.pinnedLeft){a.getScrollContainerElementFromTable().getElementsByClassName(s.a.CLASS_VIEWPORT)[0].scrollLeft=0}}else if(l=n[n.length-1],!l.pinnedLeft){a.getScrollContainerElementFromTable().getElementsByClassName(s.a.CLASS_VIEWPORT)[0].scrollLeft=l.startPosition}setTimeout((function(){let e=\"[aria-rowindex='\".concat(parseInt(c)+2,\"'] [aria-colindex='\").concat(l.index+1,\"']\"),t=i.querySelector(e);t&&t.focus()}),50)}},I=function(e,t){let n=e.parentElement&&e.parentElement.vmo;l.onClickHandler(t,e,n);L.default.selectionChanged(i,e)(t)};n.setupInternalCellNavigation=e=>{e.onkeydown=function(t){const n=u(t.key);let a=(r=e,T.default.findFocusableChildren(r).length>0);var r;!d.a.isBulkEditing(i)&&!e.isElementInEdit&&a&&(\"LEFT\"===n||\"RIGHT\"===n?(delete o.focusTreeNodeExpandAfterRender,((e,t,n)=>{if(c(n),document.activeElement===e&&\"RIGHT\"===t){l.removeAllCellSelection();let t=T.default.findNextFocusableChild(e,!0);t&&t.focus()}else if(\"RIGHT\"===t){let n=T.default.findNextFocusableChild(e);n?n.focus():w(e,t)}else{let n=T.default.findPreviousFocusableChild(e);n?n.focus():w(e,t)}})(e,n,t)):\"DOWN\"!==n&&\"UP\"!==n||document.activeElement===e||(delete o.focusTreeNodeExpandAfterRender,c(t),w(e,n)))}};const R=e=>{if(d.a.isCellEditing(i)&&!e.isElementInEdit){const e=o.dataProvider.json&&o.dataProvider.json.editContext?o.dataProvider.json.editContext:o.declViewModel._internal.editContext?o.declViewModel._internal.editContext:null;let t=null;if(e&&(t=S.a.getEditHandler(e)),t)t.cancelEdits();else if(o.dataProvider.getEditConfiguration()){const e={data:o.declViewModel,ctx:b.default.ctx};o.dataProvider.cancelEdits(e,o.declViewModel)}else o.declViewModel.getEditConfiguration()&&o.declViewModel.cancelEdits()}};n.setupKeyListener=()=>{i.onkeydown=e=>{let t=e.srcElement;if(\"INPUT\"!==t.tagName&&\"TEXTAREA\"!==t.tagName||(t=d.a.closestElement(t,\".\".concat(s.a.CLASS_CELL))||t),d.a.isBulkEditing(i)){if(g(t)){c(e);let n=t.getElementsByClassName(\"aw-jswidgets-editableGridCell\")[0];n&&n.parentElement.focus()}return}const n=e.key,a=u(n);\"Tab\"===n?((e,t)=>{f(e)&&!t.shiftKey?(c(t),C()):E(e)&&t.shiftKey?(c(t),w()):(g(e)||document.activeElement.closest(s.a.CLASS_TABLE_CONTAINER))&&l.removeAllCellSelection()})(t,e):a?((e,t,n)=>{if(h(e)&&n.shiftKey&&(\"DOWN\"===t||\"UP\"===t)){c(n),l.removeAllCellSelection();const i=parseInt(e.parentElement.getAttribute(r)),a=o.dataProvider.viewModelCollection.getLoadedViewModelObjects().length;(\"DOWN\"===t&&i<a-1||\"UP\"===t&&i>0)&&(w(e,t),setTimeout((function(){I(document.activeElement,n)}),100))}else e.isElementInEdit||(c(n),f(e)||h(e)?(l.removeAllCellSelection(),w(e,t)):E(e)?w(e,t):g(e)&&(l.removeAllCellSelection(),w()))})(t,a,e):\"Enter\"===n||\"Space\"===n||\" \"===n?((e,t)=>{h(e)&&!e.isElementInEdit&&(c(t),I(e,t))})(t,e):\"Escape\"===n||\"Esc\"===n?R(t):\"Home\"!==n||t.isElementInEdit?\"End\"!==n||t.isElementInEdit||(y(t,!1),l.removeAllCellSelection()):(y(t,!0),l.removeAllCellSelection())}}};const w=function(e){let t;t=e.displayName?e.displayName:e.props.object_string?e.props.object_string.uiValues[0]:e.props.object_name?e.props.object_name.uiValues[0]:\"\";let n={field:e.uid,name:e.uid,displayName:t,enableColumnMoving:!0,enableColumnResizing:!0,enablePinning:!1,width:300,vmo:e,enableRendererContribution:!0,headerTooltip:!0,modifiable:!1};if(e.column){let t=Object.assign(e.column,n);return t.width=t.drawnWidth,t}return n};var y=function(e,t){let n=t;if(!function(e,t){if(e&&e.length===t.length+1){for(let n=0;n<t.length;n++){let i=!1,l=t[n];for(let t=0;t<e.length;t++){let n=e[t];l.uid===n.field&&(i=!0)}if(!1===i)return!0}return!1}return!0}(e,t)){n=[],e=o.a.sortBy(e,\"index\");for(let i=1;i<e.length;i++){let l=e[i].field;for(let o=0;o<t.length;o++){let a=t[o];if(a.uid===l){a.column=e[i],n.push(a);break}}}}return[{name:\"\",field:\"transposedColumnProperty\",displayName:\"\",pinnedLeft:!0,enableColumnMenu:!1,enableColumnMoving:!1,enableSorting:!1,enableColumnResizing:!0,enableRendererContribution:!0,modifiable:!1,width:125}].concat(n.map(w))},I=function(e,t){for(let l=0;l<e.length;l++)e[l].visible=!e[l].hasOwnProperty(\"visible\")||e[l].visible;let n=o.a.filter(e,(function(e){return!!e.visible&&e})),i=[];for(let l=0;l<n.length;l++){let e=n[l],o={props:{transposedColumnProperty:{uiValue:e.displayName,dbValue:e.field}}};\"icon\"===e.name&&(o.name=\"icon\");for(let n=0;n<t.length;n++){let i=t[n];\"icon\"===e.name?o.props[i.uid]={thumbnailURL:i.thumbnailURL,typeIconURL:i.typeIconURL,iconURL:i.iconURL}:o.props[i.uid]=i.props[e.field]}i.push(o)}return i},R=n(272),x=n(3039),D=n(166),N=n(21),P=n(628),M=n(15),O=n(175),H=n(58),F=n(46),B=n(955),V=n(954),W=n(953),k=n(3115),U=n.n(k);var j=function(e){var t=this;return E.default.isMobileOS||document.body.classList.add(\"nonTouch\"),delete t.tableContentElt,delete t.currentSrcCell,delete t.currentSrcCellRectangle,delete t.currentPanHandler,delete t.currentPanHandlerElement,t.scrollDelta=0,t.isActivelyDragging=!1,t.dragSelectedCells=[],t.removePanEvtHandler=function(){t.currentPanHandler&&t.currentPanHandler.off(\"panup pandown panend panstart pancancel\",t.handleHammerCellDrag),delete t.currentPanHandler,t.isActivelyDragging=!1,delete t.currentPanHandlerElement,t.currentSrcCell&&t.currentSrcCell.classList.remove(\"dragSrc\")},t.handlePan=function(n){var i,l;t.dragSelectedCells=[];let o=t.currentSrcCell.parentElement&&parseInt(t.currentSrcCell.parentElement.getAttribute(\"aria-rowindex\"))-2||0;n.srcEvent.clientY+t.scrollDelta>t.currentSrcCellRectangle.top+t.initialScrollDelta+1?(t.dragUp=!1,i=t.currentSrcCellRectangle.top-1+t.initialScrollDelta,l=n.srcEvent.clientY+t.scrollDelta):(t.dragUp=!0,i=n.srcEvent.clientY+t.scrollDelta,l=t.currentSrcCellRectangle.bottom+t.initialScrollDelta+1);var r=d.a.getPropertyByCellElement(t.currentSrcCell);t.srcUiVal!==r.uiValue&&(t.dragUp?l=9999999:i=0);let s=d.a.getColumnContentCellElementsByIndex(t.tableContentElt,t.targetColNumber);for(let e of s){let n=parseInt(e.parentElement.getAttribute(\"aria-rowindex\"))-2-o;var c=t.currentSrcCellRectangle.top+t.initialScrollDelta+(t.currentSrcCellRectangle.height+1)*n;let a=c+t.currentSrcCellRectangle.height;e.classList.remove(\"dragCellTop\"),e.classList.remove(\"dragCell\"),e.classList.remove(\"dragCellBottom\");var u=c;!0===t.dragUp&&(u=a),u<l&&u>=i&&(e.classList.add(\"dragCell\"),t.dragSelectedCells.push(e))}t.dragSelectedCells.length&&(t.dragSelectedCells[0].classList.add(\"dragCellTop\"),t.dragSelectedCells[t.dragSelectedCells.length-1].classList.add(\"dragCellBottom\")),function(n){var i=d.a.getTableInstance(e).renderer;let l=t.currentViewportElement.getBoundingClientRect();var o=l.top,r=o+l.height;n.srcEvent.pageY<o+10?(t.scrollDelta=i.manualScroll(!1),a.a.debug(scroll,\" scroll up\")):n.srcEvent.pageY>r-10&&(t.scrollDelta=i.manualScroll(!0),a.a.debug(scroll,\" scroll down\"))}(n)},t.handlePanEnd=function(){if(t.dragSelectedCells.length>1){var n,i;t.dragUp?(n=t.dragSelectedCells[0],i=\"up\"):(n=t.dragSelectedCells[t.dragSelectedCells.length-1],i=\"down\");for(var l=d.a.getPropertyByCellElement(n),o=0;o<t.dragSelectedCells.length;o++)t.dragSelectedCells[o].classList.remove(\"dragCellTop\"),t.dragSelectedCells[o].classList.remove(\"dragCell\"),t.dragSelectedCells[o].classList.remove(\"dragCellBottom\");d.a.getTableInstance(e).gridId;let a=l.substituteParentUid||l.parentUid;if(!a)a=d.a.closestElement(n,\".\"+s.a.CLASS_ROW).vmo.uid;d.a.getTableInstance(e).editor.fillDownCompleteHandler({propertyName:t.propertyName,source:t.srcUid,endTarget:a,direction:i})}t.scrollDelta=0,t.isActivelyDragging=!1,t.tableContentElt.classList.remove(\"aw-jswidgets-dragfilling\")},t.handlePanCancel=function(){t.removePanEvtHandler()},t.handlePanStart=function(n){t.dragUp=!1,t.isActivelyDragging=!0;const i=d.a.getTableInstance(e).renderer;t.initialScrollDelta=i.getScrollTop(),t.scrollDelta=t.initialScrollDelta;var l=d.a.closestElement(n.target,\".\"+s.a.CLASS_CELL);t.currentSrcCell=l,t.currentSrcCellRectangle=t.currentSrcCell.getBoundingClientRect(),t.currentViewportElement=d.a.closestElement(t.currentSrcCell,\".\"+s.a.CLASS_VIEWPORT);var o=d.a.getPropertyByCellElement(t.currentSrcCell);if(t.srcUid=o.substituteParentUid||o.parentUid,!t.srcUid){var a=d.a.closestElement(t.currentSrcCell,\".\"+s.a.CLASS_ROW);t.srcUid=a.vmo.uid}t.srcUiVal=o.uiValue,t.propertyName=o.propertyName,t.tableContentElt=d.a.closestElement(n.target,\".\"+s.a.ELEMENT_TABLE),t.currentSrcCell.classList.add(\"dragSrc\"),t.tableContentElt.classList.add(\"aw-jswidgets-dragfilling\"),t.targetColNumber=t.currentSrcCell.columnDef.index},t.handleHammerCellDrag=function(e){\"panstart\"===e.type?t.handlePanStart(e):\"panend\"===e.type?t.handlePanEnd():\"pancancel\"===e.type?t.handlePanCancel():t.isActivelyDragging&&t.handlePan(e)},t.initialize=function(e){if(!t.isActivelyDragging)if(e.preventDefault(),t.currentPanHandlerElement&&t.currentPanHandlerElement!==e.target&&t.removePanEvtHandler(),t.currentPanHandler)t.currentPanHandlerElement&&t.currentPanHandlerElement!==e.target&&a.a.warn(\"different event handler element - shouldnt be here ------------------\");else{var n=U()(e.target,{touchAction:\"pan-y\"});t.currentPanHandlerElement=e.target,n.get(\"pan\").set({direction:U.a.DIRECTION_VERTICAL}),n.on(\"panup pandown panend panstart pancancel\",t.handleHammerCellDrag),t.currentPanHandler=n}},t};var G=function(e){let t,n=this,i=new j(e);return n.enableFillDown=function(e){var n=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE)[0];if(!n){let l=e.parentElement;(n=d.a.createElement(\"div\",s.a.CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE)).addEventListener(\"mouseover\",i.initialize),n.addEventListener(\"mousedown\",(function(){t=l.draggable,l.draggable=!1})),n.addEventListener(\"mouseup\",(function(){l.draggable=t})),e.appendChild(n)}},n.disableFillDown=function(e){var t=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE)[0];t&&e.removeChild(t)},n},z=n(16),q=n(0),Y=n(123),X=n(158),K=n(2);const Z=e=>e.dataProvider.json&&e.dataProvider.json.editContext?e.dataProvider.json.editContext:e.dataProvider.json&&e.dataProvider.json.customPanelEditContext?e.dataProvider.json.customPanelEditContext:e.declViewModel._internal.editContext?e.declViewModel._internal.editContext:null,J=(e,t)=>{const n={message:{messageType:\"INFO\",messageText:e},showType:\"false\",closable:!0},i=Object(q.d)(\"AwGuidanceMessage\",n);let l=document.createDocumentFragment();Object(Y.d)(Object(K.jsx)(X.a,{children:i}),l),t.parentElement.insertBefore(l,t)},$=e=>{M.default.getLocalizedTextFromKey(\"BaseMessages.AUTO_SAVE_ONLY_TABLE\",!0).then((t=>{J(t,e)}))},Q=e=>{M.default.getLocalizedTextFromKey(\"BaseMessages.CELL_EDITING_DISABLED\",!0).then((t=>{J(t,e)}))};var ee=n(2965),te=function(e,t,n){let l=new A.a(e),r=new G(e),c={},u=null,p=null,m=d.a.getTableInstance(e),f=null,h=null,g=null,C=null,v=null,T=!1;const _=\"aria-readonly\",w=\"aria-activedescendant\";let y=[],I=this;const R=function(){o.a.forEach(c,(function(e){i.a.unsubscribe(e)})),c={}};I.destroy=function(){R(),o.a.forEach(y,(function(e){i.a.unsubscribe(e)})),y=[]},I.setFocusProp=function(e){p=e};const x=function(){u&&u()};I.updateEditStatus=function(){x();var t=l.getContentCellElementsFromTable();o.a.forEach(t,(function(e){I.updateEditStatusForCell(e)})),d.a.isBulkEditing(e)||(p=null,R())};const D=function(e,t){if(t)for(var n=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS_DISABLED),i=n.length;i>0;i--){var l=n[i-1];l&&l.classList&&(l.classList.add(s.a.CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS),l.classList.remove(s.a.CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS_DISABLED))}else for(var o=(n=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS)).length;o>0;o--){var a=n[o-1];a&&a.classList&&(a.classList.add(s.a.CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS_DISABLED),a.classList.remove(s.a.CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS))}},N=function(t,n,i,l){if(null!==t.parentElement){t.isElementInEdit=!1;var o=null;o=l.isArray?t.getElementsByClassName(s.a.CLASS_TABLE_EDIT_CELL_TOP_ARRAY):t.getElementsByClassName(s.a.CLASS_TABLE_EDIT_CELL_TOP);var a=!1,r=ee.a.createElement(i,n,e,t.parentElement);if(!0===m.dynamicRowHeightStatus&&ee.a.addDynamicCellHeight(n,r),o.length>0){var c=o[0];if(l.isArray){const e=m.gridOptions.popupContext.editArrayPopup;e&&e.hide()}else c.parentElement.removeChild(c);setTimeout((function(){d.a.cleanupComponents(c),c.getElementsByClassName(\"aw-widgets-propertyError\").length>0&&(a=!0),a&&r.classList.add(\"aw-widgets-propertyError\"),l.isArray||d.a.destroyElement(c)}),1e3)}t.classList.remove(s.a.CLASS_AW_IS_EDITING),t.appendChild(r);var u=t.getElementsByClassName(s.a.CLASS_TABLE_CELL_TOP);u.length>0&&u[0].classList.add(s.a.CLASS_AW_EDITABLE_CELL),function(e){var t=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE);t.length>0&&t[0].parentElement.appendChild(t[0])}(t)}},P=function(e){e.removeEventListener(\"focus\",e.onFocusEvent,!0),e.onFocusEvent=null,e.removeEventListener(\"mousedown\",e.onFocusClickEvent),e.onFocusClickEvent=null};let M=!1,O=!1;const H=function(e,t){P(e);const n=function(n){if(M){let t;E.default.isIE?(t=document.createEvent(\"MouseEvent\"),t.initMouseEvent(\"click\",!0,!0,window,0,t.screenX,t.screenY,t.clientX,t.clientY,O,!1,!1,!1,0,null)):t=new MouseEvent(\"click\",{ctrlKey:O}),e.parentElement.dispatchEvent(t),M=!1,O=!1}I.editCell(e,t)};e.onFocusEvent=n;e.addEventListener(\"focus\",n,!0);const i=function(e){M=!0,O=e.ctrlKey};e.isFocusClickEvent=i,e.addEventListener(\"mousedown\",i)},F=function(e,t,n){if(e.children[0]){e.children[0].classList.add(s.a.CLASS_AW_EDITABLE_CELL);var i=d.a.getTableRowHeight(m.gridOptions,void 0);void 0!==i&&(e.children[0].style.height=i+\"px\")}else a.a.debug(e.propName+\" has no child\");H(e,n),r.enableFillDown(e),D(e,!1);var l=e.getElementsByClassName(s.a.CLASS_TABLE_CELL_TOP)[0]||e.getElementsByClassName(s.a.CLASS_TABLE_EDIT_CELL_TOP)[0]||e.getElementsByClassName(s.a.CLASS_TABLE_EDIT_CELL_TOP_ARRAY)[0];ee.a.updateCellChangedClass(t,l),p===e.prop&&I.editCell(e,n)},B=function(){const e=!0;document.body.removeEventListener(\"click\",u,e),l.getScrollCanvasElementFromTable().removeEventListener(\"scroll\",u,e),l.getPinCanvasElementFromTable().removeEventListener(\"scroll\",u,e)},V=function(e){document.body.removeEventListener(\"keydown\",C,!0),e.removeEventListener(\"keydown\",v,!0),C=null,v=null},W=function(e,t,n,i){const l=e.getElementsByClassName(s.a.CLASS_TABLE_CELL_TOP)[0];(l&&(l.classList.contains(s.a.CLASS_AW_EDITABLE_CELL)||l.classList.contains(s.a.CLASS_CELL_CHANGED))||e.propIsEditableCache)&&(t.isArray||e.isSelected||r.disableFillDown(e),i||(e.removeChild(l),N(e,n,e.columnDef,t)),e.children[0].classList.remove(s.a.CLASS_AW_EDITABLE_CELL),P(e)),D(e,!0)};I.updateEditStatusForCell=function(t){var n=t.prop;let i=d.a.getViewModelObjectByCellElement(t);i=J(i.alternateID||i.uid);var l=i&&i.props&&i.props[t.propName];t.propName&&n&&!0!==t.columnDef.isTreeNavigation?(n.isEditable||l&&l.isEditable)&&!1!==t.columnDef.modifiable&&d.a.isBulkEditing(e)||t.isSelected&&t.propIsEditableCache&&n.isPropInEdit?F(t,n,i):(W(t,n,i),d.a.isBulkEditing(e)?t.setAttribute(_,\"true\"):t.hasAttribute(_)&&!1!==t.propIsEditableCache&&t.removeAttribute(_)):d.a.isBulkEditing(e)?t.setAttribute(_,\"true\"):t.hasAttribute(_)&&!1!==t.propIsEditableCache&&t.removeAttribute(_)};const k=function(){const e=Z(m);let t,n=null;e?(n=S.a.getEditHandler(e),t=n.isDirty()):m.dataProvider.getEditConfiguration()?t=m.dataProvider.isDirty():m.declViewModel.getEditConfiguration()&&(t=m.declViewModel.isDirty()),t&&t.then((function(e){if(!e)if(n)n.cancelEdits();else if(m.dataProvider.getEditConfiguration()){const e={data:m.declViewModel,ctx:b.default.ctx};m.dataProvider.cancelEdits(e,m.declViewModel)}else m.declViewModel.getEditConfiguration()&&m.declViewModel.cancelEdits()}))},U=function(e,t){if(!1!==e.modifiable&&!e.isTreeNavigation){const n=e.propertyName||e.field,i=t.props[n];if(i&&i.isEditable)return{vmo:t,column:e}}return null},j=t=>{t.onkeydown=t=>{if(\"Tab\"!==t.code)return;let n=!1;t.shiftKey&&(n=!0);const i=((e,t,n)=>{let i=m.dataProvider.cols.filter((function(e){return!e.hiddenFlag}));const l=i.indexOf(t);n&&(i=i.slice().reverse());for(let a=l+1;a<i.length;a++){const t=i[a],n=U(t,e);if(n)return n}const o=m.dataProvider.viewModelCollection.loadedVMObjects;for(let a=m.dataProvider.viewModelCollection.findViewModelObjectById(e.uid)+1;a<o.length;a++){const e=o[a];for(let t=0;t<i.length;t++){const n=i[t],l=U(n,e);if(l)return l}}return null})(t.target.closest(\".ui-grid-row\").vmo,t.target.closest(\".ui-grid-cell\").columnDef,n);if(i){t.preventDefault(),t.stopPropagation();const n=m.dataProvider.viewModelCollection.findViewModelObjectById(i.vmo.uid);x(),m.renderer.scrollToRowIndex([n]),i.column.pinnedLeft||m.renderer.scrollToColumn(i.column),setTimeout((()=>{const t=e.getElementsByClassName(\"ui-grid-row\")[0];if(t){const e=n-t.getAttribute(\"data-indexNumber\");let a;a=i.column.pinnedLeft?l.getPinContentRowElementFromTable(e):l.getScrollContentRowElementFromTable(e);const r=a&&a.getElementsByClassName(\"ui-grid-cell\")||[],s=o.a.filter(r,{columnDef:i.column})[0];s&&I.editCell(s,i.vmo)}}),200)}}},J=function(e){let t=m.dataProvider.viewModelCollection.findViewModelObjectById(e);return m.dataProvider.viewModelCollection.loadedVMObjects[t]},te=function(t,n,l){const a=function(t,n,l){return i.a.subscribe(l.propertyName+\".lovValueChanged\",(function(){l.lovApi&&l.lovApi.behaviorData&&\"Interdependent\"===l.lovApi.behaviorData.style&&l.lovApi.behaviorData.dependendProps.forEach((function(i){if(l.propertyName!==i){var a=t.parentElement;o.a.forEach(a.children,(function(t){if(t.propName===i){var l=t.children[0],o=ee.a.createElement(t.columnDef,a.vmo,e,a);return!0===m.dynamicRowHeightStatus&&ee.a.addDynamicCellHeight(n,o),o.classList.add(s.a.CLASS_AW_EDITABLE_CELL),t.replaceChild(o,l),t.isDependantEdit=!0,!d.a.isBulkEditing(e)&&d.a.isAutoSaveEnabled(e)&&(I.removeAllCellSelection(),I.editCell(t,n)),!1}return!0}))}}))}))}(t,n,l);let r=c[l.parentUid+l.propertyName];r&&(i.a.unsubscribe(r),delete c[l.parentUid+l.propertyName]),c[l.parentUid+l.propertyName]=a};I.editCell=function(t,o){const a=t.columnDef,c=t.prop;if(!t.isDependantEdit&&(!t.isSelected&&!d.a.isBulkEditing(e)||!0===t.isElementInEdit))return;n({type:\"UPDATE_VALUES\",editVmo:o,editPropertyName:t.propName}),function(t,n){const l={columnInfo:t.columnDef,gridId:e.id,vmo:n};i.a.publish(e.id+\".cellStartEdit\",l)}(t,o),x(),t.isElementInEdit=!0,c.isPropInEdit=!0,t.classList.add(s.a.CLASS_AW_IS_EDITING),te(t,o,c);let f=t.getElementsByClassName(s.a.CLASS_TABLE_CELL_TOP)[0];f&&t.removeChild(f);let g=c.autofocus;!function(e,t,n){const i=e.props[n.propName];i.autofocus=!0;let l=i.isArray?s.a.CLASS_TABLE_EDIT_CELL_ARRAY:s.a.CLASS_TABLE_EDIT_CELL_NON_ARRAY,o=d.a.createElement(\"div\",\"aw-splm-tableEditCellTop\",l),a=d.a.createElement(\"div\",\"aw-jswidgets-tableEditContainer\",\"aw-jswidgets-cellTop\"),r=Object(q.d)(\"SplmTableCellEditor\",{vmo:e,name:i.propertyName});if(Object(Y.d)(Object(K.jsx)(X.a,{children:r}),a),o.appendChild(a),j(o),ee.a.updateCellChangedClass(i,o.getElementsByClassName(s.a.CLASS_AW_JS_CELL_TOP)[0]),i.isArray&&m.gridOptions.popupContext&&m.gridOptions.popupContext.editArrayPopup){const e=n.getBoundingClientRect(),t={whenParentScrolls:\"follow\",innerClassName:s.a.CLASS_TABLE_EDIT_CELL_TOP_ARRAY,autoFocus:!1,parent:n,reference:n,overlapOnReference:!0,containerWidth:e.width,width:e.width,forceCloseOthers:!1},i=m.gridOptions.popupContext.editArrayPopup;i&&i.hide().then((()=>{i.show(t).then((e=>{I.popupRef=e}))}))}else n.insertBefore(o,n.childNodes[0])}(o,0,t),P(t);const E=function(n){if(n&&\"scroll\"===n.type&&t.prop&&!t.prop.isArray)return;let l=null;if(n&&\"keydown\"!==n.type&&(p=null,l=d.a.closestElement(n.target,\".\".concat(s.a.CLASS_CELL))),t.isElementInEdit){if(l!==t&&t.isElementInEdit){let l=b.default.getCtx(\"panelContext\");if(l&&!0===l.addTypeRef){if(t.propName===c.propertyName&&t.parentElement.vmo.uid===c.parentUid)return;i.a.publish(\"completed\",{source:\"toolAndInfoPanel\"})}if(((e,t)=>{if(e.hasLov&&t){const e=document.querySelector(\".sw-lov-contentContainer\");if(e&&e.contains(t.target))return!0}else if(e.type&&t&&(\"DATE\"===e.type||\"DATEARRAY\"===e.type)){const e=document.querySelector(\".flatpickr-calendar.open\");if(e&&e.contains(t.target))return!0;const n=document.querySelector(\".sw-popup-contentContainer .aw-base-scrollPanel\");if(n&&n.contains(t.target))return!0}else if(e.type&&t&&\"STRING\"===e.type&&e.isRichText){const e=document.getElementsByClassName(\"ck-body-wrapper\")[0];if(e&&e.contains(t.target))return!0}return!1})(c,n))return!0;B(),V(t),N(t,o,a,c),c.autofocus=g,c.isPropInEdit=!1,t.isSelected=!1,delete t.isDependantEdit,function(t,n,i,l){if(!d.a.isBulkEditing(e)&&d.a.isAutoSaveEnabled(e)&&t&&!T){t.stopPropagation(),t.preventDefault(),r.disableFillDown(n);const i=d.a.closestElement(t.target,\".ui-grid-cell\");let l,o;i&&(o=i.propName,l=d.a.getViewModelObjectByCellElement(i)),h=I.saveEdit([n]).then((()=>{if(h=null,i){let t=l&&l.alternateID||l.uid,n=d.a.getCellElementsByPropertyAndUid(e,o,t)[0];n&&n.click&&n.click()}else{let e=t.target;for(;!e.click;)e=e.parentElement;e.click()}}))}else d.a.isBulkEditing(e)||d.a.isAutoSaveEnabled(e)||(k(),W(n,i,l,!0))}(n,t,c,o),H(t,o)}}else B(),V(t)};B(),V(t);const L=!0;document.body.addEventListener(\"click\",E,L);const A=l.getScrollCanvasElementFromTable(),_=l.getPinCanvasElementFromTable();A.removeEventListener(\"scroll\",E,L),_.removeEventListener(\"scroll\",E,L),A.addEventListener(\"scroll\",E,L),_.addEventListener(\"scroll\",E,L),((t,n,i,l)=>{C=o=>{if(\"Escape\"===o.key)if(d.a.closestElement(o.target,\".\"+s.a.CLASS_CELL)===t&&t.isElementInEdit)o.stopPropagation(),z.a.resetUpdates(n),N(t,i,l,n),d.a.isBulkEditing(e)?H(t,i):(n.isPropInEdit=!1,W(t,n,i,!0),k(),V(t),t.focus());else{const e=Z(m);let t=S.a.getEditHandler(e);if(t)t.cancelEdits();else if(m.dataProvider.getEditConfiguration()){const e={data:m.declViewModel,ctx:b.default.ctx};m.dataProvider.cancelEdits(e,m.declViewModel)}else m.declViewModel.getEditConfiguration()&&m.declViewModel.cancelEdits()}},document.body.addEventListener(\"keydown\",C,!0)})(t,c,o,a),((t,n)=>{v=t=>{if(\"Enter\"===t.key&&!t.altKey&&!d.a.isBulkEditing(e)){const i=d.a.closestElement(t.target,\".\"+s.a.CLASS_CELL);i.prop&&i.prop.isArray?\"\"===t.target.value&&(t.stopPropagation(),n(t),d.a.isBulkEditing(e)||i.focus()):i&&!(e=>{const t=e.getElementsByClassName(\"aw-jswidgets-popUpVisible\"),n=e.getElementsByClassName(\"aw-jswidgets-expanded\");return t.length+n.length>0})(i)&&(t.stopPropagation(),n(t),h?h.then((function(){i.focus()})):i.focus())}},t.addEventListener(\"keydown\",v,!0)})(t,E),function(e){u=e}(E)},I.isPropertiesEditablePromise=function(e){let t;const n=Z(m);if(n){const i=S.a.getActiveEditHandler();i&&i!==S.a.getEditHandler(n)&&i.editInProgress()?t=new Promise((t=>{i.leaveConfirmation((()=>{S.a.setActiveEditHandlerContext(n),S.a.startEdit(e).then((()=>{t()}))}))})):(S.a.setActiveEditHandlerContext(n),t=S.a.startEdit(e))}else if(m.dataProvider.getEditConfiguration()){const n={data:m.declViewModel,ctx:b.default.ctx};t=m.dataProvider.startEdit(n,m.declViewModel,e)}else m.declViewModel.getEditConfiguration()&&(t=m.declViewModel.startEdit(e));return t||Promise.resolve(!1)};I.saveEdit=function(t){let n=null;const i=Z(m);if(i)n=S.a.saveEdits(i,true,d.a.isAutoSaveEnabled(e));else if(m.dataProvider.getEditConfiguration()){const e={data:m.declViewModel,ctx:b.default.ctx};n=m.dataProvider.saveEdits(e,m.declViewModel)}else m.declViewModel.getEditConfiguration()&&(n=m.declViewModel.saveEdits());return n?n.finally((function(){I.setCellEditingContext(!1);for(let e=0;e<t.length;e++)document.body.contains(t[e])&&I.updateEditStatusForCell(t[e]);I.clearPropIsEditableCache()})):Promise.resolve(!1)};const ne=function(){let t=Array.prototype.slice.call(e.getElementsByClassName(s.a.CLASS_TABLE_CELL_SELECTED_EDITABLE)),n=Array.prototype.slice.call(e.getElementsByClassName(s.a.CLASS_TABLE_CELL_SELECTED)),i=t.concat(n);for(let e=0;e<i.length;e++){i[e].classList.remove(s.a.CLASS_TABLE_CELL_SELECTED_EDITABLE),i[e].classList.remove(s.a.CLASS_TABLE_CELL_SELECTED);let t=null;t=l.getTableContainerElementFromTable(),t&&t.hasAttribute(w)&&t.removeAttribute(w)}},ie=function(t,n){if(f&&f.cell){let t=f.cell;t.isSelected=!1;const i=J(f.vmoId);!n&&i&&t.prop&&d.a.isPropEditEnabled(e)&&!d.a.isBulkEditing(e)&&(t.prop.isEditable=!1,i.props&&i.props[t.propName]&&(i.props[t.propName].isEditable=!1))}if(t){t.classList.add(s.a.CLASS_TABLE_CELL_SELECTED),t.isSelected=!0;let e=d.a.getViewModelObjectByCellElement(t),n=e.alternateID||e.uid;f={cell:t,vmoId:n};let i=null;i=l.getTableContainerElementFromTable(),i&&i.setAttribute(w,t.getAttribute(\"id\"))}else f=null};I.clearPropIsEditableCache=function(e){const t=l.getContentCellElementsFromTable();o.a.forEach(t,(function(e){delete e.propIsEditableCache,e.hasAttribute(_)&&e.removeAttribute(_)})),ne();const n=f?f.cell:null;if(ie(null,e),n&&n.parentElement){const e={ctrlKey:!1,shiftKey:!1,type:\"click\"};I.onClickHandler(e,n,d.a.getViewModelObjectByCellElement(n))}};const le=function(t,n){ne(),ie(t);if(d.a.isPropEditEnabled(e)&&t.propName&&t.prop&&!0!==t.columnDef.isTreeNavigation)if(z.a.isModified(t.prop)&&void 0===t.propIsEditableCache&&!d.a.isAutoSaveEnabled(e)&&(t.propIsEditableCache=!0),\"icon\"===t.columnDef.name||!1===t.columnDef.modifiable||void 0!==t.propIsEditableCache)t.propIsEditableCache?(t.prop.isEditable=!0,n.props[t.propName].isEditable=!0,t.classList.add(s.a.CLASS_TABLE_CELL_SELECTED_EDITABLE),t.hasAttribute(_)&&t.removeAttribute(_)):!1===t.propIsEditableCache&&t.setAttribute(_,\"true\");else{const i=function(){return async function(t,n){h&&await h;let i=t.props[n.propName],l=[i.propertyName];i.lovApi&&i.lovApi.behaviorData&&\"Interdependent\"===i.lovApi.behaviorData.style&&(l=i.lovApi.behaviorData.dependendProps);let o={vmos:[t],propertyNames:l,autoSave:d.a.isAutoSaveEnabled(e)};return!1!==await I.isPropertiesEditablePromise(o)&&(i=t.props[n.propName],i&&i.isEditable&&!1!==i.isEnabled)}(n,t).then((function(e){t.propIsEditableCache=e,!1===t.propIsEditableCache?t.setAttribute(_,\"true\"):t.hasAttribute(_)&&t.removeAttribute(_),t.isSelected&&(e&&t.classList.add(s.a.CLASS_TABLE_CELL_SELECTED_EDITABLE),r.enableFillDown(t))})).then((function(){delete t.isCellEditablePromise,g=null}))};g?g.then((function(){ne(),ie(t),g=i(),t.isCellEditablePromise=g})):(g=i(),t.isCellEditablePromise=g)}else t.setAttribute(_,\"true\")};let oe=!1;const ae=function(e,t){i.a.publish(m.gridId+\".plTable.cellNotEditable\",{vmo:e,prop:t})};I.setCellEditingContext=function(t){if(t?m.dataProvider.cacheCollapse=t:m.dataProvider.restoreInitialCacheCollapseState(),m.controller.setDraggable(!t),!d.a.isAutoSaveEnabled(e)){const e=Z(m);if(e){const n=S.a.getEditHandler(e);n._editing=t,b.default.updateCtx(\"editInProgress\",n._editing),S.a.setActiveEditHandlerContext(e),n.editStateChangeDispatcher&&n.editStateChangeDispatcher({type:\"SET_EDIT_STATE_CHANGED\",value:n._editing})}else m.dataProvider.getEditConfiguration()?(m.dataProvider._editing=t,b.default.updateCtx(m.dataProvider._appCtxEditInProgress,m.dataProvider._editing)):m.declViewModel.getEditConfiguration()&&(m.declViewModel._editing=t,b.default.updateCtx(m.declViewModel._internal.eventTopicEditInProgress,m.declViewModel._editing))}b.default.getCtx(\"autoSave\")&&b.default.getCtx(\"autoSave.dbValue\")||!e._tableInstance.gridOptions.forceAutoSave||!t||d.a.isCellEditing(e)||oe||(oe=!0,$(e)),d.a.setIsCellEditing(e,t)};let re=null;I.onClickHandler=async(t,n,i)=>{if(!d.a.isBulkEditing(e))return t.ctrlKey?(x(),ne(),ie(null),void(d.a.isCellHeaderSelectionEnabled(e)&&L.default.setCellHeaderSelection(null,e))):void(n.isSelected&&n.propIsEditableCache&&!n.isElementInEdit?function(e,t){ne(),e.prop.isEditable||(e.prop.isEditable=!0,t.props&&t.props[e.propName]&&(t.props[e.propName].isEditable=!0));const n=Z(m),i=S.a.getActiveEditHandler();n&&i&&i!==S.a.getEditHandler(n)&&i.editInProgress()?i.leaveConfirmation((()=>{S.a.setActiveEditHandlerContext(n),S.a.getEditHandler(n).reregisterLeaveHandler(),I.editCell(e,t),I.setCellEditingContext(!0)})):(I.editCell(e,t),I.setCellEditingContext(!0))}(n,i):n.isSelected&&!1===d.a.isPropEditEnabled(e)&&!re?(re=!0,Q(e)):n.isSelected&&n.isCellEditablePromise&&!n.isCellEditablePromiseResolving?async function(e,t){e.isCellEditablePromiseResolving=!0,await e.isCellEditablePromise,delete e.isCellEditablePromiseResolving,e.isSelected&&(e.propIsEditableCache?(p=e.prop,ne(),e.prop.isEditable||(e.prop.isEditable=!0,t.props&&t.props[e.propName]&&(t.props[e.propName].isEditable=!0)),I.editCell(e,t),I.setCellEditingContext(!0)):ae(t,e.prop))}(n,i):n.isSelected||t.shiftKey?t.shiftKey?(x(),ne(),ie(null)):!n.isCellEditablePromiseResolving&&function(e){return e&&e.isSelected&&e.prop&&!1===e.prop.isEditable}(n)&&ae(i,n.prop):(await le(n,i),r.enableFillDown(n),d.a.isCellHeaderSelectionEnabled(e)&&L.default.setCellHeaderSelection(n,e)))},I.addCellClickListener=function(t,n){t.onclick=function(e){e.target.closest(\".aw-command, a.aw-splm-tablePropertyValueLinks\")||I.onClickHandler(e,t,n)},t.oncontextmenu=function(i){d.a.isBulkEditing(e)||t.isSelected||le(t,n)}},I.removeAllCellSelection=function(){ne(),ie()};const se=function(t,n){let i=d.a.getCellElementsByPropertyAndUid(e,t.propertyName,n);for(let l=0;l<i.length;l++){let t=i[l],n=t.parentElement,o=t.children[0],a=ee.a.createElement(t.columnDef,n.vmo,e,n);d.a.isBulkEditing(e)&&a.classList.add(s.a.CLASS_AW_EDITABLE_CELL),t.replaceChild(a,o)}},de=function(e,t){e.uiValue=t.uiValue,e.dbValue=t.dbValue,e.valueUpdated=!0,z.a.updateViewModelProperty(e)},ce=function(t,n,i,l){(function(t){return!(!d.a.isPropEditEnabled(e)||!0===t.isTreeNavigation||\"icon\"===t.name||!1===t.modifiable)})(l)&&i.push(t)},ue=function(e,t,n){const i=e.props[t.propertyName];n&&i&&i.isPropertyModifiable&&i.editable&&(de(i,n),se(n,e.uid))};I.fillDownCompleteHandler=t=>{let n=m.dataProvider.viewModelCollection.loadedVMObjects,i=n.filter((function(e){return e.uid===t.source})),l=i[0]&&i[0].props[t.propertyName],o=[],a={},r=[];\"up\"!==t.direction&&(n=n.slice().reverse());let s=!1;for(let c of n){if(s||c.uid!==t.endTarget||(s=!0),!s)continue;if(c.uid===t.source)break;const n=d.a.getColumnDef(t.propertyName,m.dataProvider);if(d.a.isBulkEditing(e))ue(c,t,l);else{const i=d.a.getCellElementsByPropertyAndUid(e,t.propertyName,c.uid)[0];i&&(a[c.uid]=i),ce(c,0,o,n)}}if(!d.a.isBulkEditing(e)){T=!0;let n=[t.propertyName];(function(t,n,i){let l={vmos:n,propertyNames:i,autoSave:d.a.isAutoSaveEnabled(e)};return I.isPropertiesEditablePromise(l).then((function(e){for(let i of n){let n=t[i.uid];n&&(n.propIsEditableCache=!1!==e&&n.prop&&n.prop.isEditable,!1===n.propIsEditableCache&&n.setAttribute(_,\"true\"))}return Promise.resolve(e)}))})(a,o,n).then((n=>{!function(t,n,i,l,o,a){if(!1===t)return;let r=!1;for(let e=0;e<n.length;e++){let t=n[e];const s=t.props[i.propertyName];a&&s&&s.isPropertyModifiable&&s.editable&&(r=!0,l.push(o[t.uid]),de(s,a),se(a,t.uid))}r&&(d.a.isAutoSaveEnabled(e)?I.saveEdit(l):I.setCellEditingContext(!0))}(n,o,t,r,a,l),T=!1}))}},y.push(i.a.subscribe(\"\".concat(m.dataProvider.name,\".selectNone\"),I.removeAllCellSelection)),y.push(i.a.subscribe(\"\".concat(m.dataProvider.name,\".selectAll\"),I.removeAllCellSelection)),y.push(i.a.subscribe(\"\".concat(m.dataProvider.name,\".selectionChangeEvent\"),(function(e){let t=e.selectedObjects;if(f&&f.vmoId){const e=J(f.vmoId);-1===t.indexOf(e)&&I.removeAllCellSelection()}})))},ne=n(964),ie=function(e,t,n,l){var a=this,r=e,c=n,u=c.dataProvider,p=c.gridOptions,m=c.messages,f=new A.a(e),h=n.keyboardService,g=null,E=[];c.menuService=a;const C=function(e,t){setTimeout((function(){const n=t&&d.a.isBulkEditing(r);e&&document.activeElement&&\"BODY\"===document.activeElement.tagName&&!n&&e.focus()}),150)};a.addGridMenu=function(){const e=m.gridMenu,t='<div class=\"aw-commands-svg\"><button type=\"button\" class=\"aw-commands-commandIconButton icon-override\" tabindex=\"-1\" title=\"'+e+'\" aria-label=\"'+e+'\" >'+ne.svgString+\"</button></div>\";let n=d.a.createElement(\"div\",\"aw-splm-tableMenuButton\");n.innerHTML=t;let i=n.querySelector(\"button\");h.setOnFocusAndBlur(i),r.insertBefore(n,r.children[0]),function(){var e=r.getElementsByClassName(\"aw-splm-tableMenuButton\")[0],t=function(t,n){l({type:\"UPDATE_VALUES\",isBulkEditing:c.isBulkEditing,dynamicRowHeightStatus:c.dynamicRowHeightStatus}),t.preventDefault();let i=p.popupContext.gridMenuPopup;if(i)if(a.gridMenuPopupRef)a.ensureTableMenuDismissed();else{const t={forceCloseOthers:!1,whenParentScrolls:\"close\",reference:e,placement:\"bottom-end\",hasArrow:!0,autoFocus:!0,innerClassName:\"aw-popup-gridMenu\",padding:{x:4,y:4},hooks:{whenClosed:()=>{a.gridMenuPopupRef=null,C(n)}}};i.show(t).then((e=>{a.gridMenuPopupRef=e}))}};e.addEventListener(\"click\",t),e.addEventListener(\"keydown\",(function(n){T.default.isValidKeyPress(n)&&t(n,e)}))}()};a.setContextSelectionHelper=function(e){g=e},a.contextSelectionHandler=function(e){if(\"a\"===e.target.tagName.toLowerCase()&&\"\"!==e.target.href)return;if(!0!==p.showContextMenu)return;e.preventDefault(),e.cancelBubble=!0;let t=d.a.closestElement(e.target,\".\"+s.a.CLASS_CELL),n=p.popupContext.contextMenuPopup;if(n){const i={whenParentScrolls:\"close\",resizeToClose:!0,targetEvent:e,reference:e.target,autoFocus:!0,forceCloseOthers:!1,hooks:{whenClosed:()=>{C(t,!0)}}};n.hide().then((()=>{n.show(i)}))}var i=e.currentTarget;let o=[i.vmo];if(l({type:\"UPDATE_VALUES\",contextVmo:o}),!i.classList.contains(\"aw-state-selected\")&&!i.classList.contains(\"ui-grid-row-selected\")){for(;r.getElementsByClassName(\"aw-state-selected\").length>0;)r.getElementsByClassName(\"aw-state-selected\")[0].classList.remove(\"aw-state-selected\"),r.getElementsByClassName(\"ui-grid-row-selected\")[0].classList.remove(\"ui-grid-row-selected\");!function(e,t,n,i){var l=t.mode;t.setMode(\"single\"),g.handleSelectionEvent(e,t,n,i),t.setMode(l)}(o,u.selectionModel,e)}};a.loadDefaultColumnMenus=function(){var e=function(e){for(var t=0,n=0;n<e.length;n++)e[n].index>t&&e[n].pinnedLeft&&(t=e[n].index);return t}(u.cols),t=p.addIconColumn?1:0;e>0&&(t=e),l&&l({type:\"UPDATE_VALUES\",defaultColumnPinIndex:t})},a.ensureAllTableMenusDismissed=function(){a.ensureColumnMenuDismissed(),a.ensureTableMenuDismissed()},a.ensureTableMenuDismissed=function(){a.gridMenuPopupRef&&p.popupContext.gridMenuPopup.hide(),a.gridMenuPopupRef=null},a.ensureColumnMenuDismissed=function(){a.columnMenuPopupRef&&p.popupContext.columnMenuPopup.hide(),a.columnMenuPopupRef=null},a.createColumnMenuElement=function(){var e=document.createElement(\"div\");e.id=r.id+\"_menu\",e.classList.add(s.a.CLASS_TABLE_MENU),e.classList.add(s.a.CLASS_TABLE_MENU_POPUP),e.setAttribute(\"role\",\"menu\");var t=document.createElement(\"div\");return t.id=r.id+\"_menuContainer\",t.classList.add(s.a.CLASS_TABLE_MENU_CONTAINER),t.classList.add(\"afx-content-background\"),t.classList.add(\"aw-widgets-groupCommandStack\"),t.appendChild(e),t},a.menuElements=[];return a.columnMenuHandler=function(e,t){var c=e.columnDef;return function(t){if(function(e){return d.a.isBulkEditing(r)||!1===e.enableColumnMenu||d.a.isCellEditing(r)}(c))return;t.preventDefault();d.a.closestElement(r,\".\"+s.a.CLASS_TABLE_MENU_CONTAINER);var u;(u=t.currentTarget)&&u.dataset&&u.dataset.popupId&&\"null\"!==u.dataset.popupId&&a.columnMenuPopupRef?a.ensureColumnMenuDismissed():(!function(e,t,n,r){const s=()=>{const t=e,{width:n,height:i}=t.getBoundingClientRect();return{x:-n/2,y:-i/2}};let d=p.popupContext.columnMenuPopup;if(d){const t={whenParentScrolls:\"close\",ignoreReferenceClick:!0,ignoreClicksFrom:[\".flatpickr-calendar\"],reference:e,placement:\"right\",adaptiveShift:!0,autoFocus:!0,selectedElementCSS:\".aw-state-selected\",innerClassName:\"sw-table-menu-tooltip\",hasArrow:!0,forceCloseOthers:!1,padding:s(),width:\"185px\",arrowOptions:{alignment:\"center\",offset:5,shift:15},hooks:{whenClosed:()=>{b.default.unRegisterCtx(\"columnMenuContext\"),E.length&&(o.a.forEach(E,(function(e){i.a.unsubscribe(e)})),E.length=0),C(r)}}};b.default.registerCtx(\"columnMenuContext\",{}),d.hide().then((()=>{d.show(t).then((e=>{a.columnMenuPopupRef=e,l({type:\"UPDATE_VALUES\",popupRef:e})}))}))}}(t.currentTarget,0,0,e.parentElement),n.columnMenuLoaded=!0)}},a.setFilterDisability=function(e){var t=f.queryTableMenu(r.id).getElement().getElementsByClassName(\"filter-button\")[0];t&&(e?t.classList.add(\"disabled\"):t.classList.remove(\"disabled\"))},a};var le={applyColumnResizeHandler:function(e,t,n){var i=-1,l=-1,o=-1,a=t.parentElement.children[1].columnDef,r=a.index;h.enableDragging(t),t.addEventListener(s.a.EVENT_ON_ELEM_DRAG_START,(function(t){var d=t.detail;i=d.pageX,o=0,n.ensureAllTableMenusDismissed();var c=!0===a.pinnedLeft?e.getPinCanvasScrollLeftPosition():e.getScrollCanvasScrollLeftPosition();l=e.getTotalColumnWidth(r)-(s.a.WIDTH_COLUMN_SPLITTER-d.offsetX)+c,e.showColumnGrip(l)})),t.addEventListener(s.a.EVENT_ON_ELEM_DRAG,(function(t){var n=t.detail.pageX-i;e.isColumnWidthChangeValid(r,n)&&(o=n,e.setColumnGripPosition(l+o))})),t.addEventListener(s.a.EVENT_ON_ELEM_DRAG_END,(function(){e.hideColumnGrip(),e.updateColumnWidth(r,o)})),t.addEventListener(\"dblclick\",(function(){e.fitColumnWidth(r)}))}};let oe={};oe={subscribeMouseEvent:function(e,t,n){o.a.forEach(Object.keys(t),(i=>{if(e.default.on?e.default.on(i,n):e.default.addEventListener(i,n),E.default.isMobileOS&&e.mobile){var l=!1;o.a.forEach([\"touchmove\",\"touchcancel\"],(function(t){e.mobile[\"on\".concat(t)]=function(){l=!0}})),e.mobile[\"on\".concat(t[i])]=function(e){if(!l){e.preventDefault();var t=document.createEvent(\"MouseEvent\");t.initMouseEvent(i,!0,!1,window,1,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,1,null),e.target.dispatchEvent(t)}l=!1}}}))}};var ae=oe,re=function(e,t,n,i){var l=this,a=e,r=new A.a(e),c=d.a.getTableMenuService(e),u=t,p=e._tableInstance,m=p.keyboardService,f=null,h=0,g=0,E=0,C=!1,v={start:null,end:null};const S=\"aria-colindex\",_=\"aria-rowindex\",w=\"aria-rowcount\",y=\"data-indexnumber\";var I=function(e){if(\"string\"===typeof e){if(\"ASC\"===(e=e.toUpperCase()))return s.a.CLASS_ICON_SORT_ASC;if(\"DESC\"===e)return s.a.CLASS_ICON_SORT_DESC;if(\"\"===e)return s.a.CLASS_ICON_SORTABLE}return s.a.CLASS_ICON_NON_SORTABLE};l.setPinContext=function(e){if(void 0!==e&&null!==e)h=e+1;else{var t=-1;o.a.forEach(u,(function(e,n){!0===e.pinnedLeft&&(t=n)})),0===h&&(h=t+1)}g=0,E=0;for(var n=0;n<u.length;n++)n<h?(u[n].pinnedLeft=!0,u[n].startPosition=g,g+=u[n].drawnWidth):(u[n].pinnedLeft=!1,u[n].startPosition=E,E+=u[n].drawnWidth)},l.getPinColumnCount=function(){return h},l.initializeColumnWidths=function(){o.a.forEach(u,(function(e){var t=0;\"icon\"===e.name?(t=d.a.getTableRowHeight(p.gridOptions,s.a.WIDTH_DEFAULT_ICON_COLUMN_WIDTH))!==s.a.WIDTH_DEFAULT_ICON_COLUMN_WIDTH&&(t+=8):e.width>0?t=e.width:(t=e.minWidth>0?e.minWidth:s.a.WIDTH_DEFAULT_MINIMUM_WIDTH,t=Math.floor(1.25*t),t=e.maxWidth>0&&e.maxWidth<t?e.maxWidth:t),e.width=t,e.drawnWidth=t}))},l.setAriaColCount=function(e,t){if(void 0!==t){var n=t.filter((e=>void 0!==e.visible&&e.visible)).length;e.setAttribute(\"aria-colcount\",n)}else e.setAttribute(\"aria-colcount\",-1)},l.setAriaRowCount=function(e){if(!0===p.gridOptions.transpose){var t=p.dataProvider.cols.filter((e=>void 0!==e.visible&&e.visible));e.setAttribute(w,t.length+1)}else p.dataProvider.json&&p.dataProvider.json.firstPage&&p.dataProvider.action&&p.dataProvider.action.inputData.searchInput?e.setAttribute(w,p.dataProvider.json.firstPage.length+1):p.dataProvider.viewModelCollection&&p.dataProvider.viewModelCollection.loadedVMObjects?e.setAttribute(w,p.dataProvider.viewModelCollection.loadedVMObjects.length+1):e.setAttribute(w,-1)},l.setAriaLabelledAndDescribedBy=function(e,t){e&&(e.getAttribute(\"labelled-by\")&&t.setAttribute(\"aria-labelledby\",e.getAttribute(\"labelled-by\")),e.getAttribute(\"described-by\")&&t.setAttribute(\"aria-describedby\",e.getAttribute(\"described-by\")))};var R=function(e,t){var n=t>0?t:1;e.style.minWidth=n+\"px\"},x=function(e){var t=r.getPinHeaderElementFromTable(),n=r.getPinContentElementFromTable();t.style.minWidth=String(e)+\"px\",R(n,e)},D=function(e){var t=r.getScrollHeaderElementFromTable(),n=r.getScrollContentElementFromTable();t.style.minWidth=String(e)+\"px\";var i=parseInt(e,10)-parseInt(n.style.paddingLeft,10);R(n,i)},N=function(e,t){e.style.minWidth=String(t)+\"px\"},P=function(){var e=0,t=r.getScrollContentRowElementsFromTable();return t&&(e=t.length),e},M=function(e,t){e.classList.add(s.a.CLASS_HEADER_CELL_FILTER_APPLIED_ICON),e.title=t.summaryText};const O=function(t,n,o,r){let u=document.createElement(\"div\");u.classList.add(s.a.CLASS_HEADER_CELL),u.tabIndex=-1,m.setOnFocusAndBlur(u),u.setAttribute(\"role\",\"columnheader\"),u.setAttribute(S,n+1);let f=document.createElement(\"div\");f.classList.add(s.a.CLASS_COLUMN_DEF),f.classList.add(s.a.CLASS_CELL_CONTENTS),f.classList.add(s.a.CLASS_HEADER_CLEARFIX),f.classList.add(s.a.CLASS_HEADER_CELL_CONTENT),f.style.width=String(t.drawnWidth)+\"px\",f.columnDef=t,!0===p.gridOptions.transpose&&(f.onclick=L.default.selectionChanged(a)),!1!==t.headerTooltip&&!0===t.headerTooltip&&(f.title=t.displayName),u.appendChild(f);let g=document.createElement(\"div\");g.classList.add(s.a.CLASS_HEADER_CELL_SPLITTER),t.enableColumnResizing&&(u.insertBefore(g,f),le.applyColumnResizeHandler(l,g,c));let E=ee.a.createHeaderElement(t,e);E.classList.add(s.a.CLASS_HEADER_CELL_INNER),f.appendChild(E);let C,v=document.createElement(\"i\");v.classList.add(s.a.CLASS_HEADER_CELL_SORT_ICON),v.classList.add(I(o)),v.title=\"\",f.appendChild(v),null!==o&&\"\"!==o&&(C=o.toLowerCase().includes(\"desc\")?\"descending\":\"ascending\",u.setAttribute(\"aria-sort\",C));let b=document.createElement(\"i\");if(b.classList.add(s.a.CLASS_HEADER_CELL_FILTER_ICON),t.filter&&t.filter.isFilterApplied?M(b,t.filter):b.title=\"\",f.appendChild(b),!0===t.enableColumnMenu){const e=e=>{if(i){let e=-1;if(p.columnProvider.sortCriteria&&p.columnProvider.sortCriteria.length>0){var t=p.columnProvider.sortCriteria[0];e=l.getIdxFromColumnName(t.fieldName)}i({type:\"UPDATE_VALUES\",columnDef:f.columnDef,currentColumnIndex:e,pinColumnCount:h,isBulkEditing:d.a.isBulkEditing(a)})}c.columnMenuHandler(f,i)(e)};f.classList.add(s.a.CLASS_COLUMN_MENU_ENABLED),f.setAttribute(\"role\",\"button\"),f.setAttribute(\"aria-haspopup\",\"true\"),f.addEventListener(\"click\",(t=>{e(t)})),u.addEventListener(\"keydown\",(function(t){T.default.isValidKeyPress(t)&&e(t)}))}return t.startPosition=r,u};var H=function(e,t,n){let i=u,l=0;t<n&&(e.setAttribute(\"role\",\"row\"),e.setAttribute(_,1));for(let a=t;a<n;a++){let t=i[a],n=null;!1!==p.gridOptions.enableSorting&&t.enableSorting&&(n=t.sort&&t.sort.direction?t.sort.direction:\"\");const o=O(t,a,n,l);l+=t.drawnWidth,e.appendChild(o)}let o=d.a.getTableHeaderHeight(p.gridOptions,s.a.HEIGHT_HEADER)+\"px\";e.style.height=o,e.style.minHeight=o,e.style.maxHeight=o,e.style.minWidth=String(l)+\"px\"},F=function(){for(var e=r.getTableContainerElementFromTable().getElementsByClassName(\"ui-grid-row\"),t=0;t<e.length;t++)e[t].classList.remove(s.a.CLASS_ROW_HOVER)},B=function(){requestAnimationFrame((function(){F()}))};const V=function(t,i,l,o){const a=d.a.createElement(\"div\",s.a.CLASS_CELL);a.tabIndex=-1,p.dynamicRowHeightStatus&&a.classList.add(s.a.CLASS_CELL_DYNAMIC),t.colSelected&&(a.classList.add(s.a.CLASS_COLUMN_SELECTED),a.classList.add(s.a.CLASS_CELL_SELECTED));const r=\"compact\"===b.default.ctx.layout?s.a.HEIGHT_COMPACT_ROW:s.a.HEIGHT_ROW,c=d.a.getTableRowHeight(p.gridOptions,r);a.style.width=\"\".concat(l,\"px\"),a.style.height=p.dynamicRowHeightStatus?\"auto\":c+\"px\",a.appendChild(ee.a.createElement(t,i,e,o)),\"transposedColumnProperty\"===t.field?a.setAttribute(\"role\",\"rowheader\"):a.setAttribute(\"role\",\"gridcell\"),a.propName=t.field,a.columnDef=t,i.props&&(a.prop=i.props[t.field]);const u=a.getElementsByClassName(\"aw-splm-tableCellTop\");u.length>0&&d.a.addCSSClassForRowHeight(u[0],p.gridOptions);const f=document.createAttribute(y);return f.value=t.index,t.index>=h&&(f.value=t.index-h),a.setAttributeNode(f),a.setAttribute(S,t.index+1),n.addCellClickListener(a,i),m.setOnFocusAndBlur(a),m.setupInternalCellNavigation(a),a},W=function(e,t,n){let i=d.a.createElement(\"div\",s.a.CLASS_CELL_CHECKBOX),l=d.a.createElement(\"a\",\"aw-commands-cellCommandCommon\"),o=d.a.createElement(\"span\",\"sw-checkbox-val\"),a=d.a.createElement(\"input\",s.a.CLASS_CELL_CHECKBOX_BUTTON),r=document.createAttribute(\"type\");r.value=\"checkbox\",a.setAttributeNode(r);let c=n.filter((function(e){return!(!e.isTableCommand&&!e.isTreeNavigation)}))[0],u=c&&(c.propertyName||c.name);if(u&&e.vmo&&e.vmo.props&&e.vmo.props[u]){let t=e.vmo.props[u].uiValue,n=document.createAttribute(\"aria-label\");n.value=t,a.setAttributeNode(n)}let p=document.createElement(\"span\");p.classList.add(\"sw-checkbox-pseudo\"),o.appendChild(a),o.appendChild(p),l.appendChild(o),i.appendChild(l),e.appendChild(i)},k=function(e,t,n,i){const l=u,m=d.a.createElement(\"div\",s.a.CLASS_ROW,s.a.CLASS_UI_GRID_ROW,s.a.CLASS_ROW_ICON);let f=0;m.vmo=e,n<=i&&m.setAttribute(\"role\",\"row\"),function(e,t){!0===p.gridOptions.useTree&&(!1===t.isLeaf&&(!0===t.isExpanded?e.setAttribute(\"aria-expanded\",\"true\"):e.setAttribute(\"aria-expanded\",\"false\")),e.setAttribute(\"aria-level\",t.levelNdx+1))}(m,e);let h={default:m,mobile:m};ae.subscribeMouseEvent(h,{click:\"touchend\"},L.default.selectionChanged(a)),m.oncontextmenu=c.contextSelectionHandler,m.draggable=!0,function(e){e.addEventListener(\"mouseenter\",(function(e){const t=e.currentTarget;requestAnimationFrame((function(){F();const e=d.a.getIndexInParent(t),n=r.getScrollContentRowElementFromTable(e),i=r.getPinContentRowElementFromTable(e);n.classList.add(s.a.CLASS_ROW_HOVER),i.classList.add(s.a.CLASS_ROW_HOVER)}))}))}(m),e.rowStatus&&\"ADDED\"===e.rowStatus?m.classList.add(\"aw-jswidgets-change\"):e.rowStatus&&\"REMOVED\"===e.rowStatus&&m.classList.add(\"aw-jswidgets-oldText\");let g=o.a.sortBy(l,(function(e){return e.index}));o.a.forEach(g,(function(e){m.vmo.props&&m.vmo.props[e.field]&&(m.vmo.props[e.field].renderingHint=e.renderingHint)}));for(let o=n;o<=i;o++){const t=g[o];let n=null,i=t.drawnWidth;const l=p.showCheckBox;0===o&&l&&W(m,0,g),n=V(t,e,i,m),f+=i,m.appendChild(n)}return m.style.minWidth=String(f)+\"px\",m.style.minHeight=String(t)+\"px\",m},U=function(e){e.classList.remove(s.a.CLASS_HEADER_CELL_FILTER_APPLIED_ICON),e.title=\"\"};l.updateScrollColumnsInView=function(e,t){var n=r.getScrollHeaderElementFromTable().children,i=null,l=null,o=n.length;if(null!==t&&void 0!==t&&0!==t){for(var a=0;a<o;a++){var d=n[a].getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0].columnDef.startPosition;d<=e&&(i=a),d<=e+t&&(l=a)}v={start:i=i-3<0?0:i-3,end:l=l+3>o-1?o-1:l+3}}else v={start:0,end:o-1}},l.updateVisibleCells=function(e){const t=v.start,i=v.end;e=e.childNodes;const l=r.getScrollHeaderElementFromTable(),o=r.getScrollContentElementFromTable(),a=l.children;let c=0;for(let n=t;n<a.length;n++){const e=a[n].getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0].columnDef;null!==t&&(c+=e.drawnWidth)}let p=null;const m=l.style.minWidth;if(t>0){const e=a[t-1].getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0].columnDef;p=e.startPosition+e.drawnWidth+\"px\"}else p=\"0px\";o.style.paddingLeft=p;const f=parseInt(m,10)-parseInt(p,10);R(o,f);const g=e;for(let r=0;r<g.length;r++){const e=g[r].children;if(0===e.length)continue;const l=g[r];l.style.minWidth=c+\"px\";const o=e[0].columnDef.index,a=e[e.length-1].columnDef.index,s=t+h,p=i+h;for(let t=e.length-1;t>=0;t--){const n=e[t],i=n.columnDef.index;(i<s||i>p)&&(d.a.destroyChildElements(n),n.parentElement.removeChild(n))}for(let t=o-1;t>=s;t--){const e=V(u[t],l.vmo,u[t].drawnWidth,l);l.insertBefore(e,l.children[0]),n.updateEditStatusForCell(e)}for(let t=a+1;t<=p;t++){const e=V(u[t],l.vmo,u[t].drawnWidth,l);l.appendChild(e),n.updateEditStatusForCell(e)}}};const j=function(e){e.classList.remove(s.a.CLASS_ICON_SORT_ASC),e.classList.remove(s.a.CLASS_ICON_SORT_DESC),e.classList.remove(s.a.CLASS_ICON_NON_SORTABLE),e.classList.remove(s.a.CLASS_ICON_SORTABLE)};l.getColumnMinWidth=function(e){return u[e].minWidth},l.getColumnMaxWidth=function(e){return u[e].maxWidth},l.getColumnWidth=function(e){return u[e].drawnWidth};const G=function(){let e=0,t=0;for(let n=0;n<u.length;n++)n<h?(u[n].startPosition=e,e+=u[n].drawnWidth):(u[n].startPosition=t,t+=u[n].drawnWidth)};l.updateColumnWidth=function(e,t){let n=l.getColumnWidth(e)+t;!function(e,t){r.getHeaderCellElementFromTable(e).style.width=String(t)+\"px\"}(e,n),function(e,t){for(var n=P(),i=0;i<n;i++){var o=r.getContentCellFromTable(i,e),a=l.getColumnWidth(e);if(e<h){var s=r.getPinContentRowElementFromTable(i);N(s,g+t-a)}else{var d=r.getScrollContentRowElementFromTable(i);N(d,E+t-a)}o.style.width=String(t)+\"px\"}}(e,n),e<h?(x(g+=t),r.getScrollContainerElementFromTable().style.marginLeft=String(g)+\"px\"):D(E+=t),0!==t&&(u[e].drawnWidth=n,p.tableInstanceCallbacks.columnsResized({name:u[e].name,delta:t})),G();let i=r.getScrollCanvasElementFromTable();l.updateScrollColumnsInView(i.scrollLeft,i.offsetWidth),0!==t&&l.updateVisibleCells(r.getScrollContentElementFromTable())},l.updateFilterIcon=function(e){for(var t=r.getHeaderCellElementsFromTable(),n=0;n<t.length;n++){var i=t[n].getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0].columnDef,l=t[n].getElementsByClassName(s.a.CLASS_HEADER_CELL_FILTER_ICON)[0];if(i&&i.filter&&l&&i.field===e){i.filter.isFilterApplied?M(l,i.filter):U(l);break}}},l.updateAllFilterIcons=function(){for(var e=r.getHeaderCellElementsFromTable(),t=0;t<e.length;t++){var n=e[t].getElementsByClassName(s.a.CLASS_COLUMN_DEF)[0].columnDef,i=e[t].getElementsByClassName(s.a.CLASS_HEADER_CELL_FILTER_ICON)[0];n&&n.filter&&i&&(n.filter.isFilterApplied?M(i,n.filter):U(i))}},l.fitColumnWidth=function(e){var t=u[e].isTreeNavigation,n=r.queryRowColumnCellElementsFromTable(e),i=0,o=r.getHeaderCellElementFromTable(e).getElementsByClassName(s.a.CLASS_HEADER_CELL_INNER)[0];i=d.a.getElementTextWidth(o);var a=p.gridOptions.isFilteringEnabled,c=p.gridOptions.enableSorting;if((a||c)&&(i+=s.a.WIDTH_MINIMUM_EXTRA_SPACE),n.forEach((function(e){var n;if(t)n=d.a.getElementTextWidth(e),i=n>i?n:i;else{var l=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_CELL_TEXT);0===l.length&&(l=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS));for(var o=0;o<l.length;o++)n=d.a.getElementTextWidth(l[o]),i=n>i?n:i}})),i>0){var m=l.getColumnWidth(e),f=l.getValidColumnWidth(e,i);m!==f&&l.updateColumnWidth(e,f-m)}},l.updateColumnVisibility=function(e){var t=l.getIdxFromColumnName(e),n=r.getHeaderCellElementFromTable(t);n&&n.parentElement&&n.parentElement.removeChild(n);for(var i=P(),a=0;a<i;a++){var s=r.getContentCellFromTable(a,t);s&&s.parentElement&&s.parentElement.removeChild(s)}u[t].visible=!1,u.splice(t,1),o.a.forEach(u,(function(e,t){e.index=t})),l.resetColumnDefs(u);var d=r.getScrollCanvasElementFromTable();l.updateScrollColumnsInView(d.scrollLeft),l.updateVisibleCells(r.getScrollContentElementFromTable())};l.pinToColumn=function(e){var t=r.getScrollCanvasElementFromTable();l.updateScrollColumnsInView(t.scrollLeft),l.updateVisibleCells(r.getScrollContentElementFromTable()),function(e){var t=e+1,n=h,i=r.getHeaderCellElementsFromTable(),o=document.createDocumentFragment(),a=0;if(n<t){for(var s=n;s<t;s++)o.appendChild(i[n]),a+=l.getColumnWidth(s);r.queryPinContainerFromTable().toHeader().getElement().appendChild(o),x(g+a),D(E-a),r.getScrollContainerElementFromTable().style.marginLeft=String(g+a)+\"px\"}else if(n>t){for(var d=t;d<n;d++)o.appendChild(i[t]),a+=l.getColumnWidth(d);var c=r.queryScrollContainerFromTable().toHeader().getElement();c.insertBefore(o,c.childNodes[0]),x(g-a),D(E+a),r.getScrollContainerElementFromTable().style.marginLeft=String(g-a)+\"px\"}}(e),function(e){var t=e+1,n=h,i=document.createDocumentFragment(),o=r.queryPinContainerFromTable().getContentRowElements(),a=r.queryScrollContainerFromTable().getContentRowElements(),s=o.length,d=0;if(n<t)for(var c=0;c<s;c++){d=0;for(var u=n;u<t;u++)i.appendChild(a[c].children[0]),d+=l.getColumnWidth(u);o[c].appendChild(i),N(o[c],g+d),N(a[c],E-d)}else if(n>t)for(var p=0;p<s;p++){d=0;for(var m=t;m<n;m++)i.appendChild(o[p].children[t]),d+=l.getColumnWidth(m);a[p].insertBefore(i,a[p].childNodes[0]),N(o[p],g-d),N(a[p],E+d)}}(e),l.setPinContext(e);let n=u[e],i=r.getPinCanvasElementFromTable();i.scrollLeft=n.startPosition;let o=new A.a(a);d.a.syncHeader(o,!0,i.scrollLeft),function(){for(var e=r.getContentCellElementsFromTable(),t=0;t<e.length;t++){var n=e[t],i=n.columnDef,l=document.createAttribute(y);l.value=i.index,i.index>=h&&(l.value=i.index-h),n.setAttributeNode(l),G()}}(),l.updateScrollColumnsInView(t.scrollLeft,t.offsetWidth),l.updateVisibleCells(r.getScrollContentElementFromTable())},l.resetFreezeScroll=function(e){let t=0;if(u&&u.length)for(var n=0;n<u.length;n++)u[n].field===e&&(t=u[n].startPosition);let i=t;r.getScrollCanvasElementFromTable().scrollLeft=i};l.getColumnDefs=function(){return u},l.resetColumnDefs=function(e){var t=function(e,t){var n;if(o.a.isArray(t)&&o.a.isArray(e))for(var i=t.length-1;i>=0;i--){for(var l=0;l<e.length;l++)if(t[i].name&&(t[i].name===e[l].name||t[i].name===e[l].field)){n=e[l].index;break}if(n)break}return n}(e,function(){var e=[];if(u&&u.length)for(var t=0;t<u.length;t++)!0===u[t].pinnedLeft&&e.push(u[t]);return e}());u=e,l.initializeColumnWidths(),l.setPinContext(t);var n=r.getPinContainerElementFromTable(),i=r.getPinHeaderElementFromTable(),a=r.getPinContentElementFromTable();i.innerHTML=\"\",H(i,0,h),n.replaceChild(i,n.children[0]),R(a,parseInt(i.style.minWidth,10));var s=r.getScrollContainerElementFromTable(),d=r.getScrollHeaderElementFromTable(),c=r.getScrollContentElementFromTable();d.innerHTML=\"\",H(d,h,u.length);var p=parseInt(d.style.minWidth,10)-parseInt(c.style.paddingLeft,10);R(c,p),0===s.children.length&&s.appendChild(d),l.updateColumnWidth(0,0),l.setAriaColCount(r.getTableContainerElementFromTable(),e)},l.isColumnWidthChangeValid=function(e,t){var n=l.getColumnWidth(e)+t;return l.getValidColumnWidth(e,n)===n},l.getValidColumnWidth=function(e,t){var n=l.getColumnMaxWidth(e),i=l.getColumnMinWidth(e);return(i=i>s.a.WIDTH_ALLOWED_MINIMUM_WIDTH?i:s.a.WIDTH_ALLOWED_MINIMUM_WIDTH)&&t<i?t=i:n&&t>n&&(t=n),t},l.isColumnSplitterDraggable=function(e){return!1!==u[e].enableColumnResizing},l.getTotalColumnWidth=function(e){for(var t=0,n=e+1,i=0;i<n;i++)t+=l.getColumnWidth(i);return t},l.getIdxFromColumnName=function(e){for(var t=0;t<u.length;t++)if(u[t].field===e||u[t].name===e)return t;return-1},l.setHeaderCellSortDirection=function(e,t,n){var i,l=null,o=null;null!==n&&\"\"!==n&&(o=n.toLowerCase().includes(\"desc\")?\"descending\":\"ascending\"),e>-1&&(i=r.getHeaderCellSortIconElementFromTable(e),j(i),i.classList.add(I(\"\")),null!==(l=r.getHeaderCellElementFromTable(e))&&l.parentElement.hasAttribute(\"aria-sort\")&&l.parentElement.removeAttribute(\"aria-sort\")),i=r.getHeaderCellSortIconElementFromTable(t),j(i),i.classList.add(I(n)),null!==(l=r.getHeaderCellElementFromTable(t))&&null!==o&&l.parentElement.setAttribute(\"aria-sort\",o)},l.getScrollCanvasScrollLeftPosition=function(){return-1*r.getScrollCanvasElementFromTable().scrollLeft},l.getPinCanvasScrollLeftPosition=function(){return-1*r.getPinCanvasElementFromTable().scrollLeft};const z=function(e,t,n,i,o,a){let r=document.createDocumentFragment(),d=document.createDocumentFragment();for(let c=0;c<e.length;c++){let m=e[c];const f=c+t,g=document.createAttribute(y);g.value=f;let E=null,C=null;a?(E=k(m,n,i,o),E.classList.add(s.a.CLASS_PINNED_ROW)):(null!==v.start&&null!==v.end&&(i=v.start+h,o=v.end+h),E=k(m,n,i,o),p.dynamicRowHeightStatus&&(C=k(m,n,i,u.length-1),C.setAttributeNode(g.cloneNode()))),E.setAttributeNode(g),E.children.length>0&&E.setAttribute(_,f+2);let b,L=E.childNodes;for(let e=0;e<L.length;e++)L[e].hasAttribute(S)&&(b=p.gridId+\"_row\"+E.getAttribute(_)+\"_col\"+L[e].getAttribute(S),L[e].setAttribute(\"id\",b));r.appendChild(E),p.dynamicRowHeightStatus&&C&&d.appendChild(C),!0!==a&&null!==v.start&&null!==v.end&&l.updateVisibleCells(r)}return p.dynamicRowHeightStatus&&function(e,t,n){let i=document.createElement(\"div\");i.style.position=\"absolute\",i.style.visibility=\"hidden\",i.style.height=\"auto\",i.style.width=\"auto\";const l=t.childNodes.length?t:e.cloneNode(!0);i.appendChild(l),document.body.appendChild(i);const o=i.childNodes,a=e.childNodes,r=n*s.a.MAX_ROW_HEIGHT_ROWS;for(let d=0;d<o.length;d++){const e=o[d],t=a[d].vmo;let i=0;const l=e.childNodes;for(let o=0;o<l.length;o++){const e=l[o];if(!e.childNodes[0]||!e.childNodes[0].classList.contains(s.a.CLASS_SPLM_TABLE_ICON_CELL))if(e.childNodes[0]&&e.childNodes[0].classList.contains(s.a.CLASS_AW_TREE_COMMAND_CELL)){const t=e.getElementsByClassName(s.a.CLASS_WIDGET_TABLE_CELL_TEXT)[0];if(t){const e=t.offsetHeight+15;i=e>i?e:i}else i=n>i?n:i}else{const t=e.offsetHeight+11;i=t>i?t:i}}i=Math.min(Math.max(i,n),r),t.rowHeight=!t.rowHeight||i>t.rowHeight?i:t.rowHeight;const c=a[d].getElementsByClassName(s.a.CLASS_WIDGET_TABLE_CELL_TEXT_DYNAMIC);for(let n=0;n<c.length;n++)c[n].style.maxHeight=String(t.rowHeight)+\"px\"}document.body.removeChild(i)}(r,d,n),r};l.constructContentElement=function(e,t,n,i){if(!0===i){var l=r.getPinHeaderElementFromTable();return!0===p.showCheckBox?C||(C=!0,g+=32,l.lastChild.style.width=l.lastChild.clientWidth+32+\"px\",r.getScrollContainerElementFromTable().style.marginLeft=String(g)+\"px\"):!p.showCheckBox&&C&&(C=!1,g-=32,l.lastChild.style.width=\"\",r.getScrollContainerElementFromTable().style.marginLeft=String(g)+\"px\"),z(e,t,n,0,h-1,i)}return z(e,t,n,h,u.length-1,i)};var q=function(e,t,n){var i=e.getElement(),l=e.getContentRowElements(),o=t||l.length-1,a=n||0;if(l&&l.length>0)for(;o>=a;o--){var r=l[o].getElementsByClassName(s.a.CLASS_TABLE_EDIT_CELL_TOP)[0]||l[o].getElementsByClassName(s.a.CLASS_TABLE_EDIT_CELL_TOP_ARRAY)[0];void 0!==r&&void 0!==r.parentElement.prop&&(r.parentElement.prop.isEditing=!1),d.a.cleanupComponents(l[o]),i.removeChild(l[o])}};return l.removeContentElement=function(e,t){q(r.queryPinContentFromTable(),e,t),q(r.queryScrollContentFromTable(),e,t)},l.clearScrollContents=function(){r.getScrollContentElementFromTable().innerHTML=\"\"},l.setSelectable=function(e){e?a.classList.add(s.a.CLASS_SELECTION_ENABLED):a.classList.remove(s.a.CLASS_SELECTION_ENABLED)},l.setDraggable=function(e){for(var t=a.getElementsByClassName(s.a.CLASS_ROW),n=0;n<t.length;n++)t[n].draggable=e},l.showColumnGrip=function(e){l.setColumnGripPosition(e),f.style.removeProperty(\"display\")},l.setColumnGripPosition=function(e){f.style.marginLeft=String(e-30)+\"px\"},l.hideColumnGrip=function(){f.style.display=\"none\"},function(){var e=u,t=document.createElement(\"div\");t.classList.add(s.a.CLASS_TABLE_CONTAINER),t.tabIndex=0,!0===p.gridOptions.useTree?t.setAttribute(\"role\",\"treegrid\"):t.setAttribute(\"role\",\"grid\"),\"multiple\"===p.dataProvider.selectionModel.mode?t.setAttribute(\"aria-multiselectable\",\"true\"):t.setAttribute(\"aria-multiselectable\",\"false\"),!0===p.gridOptions.enableCellHeaderSelection&&t.classList.add(s.a.CLASS_HEADER_SELECTION_ENABLED),l.setAriaRowCount(t),l.setAriaColCount(t,p.dataProvider.cols),a.appendChild(t),l.initializeColumnWidths(),l.setPinContext(),t.appendChild(function(){(f=document.createElement(\"div\")).classList.add(s.a.CLASS_COLUMN_RESIZE_GRIP),f.style.position=\"absolute\",f.style.height=\"100%\";var e=document.createElement(\"div\");return e.style.borderLeft=\"1px solid\",e.style.marginLeft=\"30px\",e.style.height=\"100%\",f.appendChild(e),f.style.zIndex=\"1000\",f.style.cursor=\"col-resize\",f.style.outline=\"20px transparent\",f.style.width=\"60px\",f.style.display=\"none\",f}());var n=document.createElement(\"div\");n.classList.add(s.a.CLASS_PIN_CONTAINER),n.classList.add(s.a.CLASS_PIN_CONTAINER_LEFT),!0===p.gridOptions.transpose&&n.classList.add(s.a.CLASS_COMPARE_CONTAINER);var i=document.createElement(\"div\");i.classList.add(s.a.CLASS_HEADER_ROW),H(i,0,h),n.appendChild(i);var o=document.createElement(\"div\");o.classList.add(s.a.CLASS_CANVAS),o.classList.add(s.a.CLASS_VIEWPORT);var r=document.createElement(\"div\");r.addEventListener(\"mouseleave\",(function(){B()})),r.classList.add(s.a.CLASS_SCROLL_CONTENTS),R(r,parseInt(i.style.minWidth,10)),o.appendChild(r),n.appendChild(o),t.appendChild(n);var d=document.createElement(\"div\");d.classList.add(s.a.CLASS_SCROLL_CONTAINER),d.style.marginLeft=String(g)+\"px\";var c=document.createElement(\"div\");c.classList.add(s.a.CLASS_HEADER_ROW),H(c,h,e.length),d.appendChild(c);var m=document.createElement(\"div\");m.classList.add(s.a.CLASS_VIEWPORT),m.classList.add(s.a.CLASS_CANVAS);var E=document.createElement(\"div\");E.addEventListener(\"mouseleave\",(function(){B()})),E.classList.add(s.a.CLASS_SCROLL_CONTENTS),R(E,parseInt(c.style.minWidth,10)),m.appendChild(E),d.appendChild(m),t.appendChild(d)}(),l.updateColorIndicatorElements=function(e){var t=r.getPinContentRowElementsFromTable();o.a.forEach(t,(function(t){var n=t.vmo;if(e.includes(n)){var i=t.getElementsByClassName(s.a.CLASS_AW_CELL_COLOR_INDICATOR)[0];if(i){var l=d.a.createColorIndicatorElement(n);i.parentElement.replaceChild(l,i)}}}))},l.syncContentRowHeights=function(e,t){if(e&&e.childNodes)for(let n=0;n<e.childNodes.length;n++){let t=e.childNodes[n],i=t.vmo;t.style.height=String(i.rowHeight)+\"px\"}if(t&&t.childNodes)for(let n=0;n<t.childNodes.length;n++){let e=t.childNodes[n],i=e.vmo;e.style.height=String(i.rowHeight)+\"px\"}},l},se={},de={isIdOfObject:function(e,t){let n=!1;return e&&(e.alternateID&&(n=e.alternateID===t),!n&&e.uid&&(n=e.uid===t||-1!==e.uid.indexOf(t))),n}};const ce=N.b.DOMAPIs;se.arrangeMenu=M.default.getLoadedTextFromKey(\"treeTableMessages.arrangeMenu\"),se.removeAllFilters=M.default.getLoadedTextFromKey(\"treeTableMessages.removeAllFilters\"),se.TwistieTooltipExpanded=M.default.getLoadedTextFromKey(\"treeTableMessages.TwistieTooltipExpanded\"),se.TwistieTooltipCollapsed=M.default.getLoadedTextFromKey(\"treeTableMessages.TwistieTooltipCollapsed\"),se.hideColumn=M.default.getLoadedTextFromKey(\"treeTableMessages.hideColumn\"),se.sortAscending=M.default.getLoadedTextFromKey(\"treeTableMessages.sortAscending\"),se.sortDescending=M.default.getLoadedTextFromKey(\"treeTableMessages.sortDescending\"),se.removeSort=M.default.getLoadedTextFromKey(\"treeTableMessages.removeSort\"),se.freezeMenu=M.default.getLoadedTextFromKey(\"treeTableMessages.freezeMenu\"),se.unfreezeMenu=M.default.getLoadedTextFromKey(\"treeTableMessages.unfreezeMenu\"),se.visibilityControlsTitle=M.default.getLoadedTextFromKey(\"treeTableMessages.visibilityControlsTitle\"),se.gridMenu=M.default.getLoadedTextFromKey(\"treeTableMessages.gridMenu\");var ue={createTableObject:function(e,t,n,l,a,r,c,u,p,m,f,E,C,S,T){var w=null,N=c||de,k=x.a.createCellRenderer(),U=d.a.createElement(\"div\"),j=new A.a(U),G=null,z=null,q=null,Y=!1;let X=null,K=null,Z=null,J=null,$=T;var Q=\"compact\"===b.default.ctx.layout?s.a.HEIGHT_COMPACT_ROW:s.a.HEIGHT_ROW;Q=d.a.getTableRowHeight(u,Q);var ne=s.a.HEIGHT_HEADER;ne=d.a.getTableHeaderHeight(u,ne);let le=function(){let e=n.cols;!0===u.transpose&&(e=y(w,n.viewModelCollection.loadedVMObjects));for(let t=0;t<e.length;t++)e[t].visible=!e[t].hasOwnProperty(\"visible\")||e[t].visible;w=o.a.filter(e,(function(e){return!!e.visible&&e})),o.a.forEach(w,(function(e,t){e.index=t,e.cellRenderers||(e.cellRenderers=[]),\"icon\"===e.name&&e.iconCellRenderer&&(e.cellRenderers=e.cellRenderers.concat(e.iconCellRenderer)),e.cellRenderers=e.cellRenderers.concat(k.getAwCellRenderers())})),o.a.forEach(w,(function(e,t){e.index=t,e.headerRenderers||(e.headerRenderers=[]),e.headerRenderers=e.headerRenderers.concat(k.getAwHeaderRenderers())})),q.loadDefaultColumnMenus()},oe=function(){return n.viewModelCollection?!0===u.transpose?I(n.cols,n.viewModelCollection.loadedVMObjects):n.viewModelCollection.loadedVMObjects:[]},ae=function(){le(),R.default.removeStaleFilters(a,w),G.resetColumnDefs(w),K.initialize(),X.isInitialized()&&(k.resetHoverCommandElement(),X.setLoadedVMObjects(oe()),X.handleScroll())};var ue=function(e,t){for(var i=[],l=e;l<=t;l++){var o=n.viewModelCollection.loadedVMObjects[l];if(!o.isPropLoading)o.props?0===Object.keys(o.props).length&&i.push(o):i.push(o)}return i};if(t){var pe=[];U.id=t,U.classList.add(s.a.CLASS_TABLE),U.classList.add(s.a.CLASS_WIDGET_GRID),U.classList.add(s.a.CLASS_LAYOUT_COLUMN),U.classList.add(s.a.CLASS_WIDGET_TABLE_DROP),U.classList.add(s.a.CLASS_SELECTION_ENABLED),d.a.setSortCriteriaOnColumns(a,n);var me=function(){return void 0!==p?p:void 0!==u.maxRowsToShow?(Q+1)*u.maxRowsToShow+s.a.HEIGHT_HEADER:void 0};X=new v(me()),U._tableInstance={ctx:b.default.ctx,messages:se,declViewModel:r,dataProvider:n,viewModelCollection:l,columnProvider:a,gridId:t,gridOptions:u,isBulkEditing:!1,isCellEditing:!1,renderer:X,dynamicRowHeightStatus:!1,cellRenderer:k,runActionWithViewModel:f,tableInstanceCallbacks:E,tableContext:C||{},showCheckBox:T},z=new te(U,e,m),U._tableInstance.editor=z,Z=new _(U,z),Z.setupKeyListener(),U._tableInstance.keyboardService=Z,q=new ie(U,e,U._tableInstance,m),u.enableGridMenu&&q.addGridMenu(),!0===u.showContextMenu&&q.setContextSelectionHelper(O.a),u.enableDynamicRowHeight&&(U._tableInstance.dynamicRowHeightStatus=!0),le(),G=new re(U,w,z,m),U._tableInstance.controller=G,U._tableInstance.editor=z;var fe=o.a.debounce((function(e,n){i.a.publish(t+\".plTable.loadMorePages\",{firstRenderedItem:e,lastRenderedItem:n})}),500),he={},ge=o.a.debounce((function(){U._tableInstance.isDestroyed||(!function(e){var t=j.queryAllRowCellElementsFromTable();o.a.forEach(e,(function(e,i){o.a.forEach(t,(function(t){o.a.forEach(t.children,(function(l){let o=null;if(t.vmo&&t.vmo.uid===i)o=t.vmo;else{if(!0!==u.transpose||!l.columnDef.vmo||l.columnDef.vmo.uid!==i)return;o=l.columnDef.vmo}var a=!1;if(l.columnDef&&\"icon\"===l.columnDef.name||!0===u.transpose&&\"icon\"===t.vmo.props.transposedColumnProperty.dbValue){var r=l.getElementsByTagName(\"img\")[0];r&&r.getAttribute(\"src\")!==d.a.getImgURL(o)&&(a=!0)}else for(var c=0;c<e.length;c++)if(l.propName===e[c]||!0===u.transpose&&t.vmo.props.transposedColumnProperty.dbValue===e[c]){a=!0;break}if(a&&(ee.a.updateCell(l,t,U,z),t.vmo.selected&&(l.columnDef.isTableCommand||l.columnDef.isTreeNavigation))){let e=l.children[0];if(l.columnDef.isTreeNavigation&&(e=l.getElementsByClassName(\"aw-jswidgets-tableNonEditContainer\")[0]),0===e.getElementsByClassName(s.a.CLASS_AW_CELL_COMMANDS_CONTAINER).length&&n.selectionModel&&!n.selectionModel.multiSelectEnabled&&1===n.selectionModel.getCurrentSelectedCount()){let n=x.a.createCellCommandElement(l.columnDef,t.vmo,!0);e.appendChild(n)}}}))}))}))}(he),he={})}),250);pe.push(i.a.subscribe(\"viewModelObject.propsUpdated\",(function(e){for(var t in e)if(void 0===he[t])he[t]=e[t];else for(var n=0;n<e[t].length;n++){var i=e[t][n];-1===he[t].indexOf(i)&&he[t].push(i)}ge()})));var Ee=function(e){i.a.publish(t+\".plTable.loadProps\",{VMOs:e})};K=new g(U);var Ce=function(e){G.setDraggable(!e),z.updateEditStatus(e)};J=function(e){if(G&&e.dataSource&&(e.dataSource.getAtomicData&&e.dataSource.getAtomicData().dpRef&&e.dataSource.getAtomicData().dpRef.current||e.dataSource.name===n.name)){var t=\"partialSave\"===e.state||\"starting\"===e.state;\"saved\"===e.state?(o.a.forEach(n.cols,(function(e){R.default.setColumnFilterStale(e)})),d.a.isAutoSaveEnabled(U)||z.clearPropIsEditableCache(),d.a.setIsCellEditing(U,!1)):\"canceling\"===e.state&&(z.clearPropIsEditableCache(),d.a.setIsCellEditing(U,!1)),n.cacheCollapse=!0,d.a.setIsBulkEditing(U,t),m({type:\"UPDATE_VALUES\",isBulkEditing:U._tableInstance.isBulkEditing,dynamicRowHeightStatus:U._tableInstance.dynamicRowHeightStatus}),G.setSelectable(!t),(!1===d.a.isCellEditing(U)||d.a.isCellEditing(U)&&!d.a.isAutoSaveEnabled(U))&&Ce(t),u.useTree&&!d.a.isExpandOrPaginationAllowedInEdit(U)&&function(e){X.setupTreeEditScroll(e)}(t),t||n.restoreInitialCacheCollapseState(),!0===U._tableInstance.dynamicRowHeightStatus&&(Re(),ye())}},pe.push(i.a.subscribe(n._eventTopicEditInProgress,(function(){if(!0!==S){const e={dataSource:n,state:n._editingState};J(e)}}))),pe.push(i.a.subscribe(r._internal.eventTopicEditInProgress,(function(){const e={dataSource:r,state:r._editingState};J(e)}))),pe.push(i.a.subscribe(\"plTable.editStateChange\",(function(e){J(e)}))),pe.push(i.a.subscribe(\"editHandlerStateChange\",(function(e){J(e)})));var ve=o.a.debounce((function(){var e=j.queryAllRowCellElementsFromTable();o.a.forEach(e,(function(e){if(e.vmo){var t=e.getElementsByClassName(s.a.CLASS_SPLM_TABLE_ICON_CELL)[0];if(t||(t=e.getElementsByClassName(s.a.CLASS_AW_TREE_COMMAND_CELL)[0]),t){var n=t.parentElement,i=n.columnDef,l=ee.a.createElement(i,e.vmo,U,e);n.replaceChild(l,t)}}}))}),100);pe.push(i.a.subscribe(n.name+\".resetScroll\",(function(){xe()}))),!1===d.a.validateRowHeightGridOption(U._tableInstance.gridOptions)&&pe.push(i.a.subscribe(\"LayoutChangeEvent\",(function(e){var t=Q;if(t!==(Q=e.rowHeight)&&X.isInitialized()){X.setRowHeight(Q+1);var n=me();void 0!==n&&X.setContainerHeight(n),X.initializeProperties(),U._tableInstance.dynamicRowHeightStatus&&Re(),X.updateRowAlignment();var i=j.getScrollCanvasElementFromTable(),l=i.scrollTop;i.scrollTop=l/t*Q,X.handleScroll()}}))),!0!==(o.a.isString(S)?\"true\"===S:S)&&(pe.push(i.a.subscribe(n.name+\".selectionChangeEvent\",(function(){L.default.updateContentRowSelection(n.selectionModel,n.cols,j.getPinContentRowElementsFromTable(),j.getScrollContentRowElementsFromTable(),U)}))),pe.push(i.a.subscribe(n.name+\".selectAll\",(function(){L.default.updateContentRowSelection(n.selectionModel,n.cols,j.getPinContentRowElementsFromTable(),j.getScrollContentRowElementsFromTable(),U)}))),pe.push(i.a.subscribe(n.name+\".selectNone\",(function(){L.default.updateContentRowSelection(n.selectionModel,n.cols,j.getPinContentRowElementsFromTable(),j.getScrollContentRowElementsFromTable(),U)})))),pe.push(i.a.subscribe(t+\".plTable.visibilityStateChanged\",ve)),pe.push(i.a.subscribe(t+\".plTable.resizeCheck\",(function(){X.isInitialized()&&X.checkForResize()})));var be=function(e,i){if(t===e){if(d.a.isBulkEditing(U))return;for(var l=[],o=0;o<i.length;o++){var a=i[o].uid?i[o].uid:i[o],r=n.viewModelCollection.findViewModelObjectById(a);-1!==r&&l.push(r)}l.length>0&&X.scrollToRowIndex(l)}};pe.push(i.a.subscribe(\"plTable.scrollToRow\",(function(e){be(e.gridId,e.rowUids)})));var Se=function(e){!0===e&&!1!==u.showDecorators?U.classList.add(s.a.CLASS_AW_SHOW_DECORATORS):U.classList.remove(s.a.CLASS_AW_SHOW_DECORATORS)},Le=\"decoratorToggle\",Te=b.default.getCtx(Le);Se(Te),pe.push(i.a.subscribe(\"appCtx.register\",(function(e){e.name===Le&&Se(e.value)}))),pe.push(i.a.subscribe(\"appCtx.update\",(function(e){e.name===Le&&Se(e.value.decoratorToggle)}))),pe.push(i.a.subscribe(\"decoratorsUpdated\",(function(e){e=void 0===e.length?[e]:e,G.updateColorIndicatorElements(e)}))),pe.push(i.a.subscribe(n.name+\".expandTreeNode\",(function(e){if(e.parentNode){var t=n.getViewModelCollection(),l=t.findViewModelObjectById(e.parentNode.id);if(-1!==l){var o=t.getViewModelObject(l);!0!==o.isExpanded&&(o.isExpanded=!0,E.toggleTreeNode?E.toggleTreeNode(o):i.a.publish(U.id+\".plTable.toggleTreeNode\",o))}}})));const c=function(e,t){var i=[],l=e.classList.contains(s.a.CLASS_ROW)?e:d.a.closestElement(e,\".\"+s.a.CLASS_ROW);if(l&&l.vmo){i.push(l.vmo);var o=l.vmo.uid;if(!t){var a=P.a.getSourceObjects(n,o).filter((function(e){return-1===i.indexOf(e)}));i=i.concat(a)}return i}return null};var Ae=!1,_e=null;const A=(e,t)=>{Ae||(Ae=!0,_e=t)},y=e=>!(!e||!e.types)&&(\"dragstart\"===event.type&&[...e.types].some((e=>\"text/plain\"===e||\"Text\"===e)));let I={clearSelection:e=>{n.selectNone()},setSelection:e=>{A(null,e)},getTargetElementAndVmo:(e,t)=>{let n=null,i=null;return y(e.dataTransfer)||(i=ce.closest(e.target,\".ui-grid-row\")||ce.closest(e.target,\".aw-widgets-droppable\")),i&&(n=c(i,!t)),{targetElement:i,targetVMO:n}},highlightTarget:e=>{h.handleDragDropHighlightPLTable(e)}};const N=(e,t,n,i)=>{const l=e=>{let l={},o=\"dragstart\"===e.type;t.getTargetElementAndVmo&&(l=t.getTargetElementAndVmo(e,o)),(0,n.dndHandler[e.type])(e,l,t,i)},o=t=>{let n=l.bind(null);e.addEventListener(t,n)},a=e=>{Object.keys(e).forEach((e=>{o(e.toLowerCase())}))};let r=D.a.getDragHandler(n);r&&a(r);let s=D.a.getDropHandler(n);s&&a(s)};U._tableInstance.subDefs=pe,e.appendChild(U),!1!==u.enableDragAndDrop?D.a.areDnDHandelersDefined(r)&&N(U,I,r,n):P.a.disableDragAndDrop(U)}let we=function(){var l=[];if(o.a.forEach(n.cols,(function(e){e.field&&!0!==e.hiddenFlag&&l.push(e.field)})),n&&n.action&&n.action.inputData){n.action.inputData.searchInput=n.action.inputData.searchInput||{};var a=n.action.inputData.searchInput;a.attributesToInflate?a.attributesToInflate=o.a.union(a.attributesToInflate,l):a.attributesToInflate=l}if(!0===u.transpose&&ae(),X.isInitialized())X.resetRowHeightCache(),X.setLoadedVMObjects(oe()),0===j.getScrollCanvasElementFromTable().scrollTop?X.renderInitialRows():X.handleScroll();else{if(n.isFocusedLoad){var c=n.getSelectedObjects();1===c.length&&be(t,[c[0].uid])}X.initializeGrid({tableElem:U,directiveElem:e,scrollViewportElem:j.getScrollCanvasElementFromTable(),pinViewportElem:j.getPinCanvasElementFromTable(),rowSelector:\".\"+s.a.CLASS_ROW,rowHeight:Q+1,headerHeight:ne,dynamicRowHeightStatus:u.enableDynamicRowHeight,loadedVMObjects:oe(),updateVisibleCells:function(e){G.updateVisibleCells(e)},updateScrollColumnsInView:function(e,t){G.updateScrollColumnsInView(e,t)},onStartScroll:function(){d.a.isBulkEditing(U)},syncHeader:function(e,t){let n=new A.a(U);d.a.syncHeader(n,e,t)},renderRows:function(t,i){var l=oe().slice(t,i+1);if(0!==l.length){if(!0===u.useTree){let e=u.textBundle?u.textBundle:se;o.a.forEach(l,(function(t){t.isLeaf?t._twistieTitle=\"\":t._twistieTitle=t.isExpanded?e.TwistieTooltipExpanded:e.TwistieTooltipCollapsed,d.a.isExpandAllowed(U)||(t._twistieTitle=\"\")}))}var a=!1,r=j.getScrollContentElementFromTable(),c=j.getPinContentElementFromTable(),p=c.childElementCount>0?c.childNodes[0]:0,m=r.childElementCount>0?r.childNodes[0]:0;if(m&&m.getAttribute(\"data-indexNumber\"))a=parseInt(m.getAttribute(\"data-indexNumber\"))>t;var f=G.constructContentElement(l,t,Q,!0),h=G.constructContentElement(l,t,Q,!1);if(G.setAriaLabelledAndDescribedBy(e,j.getTableContainerElementFromTable()),G.setAriaRowCount(j.getTableContainerElementFromTable()),U._tableInstance.dynamicRowHeightStatus&&G.syncContentRowHeights(f,h),L.default.updateContentRowSelection(n.selectionModel,n.cols,f.childNodes,h.childNodes,U),a?(j.getPinContentElementFromTable().insertBefore(f,p),j.getScrollContentElementFromTable().insertBefore(h,m)):(j.getPinContentElementFromTable().appendChild(f),j.getScrollContentElementFromTable().appendChild(h)),U._tableInstance.focusTreeNodeExpandAfterRender){let e=U._tableInstance.focusTreeNodeExpandAfterRender,t=j.queryAllRowCellElementsFromTable(),n=o.a.filter(t,{vmo:e})[0];if(n){let e=n.getElementsByClassName(s.a.CLASS_WIDGET_TREE_NODE_TOGGLE_CMD)[0];e&&e.focus()}}}},removeRows:function(e,t){k.resetHoverCommandElement(),G.removeContentElement(e,t),G.setAriaRowCount(j.getTableContainerElementFromTable())},afterGridRenderCallback:function(e,l){let o=j.getTableContainerElementFromTable();if(o&&o.hasAttribute(\"aria-activedescendant\")){var a=o.getAttribute(\"aria-activedescendant\");document.getElementById(a)||o.removeAttribute(\"aria-activedescendant\")}var s=d.a.isBulkEditing(U);let c=!1;if(s&&Ce(s),!0===u.useTree){if(!0===Y)return;for(var p=!1,m=l.index;m>=e.index;m--){var f=n.viewModelCollection.loadedVMObjects[m];if(n.focusAction){if(f._focusRequested)return;if(f.isPlaceholder){if(p)return delete f.isPlaceholder,f._focusRequested=!0,void E.doFocusPlaceHolder(f)}else p=!0}}for(var h=e.index;h<=l.index;h++){var g=n.viewModelCollection.loadedVMObjects[h],C=!1;if(!0!==g.isLeaf&&!0!==g._expandRequested&&!0!==g.isExpanded&&d.a.performStateServiceAction(\"isNodeExpanded\",r,t,g)&&(C=!0),!0===C)return g.isExpanded=!0,void(E.toggleTreeNode?E.toggleTreeNode(g):i.a.publish(U.id+\".plTable.toggleTreeNode\",g))}var v=ue(e.index,l.index);v.length>0&&(Ee(v),c=!0)}d.a.isPaginationAllowed(U)&&E&&(fe(e,l,E),E.loadMorePages({firstRenderedItem:e,lastRenderedItem:l})),!0===n.scrollToRow&&!0===X.isInitialRowIndexInView()&&(n.scrollToRow=!1)}}),X.renderInitialRows();var p=i.a.subscribe(t+\".plTable.containerHeightUpdated\",(function(e){Ie(e)}));pe.push(p)}},ye=function(){U&&U._tableInstance&&(U._tableInstance.showCheckBox=$),d.a.cleanupComponents(U),we()},Ie=function(e){X.setContainerHeight(e),X.initializeProperties(),X.handleScrollDown()},Re=function(){n.viewModelCollection&&o.a.forEach(n.viewModelCollection.loadedVMObjects,(function(e){delete e.rowHeight}))},xe=function(){X&&X.isInitialized()&&X.resetInfiniteScroll()};return{getDynamicRowHeightStatus:function(){return U._tableInstance.dynamicRowHeightStatus},resetDynamicRowHeights:Re,updateDynamicRowHeight:function(e){U._tableInstance.dynamicRowHeightStatus=e,X.setDynamicRowHeight(U._tableInstance.dynamicRowHeightStatus),ye(),U._tableInstance.dynamicRowHeightStatus||Re()},maintainScrollPosition:function(){X.setScrollPositionToBeMaintained()},unsetScrollToRowIndex:function(){X&&X.isInitialized()&&X.resetInitialRowIndex()},relatedModified:function(){if(Ae){Ae=!1;var e=n.selectionModel;e&&(O.a.handleSelectionEvent([_e],e,null,n),L.default.updateContentRowSelection(n.selectionModel,n.cols,j.getPinContentRowElementsFromTable(),j.getScrollContentRowElementsFromTable(),U))}},columnsResized:function(e){!0!==u.transpose&&a.columnSizeChanged(e.name,e.delta),U._tableInstance.dynamicRowHeightStatus&&(Re(),ye())},columnsRearranged:function(e){if(!0!==u.transpose){var t=e.originalPosition,i=null;o.a.forEach(n.cols,(function(t){e.name===t.name&&(i=t.index)})),o.a.forEach(n.cols,(function(e,n){!0===e.hiddenFlag&&n<=i&&(i+=1),!0===e.hiddenFlag&&n<=t&&(t+=1)})),n.cols&&\"icon\"!==n.cols[0].name&&(t+=1,i+=1),null!==t&&null!==i&&a.columnOrderChanged(e.name,t,i)}else ae()},resetInfiniteScroll:xe,getTableElement:function(){return U},updateContentRowSelection:()=>{L.default.updateContentRowSelection(n.selectionModel,n.cols,j.getPinContentRowElementsFromTable(),j.getScrollContentRowElementsFromTable(),U)},updateContainerHeight:Ie,updateSortDirection:(e,t,n)=>{G.setHeaderCellSortDirection(e,t,n)},updatePinColumn:(e,t,n)=>{const i=t?e.index:n;G.pinToColumn(i),t||G.resetFreezeScroll(e.field),X.handlePinViewportScrollbarPadding()},hideColumn:e=>{let l;var r=n.cols;if(o.a.forEach(r,(function(t){if(t.field===e)return l=t,!1})),l){var s=l.index;let e=!0;if(o.a.forEach(r,(function(t){if(t.name!==l.name&&!0===t.visible&&\"icon\"!==t.name)return e=!1,!1})),e)M.default.getLocalizedText(\"UIMessages\",\"hideColumnOnlyVisibleError\").then((function(e){F.a.showError(e)}));else{if(a.isArrangeSupported()&&a.hideColumn){if(n.cols[s].propertyName!==l.propertyName)for(var d=0;d<r.length;d++)if(r[d].propertyName===l.propertyName){s=d;break}a.hideColumn(s)}if(G.updateColumnVisibility(l.field),l.filter&&l.filter.isFilterApplied){const e={gridId:t,column:l};i.a.publish(\"pltable.columnFilterApplied\",e)}}}},resetColumns:function(){ae()},updateEditState:J,removeStaleFilters:function(e){R.default.removeStaleFilters(a,e||w)},setNodeExpansionInProgress:function(e){Y=e},updateFilterIcons:function(e){e?G.updateFilterIcon(e):G.updateAllFilterIcons()},setFilterDisability:function(e){q.setFilterDisability(e)},loadMissingProps:function(){!function(){var e=X.getFirstRenderedItemIndex(),n=X.getLastRenderedItemIndex(),l=ue(e,n);l.length>0&&i.a.publish(t+\".plTable.loadProps\",{VMOs:l})}()},updateTreeCellIcon:function(e){const t=j.queryAllRowCellElementsFromTable();o.a.forEach(t,(function(t){if(t.vmo){if(!0===N.isIdOfObject(t.vmo,H.a.getEvaluatedId(e))){let n=t.querySelector(\".\".concat(s.a.CLASS_WIDGET_TREE_NODE_TOGGLE_CMD));if(n){const t=function(e){return e.loadingStatus?{id:\"miscInProcessIndicator\",image:B.svgString}:e.isLeaf?{}:e.isExpanded?{id:\"miscExpandedTree\",image:V.svgString}:{id:\"miscCollapsedTree\",image:W.svgString}}(e);let i=n.querySelector(\".\".concat(s.a.CLASS_ICON_BASE));i&&t&&t.image&&t.image.length>0&&(i=d.a.addAttributeToDOMElement(i,\"iconId\",t.id),i=d.a.addAttributeToDOMElement(i,\"icon-id\",t.id),n.title=e._twistieTitle,i.innerHTML=t.image)}}}}))},refresh:we,updateInstanceState:function(e){r=e,U._tableInstance.declViewModel=e}}},destroyTable:function(e,t,n){var l=t.querySelector(\".\".concat(s.a.CLASS_TABLE)),a=l&&l._tableInstance||{},r=a.subDefs;o.a.forEach(r,(function(e){null!==e&&i.a.unsubscribe(e)}));for(var c=0;c<n.length;c++){var u=n[c].cellRenderers;if(u)for(var p=0;p<u.length;p++)o.a.isFunction(u[p].destroy)&&u[p].destroy()}d.a.cleanupComponents(t);var m=document.getElementById(e+\"_menuContainer\");null!==m&&m.parentElement.removeChild(m),a.renderer&&a.renderer.destroyGrid(),a.editor&&a.editor.destroy(),a.isDestroyed=!0,i.a.publish(\"tableDestroyed\")}},pe=n(134),me=n(128),fe=n(507),he=n(31),ge=n(55),Ee=n(47);const Ce=function(e,t,n,l,s){let c={},u={...l};const p=u.gridid,m=u.dataProviderInstance,f=u.columnProviderInstance;Ee.a.applyScope(n.data,u.gridOptions,null,n,null);let h=u.gridOptions,g=n.data;var E=[],C=null;let v=null;var b=[];const S={};f.setColumnFilters([]);var T=function(){p&&(m&&m.json&&m.json.firstPage&&delete m.json.firstPage,m.resetDataProvider())};if(p){var A=g.dataProviders[u.propertyProvider];f.sortCallback||(f.sortCallback=function(){T()}),h=h||{},h.enableArrangeMenu=u.enableArrangeMenu,h.showContextMenu=o.a.isNil(u.showContextMenu)?h.showContextMenu:u.showContextMenu,h.showDecorators=u.showDecorators,h.useTree=u.useTree,void 0===h.enableGridMenu&&h.enableArrangeMenu&&(h.enableGridMenu=!0),!0===h.enableHeaderIcon&&(h.headerHeight=\"XXLARGE\");var _=o.a.debounce((function(e){if(!g.isDestroyed()){if(!m.topTreeNode.props){for(var t=m.topTreeNode.uid,i=!1,l=0;l<e.length;l++)if(e[l].uid===t){i=!0;break}i||e.push(m.topTreeNode)}if(0!==e.length){var a=[];o.a.forEach(m.cols,(function(e){e.isTreeNavigation||a.push(e)})),o.a.forEach(e,(function(e){e.isPropLoading=!0})),function(e){var t=pe.a.createPropertyLoadInput([e]);A.getProperties(n,t).then((function(e){m.topNodeUid&&(o.a.forEach(e.updatedNodes,(function(e){e.uid===m.topNodeUid&&(void 0===m.topTreeNode.props&&(m.topTreeNode.props={}),o.a.assign(m.topTreeNode.props,e.props)),he.default.setEditState(e,!1),delete e.isPropLoading})),e.updatedNodes&&C.refresh()),e.columnConfig?e.columnConfig.columns.length!==m.cols.length&&f.buildDynamicColumns(e.columnConfig.columns,!0).then((()=>{C.resetColumns()})):C.refresh(),d.a.shouldRequestStartEditPropsLoaded(v)&&d.a.requestStartEdit(v)}))}({parentNode:null,childNodes:e,columnInfos:a})}}}),500,{maxWait:1e4,trailing:!0,leading:!1});c.completeInitialization=()=>{if(m.columnConfig)return m.initializationComplete=\"InProgress\",f.buildDynamicColumns(m.columnConfig.columns,!0).then((()=>{var a=n.gridContextDispatcher;u.reusable&&(a=u.gridContextDispatcher),(C=ue.createTableObject(e,p,m,t,f,g,u.contentFilter,h,u.containerheight,a,s,S,u.tableContext,u.reusable,u.showCheckBox)).showCheckBox=u.showCheckBox,C.resetColumns(),C.viewModelCollection=t,C.refresh(),l(),v=C.getTableElement(),m.initializationComplete=!0,u.containerHeight&&C.updateContainerHeight(u.containerHeight),E.push(i.c(p+\".plTable.clientRefresh\",(function(){o.a.defer((function(){C.showCheckBox=u.showCheckBox,v&&v._tableInstance&&(v._tableInstance.showCheckBox=u.showCheckBox),d.a.cleanupComponents(e),C.refresh()}))})))}))},c.updateTableColumns=e=>{e&&e.length>0&&f.buildDynamicColumns(e,!0).then((()=>{null!==C&&C.resetColumns()}))},c.updateContentRowSelection=()=>{C&&C.updateContentRowSelection()},c.selectTableColumn=e=>{e&&L.default.selectColumnCells(C.getTableElement(),e.field)},c.updateSortDirection=(e,t,n)=>{t>-1&&(C&&C.updateSortDirection(e,t,n),T())},c.updateDynamicRowHeight=e=>{C&&C.updateDynamicRowHeight(e)},c.updatePinColumn=(e,t,n)=>{e&&n>-1&&C&&C.updatePinColumn(e,t,n)},c.hideColumn=e=>{e&&C&&C.hideColumn(e)},c.columnFilterApplied=e=>{const t={isInternalTableEvent:!0,gridId:p,...e};i.b(\"pltable.columnFilterApplied\",t);d.a.getTableMenuService(v).ensureAllTableMenusDismissed(),e.filters&&e.filters.length?R.default.setFilters(f,m,e.filters,e.column):e.column?R.default.removeFilter(e.column,f,m):R.default.removeAllFilters(m,f),m.isColumnFilterApplied=R.default.isColumnFilterApplied(m);const n=e.column?e.column.field:null;C.updateFilterIcons(n),T()},c.editStateUpdated=()=>{const e={dataSource:m,state:m._editingState};C.updateEditState(e)},c.updateEditState=async e=>{e&&e.tableContext&&(e.tableContext.startEdit&&!0===e.tableContext.startEdit.value?(await m.startEdit(e.dataCtxNode,e.dataCtxNode.data),e.tableContext.startEdit.update&&e.tableContext.startEdit.update(!1),e.tableContext.isBulkEditing&&e.tableContext.isBulkEditing.update&&e.tableContext.isBulkEditing.update(!0)):e.tableContext.cancelEdit&&!0===e.tableContext.cancelEdit.value?(await m.cancelEdits(e.dataCtxNode,e.dataCtxNode.data),e.tableContext.cancelEdit.update&&e.tableContext.cancelEdit.update(!1),e.tableContext.isBulkEditing&&e.tableContext.isBulkEditing.update&&e.tableContext.isBulkEditing.update(!1)):e.tableContext.saveEdit&&!0===e.tableContext.saveEdit.value&&(await m.saveEdits(e.dataCtxNode,e.dataCtxNode.data),e.tableContext.saveEdit.update&&e.tableContext.saveEdit.update(!1),e.tableContext.isBulkEditing&&e.tableContext.isBulkEditing.update&&e.tableContext.isBulkEditing.update(!1)))};const l=()=>{if(me.a.supportsResizeObserver()){const t=o.a.debounce((()=>{i.b(p+\".plTable.resizeCheck\")}),200,{maxWait:1e4,trailing:!0,leading:!1});me.a.observe(e,t)}};if(!0===h.useTree){E.push(i.c(p+\".plTable.loadProps\",(function(e){_(e.VMOs)}))),E.push(i.c(\"primaryWorkarea.reloadTop\",(function(e){!(e&&e.retainAllStates)&&fe.a.clearAllStates(g,p),m.json.firstPage&&delete m.json.firstPage,m.initialize(n)})));const e=function(e){if(!e.loadingStatus)if(e.loadingStatus=!0,C.updateTreeCellIcon(e),Object.assign(n.data.data,n.data.getData()),!0===e.isExpanded){C.setNodeExpansionInProgress(!0),e._expandRequested=!0;var t=m.viewModelCollection.loadedVMObjects.length;m.expandObject(n,e).then((function(n){C.setNodeExpansionInProgress(!1),t===n.loadedVMObjects.length&&(delete e.loadingStatus,C.refresh()),m.update(n.loadedVMObjects)})).finally((function(){C.setNodeExpansionInProgress(!1),C.loadMissingProps(),delete e.loadingStatus,delete e._expandRequested,C.updateTreeCellIcon(e),v._tableInstance.focusTreeNodeExpandAfterRender=e,d.a.shouldRequestStartEditTreeExpand(v,e,A)&&d.a.requestStartEdit(v)})),fe.a.saveRowExpanded(g,p,e)}else m.collapseObject(n,e).then((function(e){m.update(e.loadedVMObjects),t===e.loadedVMObjects.length&&C.refresh()})).finally((function(){delete e.loadingStatus,C.updateTreeCellIcon(e),v._tableInstance.focusTreeNodeExpandAfterRender=e})),fe.a.saveRowCollapsed(g,p,e)};E.push(i.c(p+\".plTable.toggleTreeNode\",e)),u.reusable&&(S.toggleTreeNode=e);const t=function(e){var t=m.viewModelCollection,l=t.findViewModelObjectById(H.a.getEvaluatedId(e)),a=null,s=t.getViewModelObject(l),d=s.levelNdx-1;if(-1===d)a=m.topTreeNode;else for(var c=l-1;c>=0;c--){var u=t.getViewModelObject(c);if(u.levelNdx===d){a=u;break}}if(null===a)return null;var p=pe.a.createTreeLoadInput(a,0,null,e.id,m.treePageSize,!0,null),f={t_uid:m.topTreeNode.uid,o_uid:a.uid,c_uid:e.uid,uid:null},h={treeLoadInput:p,loadIDs:f};return e.loadingStatus=!0,Object.assign(n.data.data,n.data.getData()),m.someDataProviderSvc.executeLoadAction(m.nextAction,m.json,n,h).then((function(t){for(var n=H.a.getEvaluatedId(s),l=s.levelNdx,d=m.viewModelCollection,c=d.findViewModelObjectById(n),u=d.loadedVMObjects,f=[u[c]],h=c+1;h<u.length;h++){var g=u[h];if(g.levelNdx<=l)break;f.push(g)}for(var E=t.actionResultObj.responseObj.treeLoadResult,v=E.childNodes,b=0,S=0;S<v.length;S++)if(v[S].id===n){b=S;break}for(var L=0;L<v.length;L++)v[L].childNdx=L-b;0===b&&v[0].incompleteHead&&(s.incompleteHead=!0);var T=v.length-1;if(b===T&&v[T].incompleteTail&&(s.incompleteTail=!0),a.children=o.a.clone(v),a.children[b]=s,v.splice(b,1),0===v.length)return delete e.loadingStatus,delete e._focusRequested,void C.refresh();var A=b-1;r.a.insert(v,A,f),u.splice(c,f.length),r.a.insert(u,c-1,v),delete e.loadingStatus,delete e._focusRequested,m.update(u),i.b(m.name+\".treeNodesLoaded\",{treeLoadInput:p,treeLoadResult:E}),i.b(m.name+\".modelObjectsUpdated\",{viewModelObjects:u,noResults:!1})}))};S.doFocusPlaceHolder=t}else E.push(i.c(m.name+\".modelObjectsUpdated\",(function(e){e&&!e.arrangeColumnEvent&&c.columnsArranged(e)})));c.columnsArranged=e=>{e.arrangeType&&\"saveColumnAndLoadAction\"===e.arrangeType&&e.viewModelObjects&&(C.resetInfiniteScroll(),m.update(e.viewModelObjects,e.totalFound),C.refresh())},E.push(i.c(m.name+\".resetState\",(function(){fe.a.clearAllStates(g,p),m.isFocusedLoad=!0}))),ge.b(\"propertyRendererTemplates\"),function(e,t,i){return t.initialize(i).then((function(i){return e.cols=e.cols?e.cols:i,e.json&&e.json.firstPage?null:e.initialize(n).then((function(){return e.cols&&0!==e.cols.length?null:e.columnConfig?t.buildDynamicColumns(e.columnConfig.columns,!0):Promise.reject(new Error(\"Column config not loaded\"))}))}))}(m,f,n).then((()=>{var a=n.gridContextDispatcher;u.reusable&&(a=u.gridContextDispatcher),(C=ue.createTableObject(e,p,m,t,f,g,u.contentFilter,h,u.containerheight,a,s,S,u.tableContext,u.reusable,u.showCheckBox)).showCheckBox=u.showCheckBox,v=C.getTableElement(),l(),C.viewModelCollection=t,C.refresh(),m.initializationComplete=!0,u.containerHeight&&C.updateContainerHeight(u.containerHeight),E.push(i.c(p+\".plTable.clientRefresh\",(function(){o.a.defer((function(){C.showCheckBox=u.showCheckBox,v&&v._tableInstance&&(v._tableInstance.showCheckBox=u.showCheckBox),d.a.cleanupComponents(e),C.refresh()}))})))}),(e=>{m.initializationComplete=!1,a.a.trace(e)}))}E.push(i.c(\"columnArrange\",(function(e){(e.name===p||e.columnConfigId&&m.columnConfig&&e.columnConfigId===m.columnConfig.columnConfigId)&&(e.columns.length?C.removeStaleFilters(e.columns):R.default.removeAllFilters(m,f)),C.getDynamicRowHeightStatus()&&C.resetDynamicRowHeights()})));var w=i.c(\"cdm.relatedModified\",(function(e){C.relatedModified()}));E.push(w),E.push(i.c(p+\".plTable.reload\",T)),E.push(i.c(\"pltable.columnFilterApplied\",(function(e){if(p===e.gridId&&!0!==e.isInternalTableEvent){e.filters&&e.filters.length?R.default.setFilters(f,m,e.filters,e.column):e.column?R.default.removeFilter(e.column,f,m):R.default.removeAllFilters(m,f),m.isColumnFilterApplied=R.default.isColumnFilterApplied(m);const t=e.column?e.column.field:null;C.updateFilterIcons(t),T()}}))),c.updateColumnMenuData=function(e){o.a.forEach(m.cols,(function(t){if(e.columnName===t.field)return t.filter={...t.filter,...e},t.filter.columnMenuData=e,t.filter.showFilters&&(t.filter.showFilters.dbValue&&\"false\"!==t.filter.showFilters.dbValue?t.filter.showFilterFacets=!0:t.filter.showFilterFacets=!1),!1}))},E.push(i.c(p+\".plTable.setFilterDisability\",(function(e){p===e.gridId&&C.setFilterDisability(e.isFilterDisabled)}))),c.destroy=function(){var t=[];m.columnConfig&&m.columnConfig.columns&&(t=m.columnConfig.columns),o.a.forEach(E,(function(e){i.d(e)})),ue.destroyTable(p,e,t)},c.updateVmCollection=e=>{C&&(C.viewModelCollection=e,d.a.shouldRequestStartEditPagination(v)&&d.a.requestStartEdit(v),C.refresh())},c.updateDeclGridObject=e=>{u=e},c.updateMenuContext=e=>{u.menuContext=e},c.updateState=e=>{g=e,C&&C.updateInstanceState(e)},c.refreshTable=()=>{C&&C.refresh()},c.updateGridOptionsForTableInstance=e=>{v&&v._tableInstance&&e&&void 0!==e.showCheckBox&&(v._tableInstance.showCheckBox=e.showCheckBox)},E.push(i.c(m.name+\".selectionChangeEvent\",(function(e){var t=e.selectionModel.getSelection();!0===m.isFocusedLoad&&t.length>0&&(m.isFocusedLoad=!1,m.scrollToRow=!0),(t.length>0&&t.length>=b.length&&!1===o.a.isEqual(b,t)||!0===m.scrollToRow)&&(m.scrollToRow=!0,i.b(\"plTable.scrollToRow\",{gridId:p,rowUids:t})),b=t.slice()})));const y=function(e){a.a.trace(\"AW simple table: Loaded next tree page data\"),!1,d.a.shouldRequestStartEditTreePagination(v,A)&&d.a.requestStartEdit(v),m.update(e.loadedVMObjects,e.totalFound)};S.loadMorePages=function(e){if(C.viewModelCollection){var t=e.lastRenderedItem.index;if(Object.assign(n.data.data,n.data.getData()),0!==t&&t===C.viewModelCollection.loadedVMObjects.length-1&&(m.nextAction||m.action)){var i=m.viewModelCollection.loadedVMObjects[t];if(m.hasMorePages()&&i.incompleteTail)return delete i.incompleteTail,e.lastRenderedItem.levelNdx>0?(!0,void m.getTreeNodePage(n,null,e.lastRenderedItem.uid,!0,null).then(y)):(!0,void m.pageDispatcher({type:\"NEXT_PAGE\"}));a.a.trace(\"AW simple table: Rendering of all rows below completed\")}var l=e.firstRenderedItem.index;if(0===l&&m.previousAction){var o=m.viewModelCollection.loadedVMObjects[l];if(m.hasMorePagesUp()&&o.incompleteHead)return delete o.incompleteHead,C.maintainScrollPosition(),e.firstRenderedItem.levelNdx>0?(!0,void m.getTreeNodePage(n,null,e.firstRenderedItem.uid,!1,null).then(y)):(!0,void m.pageDispatcher({type:\"PREVIOUS_PAGE\"}));a.a.trace(\"AW simple table: Rendering of all rows above completed\")}if(!0===h.useTree){var r=m.findIncompleteNodeInRange(l,t);if(null!==r&&r.levelNdx>0){var s=!0===r.incompleteTail;if(!0===s&&!m.nextAction&&!m.action)return;if(!1===s&&!m.previousAction)return;return delete r.incompleteHead,delete r.incompleteTail,!0,void m.getTreeNodePage(n,null,r.uid,s,null).then(y)}}}};S.unsetScrollToRowIndex=function(){C.unsetScrollToRowIndex()};S.columnsRearranged=function(e){C.columnsRearranged(e)};return S.columnsResized=function(e){C.columnsResized(e)},c};t.default={initializeTable:Ce}}}]);","name":"static/js/76.8cd0efcd.chunk.js","input":"(this[\"webpackJsonpcreatingjsxcomponent\"] = this[\"webpackJsonpcreatingjsxcomponent\"] || []).push([[76],{\n\n/***/ 3115:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */(function(window,document,exportName,undefined){'use strict';var VENDOR_PREFIXES=['','webkit','Moz','MS','ms','o'];var TEST_ELEMENT=document.createElement('div');var TYPE_FUNCTION='function';var round=Math.round;var abs=Math.abs;var now=Date.now;/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */function setTimeoutContext(fn,timeout,context){return setTimeout(bindFn(fn,context),timeout);}/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */function invokeArrayArg(arg,fn,context){if(Array.isArray(arg)){each(arg,context[fn],context);return true;}return false;}/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */function each(obj,iterator,context){var i;if(!obj){return;}if(obj.forEach){obj.forEach(iterator,context);}else if(obj.length!==undefined){i=0;while(i<obj.length){iterator.call(context,obj[i],i,obj);i++;}}else{for(i in obj){obj.hasOwnProperty(i)&&iterator.call(context,obj[i],i,obj);}}}/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */function deprecate(method,name,message){var deprecationMessage='DEPRECATED METHOD: '+name+'\\n'+message+' AT \\n';return function(){var e=new Error('get-stack-trace');var stack=e&&e.stack?e.stack.replace(/^[^\\(]+?[\\n$]/gm,'').replace(/^\\s+at\\s+/gm,'').replace(/^Object.<anonymous>\\s*\\(/gm,'{anonymous}()@'):'Unknown Stack Trace';var log=window.console&&(window.console.warn||window.console.log);if(log){log.call(window.console,deprecationMessage,stack);}return method.apply(this,arguments);};}/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */var assign;if(typeof Object.assign!=='function'){assign=function assign(target){if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}return output;};}else{assign=Object.assign;}/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */var extend=deprecate(function extend(dest,src,merge){var keys=Object.keys(src);var i=0;while(i<keys.length){if(!merge||merge&&dest[keys[i]]===undefined){dest[keys[i]]=src[keys[i]];}i++;}return dest;},'extend','Use `assign`.');/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */var merge=deprecate(function merge(dest,src){return extend(dest,src,true);},'merge','Use `assign`.');/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */function inherit(child,base,properties){var baseP=base.prototype,childP;childP=child.prototype=Object.create(baseP);childP.constructor=child;childP._super=baseP;if(properties){assign(childP,properties);}}/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */function bindFn(fn,context){return function boundFn(){return fn.apply(context,arguments);};}/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */function boolOrFn(val,args){if(typeof val==TYPE_FUNCTION){return val.apply(args?args[0]||undefined:undefined,args);}return val;}/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */function ifUndefined(val1,val2){return val1===undefined?val2:val1;}/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */function addEventListeners(target,types,handler){each(splitStr(types),function(type){target.addEventListener(type,handler,false);});}/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */function removeEventListeners(target,types,handler){each(splitStr(types),function(type){target.removeEventListener(type,handler,false);});}/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */function hasParent(node,parent){while(node){if(node==parent){return true;}node=node.parentNode;}return false;}/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */function inStr(str,find){return str.indexOf(find)>-1;}/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */function splitStr(str){return str.trim().split(/\\s+/g);}/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */function inArray(src,find,findByKey){if(src.indexOf&&!findByKey){return src.indexOf(find);}else{var i=0;while(i<src.length){if(findByKey&&src[i][findByKey]==find||!findByKey&&src[i]===find){return i;}i++;}return-1;}}/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */function toArray(obj){return Array.prototype.slice.call(obj,0);}/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */function uniqueArray(src,key,sort){var results=[];var values=[];var i=0;while(i<src.length){var val=key?src[i][key]:src[i];if(inArray(values,val)<0){results.push(src[i]);}values[i]=val;i++;}if(sort){if(!key){results=results.sort();}else{results=results.sort(function sortUniqueArray(a,b){return a[key]>b[key];});}}return results;}/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */function prefixed(obj,property){var prefix,prop;var camelProp=property[0].toUpperCase()+property.slice(1);var i=0;while(i<VENDOR_PREFIXES.length){prefix=VENDOR_PREFIXES[i];prop=prefix?prefix+camelProp:property;if(prop in obj){return prop;}i++;}return undefined;}/**\n * get a unique id\n * @returns {number} uniqueId\n */var _uniqueId=1;function uniqueId(){return _uniqueId++;}/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */function getWindowForElement(element){var doc=element.ownerDocument||element;return doc.defaultView||doc.parentWindow||window;}var MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i;var SUPPORT_TOUCH=('ontouchstart'in window);var SUPPORT_POINTER_EVENTS=prefixed(window,'PointerEvent')!==undefined;var SUPPORT_ONLY_TOUCH=SUPPORT_TOUCH&&MOBILE_REGEX.test(navigator.userAgent);var INPUT_TYPE_TOUCH='touch';var INPUT_TYPE_PEN='pen';var INPUT_TYPE_MOUSE='mouse';var INPUT_TYPE_KINECT='kinect';var COMPUTE_INTERVAL=25;var INPUT_START=1;var INPUT_MOVE=2;var INPUT_END=4;var INPUT_CANCEL=8;var DIRECTION_NONE=1;var DIRECTION_LEFT=2;var DIRECTION_RIGHT=4;var DIRECTION_UP=8;var DIRECTION_DOWN=16;var DIRECTION_HORIZONTAL=DIRECTION_LEFT|DIRECTION_RIGHT;var DIRECTION_VERTICAL=DIRECTION_UP|DIRECTION_DOWN;var DIRECTION_ALL=DIRECTION_HORIZONTAL|DIRECTION_VERTICAL;var PROPS_XY=['x','y'];var PROPS_CLIENT_XY=['clientX','clientY'];/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */function Input(manager,callback){var self=this;this.manager=manager;this.callback=callback;this.element=manager.element;this.target=manager.options.inputTarget;// smaller wrapper around the handler, for the scope and the enabled state of the manager,\n// so when disabled the input events are completely bypassed.\nthis.domHandler=function(ev){if(boolOrFn(manager.options.enable,[manager])){self.handler(ev);}};this.init();}Input.prototype={/**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */handler:function(){},/**\n     * bind the events\n     */init:function(){this.evEl&&addEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&addEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&addEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);},/**\n     * unbind the events\n     */destroy:function(){this.evEl&&removeEventListeners(this.element,this.evEl,this.domHandler);this.evTarget&&removeEventListeners(this.target,this.evTarget,this.domHandler);this.evWin&&removeEventListeners(getWindowForElement(this.element),this.evWin,this.domHandler);}};/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */function createInputInstance(manager){var Type;var inputClass=manager.options.inputClass;if(inputClass){Type=inputClass;}else if(SUPPORT_POINTER_EVENTS){Type=PointerEventInput;}else if(SUPPORT_ONLY_TOUCH){Type=TouchInput;}else if(!SUPPORT_TOUCH){Type=MouseInput;}else{Type=TouchMouseInput;}return new Type(manager,inputHandler);}/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */function inputHandler(manager,eventType,input){var pointersLen=input.pointers.length;var changedPointersLen=input.changedPointers.length;var isFirst=eventType&INPUT_START&&pointersLen-changedPointersLen===0;var isFinal=eventType&(INPUT_END|INPUT_CANCEL)&&pointersLen-changedPointersLen===0;input.isFirst=!!isFirst;input.isFinal=!!isFinal;if(isFirst){manager.session={};}// source event is the normalized value of the domEvents\n// like 'touchstart, mouseup, pointerdown'\ninput.eventType=eventType;// compute scale, rotation etc\ncomputeInputData(manager,input);// emit secret event\nmanager.emit('hammer.input',input);manager.recognize(input);manager.session.prevInput=input;}/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */function computeInputData(manager,input){var session=manager.session;var pointers=input.pointers;var pointersLength=pointers.length;// store the first input to calculate the distance and direction\nif(!session.firstInput){session.firstInput=simpleCloneInputData(input);}// to compute scale and rotation we need to store the multiple touches\nif(pointersLength>1&&!session.firstMultiple){session.firstMultiple=simpleCloneInputData(input);}else if(pointersLength===1){session.firstMultiple=false;}var firstInput=session.firstInput;var firstMultiple=session.firstMultiple;var offsetCenter=firstMultiple?firstMultiple.center:firstInput.center;var center=input.center=getCenter(pointers);input.timeStamp=now();input.deltaTime=input.timeStamp-firstInput.timeStamp;input.angle=getAngle(offsetCenter,center);input.distance=getDistance(offsetCenter,center);computeDeltaXY(session,input);input.offsetDirection=getDirection(input.deltaX,input.deltaY);var overallVelocity=getVelocity(input.deltaTime,input.deltaX,input.deltaY);input.overallVelocityX=overallVelocity.x;input.overallVelocityY=overallVelocity.y;input.overallVelocity=abs(overallVelocity.x)>abs(overallVelocity.y)?overallVelocity.x:overallVelocity.y;input.scale=firstMultiple?getScale(firstMultiple.pointers,pointers):1;input.rotation=firstMultiple?getRotation(firstMultiple.pointers,pointers):0;input.maxPointers=!session.prevInput?input.pointers.length:input.pointers.length>session.prevInput.maxPointers?input.pointers.length:session.prevInput.maxPointers;computeIntervalInputData(session,input);// find the correct target\nvar target=manager.element;if(hasParent(input.srcEvent.target,target)){target=input.srcEvent.target;}input.target=target;}function computeDeltaXY(session,input){var center=input.center;var offset=session.offsetDelta||{};var prevDelta=session.prevDelta||{};var prevInput=session.prevInput||{};if(input.eventType===INPUT_START||prevInput.eventType===INPUT_END){prevDelta=session.prevDelta={x:prevInput.deltaX||0,y:prevInput.deltaY||0};offset=session.offsetDelta={x:center.x,y:center.y};}input.deltaX=prevDelta.x+(center.x-offset.x);input.deltaY=prevDelta.y+(center.y-offset.y);}/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */function computeIntervalInputData(session,input){var last=session.lastInterval||input,deltaTime=input.timeStamp-last.timeStamp,velocity,velocityX,velocityY,direction;if(input.eventType!=INPUT_CANCEL&&(deltaTime>COMPUTE_INTERVAL||last.velocity===undefined)){var deltaX=input.deltaX-last.deltaX;var deltaY=input.deltaY-last.deltaY;var v=getVelocity(deltaTime,deltaX,deltaY);velocityX=v.x;velocityY=v.y;velocity=abs(v.x)>abs(v.y)?v.x:v.y;direction=getDirection(deltaX,deltaY);session.lastInterval=input;}else{// use latest velocity info if it doesn't overtake a minimum period\nvelocity=last.velocity;velocityX=last.velocityX;velocityY=last.velocityY;direction=last.direction;}input.velocity=velocity;input.velocityX=velocityX;input.velocityY=velocityY;input.direction=direction;}/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */function simpleCloneInputData(input){// make a simple copy of the pointers because we will get a reference if we don't\n// we only need clientXY for the calculations\nvar pointers=[];var i=0;while(i<input.pointers.length){pointers[i]={clientX:round(input.pointers[i].clientX),clientY:round(input.pointers[i].clientY)};i++;}return{timeStamp:now(),pointers:pointers,center:getCenter(pointers),deltaX:input.deltaX,deltaY:input.deltaY};}/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */function getCenter(pointers){var pointersLength=pointers.length;// no need to loop when only one touch\nif(pointersLength===1){return{x:round(pointers[0].clientX),y:round(pointers[0].clientY)};}var x=0,y=0,i=0;while(i<pointersLength){x+=pointers[i].clientX;y+=pointers[i].clientY;i++;}return{x:round(x/pointersLength),y:round(y/pointersLength)};}/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */function getVelocity(deltaTime,x,y){return{x:x/deltaTime||0,y:y/deltaTime||0};}/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */function getDirection(x,y){if(x===y){return DIRECTION_NONE;}if(abs(x)>=abs(y)){return x<0?DIRECTION_LEFT:DIRECTION_RIGHT;}return y<0?DIRECTION_UP:DIRECTION_DOWN;}/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */function getDistance(p1,p2,props){if(!props){props=PROPS_XY;}var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.sqrt(x*x+y*y);}/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */function getAngle(p1,p2,props){if(!props){props=PROPS_XY;}var x=p2[props[0]]-p1[props[0]],y=p2[props[1]]-p1[props[1]];return Math.atan2(y,x)*180/Math.PI;}/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */function getRotation(start,end){return getAngle(end[1],end[0],PROPS_CLIENT_XY)+getAngle(start[1],start[0],PROPS_CLIENT_XY);}/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */function getScale(start,end){return getDistance(end[0],end[1],PROPS_CLIENT_XY)/getDistance(start[0],start[1],PROPS_CLIENT_XY);}var MOUSE_INPUT_MAP={mousedown:INPUT_START,mousemove:INPUT_MOVE,mouseup:INPUT_END};var MOUSE_ELEMENT_EVENTS='mousedown';var MOUSE_WINDOW_EVENTS='mousemove mouseup';/**\n * Mouse events input\n * @constructor\n * @extends Input\n */function MouseInput(){this.evEl=MOUSE_ELEMENT_EVENTS;this.evWin=MOUSE_WINDOW_EVENTS;this.pressed=false;// mousedown state\nInput.apply(this,arguments);}inherit(MouseInput,Input,{/**\n     * handle mouse events\n     * @param {Object} ev\n     */handler:function MEhandler(ev){var eventType=MOUSE_INPUT_MAP[ev.type];// on start we want to have the left mouse button down\nif(eventType&INPUT_START&&ev.button===0){this.pressed=true;}if(eventType&INPUT_MOVE&&ev.which!==1){eventType=INPUT_END;}// mouse must be down\nif(!this.pressed){return;}if(eventType&INPUT_END){this.pressed=false;}this.callback(this.manager,eventType,{pointers:[ev],changedPointers:[ev],pointerType:INPUT_TYPE_MOUSE,srcEvent:ev});}});var POINTER_INPUT_MAP={pointerdown:INPUT_START,pointermove:INPUT_MOVE,pointerup:INPUT_END,pointercancel:INPUT_CANCEL,pointerout:INPUT_CANCEL};// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM={2:INPUT_TYPE_TOUCH,3:INPUT_TYPE_PEN,4:INPUT_TYPE_MOUSE,5:INPUT_TYPE_KINECT// see https://twitter.com/jacobrossi/status/480596438489890816\n};var POINTER_ELEMENT_EVENTS='pointerdown';var POINTER_WINDOW_EVENTS='pointermove pointerup pointercancel';// IE10 has prefixed support, and case-sensitive\nif(window.MSPointerEvent&&!window.PointerEvent){POINTER_ELEMENT_EVENTS='MSPointerDown';POINTER_WINDOW_EVENTS='MSPointerMove MSPointerUp MSPointerCancel';}/**\n * Pointer events input\n * @constructor\n * @extends Input\n */function PointerEventInput(){this.evEl=POINTER_ELEMENT_EVENTS;this.evWin=POINTER_WINDOW_EVENTS;Input.apply(this,arguments);this.store=this.manager.session.pointerEvents=[];}inherit(PointerEventInput,Input,{/**\n     * handle mouse events\n     * @param {Object} ev\n     */handler:function PEhandler(ev){var store=this.store;var removePointer=false;var eventTypeNormalized=ev.type.toLowerCase().replace('ms','');var eventType=POINTER_INPUT_MAP[eventTypeNormalized];var pointerType=IE10_POINTER_TYPE_ENUM[ev.pointerType]||ev.pointerType;var isTouch=pointerType==INPUT_TYPE_TOUCH;// get index of the event in the store\nvar storeIndex=inArray(store,ev.pointerId,'pointerId');// start and mouse must be down\nif(eventType&INPUT_START&&(ev.button===0||isTouch)){if(storeIndex<0){store.push(ev);storeIndex=store.length-1;}}else if(eventType&(INPUT_END|INPUT_CANCEL)){removePointer=true;}// it not found, so the pointer hasn't been down (so it's probably a hover)\nif(storeIndex<0){return;}// update the event in the store\nstore[storeIndex]=ev;this.callback(this.manager,eventType,{pointers:store,changedPointers:[ev],pointerType:pointerType,srcEvent:ev});if(removePointer){// remove from the store\nstore.splice(storeIndex,1);}}});var SINGLE_TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var SINGLE_TOUCH_TARGET_EVENTS='touchstart';var SINGLE_TOUCH_WINDOW_EVENTS='touchstart touchmove touchend touchcancel';/**\n * Touch events input\n * @constructor\n * @extends Input\n */function SingleTouchInput(){this.evTarget=SINGLE_TOUCH_TARGET_EVENTS;this.evWin=SINGLE_TOUCH_WINDOW_EVENTS;this.started=false;Input.apply(this,arguments);}inherit(SingleTouchInput,Input,{handler:function TEhandler(ev){var type=SINGLE_TOUCH_INPUT_MAP[ev.type];// should we handle the touch events?\nif(type===INPUT_START){this.started=true;}if(!this.started){return;}var touches=normalizeSingleTouches.call(this,ev,type);// when done, reset the started state\nif(type&(INPUT_END|INPUT_CANCEL)&&touches[0].length-touches[1].length===0){this.started=false;}this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */function normalizeSingleTouches(ev,type){var all=toArray(ev.touches);var changed=toArray(ev.changedTouches);if(type&(INPUT_END|INPUT_CANCEL)){all=uniqueArray(all.concat(changed),'identifier',true);}return[all,changed];}var TOUCH_INPUT_MAP={touchstart:INPUT_START,touchmove:INPUT_MOVE,touchend:INPUT_END,touchcancel:INPUT_CANCEL};var TOUCH_TARGET_EVENTS='touchstart touchmove touchend touchcancel';/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */function TouchInput(){this.evTarget=TOUCH_TARGET_EVENTS;this.targetIds={};Input.apply(this,arguments);}inherit(TouchInput,Input,{handler:function MTEhandler(ev){var type=TOUCH_INPUT_MAP[ev.type];var touches=getTouches.call(this,ev,type);if(!touches){return;}this.callback(this.manager,type,{pointers:touches[0],changedPointers:touches[1],pointerType:INPUT_TYPE_TOUCH,srcEvent:ev});}});/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */function getTouches(ev,type){var allTouches=toArray(ev.touches);var targetIds=this.targetIds;// when there is only one touch, the process can be simplified\nif(type&(INPUT_START|INPUT_MOVE)&&allTouches.length===1){targetIds[allTouches[0].identifier]=true;return[allTouches,allTouches];}var i,targetTouches,changedTouches=toArray(ev.changedTouches),changedTargetTouches=[],target=this.target;// get target touches from touches\ntargetTouches=allTouches.filter(function(touch){return hasParent(touch.target,target);});// collect touches\nif(type===INPUT_START){i=0;while(i<targetTouches.length){targetIds[targetTouches[i].identifier]=true;i++;}}// filter changed touches to only contain touches that exist in the collected target ids\ni=0;while(i<changedTouches.length){if(targetIds[changedTouches[i].identifier]){changedTargetTouches.push(changedTouches[i]);}// cleanup removed touches\nif(type&(INPUT_END|INPUT_CANCEL)){delete targetIds[changedTouches[i].identifier];}i++;}if(!changedTargetTouches.length){return;}return[// merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\nuniqueArray(targetTouches.concat(changedTargetTouches),'identifier',true),changedTargetTouches];}/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */var DEDUP_TIMEOUT=2500;var DEDUP_DISTANCE=25;function TouchMouseInput(){Input.apply(this,arguments);var handler=bindFn(this.handler,this);this.touch=new TouchInput(this.manager,handler);this.mouse=new MouseInput(this.manager,handler);this.primaryTouch=null;this.lastTouches=[];}inherit(TouchMouseInput,Input,{/**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */handler:function TMEhandler(manager,inputEvent,inputData){var isTouch=inputData.pointerType==INPUT_TYPE_TOUCH,isMouse=inputData.pointerType==INPUT_TYPE_MOUSE;if(isMouse&&inputData.sourceCapabilities&&inputData.sourceCapabilities.firesTouchEvents){return;}// when we're in a touch event, record touches to  de-dupe synthetic mouse event\nif(isTouch){recordTouches.call(this,inputEvent,inputData);}else if(isMouse&&isSyntheticEvent.call(this,inputData)){return;}this.callback(manager,inputEvent,inputData);},/**\n     * remove the event listeners\n     */destroy:function destroy(){this.touch.destroy();this.mouse.destroy();}});function recordTouches(eventType,eventData){if(eventType&INPUT_START){this.primaryTouch=eventData.changedPointers[0].identifier;setLastTouch.call(this,eventData);}else if(eventType&(INPUT_END|INPUT_CANCEL)){setLastTouch.call(this,eventData);}}function setLastTouch(eventData){var touch=eventData.changedPointers[0];if(touch.identifier===this.primaryTouch){var lastTouch={x:touch.clientX,y:touch.clientY};this.lastTouches.push(lastTouch);var lts=this.lastTouches;var removeLastTouch=function(){var i=lts.indexOf(lastTouch);if(i>-1){lts.splice(i,1);}};setTimeout(removeLastTouch,DEDUP_TIMEOUT);}}function isSyntheticEvent(eventData){var x=eventData.srcEvent.clientX,y=eventData.srcEvent.clientY;for(var i=0;i<this.lastTouches.length;i++){var t=this.lastTouches[i];var dx=Math.abs(x-t.x),dy=Math.abs(y-t.y);if(dx<=DEDUP_DISTANCE&&dy<=DEDUP_DISTANCE){return true;}}return false;}var PREFIXED_TOUCH_ACTION=prefixed(TEST_ELEMENT.style,'touchAction');var NATIVE_TOUCH_ACTION=PREFIXED_TOUCH_ACTION!==undefined;// magical touchAction value\nvar TOUCH_ACTION_COMPUTE='compute';var TOUCH_ACTION_AUTO='auto';var TOUCH_ACTION_MANIPULATION='manipulation';// not implemented\nvar TOUCH_ACTION_NONE='none';var TOUCH_ACTION_PAN_X='pan-x';var TOUCH_ACTION_PAN_Y='pan-y';var TOUCH_ACTION_MAP=getTouchActionProps();/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */function TouchAction(manager,value){this.manager=manager;this.set(value);}TouchAction.prototype={/**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */set:function(value){// find out the touch-action by the event handlers\nif(value==TOUCH_ACTION_COMPUTE){value=this.compute();}if(NATIVE_TOUCH_ACTION&&this.manager.element.style&&TOUCH_ACTION_MAP[value]){this.manager.element.style[PREFIXED_TOUCH_ACTION]=value;}this.actions=value.toLowerCase().trim();},/**\n     * just re-set the touchAction value\n     */update:function(){this.set(this.manager.options.touchAction);},/**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */compute:function(){var actions=[];each(this.manager.recognizers,function(recognizer){if(boolOrFn(recognizer.options.enable,[recognizer])){actions=actions.concat(recognizer.getTouchAction());}});return cleanTouchActions(actions.join(' '));},/**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */preventDefaults:function(input){var srcEvent=input.srcEvent;var direction=input.offsetDirection;// if the touch action did prevented once this session\nif(this.manager.session.prevented){srcEvent.preventDefault();return;}var actions=this.actions;var hasNone=inStr(actions,TOUCH_ACTION_NONE)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X)&&!TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];if(hasNone){//do not prevent defaults if this is a tap gesture\nvar isTapPointer=input.pointers.length===1;var isTapMovement=input.distance<2;var isTapTouchTime=input.deltaTime<250;if(isTapPointer&&isTapMovement&&isTapTouchTime){return;}}if(hasPanX&&hasPanY){// `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\nreturn;}if(hasNone||hasPanY&&direction&DIRECTION_HORIZONTAL||hasPanX&&direction&DIRECTION_VERTICAL){return this.preventSrc(srcEvent);}},/**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */preventSrc:function(srcEvent){this.manager.session.prevented=true;srcEvent.preventDefault();}};/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */function cleanTouchActions(actions){// none\nif(inStr(actions,TOUCH_ACTION_NONE)){return TOUCH_ACTION_NONE;}var hasPanX=inStr(actions,TOUCH_ACTION_PAN_X);var hasPanY=inStr(actions,TOUCH_ACTION_PAN_Y);// if both pan-x and pan-y are set (different recognizers\n// for different directions, e.g. horizontal pan but vertical swipe?)\n// we need none (as otherwise with pan-x pan-y combined none of these\n// recognizers will work, since the browser would handle all panning\nif(hasPanX&&hasPanY){return TOUCH_ACTION_NONE;}// pan-x OR pan-y\nif(hasPanX||hasPanY){return hasPanX?TOUCH_ACTION_PAN_X:TOUCH_ACTION_PAN_Y;}// manipulation\nif(inStr(actions,TOUCH_ACTION_MANIPULATION)){return TOUCH_ACTION_MANIPULATION;}return TOUCH_ACTION_AUTO;}function getTouchActionProps(){if(!NATIVE_TOUCH_ACTION){return false;}var touchMap={};var cssSupports=window.CSS&&window.CSS.supports;['auto','manipulation','pan-y','pan-x','pan-x pan-y','none'].forEach(function(val){// If css.supports is not supported but there is native touch-action assume it supports\n// all values. This is the case for IE 10 and 11.\ntouchMap[val]=cssSupports?window.CSS.supports('touch-action',val):true;});return touchMap;}/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */var STATE_POSSIBLE=1;var STATE_BEGAN=2;var STATE_CHANGED=4;var STATE_ENDED=8;var STATE_RECOGNIZED=STATE_ENDED;var STATE_CANCELLED=16;var STATE_FAILED=32;/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */function Recognizer(options){this.options=assign({},this.defaults,options||{});this.id=uniqueId();this.manager=null;// default is enable true\nthis.options.enable=ifUndefined(this.options.enable,true);this.state=STATE_POSSIBLE;this.simultaneous={};this.requireFail=[];}Recognizer.prototype={/**\n     * @virtual\n     * @type {Object}\n     */defaults:{},/**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */set:function(options){assign(this.options,options);// also update the touchAction, in case something changed about the directions/enabled state\nthis.manager&&this.manager.touchAction.update();return this;},/**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */recognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'recognizeWith',this)){return this;}var simultaneous=this.simultaneous;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(!simultaneous[otherRecognizer.id]){simultaneous[otherRecognizer.id]=otherRecognizer;otherRecognizer.recognizeWith(this);}return this;},/**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */dropRecognizeWith:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRecognizeWith',this)){return this;}otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);delete this.simultaneous[otherRecognizer.id];return this;},/**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */requireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'requireFailure',this)){return this;}var requireFail=this.requireFail;otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);if(inArray(requireFail,otherRecognizer)===-1){requireFail.push(otherRecognizer);otherRecognizer.requireFailure(this);}return this;},/**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */dropRequireFailure:function(otherRecognizer){if(invokeArrayArg(otherRecognizer,'dropRequireFailure',this)){return this;}otherRecognizer=getRecognizerByNameIfManager(otherRecognizer,this);var index=inArray(this.requireFail,otherRecognizer);if(index>-1){this.requireFail.splice(index,1);}return this;},/**\n     * has require failures boolean\n     * @returns {boolean}\n     */hasRequireFailures:function(){return this.requireFail.length>0;},/**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */canRecognizeWith:function(otherRecognizer){return!!this.simultaneous[otherRecognizer.id];},/**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */emit:function(input){var self=this;var state=this.state;function emit(event){self.manager.emit(event,input);}// 'panstart' and 'panmove'\nif(state<STATE_ENDED){emit(self.options.event+stateStr(state));}emit(self.options.event);// simple 'eventName' events\nif(input.additionalEvent){// additional event(panleft, panright, pinchin, pinchout...)\nemit(input.additionalEvent);}// panend and pancancel\nif(state>=STATE_ENDED){emit(self.options.event+stateStr(state));}},/**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */tryEmit:function(input){if(this.canEmit()){return this.emit(input);}// it's failing anyway\nthis.state=STATE_FAILED;},/**\n     * can we emit?\n     * @returns {boolean}\n     */canEmit:function(){var i=0;while(i<this.requireFail.length){if(!(this.requireFail[i].state&(STATE_FAILED|STATE_POSSIBLE))){return false;}i++;}return true;},/**\n     * update the recognizer\n     * @param {Object} inputData\n     */recognize:function(inputData){// make a new copy of the inputData\n// so we can change the inputData without messing up the other recognizers\nvar inputDataClone=assign({},inputData);// is is enabled and allow recognizing?\nif(!boolOrFn(this.options.enable,[this,inputDataClone])){this.reset();this.state=STATE_FAILED;return;}// reset when we've reached the end\nif(this.state&(STATE_RECOGNIZED|STATE_CANCELLED|STATE_FAILED)){this.state=STATE_POSSIBLE;}this.state=this.process(inputDataClone);// the recognizer has recognized a gesture\n// so trigger an event\nif(this.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED|STATE_CANCELLED)){this.tryEmit(inputDataClone);}},/**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */process:function(inputData){},// jshint ignore:line\n/**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */getTouchAction:function(){},/**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */reset:function(){}};/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */function stateStr(state){if(state&STATE_CANCELLED){return'cancel';}else if(state&STATE_ENDED){return'end';}else if(state&STATE_CHANGED){return'move';}else if(state&STATE_BEGAN){return'start';}return'';}/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */function directionStr(direction){if(direction==DIRECTION_DOWN){return'down';}else if(direction==DIRECTION_UP){return'up';}else if(direction==DIRECTION_LEFT){return'left';}else if(direction==DIRECTION_RIGHT){return'right';}return'';}/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */function getRecognizerByNameIfManager(otherRecognizer,recognizer){var manager=recognizer.manager;if(manager){return manager.get(otherRecognizer);}return otherRecognizer;}/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */function AttrRecognizer(){Recognizer.apply(this,arguments);}inherit(AttrRecognizer,Recognizer,{/**\n     * @namespace\n     * @memberof AttrRecognizer\n     */defaults:{/**\n         * @type {Number}\n         * @default 1\n         */pointers:1},/**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */attrTest:function(input){var optionPointers=this.options.pointers;return optionPointers===0||input.pointers.length===optionPointers;},/**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */process:function(input){var state=this.state;var eventType=input.eventType;var isRecognized=state&(STATE_BEGAN|STATE_CHANGED);var isValid=this.attrTest(input);// on cancel input and we've recognized before, return STATE_CANCELLED\nif(isRecognized&&(eventType&INPUT_CANCEL||!isValid)){return state|STATE_CANCELLED;}else if(isRecognized||isValid){if(eventType&INPUT_END){return state|STATE_ENDED;}else if(!(state&STATE_BEGAN)){return STATE_BEGAN;}return state|STATE_CHANGED;}return STATE_FAILED;}});/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */function PanRecognizer(){AttrRecognizer.apply(this,arguments);this.pX=null;this.pY=null;}inherit(PanRecognizer,AttrRecognizer,{/**\n     * @namespace\n     * @memberof PanRecognizer\n     */defaults:{event:'pan',threshold:10,pointers:1,direction:DIRECTION_ALL},getTouchAction:function(){var direction=this.options.direction;var actions=[];if(direction&DIRECTION_HORIZONTAL){actions.push(TOUCH_ACTION_PAN_Y);}if(direction&DIRECTION_VERTICAL){actions.push(TOUCH_ACTION_PAN_X);}return actions;},directionTest:function(input){var options=this.options;var hasMoved=true;var distance=input.distance;var direction=input.direction;var x=input.deltaX;var y=input.deltaY;// lock to axis?\nif(!(direction&options.direction)){if(options.direction&DIRECTION_HORIZONTAL){direction=x===0?DIRECTION_NONE:x<0?DIRECTION_LEFT:DIRECTION_RIGHT;hasMoved=x!=this.pX;distance=Math.abs(input.deltaX);}else{direction=y===0?DIRECTION_NONE:y<0?DIRECTION_UP:DIRECTION_DOWN;hasMoved=y!=this.pY;distance=Math.abs(input.deltaY);}}input.direction=direction;return hasMoved&&distance>options.threshold&&direction&options.direction;},attrTest:function(input){return AttrRecognizer.prototype.attrTest.call(this,input)&&(this.state&STATE_BEGAN||!(this.state&STATE_BEGAN)&&this.directionTest(input));},emit:function(input){this.pX=input.deltaX;this.pY=input.deltaY;var direction=directionStr(input.direction);if(direction){input.additionalEvent=this.options.event+direction;}this._super.emit.call(this,input);}});/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */function PinchRecognizer(){AttrRecognizer.apply(this,arguments);}inherit(PinchRecognizer,AttrRecognizer,{/**\n     * @namespace\n     * @memberof PinchRecognizer\n     */defaults:{event:'pinch',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.scale-1)>this.options.threshold||this.state&STATE_BEGAN);},emit:function(input){if(input.scale!==1){var inOut=input.scale<1?'in':'out';input.additionalEvent=this.options.event+inOut;}this._super.emit.call(this,input);}});/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */function PressRecognizer(){Recognizer.apply(this,arguments);this._timer=null;this._input=null;}inherit(PressRecognizer,Recognizer,{/**\n     * @namespace\n     * @memberof PressRecognizer\n     */defaults:{event:'press',pointers:1,time:251,// minimal time of the pointer to be pressed\nthreshold:9// a minimal movement is ok, but keep it low\n},getTouchAction:function(){return[TOUCH_ACTION_AUTO];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTime=input.deltaTime>options.time;this._input=input;// we only allow little movement\n// and we've reached an end event, so a tap is possible\nif(!validMovement||!validPointers||input.eventType&(INPUT_END|INPUT_CANCEL)&&!validTime){this.reset();}else if(input.eventType&INPUT_START){this.reset();this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.time,this);}else if(input.eventType&INPUT_END){return STATE_RECOGNIZED;}return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(input){if(this.state!==STATE_RECOGNIZED){return;}if(input&&input.eventType&INPUT_END){this.manager.emit(this.options.event+'up',input);}else{this._input.timeStamp=now();this.manager.emit(this.options.event,this._input);}}});/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */function RotateRecognizer(){AttrRecognizer.apply(this,arguments);}inherit(RotateRecognizer,AttrRecognizer,{/**\n     * @namespace\n     * @memberof RotateRecognizer\n     */defaults:{event:'rotate',threshold:0,pointers:2},getTouchAction:function(){return[TOUCH_ACTION_NONE];},attrTest:function(input){return this._super.attrTest.call(this,input)&&(Math.abs(input.rotation)>this.options.threshold||this.state&STATE_BEGAN);}});/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */function SwipeRecognizer(){AttrRecognizer.apply(this,arguments);}inherit(SwipeRecognizer,AttrRecognizer,{/**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */defaults:{event:'swipe',threshold:10,velocity:0.3,direction:DIRECTION_HORIZONTAL|DIRECTION_VERTICAL,pointers:1},getTouchAction:function(){return PanRecognizer.prototype.getTouchAction.call(this);},attrTest:function(input){var direction=this.options.direction;var velocity;if(direction&(DIRECTION_HORIZONTAL|DIRECTION_VERTICAL)){velocity=input.overallVelocity;}else if(direction&DIRECTION_HORIZONTAL){velocity=input.overallVelocityX;}else if(direction&DIRECTION_VERTICAL){velocity=input.overallVelocityY;}return this._super.attrTest.call(this,input)&&direction&input.offsetDirection&&input.distance>this.options.threshold&&input.maxPointers==this.options.pointers&&abs(velocity)>this.options.velocity&&input.eventType&INPUT_END;},emit:function(input){var direction=directionStr(input.offsetDirection);if(direction){this.manager.emit(this.options.event+direction,input);}this.manager.emit(this.options.event,input);}});/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */function TapRecognizer(){Recognizer.apply(this,arguments);// previous time and center,\n// used for tap counting\nthis.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0;}inherit(TapRecognizer,Recognizer,{/**\n     * @namespace\n     * @memberof PinchRecognizer\n     */defaults:{event:'tap',pointers:1,taps:1,interval:300,// max time between the multi-tap taps\ntime:250,// max time of the pointer to be down (like finger on the screen)\nthreshold:9,// a minimal movement is ok, but keep it low\nposThreshold:10// a multi-tap can be a bit off the initial position\n},getTouchAction:function(){return[TOUCH_ACTION_MANIPULATION];},process:function(input){var options=this.options;var validPointers=input.pointers.length===options.pointers;var validMovement=input.distance<options.threshold;var validTouchTime=input.deltaTime<options.time;this.reset();if(input.eventType&INPUT_START&&this.count===0){return this.failTimeout();}// we only allow little movement\n// and we've reached an end event, so a tap is possible\nif(validMovement&&validTouchTime&&validPointers){if(input.eventType!=INPUT_END){return this.failTimeout();}var validInterval=this.pTime?input.timeStamp-this.pTime<options.interval:true;var validMultiTap=!this.pCenter||getDistance(this.pCenter,input.center)<options.posThreshold;this.pTime=input.timeStamp;this.pCenter=input.center;if(!validMultiTap||!validInterval){this.count=1;}else{this.count+=1;}this._input=input;// if tap count matches we have recognized it,\n// else it has began recognizing...\nvar tapCount=this.count%options.taps;if(tapCount===0){// no failing requirements, immediately trigger the tap event\n// or wait as long as the multitap interval to trigger\nif(!this.hasRequireFailures()){return STATE_RECOGNIZED;}else{this._timer=setTimeoutContext(function(){this.state=STATE_RECOGNIZED;this.tryEmit();},options.interval,this);return STATE_BEGAN;}}}return STATE_FAILED;},failTimeout:function(){this._timer=setTimeoutContext(function(){this.state=STATE_FAILED;},this.options.interval,this);return STATE_FAILED;},reset:function(){clearTimeout(this._timer);},emit:function(){if(this.state==STATE_RECOGNIZED){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input);}}});/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */function Hammer(element,options){options=options||{};options.recognizers=ifUndefined(options.recognizers,Hammer.defaults.preset);return new Manager(element,options);}/**\n * @const {string}\n */Hammer.VERSION='2.0.7';/**\n * default settings\n * @namespace\n */Hammer.defaults={/**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */domEvents:false,/**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */touchAction:TOUCH_ACTION_COMPUTE,/**\n     * @type {Boolean}\n     * @default true\n     */enable:true,/**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */inputTarget:null,/**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */inputClass:null,/**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */preset:[// RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n[RotateRecognizer,{enable:false}],[PinchRecognizer,{enable:false},['rotate']],[SwipeRecognizer,{direction:DIRECTION_HORIZONTAL}],[PanRecognizer,{direction:DIRECTION_HORIZONTAL},['swipe']],[TapRecognizer],[TapRecognizer,{event:'doubletap',taps:2},['tap']],[PressRecognizer]],/**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */cssProps:{/**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */userSelect:'none',/**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */touchSelect:'none',/**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */touchCallout:'none',/**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */contentZooming:'none',/**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */userDrag:'none',/**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */tapHighlightColor:'rgba(0,0,0,0)'}};var STOP=1;var FORCED_STOP=2;/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */function Manager(element,options){this.options=assign({},Hammer.defaults,options||{});this.options.inputTarget=this.options.inputTarget||element;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=element;this.input=createInputInstance(this);this.touchAction=new TouchAction(this,this.options.touchAction);toggleCssProps(this,true);each(this.options.recognizers,function(item){var recognizer=this.add(new item[0](item[1]));item[2]&&recognizer.recognizeWith(item[2]);item[3]&&recognizer.requireFailure(item[3]);},this);}Manager.prototype={/**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */set:function(options){assign(this.options,options);// Options that need a little more setup\nif(options.touchAction){this.touchAction.update();}if(options.inputTarget){// Clean up existing event listeners and reinitialize\nthis.input.destroy();this.input.target=options.inputTarget;this.input.init();}return this;},/**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */stop:function(force){this.session.stopped=force?FORCED_STOP:STOP;},/**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */recognize:function(inputData){var session=this.session;if(session.stopped){return;}// run the touch-action polyfill\nthis.touchAction.preventDefaults(inputData);var recognizer;var recognizers=this.recognizers;// this holds the recognizer that is being recognized.\n// so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n// if no recognizer is detecting a thing, it is set to `null`\nvar curRecognizer=session.curRecognizer;// reset when the last recognizer is recognized\n// or when we're in a new session\nif(!curRecognizer||curRecognizer&&curRecognizer.state&STATE_RECOGNIZED){curRecognizer=session.curRecognizer=null;}var i=0;while(i<recognizers.length){recognizer=recognizers[i];// find out if we are allowed try to recognize the input for this one.\n// 1.   allow if the session is NOT forced stopped (see the .stop() method)\n// 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n//      that is being recognized.\n// 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n//      this can be setup with the `recognizeWith()` method on the recognizer.\nif(session.stopped!==FORCED_STOP&&(// 1\n!curRecognizer||recognizer==curRecognizer||// 2\nrecognizer.canRecognizeWith(curRecognizer))){// 3\nrecognizer.recognize(inputData);}else{recognizer.reset();}// if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n// current active recognizer. but only if we don't already have an active recognizer\nif(!curRecognizer&&recognizer.state&(STATE_BEGAN|STATE_CHANGED|STATE_ENDED)){curRecognizer=session.curRecognizer=recognizer;}i++;}},/**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */get:function(recognizer){if(recognizer instanceof Recognizer){return recognizer;}var recognizers=this.recognizers;for(var i=0;i<recognizers.length;i++){if(recognizers[i].options.event==recognizer){return recognizers[i];}}return null;},/**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */add:function(recognizer){if(invokeArrayArg(recognizer,'add',this)){return this;}// remove existing\nvar existing=this.get(recognizer.options.event);if(existing){this.remove(existing);}this.recognizers.push(recognizer);recognizer.manager=this;this.touchAction.update();return recognizer;},/**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */remove:function(recognizer){if(invokeArrayArg(recognizer,'remove',this)){return this;}recognizer=this.get(recognizer);// let's make sure this recognizer exists\nif(recognizer){var recognizers=this.recognizers;var index=inArray(recognizers,recognizer);if(index!==-1){recognizers.splice(index,1);this.touchAction.update();}}return this;},/**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */on:function(events,handler){if(events===undefined){return;}if(handler===undefined){return;}var handlers=this.handlers;each(splitStr(events),function(event){handlers[event]=handlers[event]||[];handlers[event].push(handler);});return this;},/**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */off:function(events,handler){if(events===undefined){return;}var handlers=this.handlers;each(splitStr(events),function(event){if(!handler){delete handlers[event];}else{handlers[event]&&handlers[event].splice(inArray(handlers[event],handler),1);}});return this;},/**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */emit:function(event,data){// we also want to trigger dom events\nif(this.options.domEvents){triggerDomEvent(event,data);}// no handlers, so skip it all\nvar handlers=this.handlers[event]&&this.handlers[event].slice();if(!handlers||!handlers.length){return;}data.type=event;data.preventDefault=function(){data.srcEvent.preventDefault();};var i=0;while(i<handlers.length){handlers[i](data);i++;}},/**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */destroy:function(){this.element&&toggleCssProps(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null;}};/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */function toggleCssProps(manager,add){var element=manager.element;if(!element.style){return;}var prop;each(manager.options.cssProps,function(value,name){prop=prefixed(element.style,name);if(add){manager.oldCssProps[prop]=element.style[prop];element.style[prop]=value;}else{element.style[prop]=manager.oldCssProps[prop]||'';}});if(!add){manager.oldCssProps={};}}/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */function triggerDomEvent(event,data){var gestureEvent=document.createEvent('Event');gestureEvent.initEvent(event,true,true);gestureEvent.gesture=data;data.target.dispatchEvent(gestureEvent);}assign(Hammer,{INPUT_START:INPUT_START,INPUT_MOVE:INPUT_MOVE,INPUT_END:INPUT_END,INPUT_CANCEL:INPUT_CANCEL,STATE_POSSIBLE:STATE_POSSIBLE,STATE_BEGAN:STATE_BEGAN,STATE_CHANGED:STATE_CHANGED,STATE_ENDED:STATE_ENDED,STATE_RECOGNIZED:STATE_RECOGNIZED,STATE_CANCELLED:STATE_CANCELLED,STATE_FAILED:STATE_FAILED,DIRECTION_NONE:DIRECTION_NONE,DIRECTION_LEFT:DIRECTION_LEFT,DIRECTION_RIGHT:DIRECTION_RIGHT,DIRECTION_UP:DIRECTION_UP,DIRECTION_DOWN:DIRECTION_DOWN,DIRECTION_HORIZONTAL:DIRECTION_HORIZONTAL,DIRECTION_VERTICAL:DIRECTION_VERTICAL,DIRECTION_ALL:DIRECTION_ALL,Manager:Manager,Input:Input,TouchAction:TouchAction,TouchInput:TouchInput,MouseInput:MouseInput,PointerEventInput:PointerEventInput,TouchMouseInput:TouchMouseInput,SingleTouchInput:SingleTouchInput,Recognizer:Recognizer,AttrRecognizer:AttrRecognizer,Tap:TapRecognizer,Pan:PanRecognizer,Swipe:SwipeRecognizer,Pinch:PinchRecognizer,Rotate:RotateRecognizer,Press:PressRecognizer,on:addEventListeners,off:removeEventListeners,each:each,merge:merge,extend:extend,assign:assign,inherit:inherit,bindFn:bindFn,prefixed:prefixed});// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal=typeof window!=='undefined'?window:typeof self!=='undefined'?self:{};// jshint ignore:line\nfreeGlobal.Hammer=Hammer;if(true){!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){return Hammer;}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));}else {}})(window,document,'Hammer');\n\n/***/ }),\n\n/***/ 3218:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"initializeTable\", function() { return /* binding */ initializeTable; });\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/eventBus.js\nvar eventBus = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/lodash/lodash.js\nvar lodash = __webpack_require__(1);\nvar lodash_default = /*#__PURE__*/__webpack_require__.n(lodash);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/logger.js\nvar logger = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/arrayUtils.js\nvar arrayUtils = __webpack_require__(122);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableConstants.js\nvar splmTableConstants = __webpack_require__(2902);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableUtils.js + 1 modules\nvar splmTableUtils = __webpack_require__(2908);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableDragHandler.js\n// Copyright (c) 2021 Siemens\n/**\n * This service is used for triggering drag and click event for PL Table without conflict\n *\n * @module js/splmTableDragHandler\n *\n * @publishedApolloService\n *\n */var splmTableDragHandler_exports={};var _dragEventHandler=function(e){// NOTE: pute every variable's inside this scope for isolation\nvar _elem=e.currentTarget;// NOTE: This number is based on manual testing. We can adjust it at any time.\nvar _clickInterval=160;// For stopping cursor change from darg-and-drop service\nvar _cursorMutexListener=function(mutexEvent){if(mutexEvent.originalEvent){mutexEvent=mutexEvent.originalEvent;}mutexEvent.preventDefault();return false;};var _onDragListener=function(dragEvent){if(dragEvent.originalEvent){dragEvent=dragEvent.originalEvent;}dragEvent.preventDefault();dragEvent.cancelBubble=true;_elem.dispatchEvent(splmTableUtils[\"a\" /* default */].createCustomEvent(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG,dragEvent));};var _onDragEndListener=function(dragEndEvent){if(dragEndEvent.originalEvent){dragEndEvent=e.originalEvent;}dragEndEvent.preventDefault();document.removeEventListener('mouseup',_onDragEndListener);document.removeEventListener('mousemove',_onDragListener);document.removeEventListener('mousedown',_cursorMutexListener);document.removeEventListener('mouseover',_cursorMutexListener);dragEndEvent.cancelBubble=true;_elem.dispatchEvent(splmTableUtils[\"a\" /* default */].createCustomEvent(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG_END,dragEndEvent));};var _onDragStartListener=function(dragStartEvent){if(dragStartEvent.originalEvent){dragStartEvent=dragStartEvent.originalEvent;}dragStartEvent.preventDefault();dragStartEvent.cancelBubble=true;document.addEventListener('mouseup',_onDragEndListener);document.addEventListener('mousemove',_onDragListener);document.addEventListener('mousedown',_cursorMutexListener);document.addEventListener('mouseover',_cursorMutexListener);_elem.dispatchEvent(splmTableUtils[\"a\" /* default */].createCustomEvent(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG_START,dragStartEvent));};var handleOriginEvent=function(originEvent){var ticking=false;var cleanClickTicking=function(){_elem.removeEventListener('mouseup',cleanClickTicking);ticking=false;};var setupClickTiking=function(){ticking=true;_elem.addEventListener('mouseup',cleanClickTicking);};setupClickTiking();setTimeout(function(){if(ticking===true){cleanClickTicking();_onDragStartListener(originEvent);}},_clickInterval);};handleOriginEvent(e);};let enableDragging=function(elem){elem.addEventListener('mousedown',_dragEventHandler);};let disableDragging=function(elem){elem.removeEventListener('mousedown',_dragEventHandler);};/**\n * Listen for DnD highlight/unhighlight event from dragAndDropService\n */eventBus[\"a\" /* default */].subscribe('dragDropEvent.highlight',function(eventData){splmTableDragHandler_exports.handleDragDropHighlightPLTable(eventData);});var applyStyleForTableDnD=function(tableElement,applyFlag,style){if(applyFlag){if(style){tableElement.classList.add(style);}else{tableElement.classList.add(splmTableConstants[\"a\" /* default */].CLASS_THEME_DROP_FRAME);tableElement.classList.add(splmTableConstants[\"a\" /* default */].CLASS_WIDGETS_DROP_FRAME);}}else{if(style){tableElement.classList.remove(style);}else{tableElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_THEME_DROP_FRAME);tableElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_WIDGETS_DROP_FRAME);}}};var applyStyleToChildrenForAllRows=function(pinnedOrScrollContainerList,isPCList,isGlobalArea,applyFlag){lodash_default.a.forEach(pinnedOrScrollContainerList,function(pcOrsc){if(pcOrsc.children){if(isGlobalArea){applyStyleForTableDnD(pcOrsc,applyFlag,splmTableConstants[\"a\" /* default */].CLASS_DONOT_HIGHLIGHT_INDIVIDUAL_ROWS);}else{if(isPCList){applyStyleForTableDnD(pcOrsc,applyFlag,splmTableConstants[\"a\" /* default */].CLASS_PINNED_CONTAINER_DROP_FRAME);}else{applyStyleForTableDnD(pcOrsc,applyFlag,splmTableConstants[\"a\" /* default */].CLASS_SCROLL_CONTAINER_DROP_FRAME);}}lodash_default.a.forEach(pcOrsc.children,function(eachPcOrSc){if(isGlobalArea){applyStyleForTableDnD(eachPcOrSc,applyFlag,splmTableConstants[\"a\" /* default */].CLASS_DONOT_HIGHLIGHT_INDIVIDUAL_ROWS);}else{applyStyleForTableDnD(eachPcOrSc,applyFlag);}});}});};/**\n * Add/Remove the widget  class to the elements of splm table that need highlighting/unhighlighting.\n * @param {DOMElement} rowOrTableElement - The element the mouse is over when the event was fired.\n * @param {Boolean} isHighlightFlag - add or remove the highlight class\n * @param {Boolean} isGlobalArea - is the object drag target over global invalid area or not\n */var _setHoverStyle=function(rowOrTableElement,isHighlightFlag,isGlobalArea){var splmTablePinnedContainer=null;var splmTableScrollContainer=null;if(!isGlobalArea){// target on table row\n// find the closest div holding splm table container\nvar splmTable=splmTableUtils[\"a\" /* default */].closestElement(rowOrTableElement,'.aw-splm-table');splmTablePinnedContainer=splmTable.querySelector('.aw-splm-tablePinnedContainer');splmTableScrollContainer=splmTable.querySelector('.aw-splm-tableScrollContainer');var rowIndex=parseInt(rowOrTableElement.getAttribute('data-indexnumber'));}else{applyStyleForTableDnD(rowOrTableElement,isHighlightFlag);splmTablePinnedContainer=rowOrTableElement.querySelector('.aw-splm-tablePinnedContainer');splmTableScrollContainer=rowOrTableElement.querySelector('.aw-splm-tableScrollContainer');}if(splmTablePinnedContainer&&splmTableScrollContainer){var pcList=[];var scList=[];var eachRowPC;var eachRowSC;if(!lodash_default.a.isUndefined(rowIndex)){// target on table row\npcList=splmTablePinnedContainer.querySelectorAll('div.ui-grid-row[data-indexnumber=\\''+rowIndex+'\\']');if(pcList&&pcList.length>0){eachRowPC=pcList[0];}scList=splmTableScrollContainer.querySelectorAll('div.ui-grid-row[data-indexnumber=\\''+rowIndex+'\\']');if(scList&&scList.length>0){eachRowSC=scList[0];}}else{// target on white area\npcList=splmTablePinnedContainer.querySelectorAll('div.ui-grid-row');scList=splmTableScrollContainer.querySelectorAll('div.ui-grid-row');}// highlight every single row with borders ; this will not be required when drag is over an invalid/white area\n// when over an invalid/white area , border-color will not be required for every single table row ; but only on splm-table-container\nif(!isGlobalArea&&!lodash_default.a.isUndefined(rowIndex)&&eachRowPC&&eachRowSC){// target on table row\napplyStyleForTableDnD(eachRowPC,isHighlightFlag);applyStyleForTableDnD(eachRowSC,isHighlightFlag);}applyStyleToChildrenForAllRows(pcList,true,isGlobalArea,isHighlightFlag);applyStyleToChildrenForAllRows(scList,false,isGlobalArea,isHighlightFlag);}};let handleDragDropHighlightPLTable=function(eventData){if(!lodash_default.a.isUndefined(eventData)&&!lodash_default.a.isUndefined(eventData.targetElement)&&eventData.targetElement.classList){var isHighlightFlag=eventData.isHighlightFlag;var target=eventData.targetElement;if(isHighlightFlag){if(target.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_ROW)){_setHoverStyle(target,true,false);}else if(target.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_TABLE)){// this is when current drag is on an invalid/white area\n_setHoverStyle(target,true,true);}}else{if(target.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_ROW)){_setHoverStyle(target,false,false);}else if(target.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_TABLE)){// this is when current drag is on an invalid/white area\n_setHoverStyle(target,false,true);}}}};splmTableDragHandler_exports={enableDragging,disableDragging,handleDragDropHighlightPLTable};/* harmony default export */ var splmTableDragHandler = (splmTableDragHandler_exports);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableColumnRearrangement.js\n// Copyright (c) 2020 Siemens\n/**\n * This service is used for plTable as Column Rearrangement\n *\n * @module js/splmTableColumnRearrangement\n *\n *//**\n * Instances of this class represent a column rearrangement utility for PL Table\n *\n * @class SPLMTableColumnRearrangement\n * @param {DOMElement} tableElem - HTML DOM Element for table\n */var SPLMTableColumnRearrangement=function(tableElem){var _columnRearrangementInProgress=false;var _columnsRearranged=false;var self=this;/**\n     * Switch the column indexes of the column definitions attached to the headers.\n     *\n     * @param {DOMElement} header1 - first header\n     * @param {DOMElement} header2 - second header\n     *\n     * @returns {Boolean} was column index switch successful?\n     */var switchColumnDefIndexes=function(header1,header2){var header1ColumnDefElement=header1.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0];var header2ColumnDefElement=header2.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0];if(header1ColumnDefElement&&header1ColumnDefElement.columnDef&&header2ColumnDefElement&&header2ColumnDefElement.columnDef){var tempColumnIndex=header1ColumnDefElement.columnDef.index;header1ColumnDefElement.columnDef.index=header2ColumnDefElement.columnDef.index;header2ColumnDefElement.columnDef.index=tempColumnIndex;return true;}return false;};/**\n     * Rearrange the column headers if the position parameter is outside the bounds of the original header element.\n     *\n     * @param {HTMLElement} element - the header element\n     * @param {Number} positionX - The X position to check for position of drag\n     *\n     * @returns {Boolean} if the columns were rearranged\n     */var rearrangeColumnHeaders=function(element,positionX){var elementBoundingBox=element.getBoundingClientRect();var nextSibling=element.nextSibling;var previousSibling=element.previousSibling;if(nextSibling&&positionX>elementBoundingBox.right+nextSibling.getBoundingClientRect().width/3&&nextSibling.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_HEADER_DRAGGABLE)&&switchColumnDefIndexes(nextSibling,element)){element.parentNode.insertBefore(nextSibling,element);return true;}else if(previousSibling&&positionX<elementBoundingBox.left-previousSibling.getBoundingClientRect().width/2&&previousSibling.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_HEADER_DRAGGABLE)&&switchColumnDefIndexes(previousSibling,element)){element.parentNode.insertBefore(element,previousSibling);return true;}return false;};/**\n     * Rearrange the content cells based on the columnDef indexes now.\n     * @param {Number} originalPosition - The original index of the column\n     * @param {Object} columnDef - the column definition\n     */var rearrangeContent=function(originalPosition,columnDef){if(originalPosition===columnDef.index){return;}var targetIndex=originalPosition<columnDef.index?-1:1;var targetContentElements=splmTableUtils[\"a\" /* default */].getColumnContentCellElementsByIndex(tableElem,columnDef.index+targetIndex);var draggedContentElements=splmTableUtils[\"a\" /* default */].getColumnContentCellElementsByIndex(tableElem,columnDef.index);for(var i=0;i<draggedContentElements.length;i++){var currentContentElement=draggedContentElements[i];var currentTargetContentElement=targetContentElements[i];if(originalPosition<columnDef.index){currentTargetContentElement=currentTargetContentElement.nextSibling;}currentContentElement.parentNode.insertBefore(currentContentElement,currentTargetContentElement);}};/**\n     * Attaches the drag header events to the header element paramter.\n     *\n     * @param {DOMElement} element - header element to attach drag events\n     */var attachDragHeader=function(element){var nextX=0;var currentX=0;var clonedElement;var columnDef;var originalPosition;element.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_DRAGGABLE);var columnDefElement=element.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0];var startDragElement=function(customEvent){// Clean up menu if exist\nvar menuService=splmTableUtils[\"a\" /* default */].getTableMenuService(tableElem);menuService.ensureAllTableMenusDismissed();var event=customEvent?customEvent.detail:window.event;clonedElement=element.cloneNode(true);clonedElement.classList.add(splmTableConstants[\"a\" /* default */].CLASS_UTILITY_HIDDEN);clonedElement.setAttribute('id',clonedElement.id+'ClonedHeader');// Attachment to container because of rendering problems when attached to the row\nvar elementContainer=splmTableUtils[\"a\" /* default */].closestElement(element,'.'+splmTableConstants[\"a\" /* default */].CLASS_PIN_CONTAINER+',.'+splmTableConstants[\"a\" /* default */].CLASS_SCROLL_CONTAINER);var scrollLeft=elementContainer.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT)[0].scrollLeft;elementContainer.appendChild(clonedElement);clonedElement.style.left=element.offsetLeft-scrollLeft+'px';clonedElement.style.top=element.offsetTop+'px';currentX=event.clientX;if(columnDefElement&&columnDefElement.columnDef){columnDef=columnDefElement.columnDef;originalPosition=columnDef.index;}};/**\n         *  Event to run when movement of header is in progress. Moves the element and any headers it moves over.\n         *\n         * @param {DOMEvent} customEvent - event being sent ( wrapped from 'mousemove' )\n         */var dragElement=function(customEvent){var event=customEvent?customEvent.detail:window.event;if(!_columnRearrangementInProgress){element.classList.add('stationaryHeader');clonedElement.classList.add('dragHeader');clonedElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_UTILITY_HIDDEN);_columnRearrangementInProgress=true;}nextX=currentX-event.clientX;currentX=event.clientX;clonedElement.style.left=clonedElement.offsetLeft-nextX+'px';_columnsRearranged=rearrangeColumnHeaders(element,event.clientX)||_columnsRearranged;};/**\n         * End the drag movement and replace the original header element visibility.\n         *\n         */var closeDragElement=function(){element.classList.remove('stationaryHeader');clonedElement.parentNode.removeChild(clonedElement);_columnRearrangementInProgress=false;if(_columnsRearranged){_columnsRearranged=false;var eventData={name:columnDef.name,originalPosition:originalPosition};tableElem._tableInstance.tableInstanceCallbacks.columnsRearranged(eventData);rearrangeContent(originalPosition,columnDef);}};// Column Header = Label + Sort Icon + Splitter\n// Sort Icon will occupy all spaces by flex-grow\nvar contentsElement=element.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_CELL_CONTENTS)[0];splmTableDragHandler.enableDragging(contentsElement);contentsElement.addEventListener(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG_START,startDragElement);contentsElement.addEventListener(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG,dragElement);contentsElement.addEventListener(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG_END,closeDragElement);};/**\n     * Initializes the table with header column rearrangement by dragging.\n     */self.initialize=function(){var headerCellElements=tableElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL);lodash_default.a.forEach(headerCellElements,function(headerCellElement){var columnDefinition;var foundElements=headerCellElement.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF);if(foundElements.length>0){columnDefinition=foundElements[0].columnDef;}if(columnDefinition&&columnDefinition.enableColumnMoving!==false){attachDragHeader(headerCellElement);}});};self.initialize();return self;};/* harmony default export */ var splmTableColumnRearrangement = (SPLMTableColumnRearrangement);\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/browserUtils.js\nvar browserUtils = __webpack_require__(26);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableMomentumScrolling.js\n// Copyright (c) 2020 Siemens\n/**\n * This service is for js based momentum scrolling for touch scrolling.\n *\n * @module js/splmTableMomentumScrolling\n */ /**\n * Momentum Scrolling.\n *\n * @constructor\n */var SPLMTableMomentumScrolling=function(){var self=this;var _pinCanvasElement=null;var _scrollCanvasElement=null;var _referenceY;var _referenceX;var _velocityX;var _velocityY;var _timestamp;var _ticker;var _amplitudeX;var _amplitudeY;var _deltaX=0;var _deltaY=0;var yPosition=function(e){return e.touches[0].pageY;};var xPosition=function(e){return e.touches[0].pageX;};var scroll=function(){if(_scrollCanvasElement.scrollTop-_deltaY>=0){_scrollCanvasElement.scrollTop-=_deltaY;}if(_scrollCanvasElement.scrollLeft-_deltaX>=0){_scrollCanvasElement.scrollLeft-=_deltaX;}};var track=function(){var now=Date.now();var elapsed=now-_timestamp;_timestamp=now;var vY=1000*_deltaY/(1+elapsed);var vX=1000*_deltaX/(1+elapsed);_deltaY=0;_deltaX=0;_velocityY=Math.round(0.4*vY+0.2*_velocityY);_velocityX=Math.round(0.4*vX+0.2*_velocityX);};var autoScroll=function(){if(_amplitudeY||_amplitudeX){var elapsed=Date.now()-_timestamp;var timeConstant=325;_deltaY=-_amplitudeY*Math.exp(-elapsed/timeConstant);_deltaX=-_amplitudeX*Math.exp(-elapsed/timeConstant);if(_deltaY>0.5||_deltaY<-0.5||_deltaX>0.5||_deltaX<-0.5){scroll();requestAnimationFrame(autoScroll);}else{scroll();}}};var tap=function(e){_referenceY=yPosition(e);_referenceX=xPosition(e);_velocityY=0;_velocityX=0;_amplitudeY=0;_amplitudeX=0;_timestamp=Date.now();clearInterval(_ticker);_ticker=setInterval(track,50);};var drag=function(e){if(_scrollCanvasElement.scrollTop-(_referenceY-yPosition(e))<=0||_scrollCanvasElement.scrollLeft-(_referenceX-xPosition(e))<=0){e.preventDefault();e.stopPropagation();}else{var y=yPosition(e);_deltaY=_referenceY-y;_referenceY=y;var x=xPosition(e);_deltaX=_referenceX-x;_referenceX=x;}};var release=function(){clearInterval(_ticker);if(_velocityY>10||_velocityY<-10||_velocityX>10||_velocityX<-10){_amplitudeY=0.6*_velocityY;_amplitudeX=0.6*_velocityX;_timestamp=Date.now();requestAnimationFrame(autoScroll);}};self.enable=function(pinCanvasElement,scrollCanvasElement){if(pinCanvasElement!==null){_pinCanvasElement=pinCanvasElement;_pinCanvasElement.addEventListener('touchstart',tap,{passive:true});_pinCanvasElement.addEventListener('touchmove',drag,{passive:true});_pinCanvasElement.addEventListener('touchend',release,{passive:true});}if(scrollCanvasElement!==null){_scrollCanvasElement=scrollCanvasElement;_scrollCanvasElement.addEventListener('touchstart',tap,{passive:true});_scrollCanvasElement.addEventListener('touchmove',drag,{passive:true});_scrollCanvasElement.addEventListener('touchend',release,{passive:true});}};self.disable=function(){if(_pinCanvasElement!==null){_pinCanvasElement.removeEventListener('touchstart',tap);_pinCanvasElement.removeEventListener('touchmove',drag);_pinCanvasElement.removeEventListener('touchend',release);_pinCanvasElement=null;}if(_scrollCanvasElement!==null){_scrollCanvasElement.removeEventListener('touchstart',tap);_scrollCanvasElement.removeEventListener('touchmove',drag);_scrollCanvasElement.removeEventListener('touchend',release);_scrollCanvasElement=null;}};};/* harmony default export */ var splmTableMomentumScrolling = (SPLMTableMomentumScrolling);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableInfiniteScrollService.js\n// Copyright (c) 2020 Siemens\n/**\n * This service is for exposing the native js data provider behavior. The module supports loading the module from GWT\n * and getting the native JS code invoked.\n *\n * @module js/splmTableInfiniteScrollService\n *//**\n * Native infinite scroll.\n *\n * @constructor\n * @param {Number} containerHeight the container height\n */let SPLMTableInfiniteScroll=function(containerHeight){let self=this;let settings={};let currentScrollTop=0;// Holds the last scroll position to detect scroll down or up\nlet previousScrollTop=0;let rowElements=[];// contains cache of rendered list\nlet rowHeightCache=[];let initialized=false;let containerHeightInitialized=false;let _containerHeight=containerHeight;let _visibleAreaHeight=_containerHeight-settings.headerHeight;let initialRowIndex=0;let extraVisibleRowCount=14;// keep it even for easier scrolling/calculations\nlet visibleRowsCount=0;let currentScrollLeft=0;let scrollToRowInProgress=false;let scrollToRowScrollTop=null;let maintainScrollPosition=false;let disablePinScrollEvent=false;let userPinScrollsDetected=0;let scrollContainerWidth=0;let verticalScrollDebounceTime=browserUtils[\"default\"].isIE||browserUtils[\"default\"].isFirefox?200:0;let horizontalScrollDebounceTime=browserUtils[\"default\"].isIE?500:0;let verticalScrollDebounceMaxWait=browserUtils[\"default\"].isIE||browserUtils[\"default\"].isFirefox?Infinity:0;let momentumScrolling=new splmTableMomentumScrolling();let lastScrollTimeStamp=new Date();let elapsedMSSinceLastScroll=0;// LCS-133249 Scrolling performance issue\n// Do scroll syncing at very beginning\nlet extraTop=0;let horizontalScrollDebounceEvent=lodash_default.a.debounce(function(){if(settings.scrollViewportElem&&settings.scrollViewportElem.offsetWidth){scrollContainerWidth=settings.scrollViewportElem.offsetWidth;}settings.updateScrollColumnsInView(currentScrollLeft,scrollContainerWidth);settings.updateVisibleCells(settings.scrollParentElem);},horizontalScrollDebounceTime);let verticalScrollDebounceEvent=lodash_default.a.debounce(function(){handleScrollEventInternal();},verticalScrollDebounceTime,{maxWait:verticalScrollDebounceMaxWait});self.initializeGrid=function(obj){settings=obj;settings.pinParentElem=settings.pinViewportElem.children[0];settings.scrollParentElem=settings.scrollViewportElem.children[0];settings.totalFound=settings.loadedVMObjects.length;settings.dynamicRowHeightStatus=settings.dynamicRowHeightStatus||false;initializeEvents();momentumScrolling.enable(settings.pinViewportElem,settings.scrollViewportElem);initialized=true;};/**\n     * Calculates the visible area of the table\n     * @returns {Number} the visible height\n     */let calculateVisibleAreaHeight=function(){return _containerHeight-settings.headerHeight;};self.checkForResize=lodash_default.a.debounce(async function(){elapsedMSSinceLastScroll=new Date()-lastScrollTimeStamp;if(elapsedMSSinceLastScroll<200){return;}let newClientWidth=settings.scrollViewportElem.offsetWidth;if(newClientWidth!==scrollContainerWidth){if(newClientWidth>scrollContainerWidth){scrollContainerWidth=newClientWidth;settings.updateScrollColumnsInView(currentScrollLeft);}else{scrollContainerWidth=newClientWidth;settings.updateScrollColumnsInView(currentScrollLeft,scrollContainerWidth);}settings.updateVisibleCells(settings.scrollParentElem);self.handlePinViewportScrollbarPadding();}if(settings.directiveElem.clientHeight!==_containerHeight){_containerHeight=settings.directiveElem.clientHeight;let rowContainerHeight=settings.scrollViewportElem.clientHeight||settings.pinViewportElem.clientHeight||_containerHeight;let rowCount=Math.floor(rowContainerHeight/settings.rowHeight);_visibleAreaHeight=calculateVisibleAreaHeight();setVisibleRowsCount(rowCount);await self.handleScroll();}},200);self.isInitialized=function(){return initialized;};/**\n     * Renders the initial rows on initialization once table div has been rendered so that\n     * the height can be computed properly\n     */self.renderInitialRows=function(){self.initializeProperties();settings.initialRowIndex=initialRowIndex;self.handleScroll();};self.getFirstRenderedItemIndex=function(){var firstRenderedItemIndex=0;var firstElem=rowElements[0];firstRenderedItemIndex=parseInt(firstElem.getAttribute('data-indexNumber'));return firstRenderedItemIndex;};self.getLastRenderedItemIndex=function(){var lastRenderedItemIndex=0;var lastElem=rowElements[rowElements.length-1];lastRenderedItemIndex=parseInt(lastElem.getAttribute('data-indexNumber'));return lastRenderedItemIndex;};/**\n     * set the object set height\n     * @param {Number} heightVal The container height\n     */self.setContainerHeight=function(heightVal){_containerHeight=heightVal;_visibleAreaHeight=calculateVisibleAreaHeight();// LCS-140092 - AW UxRefresh does not allow scrolling in Qt WebEngine Browser\n// 100% is not working in Qt WebEngine, use heightVal here\nsettings.scrollViewportElem.style.maxHeight=String(_visibleAreaHeight)+'px';settings.pinViewportElem.style.maxHeight=String(_visibleAreaHeight)+'px';};/**\n     * Set if dynamic row height is enabled or not\n     *\n     * @param {Boolean} isEnabled if DRH is enabled or not\n     */self.setDynamicRowHeight=function(isEnabled){settings.dynamicRowHeightStatus=isEnabled;if(settings.tableElem._tableInstance){settings.tableElem._tableInstance.dynamicRowHeightStatus=isEnabled;}};/**\n     * Sets the extra visible row count 10 < x < 30\n     *\n     * @param {Number} rowCount The number of rows to set\n     */function setExtraVisibleRowCount(rowCount){extraVisibleRowCount=Math.max(10,Math.min(30,rowCount));}/**\n     * Sets the visible row count\n     *\n     * @param {Number} rowCount the number of visible rows\n     */function setVisibleRowsCount(rowCount){visibleRowsCount=rowCount;setExtraVisibleRowCount(rowCount);}/**\n     * Convenience method to get certain row height from cache\n     *\n     * @param {Number} index The row's index\n     * @returns {Number} the row's height\n     */function getHeightFromCache(index){if(rowHeightCache[index]){if(index===rowHeightCache.length-1){return rowHeightCache[index];}return rowHeightCache[index]-1;// The -1 is because of the -1 margin added to the rows. May change in future\n}return settings.rowHeight;}/**\n     * Calculates the element's top position (scrollTop or just top)\n     * using the row height cache and its index\n     *\n     * @param {Number} elementIdx The element's index\n     * @returns {Number} the top position for the element\n     */function calculateElementTopPosition(elementIdx){let runningTop=0;for(let idx=0;idx<elementIdx;idx++){runningTop+=getHeightFromCache(idx);}return runningTop;}/**\n     * Calculates the row index based off of the scrollTop. Uses the row height cache\n     * and will return the index that the scrollTop reaches to.\n     *\n     * @param {Number} scrollTop The scroll top to calculate the element idx start from\n     * @returns {Number} the element's idx\n     */function calculateElementIndexFromScrollTop(scrollTop){let runningTotal=0;let index=0;while(runningTotal<scrollTop){runningTotal+=getHeightFromCache(index);index++;}return index;}/**\n     * Calculates the last visible row's index\n     *\n     * @returns {Number} the last visible row's index\n     */function calculateLastVisibleRowIndex(){return calculateElementIndexFromScrollTop(currentScrollTop+_visibleAreaHeight)-1;}/**\n     * Initialize scroll properties\n     */self.initializeProperties=function(){// Clear the row height cache\nrowHeightCache=[];// LCS-138303 - Performance tuning for 14 Objectset Table case - implementation\n// Use given clientHeight to save one computed CSS reading\nif(_containerHeight===undefined){_containerHeight=containerHeight>0?containerHeight:settings.directiveElem.clientHeight;_visibleAreaHeight=calculateVisibleAreaHeight();}else if(containerHeightInitialized===false){self.setContainerHeight(_containerHeight);}containerHeightInitialized=true;// Table should have height of at least one row.\nsettings.scrollViewportElem.style.minHeight=String(settings.rowHeight)+'px';settings.pinViewportElem.style.minHeight=String(settings.rowHeight)+'px';let scrollCanvasHeight=_visibleAreaHeight;if(scrollCanvasHeight<0){scrollCanvasHeight=0;}let rowCount=Math.floor(scrollCanvasHeight/settings.rowHeight);setVisibleRowsCount(rowCount);logger[\"a\" /* default */].trace('Table scroll service: Visible row count - '+visibleRowsCount);};/**\n     * Updates the container and top space heights so the rows are positioned correctly\n     */self.updateRowAlignment=function(){let topHeight=0;if(rowElements){let firstElement=rowElements[0];if(firstElement&&firstElement.getAttribute('data-indexNumber')){let firstElementIdx=parseInt(firstElement.getAttribute('data-indexNumber'));if(settings.treeTableEditSettings){topHeight=(firstElementIdx-settings.treeTableEditSettings.firstIndex)*settings.rowHeight;}else{topHeight=calculateElementTopPosition(firstElementIdx);}}}settings.pinParentElem.style.top=topHeight+'px';settings.scrollParentElem.style.top=topHeight+'px';let scrollContentHeight;// If tree table and editing, use treeEditSettings.lastIndex - the first index to get number of rows in total\nif(settings.treeTableEditSettings){scrollContentHeight=(settings.treeTableEditSettings.lastIndex-settings.treeTableEditSettings.firstIndex+1)*settings.rowHeight-topHeight;}else{scrollContentHeight=calculateElementTopPosition(settings.totalFound)-topHeight;}settings.pinParentElem.style.height=scrollContentHeight+'px';settings.scrollParentElem.style.height=scrollContentHeight+'px';};/**\n     * Returns the row height as an int\n     * @returns {Number} The row Height\n     */self.getRowHeight=function(){return settings.rowHeight;};/**\n     * Scrolls the table up/down one row.\n     *\n     * @param {Boolean} isScrollDown - scroll down indicator, false for scroll up\n     * @returns {Number} returns the new scrollTop of the scrollViewportElement\n     */self.manualScroll=function(isScrollDown){let scrollDistance=isScrollDown?self.getRowHeight():-self.getRowHeight();settings.scrollViewportElem.scrollTop+=scrollDistance;return settings.scrollViewportElem.scrollTop;};/**\n     * Get scrollTop of the scroll viewport.\n     *\n     * @returns {Number} returns the scrollTop of the scrollViewportElement\n     */self.getScrollTop=function(){return settings.scrollViewportElem.scrollTop;};/**\n     * Sets the row height\n     *\n     *  @param {int} rowHeight - the height of the row in pixels\n     */self.setRowHeight=function(rowHeight){settings.rowHeight=rowHeight;};/**\n     * Gets the total objects found\n     * @returns {Number} The total number of objects found\n     */self.getTotalFound=function(){return settings.totalFound;};/**\n     * Sets the loaded view model objects\n     *\n     *  @param {[ViewModelObject]} loadedViewModelObjects - the collection of view model objects\n     */self.setLoadedVMObjects=function(loadedViewModelObjects){// Maintain the scroll position\nif(maintainScrollPosition===true){// This will set the variables for maintaining scroll position.\n// The values are used when handleScroll is called again.\nsetValuesForMaintainingScroll(loadedViewModelObjects.length-settings.totalFound);}settings.loadedVMObjects=loadedViewModelObjects;settings.totalFound=loadedViewModelObjects.length;};self.setScrollPositionToBeMaintained=function(){maintainScrollPosition=true;};/**\n     * Sets the proper variables to maintain the scroll position\n     * @param {integer} rowDifferenceCount - the difference in rows used to calculate maintained scroll position\n     */function setValuesForMaintainingScroll(rowDifferenceCount){maintainScrollPosition=false;scrollToRowInProgress=true;let currentRow=calculateElementIndexFromScrollTop(settings.scrollViewportElem.scrollTop);let scrollToRow=currentRow+rowDifferenceCount;scrollToRowScrollTop=calculateElementTopPosition(scrollToRow);}self.isScrollToRowInProgress=function(){return scrollToRowInProgress;};let scrollEndTimer;/**\n     * Handles Scroll End logic\n     * Deletes excess rows when user has stopped scrolling for 500ms\n     * This prevents excessive deleting while trying to also create new rows and scroll table\n     */function handleScrollEndEvent(){if(scrollEndTimer){clearTimeout(scrollEndTimer);}scrollEndTimer=setTimeout(function(){removeExtraRows();},300);}/**\n     * Initialize Scroll Event to table\n     */function initializeEvents(){settings.scrollViewportElem.removeEventListener('scroll',handleScrollEvent);settings.scrollViewportElem.removeEventListener('scroll',handleScrollEndEvent);settings.pinViewportElem.removeEventListener('scroll',handlePinScrollEvent);settings.scrollViewportElem.addEventListener('scroll',handleScrollEvent);settings.scrollViewportElem.addEventListener('scroll',handleScrollEndEvent);settings.pinViewportElem.addEventListener('scroll',handlePinScrollEvent);}/**\n     * Add a padding to the pin viewport to align pin rows with content rows\n     * when scrolled to the bottom.\n     *\n     * @param {Number} tempExtraTop - amount of padding in pixels\n     */function addPinViewportScrollbarPadding(tempExtraTop){settings.pinViewportElem.style.top=String(tempExtraTop*-1)+'px';extraTop=tempExtraTop;}/**\n     * Remove the padding to the pin viewport used for row alignment.\n     */function removePinViewportScrollbarPadding(){settings.pinViewportElem.style.top='0px';extraTop=0;}/**\n     * Apply/remove extra top for pinViewport if the scrollViewport is now visible/invisible\n     */self.handlePinViewportScrollbarPadding=function(){const pinViewportElem=settings.pinViewportElem;const scrollViewportElem=settings.scrollViewportElem;if(currentScrollTop>=0){if(pinViewportElem.style.top==='0px'&&scrollViewportElem.clientWidth>0){let tempExtraTop=pinViewportElem.offsetHeight+currentScrollTop-pinViewportElem.scrollHeight;if(tempExtraTop>0){addPinViewportScrollbarPadding(tempExtraTop);}}else if(pinViewportElem.style.top!=='0px'&&scrollViewportElem.clientWidth<=0){removePinViewportScrollbarPadding();}}};/**\n     * Scroll Event Handler\n     */function handleScrollEvent(e){lastScrollTimeStamp=new Date();let oldScrollTop=currentScrollTop;currentScrollTop=settings.scrollViewportElem.scrollTop;let oldScrollLeft=currentScrollLeft;currentScrollLeft=settings.scrollViewportElem.scrollLeft;if(oldScrollTop===currentScrollTop&&currentScrollTop<0&&oldScrollLeft===currentScrollLeft&&currentScrollLeft<0){e.preventDefault();e.stopPropagation();}// LCS-133249 Scrolling performance issue\n// Do scroll syncing at very beginning\nlet pinViewportElem=settings.pinViewportElem;if(userPinScrollsDetected===0&&(oldScrollTop!==currentScrollTop||currentScrollTop===0)){disablePinScrollEvent=true;pinViewportElem.scrollTop=currentScrollTop;}settings.onStartScroll();if(oldScrollLeft!==currentScrollLeft&&currentScrollLeft>=0){settings.syncHeader(false,currentScrollLeft);horizontalScrollDebounceEvent();}if(oldScrollTop!==currentScrollTop&&currentScrollTop>=0){let tempExtraTop=pinViewportElem.offsetHeight+currentScrollTop-pinViewportElem.scrollHeight;if(tempExtraTop>0){if(settings.scrollViewportElem.clientWidth>0){addPinViewportScrollbarPadding(tempExtraTop);}}else if(extraTop>0){// For non IE/Edge, need to set top back when scroll up\nremovePinViewportScrollbarPadding();}verticalScrollDebounceEvent();}userPinScrollsDetected-=1;if(userPinScrollsDetected<0){userPinScrollsDetected=0;}}/**\n     * Real processing method for scroll event after debounce/requestAnimationFrame\n     */function handleScrollEventInternal(){let func;let isScrollDown=currentScrollTop>previousScrollTop;if(isScrollDown){func=self.handleScrollDown;}else{func=handleScrollUp;}previousScrollTop=currentScrollTop;// Do scroll shadow\nif(currentScrollTop>0){if(!settings.tableElem.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_TABLE_SCROLLED)){settings.tableElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_SCROLLED);}}else{if(settings.tableElem.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_TABLE_SCROLLED)){settings.tableElem.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_TABLE_SCROLLED);}}func.call();}/**\n     * Method to handle scroll down\n     */self.handleScrollDown=function(){if(rowElements&&rowElements.length){let lastChildElem=rowElements[rowElements.length-1];let lastIndexNumber=parseInt(lastChildElem.getAttribute('data-indexNumber'));let lastItemBottomPosition;if(settings.treeTableEditSettings){lastItemBottomPosition=(lastIndexNumber-settings.treeTableEditSettings.firstIndex)*settings.rowHeight+settings.rowHeight;}else{lastItemBottomPosition=calculateElementTopPosition(lastIndexNumber+1);}let lastVisibleRowIndex=calculateLastVisibleRowIndex();let lastItemAboveTop=lastItemBottomPosition<currentScrollTop;if(lastItemAboveTop===true){// Check if all the elements are rendered.\nif(lastIndexNumber+1<settings.totalFound){// Last element went up and page is empty. Need to calculate the page number now\nself.handleScroll();}}else if(lastItemBottomPosition<calculateElementTopPosition(lastVisibleRowIndex+extraVisibleRowCount)){let extraBlankRowsInView=lastVisibleRowIndex-lastIndexNumber;extraBlankRowsInView=extraBlankRowsInView<0?0:extraBlankRowsInView;// Last element went up and element is still in the page. Can do continuous rendering\nlet startCount=lastIndexNumber+1;let endCount=startCount+extraVisibleRowCount+extraBlankRowsInView;renderPageData(startCount,endCount);}}else{self.handleScroll();}};/**\n     * Method to handle wheel scroll event\n     *\n     * @param {Object} e - the event\n     */function handlePinScrollEvent(e){if(disablePinScrollEvent===true){disablePinScrollEvent=false;return;}var currentPinScrollLeft=settings.pinViewportElem.scrollLeft;settings.syncHeader(true,currentPinScrollLeft);// If scrollTop is same as currentScrollTop then nothing else needs to be done.\nif(settings.pinViewportElem.scrollTop===currentScrollTop){return;}userPinScrollsDetected+=1;if(settings.pinViewportElem.scrollTop!==settings.pinViewportElem.scrollHeight-settings.pinViewportElem.offsetHeight){settings.scrollViewportElem.scrollTop=settings.pinViewportElem.scrollTop;}else{settings.scrollViewportElem.scrollTop=settings.pinViewportElem.scrollTop+40;}// Prevent scrolling the parent div\ne.preventDefault();}/**\n     * Method call by handleScrollUp and handleScrollDown which processing page rendering\n     *\n     */self.handleScroll=function(){var currentStartIndex;if(settings.initialRowIndex){self.updateRowAlignment();var newScrollIdx=calculateElementIndexFromScrollTop(calculateElementTopPosition(settings.initialRowIndex)-_visibleAreaHeight*0.75);var newScrollTop=calculateElementTopPosition(newScrollIdx);delete settings.initialRowIndex;currentScrollTop=newScrollTop<0?0:newScrollTop;currentStartIndex=newScrollIdx;settings.scrollViewportElem.scrollTop=currentScrollTop;}if(scrollToRowInProgress===true){self.updateRowAlignment();settings.scrollViewportElem.scrollTop=scrollToRowScrollTop;scrollToRowInProgress=false;scrollToRowScrollTop=null;}if(!currentStartIndex){currentStartIndex=calculateElementIndexFromScrollTop(currentScrollTop);}var start=currentStartIndex-extraVisibleRowCount;var end=currentStartIndex+visibleRowsCount+extraVisibleRowCount;if(end>settings.totalFound-1){var offset=end-settings.totalFound-1;end-=offset;start-=offset;}renderPageData(start,end,true);previousScrollTop=currentScrollTop;};/**\n     * Method to handle scroll up\n     */function handleScrollUp(){if(rowElements&&rowElements.length){var firstChildElem=rowElements[0];var firstItemIndex=parseInt(firstChildElem.getAttribute('data-indexNumber'));var firstItemTopPosition;if(settings.treeTableEditSettings){firstItemTopPosition=(firstItemIndex-settings.treeTableEditSettings.firstIndex)*settings.rowHeight;}else{firstItemTopPosition=calculateElementTopPosition(firstItemIndex);}var firstVisibleElem=calculateElementIndexFromScrollTop(currentScrollTop);var firstItemBelowBottom=firstItemTopPosition>currentScrollTop+_visibleAreaHeight;if(firstItemBelowBottom===true){self.handleScroll();}else if(firstItemTopPosition>calculateElementTopPosition(firstVisibleElem-extraVisibleRowCount)){var extraBlankRowsInView=firstItemIndex-firstVisibleElem;extraBlankRowsInView=extraBlankRowsInView<0?0:extraBlankRowsInView;var endCount=firstItemIndex-1;var startCount=endCount-extraVisibleRowCount-extraBlankRowsInView;renderPageData(startCount,endCount);}}else{self.handleScroll();}}/**\n     * Sets up scrolling for trees while in edit mode\n     * @param {Boolean} isEditing if the table is in edit mode or not\n     */self.setupTreeEditScroll=function(isEditing){if(!isEditing){if(settings.treeTableEditSettings){// Find our current scroll position\nvar relativeIdx=settings.scrollViewportElem.scrollTop/self.getRowHeight();var scrollTop=(relativeIdx+settings.treeTableEditSettings.firstIndex-1)*self.getRowHeight();// Remove tree Edit settings\ndelete settings.treeTableEditSettings;// Reset alignment/rows\nself.updateRowAlignment();self.handleScroll();// Reset our scroll position to what we were at\nsettings.pinViewportElem.scrollTop=scrollTop;settings.scrollViewportElem.scrollTop=scrollTop;}return;}// If no element in table, return\nif(!rowElements||!rowElements[0]){return;}// Find first row that contains data\nvar firstChildElem=rowElements[0];var firstIndex=parseInt(firstChildElem.getAttribute('data-indexNumber'));var hasProps=settings.loadedVMObjects[firstIndex].props;while(hasProps&&firstIndex>0){hasProps=settings.loadedVMObjects[firstIndex-1].props;if(hasProps){firstIndex--;}}// Find last row that contains data\nvar lastChildElem=rowElements[rowElements.length-1];var lastIndex=parseInt(lastChildElem.getAttribute('data-indexNumber'));hasProps=settings.loadedVMObjects[lastIndex].props;while(hasProps&&lastIndex<settings.totalFound-1){hasProps=settings.loadedVMObjects[lastIndex+1].props;if(hasProps){lastIndex++;}}settings.treeTableEditSettings={firstIndex:firstIndex,lastIndex:lastIndex,totalDataLength:lastIndex+1};// update the container height\nself.updateRowAlignment();};/**\n     *  Remove rows from lower-bound to upper-bound\n     *\n     * @param {Object} upperCountIdx - event\n     * @param {Object} lowerCounterIdx - event\n     */function removeRows(upperCountIdx,lowerCounterIdx){settings.removeRows(upperCountIdx,lowerCounterIdx);rowElements=settings.scrollParentElem.querySelectorAll(settings.rowSelector);}/**\n     *  Resets infinite scroll back to a starting state\n     */self.resetInfiniteScroll=function(){self.setLoadedVMObjects([]);self.resetInitialRowIndex();rowHeightCache=[];settings.scrollViewportElem.scrollTop=0;settings.pinViewportElem.style.top='0px';settings.scrollViewportElem.style.top='0px';currentScrollTop=0;self.handleScroll();};/**\n     * Resets the row height cache\n     */self.resetRowHeightCache=function(){rowHeightCache=[];};/**\n     * Method to render rows\n     *\n     * @param {Number} startIndex Start render index\n     * @param {Number} endIndex End render Index\n     */function renderRows(startIndex,endIndex){settings.renderRows(startIndex,endIndex);rowElements=settings.scrollParentElem.querySelectorAll(settings.rowSelector);if(settings.dynamicRowHeightStatus){// check if last value of rowHeightCache is in new set of rendered data, otherwise can cause off by 1.\nlet lastCacheIdx=rowHeightCache.length-1;let firstElemIdx=rowElements[0].getAttribute('data-indexnumber');let lastElemIdx=rowElements[rowElements.length-1].getAttribute('data-indexnumber');if(lastCacheIdx<firstElemIdx||lastCacheIdx>lastElemIdx){// Delete last cache value to prevent off by 1 caused by margin\nrowHeightCache[rowHeightCache.length-1]=null;}// Loop through rowElements to update row cache\nfor(let rowElement of rowElements){let index=parseInt(rowElement.getAttribute('data-indexnumber'));rowHeightCache[index]=rowElement.offsetHeight;}}}/**\n     * Method to render rows\n     *\n     * @param {int} startCount - event\n     * @param {int} endCount - event\n     * @param {int} removeAllChild - event\n     */function renderPageData(startCount,endCount,removeAllChild){var totalDataLength;// Check if table is tree table and is editing\nif(settings.treeTableEditSettings){if(startCount<settings.treeTableEditSettings.firstIndex){startCount=settings.treeTableEditSettings.firstIndex;}if(endCount>settings.treeTableEditSettings.lastIndex){endCount=settings.treeTableEditSettings.lastIndex;}totalDataLength=settings.treeTableEditSettings.totalDataLength;}else{// Check to avoid negative indexing\nif(startCount<0){startCount=0;}totalDataLength=settings.totalFound;}if(startCount>=totalDataLength){if(totalDataLength===0){// if collection becomes empty, then remove all the existing list rows\nremoveRows(rowElements.length-1,0);self.updateRowAlignment();}else{settings.updateScrollColumnsInView(currentScrollLeft,scrollContainerWidth);renderRows(startCount,endCount);}if(startCount===totalDataLength){logger[\"a\" /* default */].trace('Table scroll service: Rendering of page data complete. No more data to render.');return;}}// check to avoid wrong indexing for startCount\nif(startCount>totalDataLength){endCount-=startCount;startCount=0;}// check to avoid wrong indexing for endCount\nif(endCount>=totalDataLength){endCount=totalDataLength-1;}if(removeAllChild){// remove the elements from the dom tree.\nremoveRows(rowElements.length-1,0);}renderRows(startCount,endCount);self.updateRowAlignment();afterGridRender();}/**\n     * Remove extra rows\n     */function removeExtraRows(){const rowParentElem=settings.scrollParentElem;rowElements=rowParentElem.querySelectorAll(settings.rowSelector);if(rowElements.length===0){logger[\"a\" /* default */].error('Rendering error');}else{let extraChildCount;let invisibleRowsCount;let invisibleRowsHeight;const firstElem=rowElements[0];const firstRenderedItemIndex=parseInt(firstElem.getAttribute('data-indexNumber'));if(settings.treeTableEditSettings){invisibleRowsHeight=(firstRenderedItemIndex-settings.treeTableEditSettings.firstIndex)*settings.rowHeight-currentScrollTop;}else{// Simply checking if there are invisible rows, actual height doesn't matter as is not used\ninvisibleRowsHeight=calculateElementTopPosition(firstRenderedItemIndex)-currentScrollTop;}if(invisibleRowsHeight<0){invisibleRowsCount=Math.abs(calculateElementIndexFromScrollTop(currentScrollTop)-firstRenderedItemIndex);extraChildCount=invisibleRowsCount-extraVisibleRowCount;if(extraChildCount>0){// remove the elements from the dom tree.\nremoveRows(extraChildCount,0);}}const lastElem=rowElements[rowElements.length-1];const lastRenderedItemIndex=parseInt(lastElem.getAttribute('data-indexNumber'));const visRowsHeight=visibleRowsCount*settings.rowHeight+currentScrollTop;const lastVisibleRowIndex=calculateLastVisibleRowIndex();if(settings.treeTableEditSettings){invisibleRowsHeight=(lastRenderedItemIndex-settings.treeTableEditSettings.firstIndex)*settings.rowHeight+settings.rowHeight-visRowsHeight;}else{// Simply checking if there are invisible rows, so actual height doesn't matter here as it will not be used.\ninvisibleRowsHeight=lastRenderedItemIndex-lastVisibleRowIndex;}if(invisibleRowsHeight>0){invisibleRowsCount=lastRenderedItemIndex-lastVisibleRowIndex;extraChildCount=invisibleRowsCount-extraVisibleRowCount;if(extraChildCount>0){removeRows(rowElements.length-1,rowElements.length-extraChildCount-1);}}}self.updateRowAlignment();}/**\n     * After grid rendered\n     */function afterGridRender(){var firstRenderedItemIndex=0;var lastRenderedItemIndex=0;var firstElem=rowElements[0];firstRenderedItemIndex=parseInt(firstElem.getAttribute('data-indexNumber'));var lastElem=rowElements[rowElements.length-1];lastRenderedItemIndex=parseInt(lastElem.getAttribute('data-indexNumber'));var firstRenderedItem={index:firstRenderedItemIndex,uid:firstElem.vmo.uid,levelNdx:firstElem.vmo.levelNdx};var lastRenderedItem={index:lastRenderedItemIndex,uid:lastElem.vmo.uid,levelNdx:lastElem.vmo.levelNdx};settings.afterGridRenderCallback(firstRenderedItem,lastRenderedItem);}self.destroyGrid=function(){settings.scrollViewportElem&&settings.scrollViewportElem.removeEventListener('scroll',handleScrollEvent);settings.scrollViewportElem&&settings.scrollViewportElem.removeEventListener('scroll',handleScrollEndEvent);settings.pinViewportElem&&settings.pinViewportElem.removeEventListener('scroll',handlePinScrollEvent);momentumScrolling.disable();self.checkForResize.cancel();horizontalScrollDebounceEvent.cancel();verticalScrollDebounceEvent.cancel();};/**\n     * Scrolls to the given row\n     *\n     * @param {integer[]} rowIndexes Index to scroll to\n     * @returns {boolean} returns false if a row is in view\n     */self.scrollToRowIndex=function(rowIndexes){// Only scroll to row if it is out of view\nif(self.isInitialized()===true){var scrollToRowElementPosition=null;var firstRowElementIndex=0;var lastIndexNumber=0;if(rowElements.length>0){firstRowElementIndex=Number(rowElements[0].getAttribute('data-indexnumber'));lastIndexNumber=Number(rowElements[rowElements.length-1].getAttribute('data-indexnumber'));}var scrollCanvasRect=settings.scrollViewportElem.getBoundingClientRect();for(var i=0;i<rowIndexes.length;i++){var rowIndex=rowIndexes[i];if(rowElements.length>0){if(rowIndex>lastIndexNumber||rowIndex<firstRowElementIndex){initialRowIndex=rowIndex;continue;}scrollToRowElementPosition=rowElements[rowIndex-firstRowElementIndex].getBoundingClientRect();if(scrollToRowElementPosition.top<scrollCanvasRect.top||scrollToRowElementPosition.bottom>scrollCanvasRect.bottom){initialRowIndex=rowIndex;continue;}initialRowIndex=rowIndex;}return false;}// Check if attempting to scroll past maximum scrollTop, if so set flag\nvar maxScrollTop=settings.scrollViewportElem.scrollHeight-settings.scrollViewportElem.clientHeight;var newScrollTop=Math.floor(calculateElementTopPosition(initialRowIndex)-_visibleAreaHeight*0.75);var initialRowIndexOnDom=initialRowIndex-firstRowElementIndex;if(rowElements[initialRowIndexOnDom]){scrollToRowElementPosition=rowElements[initialRowIndexOnDom].getBoundingClientRect();if(scrollToRowElementPosition.top<scrollCanvasRect.top&&scrollToRowElementPosition.bottom>scrollCanvasRect.top){newScrollTop=calculateElementTopPosition(initialRowIndex);}else if(scrollToRowElementPosition.top<scrollCanvasRect.bottom&&scrollToRowElementPosition.bottom>scrollCanvasRect.bottom){newScrollTop=settings.scrollViewportElem.scrollTop+(scrollToRowElementPosition.bottom-scrollCanvasRect.bottom);}}if(newScrollTop>maxScrollTop){scrollToRowInProgress=true;scrollToRowScrollTop=newScrollTop;}settings.scrollViewportElem.scrollTop=newScrollTop;}else{initialRowIndex=rowIndexes[0];}return true;};/**\n     * Scrolls to scroll container column\n     * @param {Object} column - The column to scroll to\n     */self.scrollToColumn=function(column){if(column.startPosition<=currentScrollLeft||column.startPosition>currentScrollLeft+scrollContainerWidth){settings.scrollViewportElem.scrollLeft=column.startPosition-10;}};self.isInitialRowIndexInView=function(){let firstRowElementIndex=Number(rowElements[0].getAttribute('data-indexnumber'));let initialRowElement=rowElements[initialRowIndex-firstRowElementIndex];if(initialRowElement===undefined){return false;}let initialRowElementIndex=initialRowElement.getAttribute('data-indexnumber');let firstVisibleIndex=calculateElementIndexFromScrollTop(currentScrollTop);let lastVisibleIndex=calculateLastVisibleRowIndex();if(initialRowElementIndex<firstVisibleIndex||initialRowIndex>lastVisibleIndex){return false;}return true;};/**\n     * Resets the initial row index to 0 so that infinite scroll service will\n     * start the rendering of rows at the top.\n     */self.resetInitialRowIndex=function(){initialRowIndex=0;};};/* harmony default export */ var splmTableInfiniteScrollService = (SPLMTableInfiniteScroll);\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/declarativeui/src/js/appCtxService.js\nvar appCtxService = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/ui/src/js/editHandlerService.js\nvar editHandlerService = __webpack_require__(65);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableSelectionHelper.js\nvar splmTableSelectionHelper = __webpack_require__(2943);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/uielements/src/js/wcagService.js\nvar wcagService = __webpack_require__(27);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableTraversal.js\nvar splmTableTraversal = __webpack_require__(2944);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableKeyboardService.js\n// Copyright (c) 2020 Siemens\n/**\n * This module defines the keyboard interactions for PL Table.\n *\n * @module js/splmTableKeyboardService\n *//**\n * Keyboard service to handle keyboard interactions for aw-splm-table\n * @param {HTMLElement} tableElem The table element\n * @param {SPLMTableEditor} tableEditor The table editor\n */const SPLMTableKeyboardService=function(tableElem,tableEditor){let self=this;let _tableElement=tableElem;let _tableEditor=tableEditor;let _tableInstance=splmTableUtils[\"a\" /* default */].getTableInstance(_tableElement);let _trv=new splmTableTraversal[\"a\" /* default */](tableElem);const dataIndexNumber='data-indexNumber';/**\n     * Prevents default and stops propagation for event\n     * @param {Event} event the event\n     */const preventEventDefaults=function(event){event.preventDefault();event.stopPropagation();};/**\n     * Checks if key pressed is an arrow key\n     * @param {String} keyPressed the pressed key to check\n     * @returns {String|null} the direction if arrow key, or null if not\n     */const checkIfArrowKey=function(keyPressed){switch(keyPressed){case'Up':case'ArrowUp':return'UP';case'Down':case'ArrowDown':return'DOWN';case'Left':case'ArrowLeft':return'LEFT';case'Right':case'ArrowRight':return'RIGHT';default:return null;}};/**\n     * Function for handling onfocus event\n     * @param {Event} event event data\n     */const onFocusFunction=function(event){event.target.tabIndex='0';};/**\n     * Function for handling onblur event\n     * @param {Event} event eventData\n     */const onBlurFunction=function(event){event.target.tabIndex='-1';};/**\n     * Sets focus and blur event listeners to passed element\n     * @param {HTMLElement} element Element to set focus and blur events for\n     */self.setOnFocusAndBlur=function(element){element.addEventListener('focus',onFocusFunction);element.addEventListener('blur',onBlurFunction);};/**\n     * Checks if passed element is a header element\n     * @param {HTMLElement} element Element to check\n     * @returns {Boolean} if the passed element is a header element\n     */const isHeaderElement=function(element){return element.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL);};/**\n     * Checks if passed element is a cell element\n     * @param {HTMLElement} element Element to check\n     * @returns {Boolean} if the passed element is a cell element\n     */const isCellElement=function(element){return element.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_CELL);};/**\n     * Checks if passed element is the table container\n     * @param {HTMLElement} element Element to check\n     * @returns {Boolean} if the passed element is table container\n     */const isTableContainer=function(element){return element.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CONTAINER);};/**\n     * Checks if passed element is the grid options button\n     * @param {HTMLElement} element Element to check\n     * @returns {Boolean} if the passed element is grid options button\n     */const isGridOptionsButton=function(element){return splmTableUtils[\"a\" /* default */].closestElement(element,\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_TABLE_MENU_BUTTON));};const hasFocusableElements=function(element){return wcagService[\"default\"].findFocusableChildren(element).length>0;};/**\n     * Focus' the grid options button for table\n     */const focusGridOptionsButton=function(){const gridMenuButton=_tableElement.querySelector(\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_TABLE_MENU_BUTTON,\" button\"));gridMenuButton.focus();};/**\n     * Gets the visible column defs for the table\n     * @returns {AwTableColumnInfo[]} Array of visible column defs\n     */const getColumnDefs=function(){let colDefs;if(_tableInstance.gridOptions.transpose){colDefs=_tableInstance.controller.getColumnDefs();}else{colDefs=_tableInstance.dataProvider.cols;colDefs=colDefs.filter(function(colDef){return colDef.hiddenFlag!==true;});}return colDefs;};/**\n     * Calculates the scrollLeft for when focusing an element in the scroll container when navigating left or right\n     *\n     * @param {HTMLElement} currentElem The currently focused cell\n     * @param {Number} currentRowIdx The current focused element's aria-rowindex\n     * @param {Number} currentColIdx The current focused element aria-colindex\n     * @param {Number} nextColIdx The next column index that will be focused\n     * @returns {Number} Returns the scrollLeft value if a change is needed, or null if no need to set.\n     */const calculateScrollLeft=function(currentElem,currentRowIdx,currentColIdx,nextColIdx){const colDefs=getColumnDefs();let currentDef=currentElem.columnDef||currentElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0].columnDef;let defIndex=colDefs.indexOf(currentDef);let scrollLeft=null;let nextDef=colDefs[defIndex+(nextColIdx-currentColIdx)];if(currentDef&&nextDef&&currentDef.pinnedLeft&&!nextDef.pinnedLeft){// set scrollLeft to 0\nscrollLeft=0;}else if(currentRowIdx===1&&nextDef&&!nextDef.pinnedLeft){scrollLeft=nextDef.startPosition;}return scrollLeft;};const getNewRowAndColumnIndex=(currentElem,direction,colDefs,currentRowIdx,numberOfRows)=>{let newIndexes={newRowIdx:null,newColIdx:null,scrollLeft:null};if(!currentElem){// No current element provided, focus very first header cell\nnewIndexes.newColIdx=1;newIndexes.newRowIdx=1;return newIndexes;}else if(isGridOptionsButton(currentElem)){if(direction==='LEFT'){newIndexes.newColIdx=colDefs.length;newIndexes.newRowIdx=1;}else if(direction==='DOWN'){newIndexes.newRowIdx=2;newIndexes.newColIdx=colDefs.length;newIndexes.scrollLeft=colDefs[colDefs.length-1].startPosition;}return newIndexes;}const currentColIdx=parseInt(currentElem.getAttribute('aria-colindex'));switch(direction){case'UP':if(currentRowIdx<=1){return null;}newIndexes.newColIdx=currentColIdx;newIndexes.newRowIdx=currentRowIdx-1;break;case'DOWN':// row index starts at 1\nif(currentRowIdx>=numberOfRows){return null;}newIndexes.newColIdx=currentColIdx;newIndexes.newRowIdx=currentRowIdx+1;break;case'LEFT':if(currentColIdx<=1){return null;}newIndexes.newColIdx=currentColIdx-1;newIndexes.newRowIdx=currentRowIdx;break;case'RIGHT':// index for aria-colindex starts at 1\nif(currentColIdx>=colDefs.length){if(isHeaderElement(currentElem)){focusGridOptionsButton();}return null;}newIndexes.newColIdx=currentColIdx+1;newIndexes.newRowIdx=currentRowIdx;break;default:break;}// Set scrollLeft as needed\nif(newIndexes.newColIdx!==currentColIdx){newIndexes.scrollLeft=calculateScrollLeft(currentElem,currentRowIdx,currentColIdx,newIndexes.newColIdx);}return newIndexes;};/**\n     * Handles the cell navigation in table. If no element provided, focuses the first header cell. Otherwise\n     * handles navigation based on current element and direction passed\n     * @param {HTMLElement} currentElem The currently focused element\n     * @param {String} direction The direction to navigate - UP, DOWN, LEFT, or RIGHT\n     */const handleCellNavigation=(currentElem,direction)=>{const colDefs=getColumnDefs();let numberOfRows;if(_tableInstance.gridOptions.transpose){numberOfRows=_tableInstance.dataProvider.cols.length+1;}else{numberOfRows=_tableInstance.dataProvider.viewModelCollection.getLoadedViewModelObjects().length+1;}const currentRowIdx=currentElem?parseInt(currentElem.parentElement.getAttribute('aria-rowindex')):null;const newIndexes=getNewRowAndColumnIndex(currentElem,direction,colDefs,currentRowIdx,numberOfRows);if(!newIndexes){return;}const newRowIdx=newIndexes.newRowIdx;const newColIdx=newIndexes.newColIdx;const scrollLeft=newIndexes.scrollLeft;let scrollContainer=_trv.getScrollContainerElementFromTable();let viewport=scrollContainer.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT)[0];if(currentRowIdx===1&&newRowIdx===2){// Going from header row to first row, need to set scroll top to 0\nviewport.scrollTop=0;}if(scrollLeft!==null){viewport.scrollLeft=scrollLeft;}// Find the correct next element to focus\nsetTimeout(function(){let queryString=\"[aria-rowindex='\".concat(newRowIdx,\"'] [aria-colindex='\").concat(newColIdx,\"']\");let element=_tableElement.querySelector(queryString);if(element){element.focus();}},100);};/**\n     * Focuses the first or last cell in a given row/header row\n     * @param {HTMLElement} srcElement The source cell\n     * @param {Boolean} focusFirstInRow If user should focus first in row. if false, then last\n     */const focusFirstOrLastInRow=function(srcElement,focusFirstInRow){const colDefs=getColumnDefs();if(isHeaderElement(srcElement)){if(focusFirstInRow){handleCellNavigation();}else{const lastDef=colDefs[colDefs.length-1];const scrollLeft=lastDef.startPosition;if(!lastDef.pinnedLeft){let container=_trv.getScrollContainerElementFromTable().getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT)[0];container.scrollLeft=scrollLeft;}setTimeout(function(){let querySelector=\"[aria-rowindex='1'] [aria-colindex='\".concat(colDefs.length,\"']\");let headerCell=_tableElement.querySelector(querySelector);headerCell&&headerCell.focus();},50);}}else if(isCellElement(srcElement)||splmTableUtils[\"a\" /* default */].closestElement(srcElement,\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_CELL))){let defToFind;let closestCell=splmTableUtils[\"a\" /* default */].closestElement(srcElement,\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_CELL));const rowIdx=closestCell?closestCell.parentElement.getAttribute(dataIndexNumber):srcElement.parentElement.getAttribute(dataIndexNumber);if(focusFirstInRow){defToFind=colDefs[0];if(!defToFind.pinnedLeft){let scrollContainer=_trv.getScrollContainerElementFromTable();let viewport=scrollContainer.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT)[0];viewport.scrollLeft=0;}}else{defToFind=colDefs[colDefs.length-1];if(!defToFind.pinnedLeft){let scrollContainer=_trv.getScrollContainerElementFromTable();let viewport=scrollContainer.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT)[0];viewport.scrollLeft=defToFind.startPosition;}}setTimeout(function(){let querySelector=\"[aria-rowindex='\".concat(parseInt(rowIdx)+2,\"'] [aria-colindex='\").concat(defToFind.index+1,\"']\");let focusElem=_tableElement.querySelector(querySelector);focusElem&&focusElem.focus();},50);}};/**\n     * Gets the edit context, either from dataProvider.json or declViewModel\n     * @returns {String|null} - The edit context, if any, or null\n     */const getEditContext=function(){if(_tableInstance.dataProvider.json&&_tableInstance.dataProvider.json.editContext){return _tableInstance.dataProvider.json.editContext;}else if(_tableInstance.declViewModel._internal.editContext){return _tableInstance.declViewModel._internal.editContext;}return null;};/**\n     * Handles selection when using keyboard. Will call the click handler and selection helper to handle the selection event\n     * @param {HTMLElement} keyboardTargetElement The destination element of the keyboard event (cell)\n     * @param {Event} event the event\n     */const handleKeyboardSelection=function(keyboardTargetElement,event){let rowVmo=keyboardTargetElement.parentElement&&keyboardTargetElement.parentElement.vmo;_tableEditor.onClickHandler(event,keyboardTargetElement,rowVmo);const selectionHandler=splmTableSelectionHelper[\"default\"].selectionChanged(_tableElement,keyboardTargetElement);selectionHandler(event);};/**\n     * Handles the left/right internal navigation\n     * @param {HTMLElement} cellElement The cell element\n     * @param {String} direction The direction - left or right\n     * @param {Event} event The keyboard event\n     */const handleLeftOrRightInternalNavigation=(cellElement,direction,event)=>{preventEventDefaults(event);if(document.activeElement===cellElement&&direction==='RIGHT'){// Navigate inside cell\n_tableEditor.removeAllCellSelection();let focusElem=wcagService[\"default\"].findNextFocusableChild(cellElement,true);focusElem&&focusElem.focus();}else if(direction==='RIGHT'){let nextFocusableElement=wcagService[\"default\"].findNextFocusableChild(cellElement);if(nextFocusableElement){nextFocusableElement.focus();}else{handleCellNavigation(cellElement,direction);}}else{let prevFocusableElement=wcagService[\"default\"].findPreviousFocusableChild(cellElement);if(prevFocusableElement){prevFocusableElement.focus();}else{handleCellNavigation(cellElement,direction);}}};self.setupInternalCellNavigation=cellElement=>{cellElement.onkeydown=function(event){const arrowKey=checkIfArrowKey(event.key);let containsFocusableElems=hasFocusableElements(cellElement);const isInternalCellNavigationAllowed=!splmTableUtils[\"a\" /* default */].isBulkEditing(_tableElement)&&!cellElement.isElementInEdit&&containsFocusableElems;if(!isInternalCellNavigationAllowed){return;}if(arrowKey==='LEFT'||arrowKey==='RIGHT'){delete _tableInstance.focusTreeNodeExpandAfterRender;handleLeftOrRightInternalNavigation(cellElement,arrowKey,event);}else if((arrowKey==='DOWN'||arrowKey==='UP')&&document.activeElement!==cellElement){delete _tableInstance.focusTreeNodeExpandAfterRender;preventEventDefaults(event);handleCellNavigation(cellElement,arrowKey);}};};const handleTabKey=(srcElement,event)=>{if(isHeaderElement(srcElement)&&!event.shiftKey){preventEventDefaults(event);focusGridOptionsButton();}else if(isGridOptionsButton(srcElement)&&event.shiftKey){preventEventDefaults(event);handleCellNavigation();}else if(isTableContainer(srcElement)){_tableEditor.removeAllCellSelection();}else if(document.activeElement.closest(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CONTAINER)){_tableEditor.removeAllCellSelection();}};const handleArrowKey=(srcElement,arrowKey,event)=>{if(isCellElement(srcElement)&&event.shiftKey&&(arrowKey==='DOWN'||arrowKey==='UP')){preventEventDefaults(event);_tableEditor.removeAllCellSelection();// Do shift select essentially\nconst rowIdx=parseInt(srcElement.parentElement.getAttribute(dataIndexNumber));const totalRows=_tableInstance.dataProvider.viewModelCollection.getLoadedViewModelObjects().length;if(arrowKey==='DOWN'&&rowIdx<totalRows-1||arrowKey==='UP'&&rowIdx>0){handleCellNavigation(srcElement,arrowKey);setTimeout(function(){handleKeyboardSelection(document.activeElement,event);},100);}}else if(!srcElement.isElementInEdit){preventEventDefaults(event);if(isHeaderElement(srcElement)||isCellElement(srcElement)){_tableEditor.removeAllCellSelection();handleCellNavigation(srcElement,arrowKey);}else if(isGridOptionsButton(srcElement)){handleCellNavigation(srcElement,arrowKey);}else if(isTableContainer(srcElement)){_tableEditor.removeAllCellSelection();handleCellNavigation();}}};const handleEscapeKey=srcElement=>{if(splmTableUtils[\"a\" /* default */].isCellEditing(_tableElement)&&!srcElement.isElementInEdit){const context=getEditContext();let editHandler=null;if(context){editHandler=editHandlerService[\"a\" /* default */].getEditHandler(context);}if(editHandler){editHandler.cancelEdits();}else if(_tableInstance.dataProvider.getEditConfiguration()){const dataCtxNode={data:_tableInstance.declViewModel,ctx:appCtxService[\"default\"].ctx};_tableInstance.dataProvider.cancelEdits(dataCtxNode,_tableInstance.declViewModel);}else if(_tableInstance.declViewModel.getEditConfiguration()){_tableInstance.declViewModel.cancelEdits();}}};const handleEnterOrSpaceKey=(srcElement,event)=>{if(isCellElement(srcElement)&&!srcElement.isElementInEdit){preventEventDefaults(event);// We have to select the row since this is not a click, it wont trigger the selection change\nhandleKeyboardSelection(srcElement,event);}};/**\n     * Sets up the onkeydown listener for table. This will add support for tab, arrows keys, enter/return/space, and escape\n     */self.setupKeyListener=()=>{_tableElement.onkeydown=event=>{// check what srcElement, and key code are\nlet srcElement=event.srcElement;// if srcElement is input, then go up to cell level\nif(srcElement.tagName==='INPUT'||srcElement.tagName==='TEXTAREA'){srcElement=splmTableUtils[\"a\" /* default */].closestElement(srcElement,\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_CELL))||srcElement;}if(splmTableUtils[\"a\" /* default */].isBulkEditing(_tableElement)){if(isTableContainer(srcElement)){preventEventDefaults(event);// Focus very first edit cell\nlet editableGridCell=srcElement.getElementsByClassName('aw-jswidgets-editableGridCell')[0];if(editableGridCell){editableGridCell.parentElement.focus();}}return;}const keyPressed=event.key;const arrowKey=checkIfArrowKey(keyPressed);if(keyPressed==='Tab'){handleTabKey(srcElement,event);}else if(arrowKey){handleArrowKey(srcElement,arrowKey,event);}else if(keyPressed==='Enter'||keyPressed==='Space'||keyPressed===' '){handleEnterOrSpaceKey(srcElement,event);}else if(keyPressed==='Escape'||keyPressed==='Esc'){handleEscapeKey(srcElement);}else if(keyPressed==='Home'&&!srcElement.isElementInEdit){focusFirstOrLastInRow(srcElement,true);_tableEditor.removeAllCellSelection();}else if(keyPressed==='End'&&!srcElement.isElementInEdit){focusFirstOrLastInRow(srcElement,false);_tableEditor.removeAllCellSelection();}};};};/* harmony default export */ var splmTableKeyboardService = (SPLMTableKeyboardService);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableTranspose.js\n// Copyright (c) 2020 Siemens\n/**\n * Definition of splmTableTranspose\n *\n * @module js/splmTableTranspose\n *//**\n * Get the first column for a transposed table\n *\n * @returns {Object} The static first column used by a transposed table, representing the property\n */const getFirstColumn=function(){return{name:'',field:'transposedColumnProperty',displayName:'',pinnedLeft:true,enableColumnMenu:false,enableColumnMoving:false,enableSorting:false,enableColumnResizing:true,enableRendererContribution:true,modifiable:false,width:125};};const columnsChanged=function(columns,vmos){if(columns&&columns.length===vmos.length+1){for(let i=0;i<vmos.length;i++){let vmoFound=false;let vmo=vmos[i];for(let j=0;j<columns.length;j++){let column=columns[j];if(vmo.uid===column.field){vmoFound=true;}}if(vmoFound===false){return true;}}return false;}return true;};/**\n * Create a column to use in transpose\n *\n * @param {*} vmo A vmo to base the column on\n * @returns {*} A column generated for a transposed table\n */const getColumn=function(vmo){let displayName;if(vmo.displayName){displayName=vmo.displayName;}else if(vmo.props.object_string){displayName=vmo.props.object_string.uiValues[0];}else if(vmo.props.object_name){displayName=vmo.props.object_name.uiValues[0];}else{displayName='';}let column={field:vmo.uid,name:vmo.uid,displayName:displayName,enableColumnMoving:true,enableColumnResizing:true,enablePinning:false,width:300,vmo:vmo,enableRendererContribution:true,headerTooltip:true,modifiable:false};if(vmo.column){let mergedColumn=Object.assign(vmo.column,column);mergedColumn.width=mergedColumn.drawnWidth;return mergedColumn;}return column;};/**\n * Get the first column for a transposed table\n *\n * @param {Array} columns the previous columns\n * @param {Array} vmos the vmos in order\n * @returns {Object} The static first column used by a transposed table, representing the property\n */const getTransposedColumns=function(columns,vmos){let orderedVmos=vmos;// Maintain column order on recreation, if columns are same\nif(!columnsChanged(columns,vmos)){orderedVmos=[];columns=lodash_default.a.sortBy(columns,'index');for(let i=1;i<columns.length;i++){let uid=columns[i].field;for(let j=0;j<vmos.length;j++){let vmo=vmos[j];if(vmo.uid===uid){vmo.column=columns[i];orderedVmos.push(vmo);break;}}}}return[getFirstColumn()].concat(orderedVmos.map(getColumn));};const getTransposedVmos=function(columns,viewModelObjects){for(let i=0;i<columns.length;i++){columns[i].visible=!columns[i].hasOwnProperty('visible')||columns[i].visible;}let visibleColumns=lodash_default.a.filter(columns,function(column){if(column.visible){return column;}return false;});let columnVmos=[];for(let i=0;i<visibleColumns.length;i++){let column=visibleColumns[i];let columnVmo={props:{transposedColumnProperty:{uiValue:column.displayName,dbValue:column.field}}};// Icon column is special for icon cell rendering. Add property to distinguish it from other generated vmos.\nif(column.name==='icon'){columnVmo.name='icon';}for(let j=0;j<viewModelObjects.length;j++){let object=viewModelObjects[j];// Add icon image data for later use in icon cell rendering\nif(column.name==='icon'){columnVmo.props[object.uid]={thumbnailURL:object.thumbnailURL,typeIconURL:object.typeIconURL,iconURL:object.iconURL};}else{columnVmo.props[object.uid]=object.props[column.field];}}columnVmos.push(columnVmo);}return columnVmos;};/* harmony default export */ var splmTableTranspose = ({getColumn,getTransposedColumns,getTransposedVmos});\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/pltable/src/js/awColumnFilterService.js + 1 modules\nvar awColumnFilterService = __webpack_require__(272);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/pltable/src/js/awSPLMTableCellRendererFactory.js\nvar awSPLMTableCellRendererFactory = __webpack_require__(3039);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/uiwidget/src/js/declDragAndDropService.js\nvar declDragAndDropService = __webpack_require__(166);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/popup/src/js/domUtils.js\nvar domUtils = __webpack_require__(21);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/uiwidget/src/js/dragAndDropService.js + 2 modules\nvar dragAndDropService = __webpack_require__(628);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/localeService.js + 1 modules\nvar localeService = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/uiwidget/src/js/selectionHelper.js\nvar selectionHelper = __webpack_require__(175);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/propertyrender/src/js/uwUtilService.js\nvar uwUtilService = __webpack_require__(58);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/declarativeui/src/js/messagingService.js + 1 modules\nvar messagingService = __webpack_require__(46);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/image/miscInProcessIndicator16.svg\nvar miscInProcessIndicator16 = __webpack_require__(955);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/image/miscExpandedTree12.svg\nvar miscExpandedTree12 = __webpack_require__(954);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/image/miscCollapsedTree12.svg\nvar miscCollapsedTree12 = __webpack_require__(953);\n\n// EXTERNAL MODULE: ./node_modules/hammerjs/hammer.js\nvar hammer = __webpack_require__(3115);\nvar hammer_default = /*#__PURE__*/__webpack_require__.n(hammer);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableFillDownHelper.js\n// Copyright (c) 2020 Siemens\n/**\n * Fill Down Helper for listen hammer event and manipulate the table element\n *\n * @module js/splmTableFillDownHelper\n *\n * @publishedApolloService\n *\n *//**\n * Instances of this class represent a fill down helper for PL Table\n *\n * @class SPLMTableFillDownHelper\n * @param {Object} tableElem PL Table DOMElement\n */function SPLMTableFillDownHelper(tableElem){var self=this;if(!browserUtils[\"default\"].isMobileOS){document.body.classList.add('nonTouch');}// reference to the entire table visual tree element\ndelete self.tableContentElt;// element ref to the source cellTop\ndelete self.currentSrcCell;// get the bounding rectangle of the source cell\ndelete self.currentSrcCellRectangle;// currently registered event handler\ndelete self.currentPanHandler;delete self.currentPanHandlerElement;self.scrollDelta=0;// currently doing a drag?\nself.isActivelyDragging=false;// the cells within the current drag area; modified as the drag action is done\nself.dragSelectedCells=[];// unhook the drag event hanlder, reset the drag state\nself.removePanEvtHandler=function(){if(self.currentPanHandler){self.currentPanHandler.off('panup pandown panend panstart pancancel',self.handleHammerCellDrag);}delete self.currentPanHandler;self.isActivelyDragging=false;delete self.currentPanHandlerElement;if(self.currentSrcCell){self.currentSrcCell.classList.remove('dragSrc');}};// pan in some direction. compute the drag coords, find the cells within it\n// (includes the source and target cells), and style the cells appropriately\n// to mark the drag area\nself.handlePan=function(hEvt){// get all cells in this column - the attribute name must match the rendering code\nvar getAllColCells=function(){return splmTableUtils[\"a\" /* default */].getColumnContentCellElementsByIndex(self.tableContentElt,self.targetColNumber);};var scrollAsNeeded=function(panEvent){// look at table height and offset to determine if we are near the top or bottom?\nvar tableScrollContentRenderer=splmTableUtils[\"a\" /* default */].getTableInstance(tableElem).renderer;let currentViewPortBoundingClientRect=self.currentViewportElement.getBoundingClientRect();var boundingTop=currentViewPortBoundingClientRect.top;var boundingBottom=boundingTop+currentViewPortBoundingClientRect.height;if(panEvent.srcEvent.pageY<boundingTop+10){// scroll up logic\nself.scrollDelta=tableScrollContentRenderer.manualScroll(false);logger[\"a\" /* default */].debug(scroll,' scroll up');}else if(panEvent.srcEvent.pageY>boundingBottom-10){// scroll down logic\nself.scrollDelta=tableScrollContentRenderer.manualScroll(true);logger[\"a\" /* default */].debug(scroll,' scroll down');}};var yDragTop;var yDragBottom;// reset the array of cells in the drag area\nself.dragSelectedCells=[];// which direction is the drag in?\nlet srcCellIndex=self.currentSrcCell.parentElement&&parseInt(self.currentSrcCell.parentElement.getAttribute('aria-rowindex'))-2||0;if(hEvt.srcEvent.clientY+self.scrollDelta>self.currentSrcCellRectangle.top+self.initialScrollDelta+1){// down\nself.dragUp=false;yDragTop=self.currentSrcCellRectangle.top-1+self.initialScrollDelta;yDragBottom=hEvt.srcEvent.clientY+self.scrollDelta;}else{// up - swap for contains calculations\nself.dragUp=true;yDragTop=hEvt.srcEvent.clientY+self.scrollDelta;yDragBottom=self.currentSrcCellRectangle.bottom+self.initialScrollDelta+1;}// check if the data is being virtualized, if so, adjust target area\nvar currentSrcCellProperty=splmTableUtils[\"a\" /* default */].getPropertyByCellElement(self.currentSrcCell);if(self.srcUiVal!==currentSrcCellProperty.uiValue){if(self.dragUp){yDragBottom=9999999;}else{yDragTop=0;}}let columnCells=getAllColCells();for(let currentCell of columnCells){let currIndex=parseInt(currentCell.parentElement.getAttribute('aria-rowindex'))-2;// -2 because rowindex for header is 1, first row is 2\nlet indexDelta=currIndex-srcCellIndex;var currentCellTop=self.currentSrcCellRectangle.top+self.initialScrollDelta+(self.currentSrcCellRectangle.height+1)*indexDelta;let currentCellBottom=currentCellTop+self.currentSrcCellRectangle.height;// clear any previous styling\ncurrentCell.classList.remove('dragCellTop');currentCell.classList.remove('dragCell');currentCell.classList.remove('dragCellBottom');var yCell=currentCellTop;// y coord for this cell\nif(self.dragUp===true){yCell=currentCellBottom;}// compute whether or not this cell is in the drag area\nif(yCell<yDragBottom&&yCell>=yDragTop){// if ( hEvt.srcEvent.clientY > currentCellTop && hEvt.srcEvent.clientY < currentCellBottom ) {\n// this element fits inside the selection rectangle\ncurrentCell.classList.add('dragCell');self.dragSelectedCells.push(currentCell);}}// decorate top and bottom cells specially\nif(self.dragSelectedCells.length){self.dragSelectedCells[0].classList.add('dragCellTop');self.dragSelectedCells[self.dragSelectedCells.length-1].classList.add('dragCellBottom');}// attempt to scroll the grid if we are dragging off\nscrollAsNeeded(hEvt);};// the end pan/drag has been encountered - trigger the data processing\n// based on the drag area boundary\nself.handlePanEnd=function(){// eslint-disable-line no-unused-vars\n// check that we have more than just the source cell\nif(self.dragSelectedCells.length>1){var endTargetCell;var direction;if(self.dragUp){endTargetCell=self.dragSelectedCells[0];direction='up';}else{endTargetCell=self.dragSelectedCells[self.dragSelectedCells.length-1];direction='down';}var endTargetProp=splmTableUtils[\"a\" /* default */].getPropertyByCellElement(endTargetCell);// iterate the target cells\nfor(var inx=0;inx<self.dragSelectedCells.length;inx++){self.dragSelectedCells[inx].classList.remove('dragCellTop');self.dragSelectedCells[inx].classList.remove('dragCell');self.dragSelectedCells[inx].classList.remove('dragCellBottom');}// for\n// emit this fill-complete event to be handled by the tabled\nvar gridId=splmTableUtils[\"a\" /* default */].getTableInstance(tableElem).gridId;let endTarget=endTargetProp.substituteParentUid||endTargetProp.parentUid;if(!endTarget){var rowElement=splmTableUtils[\"a\" /* default */].closestElement(endTargetCell,'.'+splmTableConstants[\"a\" /* default */].CLASS_ROW);endTarget=rowElement.vmo.uid;}splmTableUtils[\"a\" /* default */].getTableInstance(tableElem).editor.fillDownCompleteHandler({propertyName:self.propertyName,source:self.srcUid,endTarget:endTarget,direction:direction});}// children > 1\nself.scrollDelta=0;self.isActivelyDragging=false;self.tableContentElt.classList.remove('aw-jswidgets-dragfilling');};self.handlePanCancel=function(){self.removePanEvtHandler();};self.handlePanStart=function(hEvt){// starting pan...\nself.dragUp=false;self.isActivelyDragging=true;const tableScrollContentRenderer=splmTableUtils[\"a\" /* default */].getTableInstance(tableElem).renderer;self.initialScrollDelta=tableScrollContentRenderer.getScrollTop();self.scrollDelta=self.initialScrollDelta;// the source cell for the fill\nvar srcCell=splmTableUtils[\"a\" /* default */].closestElement(hEvt.target,'.'+splmTableConstants[\"a\" /* default */].CLASS_CELL);self.currentSrcCell=srcCell;self.currentSrcCellRectangle=self.currentSrcCell.getBoundingClientRect();self.currentViewportElement=splmTableUtils[\"a\" /* default */].closestElement(self.currentSrcCell,'.'+splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT);var property=splmTableUtils[\"a\" /* default */].getPropertyByCellElement(self.currentSrcCell);self.srcUid=property.substituteParentUid||property.parentUid;if(!self.srcUid){var rowElement=splmTableUtils[\"a\" /* default */].closestElement(self.currentSrcCell,'.'+splmTableConstants[\"a\" /* default */].CLASS_ROW);self.srcUid=rowElement.vmo.uid;}self.srcUiVal=property.uiValue;self.propertyName=property.propertyName;self.tableContentElt=splmTableUtils[\"a\" /* default */].closestElement(hEvt.target,'.'+splmTableConstants[\"a\" /* default */].ELEMENT_TABLE);// table content area\nself.currentSrcCell.classList.add('dragSrc');self.tableContentElt.classList.add('aw-jswidgets-dragfilling');self.targetColNumber=self.currentSrcCell.columnDef.index;};// function for handling the Pan/drag related events from hammer.\n// account for all the Hammer event states\nself.handleHammerCellDrag=function(hEvt){if(hEvt.type==='panstart'){self.handlePanStart(hEvt);}else if(hEvt.type==='panend'){// ending pan\nself.handlePanEnd();}else if(hEvt.type==='pancancel'){// cancelling pan\nself.handlePanCancel();}else if(self.isActivelyDragging){// other event - actively dragging, so handle pan\nself.handlePan(hEvt);}};// this is triggered from the drag handle drag action on the directive.\n// Determine if we need to setup the hammer pan/drag listener.\n// Establish the drag start\nself.initialize=function(event){// checking range...\nif(!self.isActivelyDragging){event.preventDefault();if(self.currentPanHandlerElement){if(self.currentPanHandlerElement!==event.target){// remove the old one\nself.removePanEvtHandler();}}if(!self.currentPanHandler){var hmrMgr=hammer_default()(event.target,{touchAction:'pan-y'});// track the element that the hammer is using\nself.currentPanHandlerElement=event.target;var panRecognizer=hmrMgr.get('pan');panRecognizer.set({direction:hammer_default.a.DIRECTION_VERTICAL});// set options\nhmrMgr.on('panup pandown panend panstart pancancel',self.handleHammerCellDrag);// panleft panright\nself.currentPanHandler=hmrMgr;}else if(self.currentPanHandlerElement){// existing handler, same element?\nif(self.currentPanHandlerElement!==event.target){logger[\"a\" /* default */].warn('different event handler element - shouldnt be here ------------------');}}}};return self;}/* harmony default export */ var splmTableFillDownHelper = (SPLMTableFillDownHelper);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableFillDown.js\n// Copyright (c) 2020 Siemens\n/**\n * This service is used for plTable as Fill Down / Copy Down / Drag Down\n *\n * @module js/splmTableFillDown\n *\n * @publishedApolloService\n *\n *//**\n * Instances of this class represent a fill down helper for PL Table\n *\n * @class SPLMTableFillDown\n * @param {Object} tableElem PL Table DOMElement\n */function SPLMTableFillDown(tableElem){let self=this;let _helper=new splmTableFillDownHelper(tableElem);let _draggableOriginal;/**\n     * Enable FillDown on cell element\n     *\n     * @param {DOMElement} cellElement - DOMElement for Cell\n     *\n     */self.enableFillDown=function(cellElement){var dragHandleElement=cellElement.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE)[0];if(!dragHandleElement){let row=cellElement.parentElement;dragHandleElement=splmTableUtils[\"a\" /* default */].createElement('div',splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE);dragHandleElement.addEventListener('mouseover',_helper.initialize);dragHandleElement.addEventListener('mousedown',function(){_draggableOriginal=row.draggable;row.draggable=false;});dragHandleElement.addEventListener('mouseup',function(){row.draggable=_draggableOriginal;});cellElement.appendChild(dragHandleElement);}};/**\n     * Disable FillDown on cell element\n     *\n     * @param {DOMElement} cellElement - DOMElement for Cell\n     */self.disableFillDown=function(cellElement){var dragHandleElement=cellElement.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE)[0];if(dragHandleElement){cellElement.removeChild(dragHandleElement);}};return self;}/* harmony default export */ var splmTableFillDown = (SPLMTableFillDown);\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/propertyrender/src/js/uwPropertyService.js + 2 modules\nvar uwPropertyService = __webpack_require__(16);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/services/src/js/moduleLoader.js\nvar moduleLoader = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/declreact/src/js/declReactUtils.js\nvar declReactUtils = __webpack_require__(123);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/declreact/src/js/reactAppCtx.js + 19 modules\nvar reactAppCtx = __webpack_require__(158);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableDirectEditUtils.js\n// Copyright (c) 2020 Siemens\n/**\n * This module defines the utils for direct edit in PL Table.\n *\n * @module js/splmTableDirectEditUtils\n *//**\n * Gets the editContext for the table\n *\n * @param {Object} tableInstance - the table's tableInstance object\n *\n * @return {string} the name of the editContext for this table\n */const splmTableDirectEditUtils_getEditContext=tableInstance=>{if(tableInstance.dataProvider.json&&tableInstance.dataProvider.json.editContext){// Edit context of edit handler for this dataProvider\nreturn tableInstance.dataProvider.json.editContext;}else if(tableInstance.dataProvider.json&&tableInstance.dataProvider.json.customPanelEditContext){// Edit context of parent summary view model ( html panel table using edit via nativeDataLoadEvent usecase )\nreturn tableInstance.dataProvider.json.customPanelEditContext;}else if(tableInstance.declViewModel._internal.editContext){// Edit context of edit handler for this view model\nreturn tableInstance.declViewModel._internal.editContext;}return null;};const _displayGuidanceMessage=(message,tableElem)=>{const prop={message:{messageType:'INFO',messageText:message},showType:'false',closable:true};const guidanceMessageElem=Object(moduleLoader[\"d\" /* includeComponent */])('AwGuidanceMessage',prop);let docFrag=document.createDocumentFragment();Object(declReactUtils[\"d\" /* renderComponent */])(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(reactAppCtx[\"a\" /* AppCtxComponent */],{children:guidanceMessageElem}),docFrag);tableElem.parentElement.insertBefore(docFrag,tableElem);};/**\n * Displays guidance message above the table to let the user know that auto save is one despite global auto save being turned off\n *\n * @param {HTMLElement} tableElem - the table element\n */const displayAutoSaveOnGuidanceMessage=tableElem=>{localeService[\"default\"].getLocalizedTextFromKey('BaseMessages.AUTO_SAVE_ONLY_TABLE',true).then(message=>{_displayGuidanceMessage(message,tableElem);});};/**\n * Displays guidance message above the table to let the user know that cell editing is disabled\n *\n * @param {HTMLElement} tableElem - the table element\n */const displayCellEditDisabledGuidanceMessage=tableElem=>{localeService[\"default\"].getLocalizedTextFromKey('BaseMessages.CELL_EDITING_DISABLED',true).then(message=>{_displayGuidanceMessage(message,tableElem);});};/* harmony default export */ var splmTableDirectEditUtils = ({getEditContext: splmTableDirectEditUtils_getEditContext,displayAutoSaveOnGuidanceMessage,displayCellEditDisabledGuidanceMessage});\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableCellRenderer.js\nvar splmTableCellRenderer = __webpack_require__(2965);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableEditor.js\n/* eslint-disable max-lines */ // Copyright (c) 2020 Siemens\n/**\n * This module defines the edit function for PL Table.\n *\n * @module js/splmTableEditor\n */var SPLMTableEditor=function(tableElem,directiveElem,gridContextDispatcher){let _trv=new splmTableTraversal[\"a\" /* default */](tableElem);let _fillDown=new splmTableFillDown(tableElem);let _lovValueChangedEventSubs={};let _blurHandler=null;let _focusProp=null;let _tableInstance=splmTableUtils[\"a\" /* default */].getTableInstance(tableElem);let _selectedCellInfo=null;let _saveEditPromise=null;let _isEditablePromise=null;let _escapeKeyHandler=null;let _enterKeyHandler=null;let _fillDownSaveInprogress=false;const ariaReadOnly='aria-readonly';const ariaActiveDescendant='aria-activedescendant';// cache local event subscription\nlet _eventBusSubs=[];let self=this;// eslint-disable-line no-invalid-this\nconst destroyLovEventListeners=function(){lodash_default.a.forEach(_lovValueChangedEventSubs,function(subscription){eventBus[\"a\" /* default */].unsubscribe(subscription);});_lovValueChangedEventSubs={};};self.destroy=function(){destroyLovEventListeners();lodash_default.a.forEach(_eventBusSubs,function(sub){eventBus[\"a\" /* default */].unsubscribe(sub);});_eventBusSubs=[];};self.setFocusProp=function(prop){_focusProp=prop;};const triggerBlurHandler=function(){if(_blurHandler){_blurHandler();}};self.updateEditStatus=function(){triggerBlurHandler();var cellElems=_trv.getContentCellElementsFromTable();lodash_default.a.forEach(cellElems,function(elem){self.updateEditStatusForCell(elem);});if(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){_focusProp=null;destroyLovEventListeners();}};const toggleLinkStyle=function(element,isLinkStyle){if(isLinkStyle){// disabled to active link\nvar linkElements=element.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS_DISABLED);for(var i=linkElements.length;i>0;i--){var linkElem=linkElements[i-1];if(linkElem&&linkElem.classList){linkElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS);linkElem.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS_DISABLED);}}}else{// active to disabled links\nlinkElements=element.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS);for(var j=linkElements.length;j>0;j--){var linkElem1=linkElements[j-1];if(linkElem1&&linkElem1.classList){linkElem1.classList.add(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS_DISABLED);linkElem1.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS);}}}};/**\n     * Ensure the drag handle is the last element in the parent container.\n     *\n     * @param {DOMElement} cell - cell with drag handle to re-append\n     */const ensureDragHandleLastChild=function(cell){var dragHandleElements=cell.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_CELL_DRAG_HANDLE);if(dragHandleElements.length>0){dragHandleElements[0].parentElement.appendChild(dragHandleElements[0]);}};const reverseEditCell=function(cell,vmo,column,cellElemProperty){if(cell.parentElement===null){return;}cell.isElementInEdit=false;var editCells=null;if(cellElemProperty.isArray){editCells=cell.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_TOP_ARRAY);}else{editCells=cell.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_TOP);}var isErrorProperty=false;var cellTopElement=splmTableCellRenderer[\"a\" /* default */].createElement(column,vmo,tableElem,cell.parentElement);if(_tableInstance.dynamicRowHeightStatus===true){splmTableCellRenderer[\"a\" /* default */].addDynamicCellHeight(vmo,cellTopElement);}if(editCells.length>0){var editCell=editCells[0];if(cellElemProperty.isArray){const editArrayPopup=_tableInstance.gridOptions.popupContext.editArrayPopup;if(editArrayPopup){editArrayPopup.hide();}}else{editCell.parentElement.removeChild(editCell);}setTimeout(function(){splmTableUtils[\"a\" /* default */].cleanupComponents(editCell);var propertyErrorElements=editCell.getElementsByClassName('aw-widgets-propertyError');if(propertyErrorElements.length>0){isErrorProperty=true;}if(isErrorProperty){cellTopElement.classList.add('aw-widgets-propertyError');}if(!cellElemProperty.isArray){splmTableUtils[\"a\" /* default */].destroyElement(editCell);}},1000);}cell.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_AW_IS_EDITING);cell.appendChild(cellTopElement);var cellTopElements=cell.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_TOP);if(cellTopElements.length>0){cellTopElements[0].classList.add(splmTableConstants[\"a\" /* default */].CLASS_AW_EDITABLE_CELL);}ensureDragHandleLastChild(cell);};const removeFocusEvents=function(cellElem){const useCapture=true;cellElem.removeEventListener('focus',cellElem.onFocusEvent,useCapture);cellElem.onFocusEvent=null;cellElem.removeEventListener('mousedown',cellElem.onFocusClickEvent);cellElem.onFocusClickEvent=null;};let _isUserClick=false;let _isCtrlKey=false;const addFocusEvent=function(cellElem,vmo){removeFocusEvents(cellElem);const onFocusEvent=function(event){// Update row selection if clicking on editable cell. This is needed because UW widget stops propagation of the event\n// to the row element when it is created.\nif(_isUserClick){let eventObj;if(browserUtils[\"default\"].isIE){eventObj=document.createEvent('MouseEvent');eventObj.initMouseEvent('click',true,true,window,0,eventObj.screenX,eventObj.screenY,eventObj.clientX,eventObj.clientY,_isCtrlKey,false,false,false,0,null);}else{eventObj=new MouseEvent('click',{ctrlKey:_isCtrlKey});}cellElem.parentElement.dispatchEvent(eventObj);_isUserClick=false;_isCtrlKey=false;}self.editCell(cellElem,vmo);};cellElem.onFocusEvent=onFocusEvent;const useCapture=true;// LCS-357443: IE does not focus the cell when using element.onfocus.\n// Instead focus event must be added with addEventListener and useCapture as true.\ncellElem.addEventListener('focus',onFocusEvent,useCapture);const isFocusClickEvent=function(event){_isUserClick=true;_isCtrlKey=event.ctrlKey;};cellElem.isFocusClickEvent=isFocusClickEvent;cellElem.addEventListener('mousedown',isFocusClickEvent);};const addEditStatus=function(cellElem,cellElemProperty,vmo){if(cellElem.children[0]){cellElem.children[0].classList.add(splmTableConstants[\"a\" /* default */].CLASS_AW_EDITABLE_CELL);var rowHeight=splmTableUtils[\"a\" /* default */].getTableRowHeight(_tableInstance.gridOptions,undefined);if(rowHeight!==undefined){cellElem.children[0].style.height=rowHeight+'px';}}else{logger[\"a\" /* default */].debug(cellElem.propName+' has no child');}addFocusEvent(cellElem,vmo);_fillDown.enableFillDown(cellElem);toggleLinkStyle(cellElem,false);// for saved cells in partial edit status\nvar cellTop=cellElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_TOP)[0]||cellElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_TOP)[0]||cellElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_TOP_ARRAY)[0];splmTableCellRenderer[\"a\" /* default */].updateCellChangedClass(cellElemProperty,cellTop);if(_focusProp===cellElem.prop){self.editCell(cellElem,vmo);}};const removeBlurHandler=function(){const useCapture=true;document.body.removeEventListener('click',_blurHandler,useCapture);_trv.getScrollCanvasElementFromTable().removeEventListener('scroll',_blurHandler,useCapture);_trv.getPinCanvasElementFromTable().removeEventListener('scroll',_blurHandler,useCapture);};const removeEscapeAndEnterHandlers=function(cell){document.body.removeEventListener('keydown',_escapeKeyHandler,true);cell.removeEventListener('keydown',_enterKeyHandler,true);_escapeKeyHandler=null;_enterKeyHandler=null;};const setBlurHandler=function(blurHandler){_blurHandler=blurHandler;};const removeEditStatus=function(cellElem,cellElemProperty,vmo,skipCellCreation){const cellTopElem=cellElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_TOP)[0];if(cellTopElem&&(cellTopElem.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_AW_EDITABLE_CELL)||cellTopElem.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_CELL_CHANGED))||cellElem.propIsEditableCache){if(!cellElemProperty.isArray&&!cellElem.isSelected){_fillDown.disableFillDown(cellElem);}if(!skipCellCreation){cellElem.removeChild(cellTopElem);reverseEditCell(cellElem,vmo,cellElem.columnDef,cellElemProperty);}cellElem.children[0].classList.remove(splmTableConstants[\"a\" /* default */].CLASS_AW_EDITABLE_CELL);removeFocusEvents(cellElem);}toggleLinkStyle(cellElem,true);};self.updateEditStatusForCell=function(cellElem){var cellElemProperty=cellElem.prop;let vmo=splmTableUtils[\"a\" /* default */].getViewModelObjectByCellElement(cellElem);vmo=getVmoById(vmo.alternateID||vmo.uid);// get latest vmo from collection rather than cached\nvar vmoProp=vmo&&vmo.props&&vmo.props[cellElem.propName];if(cellElem.propName&&cellElemProperty&&cellElem.columnDef.isTreeNavigation!==true){// LCS-142669 - read modifiable besides of isEditable\nif((cellElemProperty.isEditable||vmoProp&&vmoProp.isEditable)&&cellElem.columnDef.modifiable!==false&&splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){addEditStatus(cellElem,cellElemProperty,vmo);}else if(cellElem.isSelected&&cellElem.propIsEditableCache&&cellElemProperty.isPropInEdit){addEditStatus(cellElem,cellElemProperty,vmo);}else{removeEditStatus(cellElem,cellElemProperty,vmo);if(splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){cellElem.setAttribute(ariaReadOnly,'true');}else if(cellElem.hasAttribute(ariaReadOnly)&&cellElem.propIsEditableCache!==false){cellElem.removeAttribute(ariaReadOnly);}}}else if(splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){cellElem.setAttribute(ariaReadOnly,'true');}else if(cellElem.hasAttribute(ariaReadOnly)&&cellElem.propIsEditableCache!==false){cellElem.removeAttribute(ariaReadOnly);}};/**\n     * Subscribe to lovValueChangedEvent. Update dependent cells\n     */const subscribeToLovValueChangedEvent=function(cell,vmo,prop){return eventBus[\"a\" /* default */].subscribe(prop.propertyName+'.lovValueChanged',function(){// Update dependent LOVS only\nif(!prop.lovApi||!prop.lovApi.behaviorData||prop.lovApi.behaviorData.style!=='Interdependent'){return;}prop.lovApi.behaviorData.dependendProps.forEach(function(propertyName){// Only update cells for other props\nif(prop.propertyName!==propertyName){var row=cell.parentElement;// Find the cell\nlodash_default.a.forEach(row.children,function(cellElem){if(cellElem.propName===propertyName){// Update cell content\nvar oldCellTop=cellElem.children[0];var newCellTop=splmTableCellRenderer[\"a\" /* default */].createElement(cellElem.columnDef,row.vmo,tableElem,row);if(_tableInstance.dynamicRowHeightStatus===true){splmTableCellRenderer[\"a\" /* default */].addDynamicCellHeight(vmo,newCellTop);}newCellTop.classList.add(splmTableConstants[\"a\" /* default */].CLASS_AW_EDITABLE_CELL);cellElem.replaceChild(newCellTop,oldCellTop);cellElem.isDependantEdit=true;if(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)&&splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)){self.removeAllCellSelection();self.editCell(cellElem,vmo);}return false;}return true;});}});});};/**\n     * Cancels edits if isDirty() comes back false\n     */const cancelEditsIfNotDirty=function(){const context=splmTableDirectEditUtils_getEditContext(_tableInstance);let editHandler=null;let isDirtyPromise;if(context){editHandler=editHandlerService[\"a\" /* default */].getEditHandler(context);isDirtyPromise=editHandler.isDirty();}else if(_tableInstance.dataProvider.getEditConfiguration()){isDirtyPromise=_tableInstance.dataProvider.isDirty();}else if(_tableInstance.declViewModel.getEditConfiguration()){isDirtyPromise=_tableInstance.declViewModel.isDirty();}if(isDirtyPromise){isDirtyPromise.then(function(isDirty){// If the handler is not dirty cancel edits to get out of edit mode.\nif(!isDirty){if(editHandler){editHandler.cancelEdits();}else if(_tableInstance.dataProvider.getEditConfiguration()){const dataCtxNode={data:_tableInstance.declViewModel,ctx:appCtxService[\"default\"].ctx};_tableInstance.dataProvider.cancelEdits(dataCtxNode,_tableInstance.declViewModel);}else if(_tableInstance.declViewModel.getEditConfiguration()){_tableInstance.declViewModel.cancelEdits();}}});}};/**\n     * Handles cell editing functionality for the blur event\n     * @param {Event} event - the blur event\n     * @param {DOMElement} cell - The cell element\n     * @param {ViewModelProperty} prop - The property\n     * @param {ViewModelObject} vmo - The view model object\n     */const handleCellEditBlur=function(event,cell,prop,vmo){// Autosave the cell on blur when in autosave mode\nif(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)&&splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)&&event&&!_fillDownSaveInprogress){// Stop the event bubbling so save can finish first, we will resend the click when save is finished\nevent.stopPropagation();event.preventDefault();_fillDown.disableFillDown(cell);// get target vmo/prop if clicking on table so we can resend click to it after\nconst tableCell=splmTableUtils[\"a\" /* default */].closestElement(event.target,'.ui-grid-cell');let vmo;let propName;if(tableCell){propName=tableCell.propName;vmo=splmTableUtils[\"a\" /* default */].getViewModelObjectByCellElement(tableCell);}_saveEditPromise=self.saveEdit([cell]).then(()=>{_saveEditPromise=null;if(!tableCell){let clickElement=event.target;// Elements like svg don't have a click function, so bubble up till we have a clickable element.\nwhile(!clickElement.click){clickElement=clickElement.parentElement;}clickElement.click();}else{// reselect table cell\nlet uid=vmo&&vmo.alternateID||vmo.uid;let cellToSelect=splmTableUtils[\"a\" /* default */].getCellElementsByPropertyAndUid(tableElem,propName,uid)[0];cellToSelect&&cellToSelect.click&&cellToSelect.click();}});}else if(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)&&!splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)){cancelEditsIfNotDirty();removeEditStatus(cell,prop,vmo,true);}};/**\n     * Returns the focusable cell info if it is focusable\n     *\n     * @param {Object} column - the column\n     * @param {ViewModelObject} vmo - the vmo\n     *\n     * @return {Object} the focusable cell's info\n     */const getFocusableCellInfo=function(column,vmo){if(column.modifiable!==false&&!column.isTreeNavigation){const propName=column.propertyName||column.field;const prop=vmo.props[propName];if(prop&&prop.isEditable){return{vmo:vmo,column:column};}}return null;};/**\n     * Returns the info of the next focusable cell\n     *\n     * @param {ViewModelObject} currentVMO - the current vmo\n     * @param {Object} currentColumn - the current column\n     * @param {boolean} reverseDirection - true if going in the reverse direction\n     *\n     * @return {Object} the next focusable cell's info\n     */const getNextFocusableCellInfo=(currentVMO,currentColumn,reverseDirection)=>{let columns=_tableInstance.dataProvider.cols.filter(function(col){return!col.hiddenFlag;});const currentIdx=columns.indexOf(currentColumn);// Reverse the columns order if we are going in reverse\nif(reverseDirection){columns=columns.slice().reverse();}for(let i=currentIdx+1;i<columns.length;i++){const col=columns[i];const focusableCellInfo=getFocusableCellInfo(col,currentVMO);if(focusableCellInfo){return focusableCellInfo;}}// If no cell was found, check next vmo until found  -- Limit - Until end of data, will not page while looking\nconst loadedVMOs=_tableInstance.dataProvider.viewModelCollection.loadedVMObjects;const currentVMOIndex=_tableInstance.dataProvider.viewModelCollection.findViewModelObjectById(currentVMO.uid);for(let i=currentVMOIndex+1;i<loadedVMOs.length;i++){const nextVMO=loadedVMOs[i];for(let y=0;y<columns.length;y++){const col=columns[y];const focusableCellInfo=getFocusableCellInfo(col,nextVMO);if(focusableCellInfo){return focusableCellInfo;}}}// If we still haven't found anything, then there are no more editable cells available, return null\nreturn null;};/**\n     * Attaches the keydown handler to a cell\n     * @param {DOMElement} cellElem The cell element\n     */const attachKeydownHandler=cellElem=>{cellElem.onkeydown=event=>{if(event.code!=='Tab'){return;}let reverseTab=false;if(event.shiftKey){reverseTab=true;}// Now check vmo for next editable column.\nconst closestVMO=event.target.closest('.ui-grid-row').vmo;const column=event.target.closest('.ui-grid-cell').columnDef;const nextEditableInfo=getNextFocusableCellInfo(closestVMO,column,reverseTab);// Scroll to that cell if exists\nif(nextEditableInfo){event.preventDefault();event.stopPropagation();const vmoIndex=_tableInstance.dataProvider.viewModelCollection.findViewModelObjectById(nextEditableInfo.vmo.uid);triggerBlurHandler();_tableInstance.renderer.scrollToRowIndex([vmoIndex]);if(!nextEditableInfo.column.pinnedLeft){_tableInstance.renderer.scrollToColumn(nextEditableInfo.column);}setTimeout(()=>{// Get the cell and focus it after it is scrolled into view\nconst firstRowOnDom=tableElem.getElementsByClassName('ui-grid-row')[0];if(firstRowOnDom){const editableRowRelativeIdx=vmoIndex-firstRowOnDom.getAttribute('data-indexNumber');let rowElem;if(nextEditableInfo.column.pinnedLeft){rowElem=_trv.getPinContentRowElementFromTable(editableRowRelativeIdx);}else{rowElem=_trv.getScrollContentRowElementFromTable(editableRowRelativeIdx);}const cellElems=rowElem&&rowElem.getElementsByClassName('ui-grid-cell')||[];const foundCell=lodash_default.a.filter(cellElems,{columnDef:nextEditableInfo.column})[0];if(foundCell){self.editCell(foundCell,nextEditableInfo.vmo);}}},200);}};};const attachEscapeKeyHandler=(cell,prop,vmo,column)=>{// Set listener for Escape key and reverse edit cell\n_escapeKeyHandler=event=>{if(event.key!=='Escape'){return;}const currentCell=splmTableUtils[\"a\" /* default */].closestElement(event.target,'.'+splmTableConstants[\"a\" /* default */].CLASS_CELL);if(currentCell===cell&&cell.isElementInEdit){event.stopPropagation();uwPropertyService[\"a\" /* default */].resetUpdates(prop);reverseEditCell(cell,vmo,column,prop);if(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){prop.isPropInEdit=false;removeEditStatus(cell,prop,vmo,true);// Check if isDirty still, is so, do nothing, else cancel edits\ncancelEditsIfNotDirty();removeEscapeAndEnterHandlers(cell);cell.focus();}else{// Readd click handler to allow cell to go back into edit\naddFocusEvent(cell,vmo);}}else{const context=splmTableDirectEditUtils_getEditContext(_tableInstance);let editHandler=editHandlerService[\"a\" /* default */].getEditHandler(context);if(editHandler){editHandler.cancelEdits();}else if(_tableInstance.dataProvider.getEditConfiguration()){const dataCtxNode={data:_tableInstance.declViewModel,ctx:appCtxService[\"default\"].ctx};_tableInstance.dataProvider.cancelEdits(dataCtxNode,_tableInstance.declViewModel);}else if(_tableInstance.declViewModel.getEditConfiguration()){_tableInstance.declViewModel.cancelEdits();}}};document.body.addEventListener('keydown',_escapeKeyHandler,true);};const attachEnterKeyHandler=(cell,blurHandler)=>{const hasPopupExpanded=element=>{const popupVisible=element.getElementsByClassName('aw-jswidgets-popUpVisible');const expanded=element.getElementsByClassName('aw-jswidgets-expanded');return popupVisible.length+expanded.length>0;};_enterKeyHandler=event=>{if(event.key==='Enter'&&!event.altKey&&!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){const currentCell=splmTableUtils[\"a\" /* default */].closestElement(event.target,'.'+splmTableConstants[\"a\" /* default */].CLASS_CELL);// Special handling for array properties\nconst isArrayProperty=currentCell.prop&&currentCell.prop.isArray;if(isArrayProperty){if(event.target.value===''){event.stopPropagation();blurHandler(event);if(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){currentCell.focus();}}}else{// If there isn't a popup in the children, then call blurhandler\nif(currentCell&&!hasPopupExpanded(currentCell)){event.stopPropagation();blurHandler(event);if(_saveEditPromise){_saveEditPromise.then(function(){currentCell.focus();});}else{currentCell.focus();}}}}};cell.addEventListener('keydown',_enterKeyHandler,true);};/**\n     * Publishes teh cell start edit event\n     * @param {DOMElement} cell The cell element\n     * @param {Object} vmo the view model object\n     */const publishCellStartEditEvent=function(cell,vmo){const eventData={columnInfo:cell.columnDef,gridId:tableElem.id,vmo:vmo};eventBus[\"a\" /* default */].publish(tableElem.id+'.cellStartEdit',eventData);};const getVmoById=function(vmoId){let idx=_tableInstance.dataProvider.viewModelCollection.findViewModelObjectById(vmoId);return _tableInstance.dataProvider.viewModelCollection.loadedVMObjects[idx];};/**\n     * Unsubscribes from the hold lov value change event and subscribes to a new one\n     * @param {DOMElement} cell the cell element\n     * @param {Object} vmo the view model object\n     * @param {Object} prop The property\n     */const handleLovValueChangedEvent=function(cell,vmo,prop){const lovValueChangedEventSub=subscribeToLovValueChangedEvent(cell,vmo,prop);let oldLovSubscr=_lovValueChangedEventSubs[prop.parentUid+prop.propertyName];if(oldLovSubscr){eventBus[\"a\" /* default */].unsubscribe(oldLovSubscr);delete _lovValueChangedEventSubs[prop.parentUid+prop.propertyName];}_lovValueChangedEventSubs[prop.parentUid+prop.propertyName]=lovValueChangedEventSub;};const isUserInteractingWithDropDown=(prop,event)=>{if(prop.hasLov&&event){const listBoxDrop=document.querySelector('.sw-lov-contentContainer');if(listBoxDrop&&listBoxDrop.contains(event.target)){return true;}}else if(prop.type&&event&&(prop.type==='DATE'||prop.type==='DATEARRAY')){const datePicker=document.querySelector('.flatpickr-calendar.open');if(datePicker&&datePicker.contains(event.target)){return true;}const dateTimeDrop=document.querySelector('.sw-popup-contentContainer .aw-base-scrollPanel');if(dateTimeDrop&&dateTimeDrop.contains(event.target)){return true;}}else if(prop.type&&event&&prop.type==='STRING'&&prop.isRichText){const ckEditor=document.getElementsByClassName('ck-body-wrapper')[0];if(ckEditor&&ckEditor.contains(event.target)){return true;}}return false;};/**\n     * Creates the edit cell and attaches it to the DOM\n     * @param {Object} vmo - the view model object\n     * @param {AwColumnDef} column The column definition\n     * @param {DOMElement} cell The cell element\n     */const createAndAttachEditCell=function(vmo,column,cell){// for array fields, application should use popup to display it,\n// or you will face cut off issues: LCS-161794\nconst prop=vmo.props[cell.propName];prop.autofocus=true;let editNonArrayClass=prop.isArray?splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_ARRAY:splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_NON_ARRAY;let editCellElem=splmTableUtils[\"a\" /* default */].createElement('div','aw-splm-tableEditCellTop',editNonArrayClass);let editContainer=splmTableUtils[\"a\" /* default */].createElement('div','aw-jswidgets-tableEditContainer','aw-jswidgets-cellTop');/* revisitme Brad\n         * Revisit/revise for support of column def providing rendering hint\n         * column.renderingHint\n         */let propertyValElem=Object(moduleLoader[\"d\" /* includeComponent */])('SplmTableCellEditor',{vmo,name:prop.propertyName});Object(declReactUtils[\"d\" /* renderComponent */])(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(reactAppCtx[\"a\" /* AppCtxComponent */],{children:propertyValElem}),editContainer);editCellElem.appendChild(editContainer);attachKeydownHandler(editCellElem);splmTableCellRenderer[\"a\" /* default */].updateCellChangedClass(prop,editCellElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_AW_JS_CELL_TOP)[0]);if(prop.isArray&&_tableInstance.gridOptions.popupContext&&_tableInstance.gridOptions.popupContext.editArrayPopup){const cellBoundingArea=cell.getBoundingClientRect();const popupOptions={whenParentScrolls:'follow',innerClassName:splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_TOP_ARRAY,autoFocus:false,parent:cell,reference:cell,overlapOnReference:true,containerWidth:cellBoundingArea.width,width:cellBoundingArea.width,forceCloseOthers:false};const editArrayPopup=_tableInstance.gridOptions.popupContext.editArrayPopup;if(editArrayPopup){editArrayPopup.hide().then(()=>{editArrayPopup.show(popupOptions).then(popupRef=>{self.popupRef=popupRef;});});}}else{cell.insertBefore(editCellElem,cell.childNodes[0]);}};/**\n     * Starts the edit of the cell\n     * @param {DOMElement} cell The cell element\n     * @param {Object} vmo the view model object\n     */self.editCell=function(cell,vmo){const column=cell.columnDef;const prop=cell.prop;if(!cell.isDependantEdit&&(!cell.isSelected&&!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)||cell.isElementInEdit===true)){return;}gridContextDispatcher({type:'UPDATE_VALUES',editVmo:vmo,editPropertyName:cell.propName});publishCellStartEditEvent(cell,vmo);// Trigger blur handler\ntriggerBlurHandler();cell.isElementInEdit=true;prop.isPropInEdit=true;cell.classList.add(splmTableConstants[\"a\" /* default */].CLASS_AW_IS_EDITING);// Handle possible lov value changes\nhandleLovValueChangedEvent(cell,vmo,prop);// Remove cell top\nlet editableGridCell=cell.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_TOP)[0];if(editableGridCell){cell.removeChild(editableGridCell);}let originAutoFocus=prop.autofocus;createAndAttachEditCell(vmo,column,cell);removeFocusEvents(cell);const blurHandler=function(event){// Only revert edit status if scrolling with array (popup)\nif(event&&event.type==='scroll'&&cell.prop&&!cell.prop.isArray){return;}let selectedCell=null;if(event&&event.type!=='keydown'){_focusProp=null;selectedCell=splmTableUtils[\"a\" /* default */].closestElement(event.target,\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_CELL));}if(!cell.isElementInEdit){removeBlurHandler();removeEscapeAndEnterHandlers(cell);}else if(selectedCell!==cell&&cell.isElementInEdit){// Close panels\nlet panelContext=appCtxService[\"default\"].getCtx('panelContext');if(panelContext&&panelContext.addTypeRef===true){// If clicking on different cell close the panel else leave it open\nif(cell.propName!==prop.propertyName||cell.parentElement.vmo.uid!==prop.parentUid){eventBus[\"a\" /* default */].publish('completed',{source:'toolAndInfoPanel'});}else{return;}}if(isUserInteractingWithDropDown(prop,event)){return true;}// Remove the blur handler since cell is going out of edit\nremoveBlurHandler();removeEscapeAndEnterHandlers(cell);// Reverse the cell edit\nreverseEditCell(cell,vmo,column,prop);prop.autofocus=originAutoFocus;prop.isPropInEdit=false;cell.isSelected=false;delete cell.isDependantEdit;// Handle cell editing functionality on blur\nhandleCellEditBlur(event,cell,prop,vmo);// Readd click handler to allow cell to go back into edit\naddFocusEvent(cell,vmo);}};// Add blur handler to take cell out of edit on click away\nremoveBlurHandler();removeEscapeAndEnterHandlers(cell);// Setting useCapture to true is needed for autosave since it allows us to detect the click before the target\n// element does.\nconst useCapture=true;document.body.addEventListener('click',blurHandler,useCapture);const scrollViewportElem=_trv.getScrollCanvasElementFromTable();const pinViewportElem=_trv.getPinCanvasElementFromTable();scrollViewportElem.removeEventListener('scroll',blurHandler,useCapture);pinViewportElem.removeEventListener('scroll',blurHandler,useCapture);scrollViewportElem.addEventListener('scroll',blurHandler,useCapture);pinViewportElem.addEventListener('scroll',blurHandler,useCapture);attachEscapeKeyHandler(cell,prop,vmo,column);attachEnterKeyHandler(cell,blurHandler);setBlurHandler(blurHandler);};self.isPropertiesEditablePromise=function(editOptions){let editPromise;const editContext=splmTableDirectEditUtils_getEditContext(_tableInstance);if(editContext){// Trigger leave confirmation on previous active handler in case it was editing since only one editHandler\n// can be editing at any given time.\nconst previousActiveHandler=editHandlerService[\"a\" /* default */].getActiveEditHandler();if(previousActiveHandler&&previousActiveHandler!==editHandlerService[\"a\" /* default */].getEditHandler(editContext)&&previousActiveHandler.editInProgress()){editPromise=new Promise(resolve=>{previousActiveHandler.leaveConfirmation(()=>{editHandlerService[\"a\" /* default */].setActiveEditHandlerContext(editContext);editHandlerService[\"a\" /* default */].startEdit(editOptions).then(()=>{resolve();});});});}else{editHandlerService[\"a\" /* default */].setActiveEditHandlerContext(editContext);editPromise=editHandlerService[\"a\" /* default */].startEdit(editOptions);}}else if(_tableInstance.dataProvider.getEditConfiguration()){const dataCtxNode={data:_tableInstance.declViewModel,ctx:appCtxService[\"default\"].ctx};editPromise=_tableInstance.dataProvider.startEdit(dataCtxNode,_tableInstance.declViewModel,editOptions);}else if(_tableInstance.declViewModel.getEditConfiguration()){editPromise=_tableInstance.declViewModel.startEdit(editOptions);}return editPromise?editPromise:Promise.resolve(false);};/**\n     * Checks if the provided cell/property is editable by calling startEdit on the editHandler or editConfig\n     * @param {Object} vmo The view model object\n     * @param {DOMElement} cellElem The cell element\n     *\n     * @returns {Promise<Boolean>} Promise that will resolve to the editability of the property\n     */const isCellEditable=async function(vmo,cellElem){// Allow save to finish before checking start edit\nif(_saveEditPromise){await _saveEditPromise;}let prop=vmo.props[cellElem.propName];let propertyNames=[prop.propertyName];// Need to pass all dependent props to ensure we have latest lsd\nif(prop.lovApi&&prop.lovApi.behaviorData&&prop.lovApi.behaviorData.style==='Interdependent'){propertyNames=prop.lovApi.behaviorData.dependendProps;}let editOpts={vmos:[vmo],propertyNames:propertyNames,autoSave:splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)};const result=await self.isPropertiesEditablePromise(editOpts);if(result===false){return false;}// update prop to latest\nprop=vmo.props[cellElem.propName];return prop&&prop.isEditable&&prop.isEnabled!==false;};/**\n     * Saved the provided cell/property that was edited\n     * @param {DOMElement[]} cells the cells to save\n     * @returns {Promise<Boolean>} Promise that will resolve when save is complete\n     */self.saveEdit=function(cells){let isPartialSaveDisabled=true;let editPromise=null;const editContext=splmTableDirectEditUtils_getEditContext(_tableInstance);if(editContext){editPromise=editHandlerService[\"a\" /* default */].saveEdits(editContext,isPartialSaveDisabled,splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem));}else if(_tableInstance.dataProvider.getEditConfiguration()){const dataCtxNode={data:_tableInstance.declViewModel,ctx:appCtxService[\"default\"].ctx};editPromise=_tableInstance.dataProvider.saveEdits(dataCtxNode,_tableInstance.declViewModel);}else if(_tableInstance.declViewModel.getEditConfiguration()){editPromise=_tableInstance.declViewModel.saveEdits();}if(editPromise){return editPromise.finally(function(){self.setCellEditingContext(false);for(let i=0;i<cells.length;i++){if(document.body.contains(cells[i])){self.updateEditStatusForCell(cells[i]);}}// Clear prop is editable cache to ensure newly selected cell makes a startEdit call, since\n// our save call will likely invalidate the editable cache. This is also ensuring that double click on\n// another cell takes that cell into edit instead of selected state.\nself.clearPropIsEditableCache();});}return Promise.resolve(false);};/**\n     * Removes the selected and selectedEditable css classes from any elements that have them\n     */const removeCellSelection=function(){// Remove all other \"selected\" classes from cells\nlet selected1=Array.prototype.slice.call(tableElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_SELECTED_EDITABLE));let selected2=Array.prototype.slice.call(tableElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_SELECTED));let elems=selected1.concat(selected2);for(let i=0;i<elems.length;i++){elems[i].classList.remove(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_SELECTED_EDITABLE);elems[i].classList.remove(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_SELECTED);let containerElement=null;// The below method can result in undefined value.\ncontainerElement=_trv.getTableContainerElementFromTable();if(containerElement&&containerElement.hasAttribute(ariaActiveDescendant)){containerElement.removeAttribute(ariaActiveDescendant);}}};/**\n     * Updates the cell to be selected and sets selection/edit info to false on old selected cell\n     * @param {DOMElement} cell The new selected cell\n     * @param {Boolean} persistEditableFlag flag to denote if isEditable should be persisted\n     */const updateSelectedCell=function(cell,persistEditableFlag){if(_selectedCellInfo&&_selectedCellInfo.cell){let _cell=_selectedCellInfo.cell;_cell.isSelected=false;const vmo=getVmoById(_selectedCellInfo.vmoId);// If prop edit is not enabled we should not touch the prop.isEditable flag\nif(!persistEditableFlag&&vmo&&_cell.prop&&splmTableUtils[\"a\" /* default */].isPropEditEnabled(tableElem)&&!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){_cell.prop.isEditable=false;if(vmo.props&&vmo.props[_cell.propName]){vmo.props[_cell.propName].isEditable=false;}}}if(cell){cell.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_SELECTED);cell.isSelected=true;let refVmo=splmTableUtils[\"a\" /* default */].getViewModelObjectByCellElement(cell);let vmoId=refVmo.alternateID||refVmo.uid;_selectedCellInfo={cell:cell,vmoId:vmoId};let containerElement=null;// The below method can result in undefined value.\ncontainerElement=_trv.getTableContainerElementFromTable();if(containerElement){containerElement.setAttribute(ariaActiveDescendant,cell.getAttribute('id'));}}else{_selectedCellInfo=null;}};self.clearPropIsEditableCache=function(persistEditableFlag){const cellElems=_trv.getContentCellElementsFromTable();lodash_default.a.forEach(cellElems,function(elem){delete elem.propIsEditableCache;if(elem.hasAttribute(ariaReadOnly)){elem.removeAttribute(ariaReadOnly);}});// Reset cell selection since we are clearing editibility cache\n// making the editability selection classes no longer valid\nremoveCellSelection();const currentSelectedCell=_selectedCellInfo?_selectedCellInfo.cell:null;updateSelectedCell(null,persistEditableFlag);if(currentSelectedCell&&currentSelectedCell.parentElement){const eventObject={ctrlKey:false,shiftKey:false,type:'click'};self.onClickHandler(eventObject,currentSelectedCell,splmTableUtils[\"a\" /* default */].getViewModelObjectByCellElement(currentSelectedCell));}};/**\n     * Update the cell editability by using the cached editability or loading the editability if it is not cached\n     * @param {DOMElement} cell - The cell element to get editability for\n     * @param {Object} vmo - the row's view model object\n     */const updateCellEditability=function(cell,vmo){// Make some SOA call here for getting the editability\nremoveCellSelection();updateSelectedCell(cell);// Check if cellEdit is enabled and if this cell/prop type supports edit\nconst isCellEditSupported=splmTableUtils[\"a\" /* default */].isPropEditEnabled(tableElem)&&cell.propName&&cell.prop&&cell.columnDef.isTreeNavigation!==true;if(!isCellEditSupported){cell.setAttribute(ariaReadOnly,'true');return;}// If prop is modified we can restore editability cache since we know it has not been saved\n// and was previously editable\nif(uwPropertyService[\"a\" /* default */].isModified(cell.prop)&&cell.propIsEditableCache===undefined&&!splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)){cell.propIsEditableCache=true;}// Check if editability info exists, if not\n// Check columnDef if editable, if not add readonly class\n// If editable, make startEdit call to get editability for cell\nif(cell.columnDef.name!=='icon'&&cell.columnDef.modifiable!==false&&cell.propIsEditableCache===undefined){// only allow one check at a time.\nconst cellEditablePromise=function(){return isCellEditable(vmo,cell).then(function(isEditable){cell.propIsEditableCache=isEditable;if(cell.propIsEditableCache===false){cell.setAttribute(ariaReadOnly,'true');}else if(cell.hasAttribute(ariaReadOnly)){cell.removeAttribute(ariaReadOnly);}if(cell.isSelected){if(isEditable){cell.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_SELECTED_EDITABLE);}_fillDown.enableFillDown(cell);}}).then(function(){delete cell.isCellEditablePromise;_isEditablePromise=null;});};if(_isEditablePromise){_isEditablePromise.then(function(){removeCellSelection();updateSelectedCell(cell);_isEditablePromise=cellEditablePromise();cell.isCellEditablePromise=_isEditablePromise;});}else{_isEditablePromise=cellEditablePromise();cell.isCellEditablePromise=_isEditablePromise;}return;}if(cell.propIsEditableCache){// Mark the prop as editable since the cache tells us it is editable\ncell.prop.isEditable=true;vmo.props[cell.propName].isEditable=true;cell.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CELL_SELECTED_EDITABLE);if(cell.hasAttribute(ariaReadOnly)){cell.removeAttribute(ariaReadOnly);}}else if(cell.propIsEditableCache===false){cell.setAttribute(ariaReadOnly,'true');}};let _guidanceMessageInitialized=false;const publishCellNotEditable=function(vmo,prop){eventBus[\"a\" /* default */].publish(_tableInstance.gridId+'.plTable.cellNotEditable',{vmo:vmo,prop:prop});};/**\n     * Updates ctx and the editHandler/editConfig to be in editing mode when autosave is off.\n     * Doing this ensures the edit command will get toggled when editing in autosave off mode.\n     * @param {Boolean} isEditing - If in edit\n     */self.setCellEditingContext=function(isEditing){// Enable/disable caching\nif(isEditing){_tableInstance.dataProvider.cacheCollapse=isEditing;}else{_tableInstance.dataProvider.restoreInitialCacheCollapseState();}_tableInstance.controller.setDraggable(!isEditing);// For autosave off we need to see _editing flag and update ctx to get commands to switch over\nif(!splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)){const editContext=splmTableDirectEditUtils_getEditContext(_tableInstance);if(editContext){const editHandler=editHandlerService[\"a\" /* default */].getEditHandler(editContext);editHandler._editing=isEditing;// Add to the appCtx about the editing state\nappCtxService[\"default\"].updateCtx('editInProgress',editHandler._editing);// Need to ensure this handler is active so that save command will call this handler\neditHandlerService[\"a\" /* default */].setActiveEditHandlerContext(editContext);// We need to ensure edit handler and edithandlerState to be in sync.\nif(editHandler.editStateChangeDispatcher){editHandler.editStateChangeDispatcher({type:'SET_EDIT_STATE_CHANGED',value:editHandler._editing});}}else if(_tableInstance.dataProvider.getEditConfiguration()){_tableInstance.dataProvider._editing=isEditing;// Add to the appCtx about the editing state\nappCtxService[\"default\"].updateCtx(_tableInstance.dataProvider._appCtxEditInProgress,_tableInstance.dataProvider._editing);}else if(_tableInstance.declViewModel.getEditConfiguration()){_tableInstance.declViewModel._editing=isEditing;// Add to the appCtx about the editing state\nappCtxService[\"default\"].updateCtx(_tableInstance.declViewModel._internal.eventTopicEditInProgress,_tableInstance.declViewModel._editing);}}// Display guidance message when auto save is off for auto save only table\nconst isAutoSaveContextTrue=appCtxService[\"default\"].getCtx('autoSave')&&appCtxService[\"default\"].getCtx('autoSave.dbValue');if(!isAutoSaveContextTrue&&tableElem._tableInstance.gridOptions.forceAutoSave&&isEditing&&!splmTableUtils[\"a\" /* default */].isCellEditing(tableElem)&&!_guidanceMessageInitialized){_guidanceMessageInitialized=true;displayAutoSaveOnGuidanceMessage(tableElem);}splmTableUtils[\"a\" /* default */].setIsCellEditing(tableElem,isEditing);};let _cellEditDisabledMessageInitialized=null;const isCellSelectedNotEditable=function(cell){return cell&&cell.isSelected&&cell.prop&&cell.prop.isEditable===false;};/**\n     * Handles the direct edit handling for cell selection\n     * @param {HTMLElement} cell The cell\n     * @param {Object} vmo the view model object\n     */const handleDirectEdit=function(cell,vmo){// Start edit\nremoveCellSelection();// Check if prop isEditable needs to be reset since cache says it is true\nif(!cell.prop.isEditable){cell.prop.isEditable=true;if(vmo.props&&vmo.props[cell.propName]){vmo.props[cell.propName].isEditable=true;}}// Trigger leave confirmation on previous active handler in case it was editing since only one editHandler\n// can be editing at any given time.\nconst editContext=splmTableDirectEditUtils_getEditContext(_tableInstance);const previousActiveHandler=editHandlerService[\"a\" /* default */].getActiveEditHandler();if(editContext&&previousActiveHandler&&previousActiveHandler!==editHandlerService[\"a\" /* default */].getEditHandler(editContext)&&previousActiveHandler.editInProgress()){previousActiveHandler.leaveConfirmation(()=>{editHandlerService[\"a\" /* default */].setActiveEditHandlerContext(editContext);// Reregister leaveHandler since we are making the handler active again without calling startEdit\neditHandlerService[\"a\" /* default */].getEditHandler(editContext).reregisterLeaveHandler();self.editCell(cell,vmo);self.setCellEditingContext(true);});}else{self.editCell(cell,vmo);self.setCellEditingContext(true);}};/**\n     * Handles cell click when pending isEditable Promise\n     * @param {HTMLElement} cell The cell\n     * @param {Object} vmo The view model object\n     */const handlePendingEditSelection=async function(cell,vmo){// Prevent multiple calls to resolve editable promise\ncell.isCellEditablePromiseResolving=true;await cell.isCellEditablePromise;delete cell.isCellEditablePromiseResolving;if(cell.isSelected){if(cell.propIsEditableCache){_focusProp=cell.prop;removeCellSelection();// Check if prop isEditable needs to be reset since cache says it is true\nif(!cell.prop.isEditable){cell.prop.isEditable=true;if(vmo.props&&vmo.props[cell.propName]){vmo.props[cell.propName].isEditable=true;}}self.editCell(cell,vmo);self.setCellEditingContext(true);}else{publishCellNotEditable(vmo,cell.prop);}}};/**\n     * Click handler for cell/row. Will select the cell and row or start edit as needed\n     *\n     * @param {Event} event the click event\n     * @param {DOMElement} cell the cell in question\n     * @param {ViewModelObject} vmo The vmo for the row\n     */self.onClickHandler=async(event,cell,vmo)=>{if(splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){return;}if(event.ctrlKey){triggerBlurHandler();removeCellSelection();updateSelectedCell(null);if(splmTableUtils[\"a\" /* default */].isCellHeaderSelectionEnabled(tableElem)){splmTableSelectionHelper[\"default\"].setCellHeaderSelection(null,tableElem);}return;}if(cell.isSelected&&cell.propIsEditableCache&&!cell.isElementInEdit){handleDirectEdit(cell,vmo);}else if(cell.isSelected&&splmTableUtils[\"a\" /* default */].isPropEditEnabled(tableElem)===false&&!_cellEditDisabledMessageInitialized){// Display guidance message when cell editing is disabled\n_cellEditDisabledMessageInitialized=true;displayCellEditDisabledGuidanceMessage(tableElem);}else if(cell.isSelected&&cell.isCellEditablePromise&&!cell.isCellEditablePromiseResolving){handlePendingEditSelection(cell,vmo);}else if(!cell.isSelected&&!event.shiftKey){await updateCellEditability(cell,vmo);_fillDown.enableFillDown(cell);if(splmTableUtils[\"a\" /* default */].isCellHeaderSelectionEnabled(tableElem)){splmTableSelectionHelper[\"default\"].setCellHeaderSelection(cell,tableElem);}}else if(event.shiftKey){triggerBlurHandler();removeCellSelection();updateSelectedCell(null);}else if(!cell.isCellEditablePromiseResolving&&isCellSelectedNotEditable(cell)){publishCellNotEditable(vmo,cell.prop);}};/**\n     * Adds the onclick event listener for an individual cell and gets its editability\n     * @param {DOMElement} cell - The cell to set the listener for\n     * @param {Object} vmo - The row's VMO\n     */self.addCellClickListener=function(cell,vmo){cell.onclick=function(event){// if command click or url/anchor tag click don't select/handle select\nif(!event.target.closest('.aw-command, a.aw-splm-tablePropertyValueLinks')){self.onClickHandler(event,cell,vmo);}};cell.oncontextmenu=function(event){if(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)&&!cell.isSelected){updateCellEditability(cell,vmo);}};};/**\n     * Removes the cell selected classes as well as the selected attribute for the cell.\n     */self.removeAllCellSelection=function(){removeCellSelection();updateSelectedCell();};/**\n     * Checks if the current selected cell is on the newly selected vmo(s), if not remove selection\n     * @param {Object} eventData event data\n     */const checkCellAndVMOSelection=function(eventData){let selectedObjects=eventData.selectedObjects;if(_selectedCellInfo&&_selectedCellInfo.vmoId){const vmo=getVmoById(_selectedCellInfo.vmoId);if(selectedObjects.indexOf(vmo)===-1){self.removeAllCellSelection();}}};const isEligibleForCopyDown=function(columnDef){if(splmTableUtils[\"a\" /* default */].isPropEditEnabled(tableElem)&&columnDef.isTreeNavigation!==true&&columnDef.name!=='icon'&&columnDef.modifiable!==false){return true;}return false;};const copyPropertyToCellContent=function(sourceProperty,vmoUid){let cellElements=splmTableUtils[\"a\" /* default */].getCellElementsByPropertyAndUid(tableElem,sourceProperty.propertyName,vmoUid);for(let i=0;i<cellElements.length;i++){let cellElem=cellElements[i];let row=cellElem.parentElement;let oldCellTop=cellElem.children[0];let newCellTop=splmTableCellRenderer[\"a\" /* default */].createElement(cellElem.columnDef,row.vmo,tableElem,row);if(splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){newCellTop.classList.add(splmTableConstants[\"a\" /* default */].CLASS_AW_EDITABLE_CELL);}cellElem.replaceChild(newCellTop,oldCellTop);}};const copyFillDownProperty=function(targetProperty,sourceProperty){targetProperty.uiValue=sourceProperty.uiValue;targetProperty.dbValue=sourceProperty.dbValue;targetProperty.valueUpdated=true;uwPropertyService[\"a\" /* default */].updateViewModelProperty(targetProperty);};const loadCellEditabilityForTargetCells=function(uid2CellMap,vmos,propertyNames){let editOpts={vmos:vmos,propertyNames:propertyNames,autoSave:splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)};return self.isPropertiesEditablePromise(editOpts).then(function(result){for(let currentVmo of vmos){let cell=uid2CellMap[currentVmo.uid];if(cell){cell.propIsEditableCache=result===false?false:cell.prop&&cell.prop.isEditable;if(cell.propIsEditableCache===false){cell.setAttribute(ariaReadOnly,'true');}}}return Promise.resolve(result);});};const modifyPropsForCellEdit=function(result,vmosToEdit,eventData,cellsToSave,cellMap,sourceProp){if(result===false){return;}let propsModified=false;for(let i=0;i<vmosToEdit.length;i++){let currentVMO=vmosToEdit[i];const targetProp=currentVMO.props[eventData.propertyName];if(sourceProp&&targetProp&&targetProp.isPropertyModifiable&&targetProp.editable){propsModified=true;cellsToSave.push(cellMap[currentVMO.uid]);// update the target using the source\ncopyFillDownProperty(targetProp,sourceProp);copyPropertyToCellContent(sourceProp,currentVMO.uid);}}if(propsModified){if(splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(tableElem)){self.saveEdit(cellsToSave);}else{self.setCellEditingContext(true);}}};const prepareTargetCellPropsInfo=function(vmo,eventData,vmosToEdit,columnDef){if(isEligibleForCopyDown(columnDef)){vmosToEdit.push(vmo);}};const populateTargetCellPropsLegacyEdit=function(vmo,eventData,sourceProp){const targetProp=vmo.props[eventData.propertyName];if(sourceProp&&targetProp&&targetProp.isPropertyModifiable&&targetProp.editable){// update the target using the source\ncopyFillDownProperty(targetProp,sourceProp);copyPropertyToCellContent(sourceProp,vmo.uid);}};self.fillDownCompleteHandler=eventData=>{// get the VMOs from the table\nlet VMOs=_tableInstance.dataProvider.viewModelCollection.loadedVMObjects;let $source=VMOs.filter(function(vmo){return vmo.uid===eventData.source;});let sourceProp=$source[0]&&$source[0].props[eventData.propertyName];let vmosToEdit=[];let cellMap={};let cellsToSave=[];// Reverse the vmo order if we are going down\nif(eventData.direction!=='up'){VMOs=VMOs.slice().reverse();}// Attempt to apply the source value to the target properties\nlet foundLastTarget=false;for(let vmo of VMOs){// Iterate over the vmos until we find the last target prop.\nif(!foundLastTarget&&vmo.uid===eventData.endTarget){foundLastTarget=true;}if(!foundLastTarget){continue;}// Stop iterating if we reach the source prop\nif(vmo.uid===eventData.source){break;}const columnDef=splmTableUtils[\"a\" /* default */].getColumnDef(eventData.propertyName,_tableInstance.dataProvider);// Populate target cell props ( bulk edit mode ) or prepare the target prop info ( direct edit )\nif(splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){populateTargetCellPropsLegacyEdit(vmo,eventData,sourceProp);}else{const targetCell=splmTableUtils[\"a\" /* default */].getCellElementsByPropertyAndUid(tableElem,eventData.propertyName,vmo.uid)[0];if(targetCell){cellMap[vmo.uid]=targetCell;}prepareTargetCellPropsInfo(vmo,eventData,vmosToEdit,columnDef);}}// Load editabilty and apply value to editable cells\nif(!splmTableUtils[\"a\" /* default */].isBulkEditing(tableElem)){_fillDownSaveInprogress=true;let propertyNames=[eventData.propertyName];loadCellEditabilityForTargetCells(cellMap,vmosToEdit,propertyNames).then(result=>{modifyPropsForCellEdit(result,vmosToEdit,eventData,cellsToSave,cellMap,sourceProp);_fillDownSaveInprogress=false;});}};_eventBusSubs.push(eventBus[\"a\" /* default */].subscribe(\"\".concat(_tableInstance.dataProvider.name,\".selectNone\"),self.removeAllCellSelection));_eventBusSubs.push(eventBus[\"a\" /* default */].subscribe(\"\".concat(_tableInstance.dataProvider.name,\".selectAll\"),self.removeAllCellSelection));_eventBusSubs.push(eventBus[\"a\" /* default */].subscribe(\"\".concat(_tableInstance.dataProvider.name,\".selectionChangeEvent\"),checkCellAndVMOSelection));};/* harmony default export */ var splmTableEditor = (SPLMTableEditor);\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/image/cmdSettings24.svg\nvar cmdSettings24 = __webpack_require__(964);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableMenuService.js\n// Copyright (c) 2020 Siemens\n/**\n * Used for handling PL Table menus\n *\n * @module js/splmTableMenuService\n *\n */var SPLMTableMenuService=function(table,directiveElement,tableInstance,gridContextDispatcher){var self=this;var _table=table;var _tableInstance=tableInstance;var _dataProvider=_tableInstance.dataProvider;var _gridOptions=_tableInstance.gridOptions;var _splmTableMessages=_tableInstance.messages;var _trv=new splmTableTraversal[\"a\" /* default */](table);var _keyboardService=tableInstance.keyboardService;var _selectionHelper=null;var _columnMenuSubscriptions=[];// Add menu service to table instance\n_tableInstance.menuService=self;const focusElementOnClose=function(focusElem,isEditDisable){setTimeout(function(){const isDisabledDuringEdit=isEditDisable&&splmTableUtils[\"a\" /* default */].isBulkEditing(_table);if(focusElem&&document.activeElement&&document.activeElement.tagName==='BODY'&&!isDisabledDuringEdit){focusElem.focus();}},150);};var loadGridMenuItems=function(){var settingsCommandElement=_table.getElementsByClassName('aw-splm-tableMenuButton')[0];var loadGridMenu=function(event,focusOnCloseElem){gridContextDispatcher({type:'UPDATE_VALUES',isBulkEditing:_tableInstance.isBulkEditing,dynamicRowHeightStatus:_tableInstance.dynamicRowHeightStatus});event.preventDefault();let gridMenuPopup=_gridOptions.popupContext.gridMenuPopup;if(gridMenuPopup){if(!self.gridMenuPopupRef){const popupOptions={forceCloseOthers:false,whenParentScrolls:'close',reference:settingsCommandElement,placement:'bottom-end',hasArrow:true,autoFocus:true,innerClassName:'aw-popup-gridMenu',padding:{x:4,y:4},hooks:{whenClosed:()=>{self.gridMenuPopupRef=null;focusElementOnClose(focusOnCloseElem);}}};gridMenuPopup.show(popupOptions).then(popupRef=>{self.gridMenuPopupRef=popupRef;});}else{self.ensureTableMenuDismissed();}}};settingsCommandElement.addEventListener('click',loadGridMenu);settingsCommandElement.addEventListener('keydown',function(event){if(wcagService[\"default\"].isValidKeyPress(event)){loadGridMenu(event,settingsCommandElement);}});};self.addGridMenu=function(){const localeGridMenuText=_splmTableMessages.gridMenu;const html=''+'<div class=\"aw-commands-svg\">'+'<button type=\"button\" class=\"aw-commands-commandIconButton icon-override\" tabindex=\"-1\" title=\"'+localeGridMenuText+'\" aria-label=\"'+localeGridMenuText+'\" >'+cmdSettings24[\"svgString\"]+'</button>'+'</div>';let menu=splmTableUtils[\"a\" /* default */].createElement('div','aw-splm-tableMenuButton');menu.innerHTML=html;let btn=menu.querySelector('button');_keyboardService.setOnFocusAndBlur(btn);_table.insertBefore(menu,_table.children[0]);loadGridMenuItems();};// ////////////////////////////////////////////////\n// Context Menu\n// ////////////////////////////////////////////////\nvar _handleContextMenuSingleSelect=function(rowVmoArray,selectionModel,event,dataProvider){var currentMode=selectionModel.mode;selectionModel.setMode('single');_selectionHelper.handleSelectionEvent(rowVmoArray,selectionModel,event,dataProvider);selectionModel.setMode(currentMode);};self.setContextSelectionHelper=function(selectionHelper){_selectionHelper=selectionHelper;};self.contextSelectionHandler=function(event){if(event.target.tagName.toLowerCase()==='a'&&event.target.href!==''){return;}if(_gridOptions.showContextMenu!==true){return;}event.preventDefault();event.cancelBubble=true;let focusOnCloseElem=splmTableUtils[\"a\" /* default */].closestElement(event.target,'.'+splmTableConstants[\"a\" /* default */].CLASS_CELL);let contextMenuPopup=_gridOptions.popupContext.contextMenuPopup;if(contextMenuPopup){const popupOptions={whenParentScrolls:'close',resizeToClose:true,targetEvent:event,reference:event.target,autoFocus:true,forceCloseOthers:false,hooks:{whenClosed:()=>{focusElementOnClose(focusOnCloseElem,true);}}};//Hiding a popup before showing it in order to re-position it on selected vmo.\ncontextMenuPopup.hide().then(()=>{contextMenuPopup.show(popupOptions);});}var rowElement=event.currentTarget;let rowVmoArray=[rowElement.vmo];gridContextDispatcher({type:'UPDATE_VALUES',contextVmo:rowVmoArray});/* if (right or left) click inside row we already have selected, we dont want to do another SOA call since commands already loaded,\n        just move panel with to mouse location */if(rowElement.classList.contains('aw-state-selected')||rowElement.classList.contains('ui-grid-row-selected')){return;}while(_table.getElementsByClassName('aw-state-selected').length>0){_table.getElementsByClassName('aw-state-selected')[0].classList.remove('aw-state-selected');_table.getElementsByClassName('ui-grid-row-selected')[0].classList.remove('ui-grid-row-selected');}var selectionModel=_dataProvider.selectionModel;_handleContextMenuSingleSelect(rowVmoArray,selectionModel,event);};var getLargestFrozenColumnIndex=function(columns){var largestFrozenIndex=0;for(var i=0;i<columns.length;i++){// Check if frozen and for index of frozen column\nif(columns[i].index>largestFrozenIndex&&columns[i].pinnedLeft){largestFrozenIndex=columns[i].index;}}return largestFrozenIndex;};self.loadDefaultColumnMenus=function(){// Make default frozen column the highest index that is pinnedLeft from column config\n// Or default to 0/1 depending on icon column\nvar columns=_dataProvider.cols;var largestFrozenIndex=getLargestFrozenColumnIndex(columns);// Set default frozen index to 1 or 0 based on if icon column is present\nvar defaultFrozenIndex=_gridOptions.addIconColumn?1:0;// Use pinnedLeft if provided\nif(largestFrozenIndex>0){defaultFrozenIndex=largestFrozenIndex;}if(gridContextDispatcher){gridContextDispatcher({type:'UPDATE_VALUES',defaultColumnPinIndex:defaultFrozenIndex});}};self.ensureAllTableMenusDismissed=function(){self.ensureColumnMenuDismissed();self.ensureTableMenuDismissed();};self.ensureTableMenuDismissed=function(){self.gridMenuPopupRef&&_gridOptions.popupContext.gridMenuPopup.hide();self.gridMenuPopupRef=null;};// ////////////////////////////////////////////////\n// Column Menu\n// ////////////////////////////////////////////////\nself.ensureColumnMenuDismissed=function(){self.columnMenuPopupRef&&_gridOptions.popupContext.columnMenuPopup.hide();self.columnMenuPopupRef=null;};self.createColumnMenuElement=function(){var menu=document.createElement('div');menu.id=_table.id+'_menu';menu.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_MENU);menu.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_MENU_POPUP);menu.setAttribute('role','menu');var menuContainer=document.createElement('div');menuContainer.id=_table.id+'_menuContainer';menuContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_MENU_CONTAINER);// since this is inserted into the DOM outside of the content area, need to re-apply the content class\nmenuContainer.classList.add('afx-content-background');menuContainer.classList.add('aw-widgets-groupCommandStack');menuContainer.appendChild(menu);return menuContainer;};self.menuElements=[];const isTargetPopupOpen=function(target){return target&&target.dataset&&target.dataset.popupId&&target.dataset.popupId!=='null';};const showColumnMenuPopup=function(target,menuContainer,isFocused,focusOnClose){const getPadding=()=>{// getCellCenter\nconst cell=target;const{width,height}=cell.getBoundingClientRect();return{x:-width/2,y:-height/2};};let columnMenuPopup=_gridOptions.popupContext.columnMenuPopup;if(columnMenuPopup){const popupOptions={whenParentScrolls:'close',ignoreReferenceClick:true,ignoreClicksFrom:['.flatpickr-calendar'],reference:target,placement:'right',adaptiveShift:true,autoFocus:true,selectedElementCSS:'.aw-state-selected',innerClassName:'sw-table-menu-tooltip',// Passing placeholder class for table menu tooltip, if any styling is required in the future, this class can be used\nhasArrow:true,forceCloseOthers:false,padding:getPadding(),width:'185px',arrowOptions:{alignment:'center',offset:5,shift:15},hooks:{whenClosed:()=>{appCtxService[\"default\"].unRegisterCtx('columnMenuContext');if(_columnMenuSubscriptions.length){lodash_default.a.forEach(_columnMenuSubscriptions,function(subscription){eventBus[\"a\" /* default */].unsubscribe(subscription);});_columnMenuSubscriptions.length=0;}focusElementOnClose(focusOnClose);}}};appCtxService[\"default\"].registerCtx('columnMenuContext',{});columnMenuPopup.hide().then(()=>{columnMenuPopup.show(popupOptions).then(popupRef=>{self.columnMenuPopupRef=popupRef;gridContextDispatcher({type:'UPDATE_VALUES',popupRef:popupRef});});});}};const isColumnMenuDisabled=function(columnDef){return splmTableUtils[\"a\" /* default */].isBulkEditing(_table)||columnDef.enableColumnMenu===false||splmTableUtils[\"a\" /* default */].isCellEditing(_table);};self.columnMenuHandler=function(columnElem,isFocused){var columnDef=columnElem.columnDef;return function(event){if(isColumnMenuDisabled(columnDef)){return;}event.preventDefault();const menuContainer=splmTableUtils[\"a\" /* default */].closestElement(_table,'.'+splmTableConstants[\"a\" /* default */].CLASS_TABLE_MENU_CONTAINER);if(isTargetPopupOpen(event.currentTarget)&&self.columnMenuPopupRef){self.ensureColumnMenuDismissed();}else{showColumnMenuPopup(event.currentTarget,menuContainer,isFocused,columnElem.parentElement);tableInstance.columnMenuLoaded=true;}};};self.setFilterDisability=function(isDisabled){var tableMenuElem=_trv.queryTableMenu(_table.id).getElement();var filterButtonElement=tableMenuElem.getElementsByClassName('filter-button')[0];if(filterButtonElement){if(isDisabled){filterButtonElement.classList.add('disabled');}else{filterButtonElement.classList.remove('disabled');}}};return self;};/* harmony default export */ var splmTableMenuService = (SPLMTableMenuService);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableColumnResizer.js\n// Copyright (c) 2020 Siemens\n/**\n * This service is used for simpletabe as Column Resizer, all column resize logic are here for now\n *\n * @module js/splmTableColumnResizer\n *\n */// Write it here for reuse purporse\nvar splmTableColumnResizer_exports={};/**\n * @memberOf js/splmTableColumnResizer\n *\n * apply column resize logic to splitter\n * @param {Object} tableCtrl - PL Table Controller\n * @param {DOMElement} elem - Column header splitter element\n */let applyColumnResizeHandler=function(tableCtrl,elem,menuService){var _startPageX=-1;var _gripPosX=-1;var _deltaWidth=-1;var columDef=elem.parentElement.children[1].columnDef;var _columnIdx=columDef.index;splmTableDragHandler.enableDragging(elem);elem.addEventListener(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG_START,function(customEvent){var e=customEvent.detail;_startPageX=e.pageX;_deltaWidth=0;// Clean up menu if exist\nmenuService.ensureAllTableMenusDismissed();// Scroll left adjustment is not needed if the column is pinned\nvar scrollLeft=columDef.pinnedLeft===true?tableCtrl.getPinCanvasScrollLeftPosition():tableCtrl.getScrollCanvasScrollLeftPosition();_gripPosX=tableCtrl.getTotalColumnWidth(_columnIdx)-(splmTableConstants[\"a\" /* default */].WIDTH_COLUMN_SPLITTER-e.offsetX)+scrollLeft;tableCtrl.showColumnGrip(_gripPosX);});elem.addEventListener(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG,function(customEvent){var e=customEvent.detail;var deltaWidth=e.pageX-_startPageX;if(tableCtrl.isColumnWidthChangeValid(_columnIdx,deltaWidth)){_deltaWidth=deltaWidth;tableCtrl.setColumnGripPosition(_gripPosX+_deltaWidth);}});elem.addEventListener(splmTableConstants[\"a\" /* default */].EVENT_ON_ELEM_DRAG_END,function(){tableCtrl.hideColumnGrip();tableCtrl.updateColumnWidth(_columnIdx,_deltaWidth);});elem.addEventListener('dblclick',function(){tableCtrl.fitColumnWidth(_columnIdx);});};splmTableColumnResizer_exports={applyColumnResizeHandler};/* harmony default export */ var splmTableColumnResizer = (splmTableColumnResizer_exports);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/uielements/src/js/awEventHelperService.js\n// Copyright (c) 2020 Siemens\n/**\n * This module provides event building support\n *\n * @module js/awEventHelperService\n */let awEventHelperService_exports={};/**\n *\n * @param {Object} targetObject - Map for object default and mobile counterpart\n * @param {Object} eventObject - Map for event type to mobile counterpart for all mouseevents click, mousedown, mouseup, etc.\n * @param {Function} eventHandler - handler function, takes event as single argument\n */let subscribeMouseEvent=function(targetObject,eventObject,eventHandler){lodash_default.a.forEach(Object.keys(eventObject),eventName=>{/* Register the event type -> eventHandler */if(targetObject.default.on){// if jQuery object\ntargetObject.default.on(eventName,eventHandler);}else{// if Element\ntargetObject.default.addEventListener(eventName,eventHandler);}/* If mobile device, make sure the mobile event is bound to desktop event so we catch what we are listening to in mobile */if(browserUtils[\"default\"].isMobileOS&&targetObject.mobile){var mobileBlurLock=false;var mobileHandler=function(mobileEvent){if(!mobileBlurLock){mobileEvent.preventDefault();var mouseEvent=document.createEvent('MouseEvent');mouseEvent.initMouseEvent(eventName,true,false,window,1,mobileEvent.screenX,mobileEvent.screenY,mobileEvent.clientX,mobileEvent.clientY,mobileEvent.ctrlKey,mobileEvent.altKey,mobileEvent.shiftKey,mobileEvent.metaKey,1,null);mobileEvent.target.dispatchEvent(mouseEvent);}mobileBlurLock=false;};/* If user moves while touch or cancels event, cancel the mobile -> default click dispatch for later */lodash_default.a.forEach(['touchmove','touchcancel'],function(blurEvent){targetObject.mobile[\"on\".concat(blurEvent)]=function(){mobileBlurLock=true;};});targetObject.mobile[\"on\".concat(eventObject[eventName])]=mobileHandler;}});};awEventHelperService_exports={subscribeMouseEvent};/* harmony default export */ var awEventHelperService = (awEventHelperService_exports);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableDomController.js\n/* eslint-disable max-lines */ // Copyright (c) 2022 Siemens\n/**\n * This service is used for splm table as Dom Controller, play table row/cell instead of DOM Structure\n *\n * @module js/splmTableDomController\n *\n * DOM Structure\n * <aw-splm-table>\n *   CLASS_TABLE|aw-splm-table\n *     CLASS_TABLE_CONTAINER|aw-splm-tableContainer\n *       CLASS_COLUMN_RESIZE_GRIP|aw-splm-tableColumnResizeGrip -> grip for resize\n *       CLASS_PIN_CONTAINER|aw-splm-tablePinnedContainer\n *           CLASS_HEADER_ROW|aw-splm-tableHeaderRow\n *             CLASS_HEADER_CELL|aw-splm-tableHeaderCell\n *               CLASS_HEADER_CELL_CONTENT|aw-splm-tableHeaderCellContents\n *                 CLASS_HEADER_CELL_LABEL|aw-splm-tableHeaderCellLabel\n *                 CLASS_HEADER_CELL_SORT_ICON|aw-splm-tableHeaderCellSortIcon\n *                 CLASS_HEADER_CELL_MENU_ICON|aw-splm-tableHeaderCellMenuIcon\n *               CLASS_HEADER_CELL_SPLITTER|aw-splm-tableHeaderCellSplitter\n *           CLASS_VIEWPORT|aw-splm-tableViewport\n *             CLASS_ROW|aw-splm-tableRow\n *               CLASS_CELL|ui-grid-cell\n *       CLASS_SCROLL_CONTAINER|aw-splm-tableScrollContainer\n *           CLASS_HEADER_ROW|ui-grid-header-cell-row\n *             CLASS_HEADER_CELL|aw-splm-tableHeaderCell\n *               CLASS_HEADER_CELL_CONTENT|aw-splm-tableHeaderCellContents\n *                 CLASS_HEADER_CELL_LABEL|aw-splm-tableHeaderCellLabel\n *                 CLASS_HEADER_CELL_SORT_ICON|aw-splm-tableHeaderCellSortIcon\n *                 CLASS_HEADER_CELL_MENU_ICON|aw-splm-tableHeaderCellMenuIcon\n *                 CLASS_HEADER_CELL_SPLITTER|aw-splm-tableHeaderCellSplitter\n *           CLASS_VIEWPORT|aw-splm-tableViewport\n *             CLASS_ROW|aw-splm-tableRow\n *             CLASS_CELL|ui-grid-cell\n *     CLASS_TABLE_MENU_CONTAINER|aw-splm-tableMenuContainer\n *       CLASS_TABLE_MENU|aw-splm-tableMenu\n *\n *\n * CLASS_TABLE_MENU_CONTAINER|aw-splm-tableMenuContainer\n *   CLASS_TABLE_MENU|aw-splm-tableMenu\n *     CLASS_TABLE_MENU_ITEM|aw-splm-tableMenuItem\n *\n */// Bootstrap for _t to make coding pattern consistent\n/**\n * Instances of this class represent a column resizer for PL Table\n *\n * @class SimpleTableDomController\n * @param {DOMElement} tableElem - HTML DOM Element for table\n * @param {Array} columnDefs - Array of Column Definitions\n */var SPLMTableDomController=function(tableElem,columnDefs,tableEditor,gridContextDispatcher){// Class definition   //Dummy comment\nvar self=this;var _table=tableElem;var _trv=new splmTableTraversal[\"a\" /* default */](tableElem);var _menuService=splmTableUtils[\"a\" /* default */].getTableMenuService(tableElem);var _columnDefs=columnDefs;var _tableInstance=tableElem._tableInstance;var _keyboardService=_tableInstance.keyboardService;var _grip=null;// Pin/freeze context\nvar _pinColumnCount=0;var _pinContainerWidth=0;var _scrollContainerWidth=0;var _alignContainersForCheckbox=false;var _scrollColumnsInView={start:null,end:null};const ariaColIndex='aria-colindex';const ariaRowIndex='aria-rowindex';const ariaRowCount='aria-rowcount';const dataIndexNumber='data-indexnumber';// ////////////////////////////////////////////////\n// Internal\n// ////////////////////////////////////////////////\nvar _getSortClassName=function(sortType){if(typeof sortType==='string'){sortType=sortType.toUpperCase();if(sortType==='ASC'){return splmTableConstants[\"a\" /* default */].CLASS_ICON_SORT_ASC;}else if(sortType==='DESC'){return splmTableConstants[\"a\" /* default */].CLASS_ICON_SORT_DESC;}else if(sortType===''){return splmTableConstants[\"a\" /* default */].CLASS_ICON_SORTABLE;}}return splmTableConstants[\"a\" /* default */].CLASS_ICON_NON_SORTABLE;};self.setPinContext=function(lastPinIndex){// Get the right most pinnedLeft option then set pinCount\nif(lastPinIndex!==undefined&&lastPinIndex!==null){_pinColumnCount=lastPinIndex+1;}else{var rightMostPinIdx=-1;lodash_default.a.forEach(_columnDefs,function(column,idx){if(column.pinnedLeft===true){rightMostPinIdx=idx;}});// _pinColumnCount will be greater than zero if any column is pinned or frozen by the user.\n// We should not reset this value if it is greater than zero.\nif(_pinColumnCount===0){_pinColumnCount=rightMostPinIdx+1;}}_pinContainerWidth=0;_scrollContainerWidth=0;for(var i=0;i<_columnDefs.length;i++){if(i<_pinColumnCount){_columnDefs[i].pinnedLeft=true;_columnDefs[i].startPosition=_pinContainerWidth;_pinContainerWidth+=_columnDefs[i].drawnWidth;}else{_columnDefs[i].pinnedLeft=false;_columnDefs[i].startPosition=_scrollContainerWidth;_scrollContainerWidth+=_columnDefs[i].drawnWidth;}}};/**\n     * @memberOf js/splmTableDomController\n     *\n     * Get pin column count in the table\n     *\n     * @return {Number} pin column count in the table\n     */self.getPinColumnCount=function(){return _pinColumnCount;};/**\n     * New design decided in 20180724:\n     *   1. If width=<number>, we use it.\n     *   2. If width = *, we make it as minWidth + 25%* minWidth.\n     *   3. If minWidth + 25% > maxWidth, use maxWidth.\n     *   4. Don't use ui-grid column splitter design, put the splitter at the right side of the\n     *      column. Adapt CSS properly\n     *\n     * For the issue we faced in real autoWidth design:\n     *   1. Horizontal Scroll bar will appear/disappear randomly when sum(cellWidth) == canvasWidth.\n     *      - This should be resolved by new design but will rehearsal if it is not.\n     *\n     *   2. The listener for resize when autoWidth exist.\n     *      - This is not needed for new design.\n     */self.initializeColumnWidths=function(){lodash_default.a.forEach(_columnDefs,function(column){var width=0;if(column.name==='icon'){width=splmTableUtils[\"a\" /* default */].getTableRowHeight(_tableInstance.gridOptions,splmTableConstants[\"a\" /* default */].WIDTH_DEFAULT_ICON_COLUMN_WIDTH);if(width!==splmTableConstants[\"a\" /* default */].WIDTH_DEFAULT_ICON_COLUMN_WIDTH){/** We have some pedding in icon rendering column and to render the complete icon, we need to\n                     increase width of icon renderer by 8 units **/width+=8;}}else if(column.width>0){width=column.width;}else{width=column.minWidth>0?column.minWidth:splmTableConstants[\"a\" /* default */].WIDTH_DEFAULT_MINIMUM_WIDTH;width=Math.floor(1.25*width);width=column.maxWidth>0&&column.maxWidth<width?column.maxWidth:width;}column.width=width;column.drawnWidth=width;});};// set aria-colcount to a number of columns which are visible in the DOM\nself.setAriaColCount=function(tableContainer,columns){if(columns!==undefined){var tableCols=columns;var visibleCols=tableCols.filter(column=>column.visible!==undefined&&column.visible);var visibleColsLength=visibleCols.length;tableContainer.setAttribute('aria-colcount',visibleColsLength);}else{tableContainer.setAttribute('aria-colcount',-1);}};// set aria-colcount to a number of columns which are visible in the DOM\nself.setAriaRowCount=function(tableContainer){if(_tableInstance.gridOptions.transpose===true){var tableCols=_tableInstance.dataProvider.cols;var visibleCols=tableCols.filter(column=>column.visible!==undefined&&column.visible);tableContainer.setAttribute(ariaRowCount,visibleCols.length+1);}else{if(_tableInstance.dataProvider.json&&_tableInstance.dataProvider.json.firstPage&&_tableInstance.dataProvider.action&&_tableInstance.dataProvider.action.inputData.searchInput){tableContainer.setAttribute(ariaRowCount,_tableInstance.dataProvider.json.firstPage.length+1);}else{if(_tableInstance.dataProvider.viewModelCollection&&_tableInstance.dataProvider.viewModelCollection.loadedVMObjects){tableContainer.setAttribute(ariaRowCount,_tableInstance.dataProvider.viewModelCollection.loadedVMObjects.length+1);}else{tableContainer.setAttribute(ariaRowCount,-1);}}}};// set describedby and aria-labelledby to a caption or label element id which labels or describes the table\nself.setAriaLabelledAndDescribedBy=function(directiveElement,tableContainer){if(directiveElement){if(directiveElement.getAttribute('labelled-by')){tableContainer.setAttribute('aria-labelledby',directiveElement.getAttribute('labelled-by'));}if(directiveElement.getAttribute('described-by')){tableContainer.setAttribute('aria-describedby',directiveElement.getAttribute('described-by'));}}};// Scroll content width must be at least 1px to ensure pin/scroll syncing keeps working\n// when there are no columns in either of the containers\nvar _setScrollContentMinWidth=function(scrollContentElement,width){var adjustedWidth=width>0?width:1;scrollContentElement.style.minWidth=adjustedWidth+'px';};var _setPinHeaderWidth=function(width){var headerElem=_trv.getPinHeaderElementFromTable();var pinContentElem=_trv.getPinContentElementFromTable();headerElem.style.minWidth=String(width)+'px';_setScrollContentMinWidth(pinContentElem,width);};var _setScrollHeaderWidth=function(width){var headerElem=_trv.getScrollHeaderElementFromTable();var scrollContentElem=_trv.getScrollContentElementFromTable();headerElem.style.minWidth=String(width)+'px';var scrollContentMinWidth=parseInt(width,10)-parseInt(scrollContentElem.style.paddingLeft,10);_setScrollContentMinWidth(scrollContentElem,scrollContentMinWidth);};var _setHeaderColumnWidth=function(columnIdx,width){var headerCellElem=_trv.getHeaderCellElementFromTable(columnIdx);// update current cell width\nheaderCellElem.style.width=String(width)+'px';};var _setContentRowWidth=function(rowElem,width){rowElem.style.minWidth=String(width)+'px';};var _getContentRowCount=function(){var _length=0;var rows=_trv.getScrollContentRowElementsFromTable();if(rows){_length=rows.length;}return _length;};var _setContentColumnWidth=function(columnIdx,width){var rowCnt=_getContentRowCount();for(var i=0;i<rowCnt;i++){var rowCellElem=_trv.getContentCellFromTable(i,columnIdx);var prevWidth=self.getColumnWidth(columnIdx);if(columnIdx<_pinColumnCount){var pinRowElem=_trv.getPinContentRowElementFromTable(i);_setContentRowWidth(pinRowElem,_pinContainerWidth+width-prevWidth);}else{var scrollRowElem=_trv.getScrollContentRowElementFromTable(i);_setContentRowWidth(scrollRowElem,_scrollContainerWidth+width-prevWidth);}rowCellElem.style.width=String(width)+'px';}};/**\n     * Set the class and title for the filter icon element.\n     *\n     * @param {HTMLElement} iconElement - Filter icon element\n     * @param {Object} filter - filter object from column\n     */var _applyFilterIcon=function(iconElement,filter){iconElement.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_FILTER_APPLIED_ICON);iconElement.title=filter.summaryText;};/**\n     * Set the class and title for the filter icon element.\n     *\n     * @param {Object} column - the column\n     * @param {number} columnIndex - the column index\n     * @param {string} sortDirection - the sort direction\n     * @param {number} startPosition - the start position of the column\n     *\n     * @return {HTMLElement} - the header container\n     */const _buildHeaderCellContainer=function(column,columnIndex,sortDirection,startPosition){//Header cell container\nlet headerContainer=document.createElement('div');headerContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL);headerContainer.tabIndex=-1;_keyboardService.setOnFocusAndBlur(headerContainer);headerContainer.setAttribute('role','columnheader');headerContainer.setAttribute(ariaColIndex,columnIndex+1);// Check whatever for column selection, and select if needed\n//Column Def Anchor\nlet columnDefElem=document.createElement('div');columnDefElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF);columnDefElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_CELL_CONTENTS);columnDefElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CLEARFIX);columnDefElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_CONTENT);columnDefElem.style.width=String(column.drawnWidth)+'px';columnDefElem.columnDef=column;// Enable column selection when click on the header element in transpose mode\nif(_tableInstance.gridOptions.transpose===true){columnDefElem.onclick=splmTableSelectionHelper[\"default\"].selectionChanged(_table);}if(column.headerTooltip!==false&&column.headerTooltip===true){columnDefElem.title=column.displayName;}headerContainer.appendChild(columnDefElem);// Splitter for resize\n// Firefox limitation: element must be appended on left if it has 'float:right'\nlet resizeElem=document.createElement('div');resizeElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_SPLITTER);if(column.enableColumnResizing){headerContainer.insertBefore(resizeElem,columnDefElem);splmTableColumnResizer.applyColumnResizeHandler(self,resizeElem,_menuService);//last prop = _menu\n}//Create Inner element\nlet innerElem=splmTableCellRenderer[\"a\" /* default */].createHeaderElement(column,tableElem);innerElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_INNER);columnDefElem.appendChild(innerElem);//Create Sort element\nlet sortElem=document.createElement('i');sortElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_SORT_ICON);sortElem.classList.add(_getSortClassName(sortDirection));sortElem.title='';columnDefElem.appendChild(sortElem);let sortDir;if(sortDirection!==null&&sortDirection!==''){// aria-sort supported sort values are ascending, descending, none and other.\nsortDir=sortDirection.toLowerCase().includes('desc')?'descending':'ascending';headerContainer.setAttribute('aria-sort',sortDir);}//Create Filter element\nlet filterElem=document.createElement('i');filterElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_FILTER_ICON);if(column.filter&&column.filter.isFilterApplied){_applyFilterIcon(filterElem,column.filter);}else{filterElem.title='';}columnDefElem.appendChild(filterElem);if(column.enableColumnMenu===true){const openMenuEvent=event=>{if(gridContextDispatcher){let currentColumnIndex=-1;if(_tableInstance.columnProvider.sortCriteria&&_tableInstance.columnProvider.sortCriteria.length>0){var sortCriteria=_tableInstance.columnProvider.sortCriteria[0];currentColumnIndex=self.getIdxFromColumnName(sortCriteria.fieldName);}gridContextDispatcher({type:'UPDATE_VALUES',columnDef:columnDefElem.columnDef,currentColumnIndex:currentColumnIndex,pinColumnCount:_pinColumnCount,isBulkEditing:splmTableUtils[\"a\" /* default */].isBulkEditing(_table)});}_menuService.columnMenuHandler(columnDefElem,gridContextDispatcher)(event);};columnDefElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_MENU_ENABLED);columnDefElem.setAttribute('role','button');columnDefElem.setAttribute('aria-haspopup','true');columnDefElem.addEventListener('click',event=>{openMenuEvent(event);});headerContainer.addEventListener('keydown',function(event){if(wcagService[\"default\"].isValidKeyPress(event)){openMenuEvent(event);}});}column.startPosition=startPosition;return headerContainer;};var _insertColumnHeaders=function(headerElement,startIdx,endIdx){let columnDefs=_columnDefs;let totalColumnHeaderWidth=0;//only add role=row if we are sure role=columnheader will be added as its descendents else it will cause aria-required-children violation.\nif(startIdx<endIdx){headerElement.setAttribute('role','row');//aria-rowindex always starts from 1. For header row, it is 1 and for the actual rows, it starts from 2.\nheaderElement.setAttribute(ariaRowIndex,1);}for(let idx=startIdx;idx<endIdx;idx++){let column=columnDefs[idx];let sortDirection=null;if(_tableInstance.gridOptions.enableSorting!==false&&column.enableSorting){if(column.sort&&column.sort.direction){sortDirection=column.sort.direction;}else{sortDirection='';}}const headerContainer=_buildHeaderCellContainer(column,idx,sortDirection,totalColumnHeaderWidth);totalColumnHeaderWidth+=column.drawnWidth;//Add header container to header element\nheaderElement.appendChild(headerContainer);}let headerHeight=splmTableUtils[\"a\" /* default */].getTableHeaderHeight(_tableInstance.gridOptions,splmTableConstants[\"a\" /* default */].HEIGHT_HEADER)+'px';headerElement.style.height=headerHeight;headerElement.style.minHeight=headerHeight;headerElement.style.maxHeight=headerHeight;headerElement.style.minWidth=String(totalColumnHeaderWidth)+'px';};var _createGrip=function(){_grip=document.createElement('div');_grip.classList.add(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_RESIZE_GRIP);_grip.style.position='absolute';_grip.style.height='100%';// Try to make border in the middle\nvar subGrip=document.createElement('div');subGrip.style.borderLeft='1px solid';subGrip.style.marginLeft='30px';subGrip.style.height='100%';_grip.appendChild(subGrip);_grip.style.zIndex='1000';_grip.style.cursor='col-resize';_grip.style.outline='20px transparent';_grip.style.width='60px';_grip.style.display='none';return _grip;};var removeHoverClassFromRows=function(){var rows=_trv.getTableContainerElementFromTable().getElementsByClassName('ui-grid-row');for(var i=0;i<rows.length;i++){rows[i].classList.remove(splmTableConstants[\"a\" /* default */].CLASS_ROW_HOVER);}};var removeHoverClassesRaf=function(){requestAnimationFrame(function(){removeHoverClassFromRows();});};var _constructTableElement=function(){var columnDefs=_columnDefs;// Table Container\nvar tableContainer=document.createElement('div');tableContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE_CONTAINER);tableContainer.tabIndex=0;if(_tableInstance.gridOptions.useTree===true){tableContainer.setAttribute('role','treegrid');}else{tableContainer.setAttribute('role','grid');}if(_tableInstance.dataProvider.selectionModel.mode==='multiple'){tableContainer.setAttribute('aria-multiselectable','true');}else{tableContainer.setAttribute('aria-multiselectable','false');}if(_tableInstance.gridOptions.enableCellHeaderSelection===true){tableContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_SELECTION_ENABLED);}self.setAriaRowCount(tableContainer);self.setAriaColCount(tableContainer,_tableInstance.dataProvider.cols);_table.appendChild(tableContainer);self.initializeColumnWidths();// Do pin initialization after eval column width so we could\n// Dummy Comment\n// collect container size together\nself.setPinContext();// Create dragging grip.\ntableContainer.appendChild(_createGrip());var pinContainer=document.createElement('div');pinContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_PIN_CONTAINER);pinContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_PIN_CONTAINER_LEFT);if(_tableInstance.gridOptions.transpose===true){pinContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_COMPARE_CONTAINER);}var pinHeaderElem=document.createElement('div');pinHeaderElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_ROW);_insertColumnHeaders(pinHeaderElem,0,_pinColumnCount);pinContainer.appendChild(pinHeaderElem);var pinScrollContainer=document.createElement('div');pinScrollContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_CANVAS);pinScrollContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT);var pinScrollContents=document.createElement('div');pinScrollContents.addEventListener('mouseleave',function(){removeHoverClassesRaf();});pinScrollContents.classList.add(splmTableConstants[\"a\" /* default */].CLASS_SCROLL_CONTENTS);_setScrollContentMinWidth(pinScrollContents,parseInt(pinHeaderElem.style.minWidth,10));pinScrollContainer.appendChild(pinScrollContents);pinContainer.appendChild(pinScrollContainer);tableContainer.appendChild(pinContainer);var scrollContainer=document.createElement('div');scrollContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_SCROLL_CONTAINER);scrollContainer.style.marginLeft=String(_pinContainerWidth)+'px';// Create Columns in memory\nvar scrollHeaderElem=document.createElement('div');scrollHeaderElem.classList.add(splmTableConstants[\"a\" /* default */].CLASS_HEADER_ROW);_insertColumnHeaders(scrollHeaderElem,_pinColumnCount,columnDefs.length);scrollContainer.appendChild(scrollHeaderElem);// Create row Contents in memory\nvar rowsContainer=document.createElement('div');rowsContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_VIEWPORT);rowsContainer.classList.add(splmTableConstants[\"a\" /* default */].CLASS_CANVAS);var scrollContents=document.createElement('div');scrollContents.addEventListener('mouseleave',function(){removeHoverClassesRaf();});scrollContents.classList.add(splmTableConstants[\"a\" /* default */].CLASS_SCROLL_CONTENTS);_setScrollContentMinWidth(scrollContents,parseInt(scrollHeaderElem.style.minWidth,10));rowsContainer.appendChild(scrollContents);scrollContainer.appendChild(rowsContainer);tableContainer.appendChild(scrollContainer);};/**\n     * @memberOf js/aw-splm-table.directive\n     *\n     * Creates and returns a DOMElement for the propertyCell of the passed in view model object (vmo) which defines the row\n     * and the given column (columnInfo )\n     * @param {Object} column - Declarative columnInfo object\n     * @param {Object} vmo - Declarative view model object (e.g. row)\n     * @param {Number} columnWidth - Width of the iconCellColumn\n     * @param {HTMLElement} rowElem - row DOMElement\n     * @return {HTMLElement} The newly created DOMElement for the property cell\n     */const _createPropertyCell=function(column,vmo,columnWidth,rowElem){const cell=splmTableUtils[\"a\" /* default */].createElement('div',splmTableConstants[\"a\" /* default */].CLASS_CELL);cell.tabIndex=-1;if(_tableInstance.dynamicRowHeightStatus){cell.classList.add(splmTableConstants[\"a\" /* default */].CLASS_CELL_DYNAMIC);}if(column.colSelected){cell.classList.add(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_SELECTED);cell.classList.add(splmTableConstants[\"a\" /* default */].CLASS_CELL_SELECTED);}const defaultRowHeight=appCtxService[\"default\"].ctx.layout==='compact'?splmTableConstants[\"a\" /* default */].HEIGHT_COMPACT_ROW:splmTableConstants[\"a\" /* default */].HEIGHT_ROW;const rowHeight=splmTableUtils[\"a\" /* default */].getTableRowHeight(_tableInstance.gridOptions,defaultRowHeight);cell.style.width=\"\".concat(columnWidth,\"px\");cell.style.height=_tableInstance.dynamicRowHeightStatus?'auto':rowHeight+'px';cell.appendChild(splmTableCellRenderer[\"a\" /* default */].createElement(column,vmo,tableElem,rowElem));if(column.field==='transposedColumnProperty'){cell.setAttribute('role','rowheader');}else{cell.setAttribute('role','gridcell');}cell.propName=column.field;cell.columnDef=column;if(vmo.props){cell.prop=vmo.props[column.field];}const cellTops=cell.getElementsByClassName('aw-splm-tableCellTop');if(cellTops.length>0){splmTableUtils[\"a\" /* default */].addCSSClassForRowHeight(cellTops[0],_tableInstance.gridOptions);}const idxNum=document.createAttribute(dataIndexNumber);idxNum.value=column.index;if(column.index>=_pinColumnCount){idxNum.value=column.index-_pinColumnCount;}cell.setAttributeNode(idxNum);// aria-colindex always starts with index 1.\ncell.setAttribute(ariaColIndex,column.index+1);// Set click listener for cell to get editable states\ntableEditor.addCellClickListener(cell,vmo);_keyboardService.setOnFocusAndBlur(cell);_keyboardService.setupInternalCellNavigation(cell);return cell;};/**\n     * Adds the aria attributes for tree if the row is part of a tree table\n     * @param {HTMLElement} row - the row element\n     * @param {Object} vmo - Declarative view model object (e.g. row)\n     */const _setAriaAttributesForTreeRow=function(row,vmo){if(_tableInstance.gridOptions.useTree===true){if(vmo.isLeaf===false){if(vmo.isExpanded===true){row.setAttribute('aria-expanded','true');}else{row.setAttribute('aria-expanded','false');}}// aria-level starts from index 1.\nrow.setAttribute('aria-level',vmo.levelNdx+1);}};/**\n     * Adds the mouseenter event listener to apply hover styling to the row.\n     * @param {HTMLElement} row - the row element\n     */const _addRowHoverListener=function(row){row.addEventListener('mouseenter',function(event){const hoveredRow=event.currentTarget;requestAnimationFrame(function(){removeHoverClassFromRows();const index=splmTableUtils[\"a\" /* default */].getIndexInParent(hoveredRow);const scrollRow=_trv.getScrollContentRowElementFromTable(index);const pinRow=_trv.getPinContentRowElementFromTable(index);scrollRow.classList.add(splmTableConstants[\"a\" /* default */].CLASS_ROW_HOVER);pinRow.classList.add(splmTableConstants[\"a\" /* default */].CLASS_ROW_HOVER);});});};/**\n     * Adds the selection checkbox to the row\n     * @param {HTMLElement} row - the row element\n     * @param {HTMLElement} tableElem - the table element\n     * @param {Object[]} columnDefs - array of column defs\n     */const _addRowCheckBox=function(row,tableElem,columnDefs){// var commandBarHtml =\n// <div class=\"aw-splm-tableCheckBoxPresent\">\n//   <a class=\"aw-commands-cellCommandCommon\">\n//     <span class=\"sw-checkbox-val\">\n//       <input class=\"sw-property-val\" type=\"checkbox\">\n//       <span class=\"sw-checkbox-pseudo\"></span>\n//     </span>\n//   </a>\n// </div>\nlet checkBox=splmTableUtils[\"a\" /* default */].createElement('div',splmTableConstants[\"a\" /* default */].CLASS_CELL_CHECKBOX);let wrapperAElement=splmTableUtils[\"a\" /* default */].createElement('a','aw-commands-cellCommandCommon');let wrapperCheckboxDiv=splmTableUtils[\"a\" /* default */].createElement('span','sw-checkbox-val');let inputElement=splmTableUtils[\"a\" /* default */].createElement('input',splmTableConstants[\"a\" /* default */].CLASS_CELL_CHECKBOX_BUTTON);let checkboxTypeAttr=document.createAttribute('type');checkboxTypeAttr.value='checkbox';inputElement.setAttributeNode(checkboxTypeAttr);let commandDef=columnDefs.filter(function(def){if(def.isTableCommand||def.isTreeNavigation){return true;}return false;})[0];let propName=commandDef&&(commandDef.propertyName||commandDef.name);if(propName&&row.vmo&&row.vmo.props&&row.vmo.props[propName]){let value=row.vmo.props[propName].uiValue;let checkboxLabelAttr=document.createAttribute('aria-label');checkboxLabelAttr.value=value;inputElement.setAttributeNode(checkboxLabelAttr);}let spanCheckboxStyle=document.createElement('span');spanCheckboxStyle.classList.add('sw-checkbox-pseudo');// Do we really need this intermediate span? Commenting for now. Will remove once all table related auto tests pass\n// var spanCheckElem = document.createElement( 'span' );\n// spanCheckElem.classList.add( 'check' );\n// spanCheckboxStyle.appendChild( spanCheckElem );\nwrapperCheckboxDiv.appendChild(inputElement);wrapperCheckboxDiv.appendChild(spanCheckboxStyle);wrapperAElement.appendChild(wrapperCheckboxDiv);checkBox.appendChild(wrapperAElement);// We should not need following lines. Commenting for now. Will remove once all table related auto tests pass\n// var cellScope = {};\n// var checkBox = util.createNgElement( commandBarHtml, tableElem, cellScope );\nrow.appendChild(checkBox);};/**\n     * Creates and returns a DOMElement for the TableRow of the passed in view model object (vmo) which defines the row\n     * Will Create cells for each column using the vmo properties associated by propertyName.  Also will prepend an\n     * iconCell at the beginning of the row.  Appropriate rowSelection callback will be added too.\n     * @param {Object} vmo - Declarative view model object (e.g. row)\n     * @param {number} rowHeight - the pixel row height\n     * @param {number} startIdx - the column start index\n     * @param {number} endIdx - the column end index\n     *\n     * @return {HTMLElement} row - the created row element\n     */const _createContentRowElement=function(vmo,rowHeight,startIdx,endIdx){const columnDefs=_columnDefs;const row=splmTableUtils[\"a\" /* default */].createElement('div',splmTableConstants[\"a\" /* default */].CLASS_ROW,splmTableConstants[\"a\" /* default */].CLASS_UI_GRID_ROW,splmTableConstants[\"a\" /* default */].CLASS_ROW_ICON);let rowWidth=0;row.vmo=vmo;//only add role=row if we are sure role=gridcell or role=rowheader will be added as its descendents else it will cause aria-required-children violation.\nif(startIdx<=endIdx){row.setAttribute('role','row');}_setAriaAttributesForTreeRow(row,vmo);// LCS-286849 - jQuery has issues with handling touch to click events on mobile\nlet target={default:row,mobile:row};let eventObject={click:'touchend'};awEventHelperService.subscribeMouseEvent(target,eventObject,splmTableSelectionHelper[\"default\"].selectionChanged(_table));row.oncontextmenu=_menuService.contextSelectionHandler;row.draggable=true;_addRowHoverListener(row);if(vmo.rowStatus&&vmo.rowStatus==='ADDED'){row.classList.add('aw-jswidgets-change');}else if(vmo.rowStatus&&vmo.rowStatus==='REMOVED'){row.classList.add('aw-jswidgets-oldText');}let adjustedColumnDefs=lodash_default.a.sortBy(columnDefs,function(columnDef){return columnDef.index;});lodash_default.a.forEach(adjustedColumnDefs,function(currentColumn){if(row.vmo.props&&row.vmo.props[currentColumn.field]){row.vmo.props[currentColumn.field].renderingHint=currentColumn.renderingHint;}});for(let i=startIdx;i<=endIdx;i++){const column=adjustedColumnDefs[i];let cell=null;let _width=column.drawnWidth;const showCheckBox=_tableInstance.showCheckBox;if(i===0&&showCheckBox){_addRowCheckBox(row,tableElem,adjustedColumnDefs);}cell=_createPropertyCell(column,vmo,_width,row);rowWidth+=_width;row.appendChild(cell);}row.style.minWidth=String(rowWidth)+'px';row.style.minHeight=String(rowHeight)+'px';return row;};/**\n     * Remove the class and title from the filter icon element.\n     *\n     * @param {HTMLElement} iconElement - Filter icon element\n     */const _removeFilterIcon=function(iconElement){iconElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_FILTER_APPLIED_ICON);iconElement.title='';};self.updateScrollColumnsInView=function(scrollLeft,scrollContainerWidth){var headerCells=_trv.getScrollHeaderElementFromTable().children;// Find start and end visible columns\nvar extraColumns=3;var start=null;var end=null;var totalHeaderCells=headerCells.length;// Return all columns as in view if container width given is null or undefined\nif(scrollContainerWidth===null||scrollContainerWidth===undefined||scrollContainerWidth===0){_scrollColumnsInView={start:0,end:totalHeaderCells-1};return;}for(var i=0;i<totalHeaderCells;i++){var column=headerCells[i].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0].columnDef;var columnStartPosition=column.startPosition;if(columnStartPosition<=scrollLeft){start=i;}if(columnStartPosition<=scrollLeft+scrollContainerWidth){end=i;}}start=start-extraColumns<0?0:start-extraColumns;end=end+extraColumns>totalHeaderCells-1?totalHeaderCells-1:end+extraColumns;_scrollColumnsInView={start:start,end:end};};self.updateVisibleCells=function(rowParentElem){const startColumnIdx=_scrollColumnsInView.start;const endColumnIdx=_scrollColumnsInView.end;rowParentElem=rowParentElem.childNodes;const scrollHeader=_trv.getScrollHeaderElementFromTable();const scrollContentElem=_trv.getScrollContentElementFromTable();const headerCells=scrollHeader.children;let minWidth=0;for(let i=startColumnIdx;i<headerCells.length;i++){const column=headerCells[i].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0].columnDef;if(startColumnIdx!==null){minWidth+=column.drawnWidth;}}let paddingLeft=null;const scrollHeaderElemMinWidth=scrollHeader.style.minWidth;if(startColumnIdx>0){const paddingLeftColumnDef=headerCells[startColumnIdx-1].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0].columnDef;paddingLeft=paddingLeftColumnDef.startPosition+paddingLeftColumnDef.drawnWidth+'px';}else{paddingLeft='0px';}scrollContentElem.style.paddingLeft=paddingLeft;const scrollContentMinWidth=parseInt(scrollHeaderElemMinWidth,10)-parseInt(paddingLeft,10);_setScrollContentMinWidth(scrollContentElem,scrollContentMinWidth);// Update cell visibility\nconst scrollRows=rowParentElem;for(let j=0;j<scrollRows.length;j++){const rowCells=scrollRows[j].children;if(rowCells.length===0){continue;}const row=scrollRows[j];row.style.minWidth=minWidth+'px';const currentStartIndex=rowCells[0].columnDef.index;const currentEndIndex=rowCells[rowCells.length-1].columnDef.index;const trueStartColumnIndex=startColumnIdx+_pinColumnCount;const trueEndColumnIndex=endColumnIdx+_pinColumnCount;for(let k=rowCells.length-1;k>=0;k--){const cell=rowCells[k];const colIndex=cell.columnDef.index;// Remove out of view cells\nif(colIndex<trueStartColumnIndex||colIndex>trueEndColumnIndex){splmTableUtils[\"a\" /* default */].destroyChildElements(cell);cell.parentElement.removeChild(cell);}}for(let l=currentStartIndex-1;l>=trueStartColumnIndex;l--){const newCellInsertBefore=_createPropertyCell(_columnDefs[l],row.vmo,_columnDefs[l].drawnWidth,row);row.insertBefore(newCellInsertBefore,row.children[0]);tableEditor.updateEditStatusForCell(newCellInsertBefore);}for(let m=currentEndIndex+1;m<=trueEndColumnIndex;m++){const newCellInsertAfter=_createPropertyCell(_columnDefs[m],row.vmo,_columnDefs[m].drawnWidth,row);row.appendChild(newCellInsertAfter);tableEditor.updateEditStatusForCell(newCellInsertAfter);}}};// LCS-323044 - IE11 - aw-splm-table ascending and descending icon not showing\n// IE lacks support for multiple arguments in classlist.remove - https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\nconst _removeAllSortDirectionClasses=function(sortElement){sortElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_ICON_SORT_ASC);sortElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_ICON_SORT_DESC);sortElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_ICON_NON_SORTABLE);sortElement.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_ICON_SORTABLE);};// ////////////////////////////////////////////////\n// Public method\n// ////////////////////////////////////////////////\nself.getColumnMinWidth=function(columnIdx){return _columnDefs[columnIdx].minWidth;};self.getColumnMaxWidth=function(columnIdx){return _columnDefs[columnIdx].maxWidth;};self.getColumnWidth=function(columnIdx){return _columnDefs[columnIdx].drawnWidth;};const updateColumnStartPositions=function(){let pinContainerWidth=0;let scrollContainerWidth=0;for(let i=0;i<_columnDefs.length;i++){if(i<_pinColumnCount){_columnDefs[i].startPosition=pinContainerWidth;pinContainerWidth+=_columnDefs[i].drawnWidth;}else{_columnDefs[i].startPosition=scrollContainerWidth;scrollContainerWidth+=_columnDefs[i].drawnWidth;}}};/**\n     * @memberOf js/splmTableDomController\n     *\n     * This method is used for updating the column width\n     * This method is also called from resetColumnDefs with 0,0 arguments which needs to be corrected.\n     * @param {Number} columnIdx - column index\n     * @param {Number} deltaWidth - delta width\n     */self.updateColumnWidth=function(columnIdx,deltaWidth){let width=self.getColumnWidth(columnIdx)+deltaWidth;_setHeaderColumnWidth(columnIdx,width);_setContentColumnWidth(columnIdx,width);if(columnIdx<_pinColumnCount){// Set container\n_pinContainerWidth+=deltaWidth;_setPinHeaderWidth(_pinContainerWidth);_trv.getScrollContainerElementFromTable().style.marginLeft=String(_pinContainerWidth)+'px';}else{// Set container\n_scrollContainerWidth+=deltaWidth;_setScrollHeaderWidth(_scrollContainerWidth);}// Update columnDef start positions\nif(deltaWidth!==0){_columnDefs[columnIdx].drawnWidth=width;_tableInstance.tableInstanceCallbacks.columnsResized({name:_columnDefs[columnIdx].name,delta:deltaWidth});}updateColumnStartPositions();let scrollCanvasElement=_trv.getScrollCanvasElementFromTable();self.updateScrollColumnsInView(scrollCanvasElement.scrollLeft,scrollCanvasElement.offsetWidth);if(deltaWidth!==0){self.updateVisibleCells(_trv.getScrollContentElementFromTable());}};/**\n     * Update the filter icon for the header of the column name given.\n     *\n     * @param {String} columnName - column name for the header to update\n     */self.updateFilterIcon=function(columnName){var headerCells=_trv.getHeaderCellElementsFromTable();for(var i=0;i<headerCells.length;i++){var columnDef=headerCells[i].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0].columnDef;var filterIconElement=headerCells[i].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_FILTER_ICON)[0];if(columnDef&&columnDef.filter&&filterIconElement&&columnDef.field===columnName){if(columnDef.filter.isFilterApplied){_applyFilterIcon(filterIconElement,columnDef.filter);}else{_removeFilterIcon(filterIconElement);}break;}}};/**\n     * Update the filter icon for all column headers.\n     */self.updateAllFilterIcons=function(){var headerCells=_trv.getHeaderCellElementsFromTable();for(var i=0;i<headerCells.length;i++){var columnDef=headerCells[i].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_COLUMN_DEF)[0].columnDef;var filterIconElement=headerCells[i].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_FILTER_ICON)[0];if(columnDef&&columnDef.filter&&filterIconElement){if(columnDef.filter.isFilterApplied){_applyFilterIcon(filterIconElement,columnDef.filter);}else{_removeFilterIcon(filterIconElement);}}}};/**\n     * Fit column width with content in canvas\n     * NOTE: This mentod will read computed CSS which may cause reflow\n     *\n     * @param {Number} columnIdx - Last column index.\n     *\n     */self.fitColumnWidth=function(columnIdx){var treeNavigation=_columnDefs[columnIdx].isTreeNavigation;var cellElems=_trv.queryRowColumnCellElementsFromTable(columnIdx);var maxWidth=0;var headerTextElement=_trv.getHeaderCellElementFromTable(columnIdx).getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_HEADER_CELL_INNER)[0];maxWidth=splmTableUtils[\"a\" /* default */].getElementTextWidth(headerTextElement);var filterOption=_tableInstance.gridOptions.isFilteringEnabled;var sortOption=_tableInstance.gridOptions.enableSorting;// This is the space occupied after the column name which includes column menu, splitter, resizeGrip etc.\nif(filterOption||sortOption){maxWidth+=splmTableConstants[\"a\" /* default */].WIDTH_MINIMUM_EXTRA_SPACE;}cellElems.forEach(function(cellElem){var actualWidth;// Tree navigation cell\nif(treeNavigation){// pass entire cellElem into getCellTextWidth because it calculates\n// What the width of an unobstructed element with height and width set to auto will be\n// This will give width of entire cell up until the end of the text for tree nav cells\nactualWidth=splmTableUtils[\"a\" /* default */].getElementTextWidth(cellElem);maxWidth=actualWidth>maxWidth?actualWidth:maxWidth;}else{// cover text and link for now.\nvar valueElems=cellElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_CELL_TEXT);if(valueElems.length===0){valueElems=cellElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_PROPERTY_VALUE_LINKS);}for(var i=0;i<valueElems.length;i++){actualWidth=splmTableUtils[\"a\" /* default */].getElementTextWidth(valueElems[i]);maxWidth=actualWidth>maxWidth?actualWidth:maxWidth;}}});if(maxWidth>0){var currentWidth=self.getColumnWidth(columnIdx);var validWidth=self.getValidColumnWidth(columnIdx,maxWidth);if(currentWidth!==validWidth){self.updateColumnWidth(columnIdx,validWidth-currentWidth);}}};/**\n     * Update column visibility for hidden columns\n     *\n     * @param {String} columnName - column name\n     */self.updateColumnVisibility=function(columnName){var adjustedColumnIdx=self.getIdxFromColumnName(columnName);// Remove hidden column header from DOM\nvar headerCellElem=_trv.getHeaderCellElementFromTable(adjustedColumnIdx);if(headerCellElem&&headerCellElem.parentElement){headerCellElem.parentElement.removeChild(headerCellElem);}// Remove hidden column rows from DOM\nvar rowCount=_getContentRowCount();for(var i=0;i<rowCount;i++){var rowCellElem=_trv.getContentCellFromTable(i,adjustedColumnIdx);if(rowCellElem&&rowCellElem.parentElement){rowCellElem.parentElement.removeChild(rowCellElem);}}_columnDefs[adjustedColumnIdx].visible=false;_columnDefs.splice(adjustedColumnIdx,1);// Adjust column indices to account for removed column\nlodash_default.a.forEach(_columnDefs,function(columnDef,index){columnDef.index=index;});self.resetColumnDefs(_columnDefs);var scrollCanvasElement=_trv.getScrollCanvasElementFromTable();self.updateScrollColumnsInView(scrollCanvasElement.scrollLeft);self.updateVisibleCells(_trv.getScrollContentElementFromTable());};var _updateCellColumnIndexes=function(){var cellElements=_trv.getContentCellElementsFromTable();for(var i=0;i<cellElements.length;i++){var cellElement=cellElements[i];var column=cellElement.columnDef;var idxNum=document.createAttribute(dataIndexNumber);idxNum.value=column.index;if(column.index>=_pinColumnCount){idxNum.value=column.index-_pinColumnCount;}cellElement.setAttributeNode(idxNum);updateColumnStartPositions();}};var _pinHeader=function(columnIdx){// Check existing column index\nvar newPinCount=columnIdx+1;var oldPinCount=_pinColumnCount;// Update Existing DOM\nvar headerCellElements=_trv.getHeaderCellElementsFromTable();var moveFragment=document.createDocumentFragment();var deltaWidth=0;if(oldPinCount<newPinCount){// Update Header\nfor(var i=oldPinCount;i<newPinCount;i++){moveFragment.appendChild(headerCellElements[oldPinCount]);deltaWidth+=self.getColumnWidth(i);}var pinHeaderElem=_trv.queryPinContainerFromTable().toHeader().getElement();pinHeaderElem.appendChild(moveFragment);_setPinHeaderWidth(_pinContainerWidth+deltaWidth);_setScrollHeaderWidth(_scrollContainerWidth-deltaWidth);_trv.getScrollContainerElementFromTable().style.marginLeft=String(_pinContainerWidth+deltaWidth)+'px';}else if(oldPinCount>newPinCount){// Update Header\nfor(var j=newPinCount;j<oldPinCount;j++){moveFragment.appendChild(headerCellElements[newPinCount]);deltaWidth+=self.getColumnWidth(j);}var scrollHeaderElem=_trv.queryScrollContainerFromTable().toHeader().getElement();scrollHeaderElem.insertBefore(moveFragment,scrollHeaderElem.childNodes[0]);_setPinHeaderWidth(_pinContainerWidth-deltaWidth);_setScrollHeaderWidth(_scrollContainerWidth+deltaWidth);_trv.getScrollContainerElementFromTable().style.marginLeft=String(_pinContainerWidth-deltaWidth)+'px';}};var _pinContent=function(columnIdx){// Check existing column index\nvar newPinCount=columnIdx+1;var oldPinCount=_pinColumnCount;// Update Existing DOM\nvar moveFragment=document.createDocumentFragment();var pinContentRowElements=_trv.queryPinContainerFromTable().getContentRowElements();var scrollContentRowElements=_trv.queryScrollContainerFromTable().getContentRowElements();var count=pinContentRowElements.length;var deltaWidth=0;if(oldPinCount<newPinCount){for(var i=0;i<count;i++){deltaWidth=0;for(var j=oldPinCount;j<newPinCount;j++){moveFragment.appendChild(scrollContentRowElements[i].children[0]);deltaWidth+=self.getColumnWidth(j);}pinContentRowElements[i].appendChild(moveFragment);_setContentRowWidth(pinContentRowElements[i],_pinContainerWidth+deltaWidth);_setContentRowWidth(scrollContentRowElements[i],_scrollContainerWidth-deltaWidth);}}else if(oldPinCount>newPinCount){for(var k=0;k<count;k++){deltaWidth=0;for(var l=newPinCount;l<oldPinCount;l++){moveFragment.appendChild(pinContentRowElements[k].children[newPinCount]);deltaWidth+=self.getColumnWidth(l);}scrollContentRowElements[k].insertBefore(moveFragment,scrollContentRowElements[k].childNodes[0]);_setContentRowWidth(pinContentRowElements[k],_pinContainerWidth-deltaWidth);_setContentRowWidth(scrollContentRowElements[k],_scrollContainerWidth+deltaWidth);}}};/**\n     * Pin the table from column 0 to specific column\n     *\n     * @param {Number} columnIdx - Last column index.\n     *\n     */self.pinToColumn=function(columnIdx){// Bring back all cells that were virtualized before moving cells to proper container\nvar scrollCanvasElement=_trv.getScrollCanvasElementFromTable();self.updateScrollColumnsInView(scrollCanvasElement.scrollLeft);self.updateVisibleCells(_trv.getScrollContentElementFromTable());_pinHeader(columnIdx);_pinContent(columnIdx);self.setPinContext(columnIdx);let colDef=_columnDefs[columnIdx];let pinCanvasElement=_trv.getPinCanvasElementFromTable();pinCanvasElement.scrollLeft=colDef.startPosition;let traversalTable=new splmTableTraversal[\"a\" /* default */](_table);splmTableUtils[\"a\" /* default */].syncHeader(traversalTable,true,pinCanvasElement.scrollLeft);_updateCellColumnIndexes();// Virtualize cells\nself.updateScrollColumnsInView(scrollCanvasElement.scrollLeft,scrollCanvasElement.offsetWidth);self.updateVisibleCells(_trv.getScrollContentElementFromTable());};self.resetFreezeScroll=function(columnField){let startPosition=0;if(_columnDefs&&_columnDefs.length){for(var i=0;i<_columnDefs.length;i++){if(_columnDefs[i].field===columnField){startPosition=_columnDefs[i].startPosition;}}}let scrollLeft=startPosition;// set scroll container to this position to keep header focused\nlet scrollCanvas=_trv.getScrollCanvasElementFromTable();scrollCanvas.scrollLeft=scrollLeft;};/**\n     * Finds the current columns that are pinned in the table\n     *\n     * @returns {Array} all the columns that are pinned\n     */var _findPinnedColumns=function(){var results=[];if(_columnDefs&&_columnDefs.length){for(var i=0;i<_columnDefs.length;i++){if(_columnDefs[i].pinnedLeft===true){results.push(_columnDefs[i]);}}}return results;};/**\n     * Checks new columns for any previous pinned columns, then returns index of first found.\n     *\n     * @param {*} newColumns The new columns coming into the table\n     * @param {*} pinnedColumns The old pinned columns that were pinned\n     * @returns {Number} the first index of an incoming column\n     */var findPinIndex=function(newColumns,pinnedColumns){var pinIndex;if(lodash_default.a.isArray(pinnedColumns)&&lodash_default.a.isArray(newColumns)){for(var i=pinnedColumns.length-1;i>=0;i--){for(var j=0;j<newColumns.length;j++){if(pinnedColumns[i].name&&(pinnedColumns[i].name===newColumns[j].name||pinnedColumns[i].name===newColumns[j].field)){pinIndex=newColumns[j].index;break;}}if(pinIndex){break;}}}return pinIndex;};self.getColumnDefs=function(){return _columnDefs;};self.resetColumnDefs=function(columnDefs){var previouslyPinnedColumns=_findPinnedColumns();var currentPinIndex=findPinIndex(columnDefs,previouslyPinnedColumns);_columnDefs=columnDefs;self.initializeColumnWidths();self.setPinContext(currentPinIndex);var pinContainerElem=_trv.getPinContainerElementFromTable();var pinHeaderElem=_trv.getPinHeaderElementFromTable();var pinContentElem=_trv.getPinContentElementFromTable();pinHeaderElem.innerHTML='';_insertColumnHeaders(pinHeaderElem,0,_pinColumnCount);pinContainerElem.replaceChild(pinHeaderElem,pinContainerElem.children[0]);_setScrollContentMinWidth(pinContentElem,parseInt(pinHeaderElem.style.minWidth,10));var scrollContainerElem=_trv.getScrollContainerElementFromTable();var scrollHeaderElem=_trv.getScrollHeaderElementFromTable();var scrollContentElem=_trv.getScrollContentElementFromTable();scrollHeaderElem.innerHTML='';_insertColumnHeaders(scrollHeaderElem,_pinColumnCount,_columnDefs.length);var scrollContentMinWidth=parseInt(scrollHeaderElem.style.minWidth,10)-parseInt(scrollContentElem.style.paddingLeft,10);_setScrollContentMinWidth(scrollContentElem,scrollContentMinWidth);if(scrollContainerElem.children.length===0){scrollContainerElem.appendChild(scrollHeaderElem);}self.updateColumnWidth(0,0);self.setAriaColCount(_trv.getTableContainerElementFromTable(),columnDefs);};self.isColumnWidthChangeValid=function(columnIdx,deltaWidth){var targetWidth=self.getColumnWidth(columnIdx)+deltaWidth;return self.getValidColumnWidth(columnIdx,targetWidth)===targetWidth;};self.getValidColumnWidth=function(columnIdx,targetWidth){var maxWidth=self.getColumnMaxWidth(columnIdx);var minWidth=self.getColumnMinWidth(columnIdx);minWidth=minWidth>splmTableConstants[\"a\" /* default */].WIDTH_ALLOWED_MINIMUM_WIDTH?minWidth:splmTableConstants[\"a\" /* default */].WIDTH_ALLOWED_MINIMUM_WIDTH;if(minWidth&&targetWidth<minWidth){targetWidth=minWidth;}else if(maxWidth&&targetWidth>maxWidth){targetWidth=maxWidth;}else{// Do nothing\n}return targetWidth;};self.isColumnSplitterDraggable=function(columnIdx){return _columnDefs[columnIdx].enableColumnResizing!==false;};self.getTotalColumnWidth=function(columnIdx){var width=0;var sum=columnIdx+1;for(var i=0;i<sum;i++){width+=self.getColumnWidth(i);}return width;};self.getIdxFromColumnName=function(columnField){for(var i=0;i<_columnDefs.length;i++){if(_columnDefs[i].field===columnField||_columnDefs[i].name===columnField){return i;}}return-1;};self.setHeaderCellSortDirection=function(oldColumnIdx,newColumnIdx,sortDirection){var sortElem;var headerCellElem=null;var sortDir=null;if(sortDirection!==null&&sortDirection!==''){// aria-sort supported sort values are ascending, descending, none and other.\nsortDir=sortDirection.toLowerCase().includes('desc')?'descending':'ascending';}if(oldColumnIdx>-1){sortElem=_trv.getHeaderCellSortIconElementFromTable(oldColumnIdx);_removeAllSortDirectionClasses(sortElem);sortElem.classList.add(_getSortClassName(''));headerCellElem=_trv.getHeaderCellElementFromTable(oldColumnIdx);if(headerCellElem!==null&&headerCellElem.parentElement.hasAttribute('aria-sort')){headerCellElem.parentElement.removeAttribute('aria-sort');}}sortElem=_trv.getHeaderCellSortIconElementFromTable(newColumnIdx);_removeAllSortDirectionClasses(sortElem);sortElem.classList.add(_getSortClassName(sortDirection));headerCellElem=_trv.getHeaderCellElementFromTable(newColumnIdx);if(headerCellElem!==null&&sortDir!==null){headerCellElem.parentElement.setAttribute('aria-sort',sortDir);}};self.getScrollCanvasScrollLeftPosition=function(){return _trv.getScrollCanvasElementFromTable().scrollLeft*-1;};self.getPinCanvasScrollLeftPosition=function(){return _trv.getPinCanvasElementFromTable().scrollLeft*-1;};/**\n     * Applies the dynamic row heights to each row\n     *\n     * @param {DocumentFragment} contentRowFragment - the fragment of content rows to be applied to the DOM\n     * @param {DocumentFragment} tempContentRowFragment - the temporary fragment of content rows\n     * @param {number} rowHeight - the pixel row height\n     */const _applyDynamicRowHeights=function(contentRowFragment,tempContentRowFragment,rowHeight){let tempDivElem=document.createElement('div');tempDivElem.style.position='absolute';tempDivElem.style.visibility='hidden';tempDivElem.style.height='auto';tempDivElem.style.width='auto';const clonedNode=tempContentRowFragment.childNodes.length?tempContentRowFragment:contentRowFragment.cloneNode(true);tempDivElem.appendChild(clonedNode);document.body.appendChild(tempDivElem);// Now loop through rows\nconst newRows=tempDivElem.childNodes;const rowsWithVMOs=contentRowFragment.childNodes;const maxRowHeight=rowHeight*splmTableConstants[\"a\" /* default */].MAX_ROW_HEIGHT_ROWS;for(let i=0;i<newRows.length;i++){const row=newRows[i];const vmo=rowsWithVMOs[i].vmo;let height=0;const cells=row.childNodes;for(let j=0;j<cells.length;j++){const cell=cells[j];if(cell.childNodes[0]&&cell.childNodes[0].classList.contains(splmTableConstants[\"a\" /* default */].CLASS_SPLM_TABLE_ICON_CELL)){continue;}else if(cell.childNodes[0]&&cell.childNodes[0].classList.contains(splmTableConstants[\"a\" /* default */].CLASS_AW_TREE_COMMAND_CELL)){// check if cell has data\nconst _cell=cell.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_CELL_TEXT)[0];if(_cell){const cellHeight=_cell.offsetHeight+15;height=cellHeight>height?cellHeight:height;}else{height=rowHeight>height?rowHeight:height;}}else{const cellHeight=cell.offsetHeight+11;height=cellHeight>height?cellHeight:height;}}// no larger than max height and no smaller than default row height\nheight=Math.min(Math.max(height,rowHeight),maxRowHeight);vmo.rowHeight=!vmo.rowHeight||height>vmo.rowHeight?height:vmo.rowHeight;// Mark each actual cell text with height if exists.\nconst cellsWithText=rowsWithVMOs[i].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_CELL_TEXT_DYNAMIC);for(let k=0;k<cellsWithText.length;k++){cellsWithText[k].style.maxHeight=String(vmo.rowHeight)+'px';}}document.body.removeChild(tempDivElem);};/**\n     * Creates a group of row elements with cells spanning from the start and end column index.\n     *\n     * @param {Array} vmos - the array of vmos to create rows for\n     * @param {number} startIndex - the row start index\n     * @param {number} rowHeight - the pixel row height\n     * @param {number} startColumnIdx - the column start index\n     * @param {number} endColumnIdx - the column end index\n     * @param {boolean} isPin - true if the row contents are for the pin container\n     *\n     * @return {DocumentFragment} Document fragment containing the rows for the passed in vmos\n     */const _constructContentElement=function(vmos,startIndex,rowHeight,startColumnIdx,endColumnIdx,isPin){let contentRowFragment=document.createDocumentFragment();let tempContentRowFragment=document.createDocumentFragment();for(let keyIdx=0;keyIdx<vmos.length;keyIdx++){let vmo=vmos[keyIdx];const rowIndex=keyIdx+startIndex;const idxNum=document.createAttribute(dataIndexNumber);idxNum.value=rowIndex;let row=null;let mockrow=null;if(isPin){row=_createContentRowElement(vmo,rowHeight,startColumnIdx,endColumnIdx);row.classList.add(splmTableConstants[\"a\" /* default */].CLASS_PINNED_ROW);}else{if(_scrollColumnsInView.start!==null&&_scrollColumnsInView.end!==null){startColumnIdx=_scrollColumnsInView.start+_pinColumnCount;endColumnIdx=_scrollColumnsInView.end+_pinColumnCount;}row=_createContentRowElement(vmo,rowHeight,startColumnIdx,endColumnIdx);if(_tableInstance.dynamicRowHeightStatus){// If dynamic row height, we need to get the row height with all cells rendered, so endColumnIdx is the last item in columnDefs.\nmockrow=_createContentRowElement(vmo,rowHeight,startColumnIdx,_columnDefs.length-1);mockrow.setAttributeNode(idxNum.cloneNode());}}row.setAttributeNode(idxNum);//aria-rowindex always starts from 1. For header row, it is 1 and for the actual rows, it starts from 2.\nif(row.children.length>0){row.setAttribute(ariaRowIndex,rowIndex+2);}// Add id attribute to each cell which will be refered by aria-activedescendant at grid level.\n// The id attribute should be unique, so this will be a combination of gridid, aria-rowindex, aria-colindex.\nlet cellElements=row.childNodes;let uniqueIdForCell;for(let i=0;i<cellElements.length;i++){if(cellElements[i].hasAttribute(ariaColIndex)){uniqueIdForCell=_tableInstance.gridId+'_row'+row.getAttribute(ariaRowIndex)+'_col'+cellElements[i].getAttribute(ariaColIndex);cellElements[i].setAttribute('id',uniqueIdForCell);}}contentRowFragment.appendChild(row);if(_tableInstance.dynamicRowHeightStatus&&mockrow){tempContentRowFragment.appendChild(mockrow);}if(isPin!==true&&_scrollColumnsInView.start!==null&&_scrollColumnsInView.end!==null){self.updateVisibleCells(contentRowFragment);}}// Dynamic Row Height - When flag is enabled\n// find heights for rows by creating div and adding doc fragment\nif(_tableInstance.dynamicRowHeightStatus){_applyDynamicRowHeights(contentRowFragment,tempContentRowFragment,rowHeight);}return contentRowFragment;};self.constructContentElement=function(vmos,startIndex,rowHeight,isPin){if(isPin===true){// Set container\nvar pinHeaderElem=_trv.getPinHeaderElementFromTable();if(_tableInstance.showCheckBox===true){if(!_alignContainersForCheckbox){_alignContainersForCheckbox=true;_pinContainerWidth+=32;pinHeaderElem.lastChild.style.width=pinHeaderElem.lastChild.clientWidth+32+'px';_trv.getScrollContainerElementFromTable().style.marginLeft=String(_pinContainerWidth)+'px';}}else if(!_tableInstance.showCheckBox&&_alignContainersForCheckbox){_alignContainersForCheckbox=false;_pinContainerWidth-=32;pinHeaderElem.lastChild.style.width='';_trv.getScrollContainerElementFromTable().style.marginLeft=String(_pinContainerWidth)+'px';}return _constructContentElement(vmos,startIndex,rowHeight,0,_pinColumnCount-1,isPin);}return _constructContentElement(vmos,startIndex,rowHeight,_pinColumnCount,_columnDefs.length-1,isPin);};var _removeContentElement=function(parent,upperCountIdx,lowerCounterIdx){var parentElement=parent.getElement();var children=parent.getContentRowElements();var uCountIdx=upperCountIdx||children.length-1;var lCountIdx=lowerCounterIdx||0;if(children&&children.length>0){for(;uCountIdx>=lCountIdx;uCountIdx--){// Clean up edit cell scope if needed\nvar editCell=children[uCountIdx].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_TOP)[0]||children[uCountIdx].getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_TABLE_EDIT_CELL_TOP_ARRAY)[0];if(editCell!==undefined&&editCell.parentElement.prop!==undefined){editCell.parentElement.prop.isEditing=false;}// Cleanup any components being used dynamically\nsplmTableUtils[\"a\" /* default */].cleanupComponents(children[uCountIdx]);parentElement.removeChild(children[uCountIdx]);}}};self.removeContentElement=function(upperCountIdx,lowerCounterIdx){_removeContentElement(_trv.queryPinContentFromTable(),upperCountIdx,lowerCounterIdx);_removeContentElement(_trv.queryScrollContentFromTable(),upperCountIdx,lowerCounterIdx);};self.clearScrollContents=function(){_trv.getScrollContentElementFromTable().innerHTML='';};self.setSelectable=function(selectable){if(selectable){_table.classList.add(splmTableConstants[\"a\" /* default */].CLASS_SELECTION_ENABLED);}else{_table.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_SELECTION_ENABLED);}};self.setDraggable=function(draggable){var rowElements=_table.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_ROW);for(var i=0;i<rowElements.length;i++){rowElements[i].draggable=draggable;}};// /////////////////////////////////////////////\n// Column Resize Grip\n// /////////////////////////////////////////////\nself.showColumnGrip=function(posX){self.setColumnGripPosition(posX);_grip.style.removeProperty('display');};self.setColumnGripPosition=function(posX){_grip.style.marginLeft=String(posX-30/* match with width*/)+'px';};self.hideColumnGrip=function(){_grip.style.display='none';};_constructTableElement();self.updateColorIndicatorElements=function(updateVMOs){var pinRows=_trv.getPinContentRowElementsFromTable();lodash_default.a.forEach(pinRows,function(pinRow){var rowVmo=pinRow.vmo;if(updateVMOs.includes(rowVmo)){var colorIndicatorElement=pinRow.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_AW_CELL_COLOR_INDICATOR)[0];if(colorIndicatorElement){var newColorIndicatorElement=splmTableUtils[\"a\" /* default */].createColorIndicatorElement(rowVmo);colorIndicatorElement.parentElement.replaceChild(newColorIndicatorElement,colorIndicatorElement);}}});};self.syncContentRowHeights=function(pinnedElems,scrollElems){if(pinnedElems&&pinnedElems.childNodes){for(let i=0;i<pinnedElems.childNodes.length;i++){let row=pinnedElems.childNodes[i];let rowVMO=row.vmo;row.style.height=String(rowVMO.rowHeight)+'px';}}if(scrollElems&&scrollElems.childNodes){for(let i=0;i<scrollElems.childNodes.length;i++){let row=scrollElems.childNodes[i];let rowVMO=row.vmo;row.style.height=String(rowVMO.rowHeight)+'px';}}};return self;};/* harmony default export */ var splmTableDomController = (SPLMTableDomController);\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/splmTableFactory.js\n/* eslint-disable max-lines */ // Copyright (c) 2020 Siemens\n/**\n * This service is the entry point for SPLM table. It initializes the table and renders it\n *\n * @module js/splmTableFactory\n *//**\n * Cached reference to the various AngularJS and AW services.\n */var splmTableFactory_exports={};var splmTableFactory_splmTableMessages={};var _defaultContentFilter={isIdOfObject:function(vmo,uid){let matchedId=false;if(vmo){if(vmo.alternateID){matchedId=vmo.alternateID===uid;}if(!matchedId&&vmo.uid){matchedId=vmo.uid===uid||vmo.uid.indexOf(uid)!==-1;}}return matchedId;}};const dom=domUtils[\"b\" /* default */].DOMAPIs;/**\n * Check if we are using a 'gridid' in the closest 'declViewModel' in the scope tree.<BR>\n * If so: Use it to display the aw-table data<BR>\n *\n */let createTableObject=function(directiveElement,gridid,dataProvider,viewModelCollection,columnProvider,declViewModel,contentFilter,gridOptions,containerHeight,gridContextDispatcher,runActionWithViewModel,tableInstanceCallbacks,tableContext,reusable,showCheckBox){// 20180920: put it to null so that it will error out when there is an code error\nvar _tableColumns=null;var _contentFilter=contentFilter||_defaultContentFilter;// setup cell renderer\nvar cellRenderer=awSPLMTableCellRendererFactory[\"a\" /* default */].createCellRenderer();var table=splmTableUtils[\"a\" /* default */].createElement('div');var _trv=new splmTableTraversal[\"a\" /* default */](table);var tableCtrl=null;var tableEditor=null;var menuService=null;var _nodeExpansionInProgress=false;let tableScroll=null;let columnRearrangementService=null;let keyboardService=null;let updateEditState=null;let _showCheckBox=showCheckBox;// LCS-138303 - Performance tuning for 14 Objectset Table case - implementation\n// Define header and row height here to save computed CSS reading\nvar _rowBorderWidth=1;var _rowHeight=appCtxService[\"default\"].ctx.layout==='compact'?splmTableConstants[\"a\" /* default */].HEIGHT_COMPACT_ROW:splmTableConstants[\"a\" /* default */].HEIGHT_ROW;_rowHeight=splmTableUtils[\"a\" /* default */].getTableRowHeight(gridOptions,_rowHeight);var _headerHeight=splmTableConstants[\"a\" /* default */].HEIGHT_HEADER;_headerHeight=splmTableUtils[\"a\" /* default */].getTableHeaderHeight(gridOptions,_headerHeight);// This updateColumnDefs function is called as part of the buildDynamicColumns.\nlet _updateColumnDefs=function(){let columns=dataProvider.cols;if(gridOptions.transpose===true){// Get and assign transposed columns\ncolumns=splmTableTranspose.getTransposedColumns(_tableColumns,dataProvider.viewModelCollection.loadedVMObjects);}for(let i=0;i<columns.length;i++){columns[i].visible=!columns[i].hasOwnProperty('visible')||columns[i].visible;}_tableColumns=lodash_default.a.filter(columns,function(column){if(column.visible){return column;}return false;});lodash_default.a.forEach(_tableColumns,function(column,index){column.index=index;if(!column.cellRenderers){column.cellRenderers=[];}if(column.name==='icon'&&column.iconCellRenderer){column.cellRenderers=column.cellRenderers.concat(column.iconCellRenderer);}column.cellRenderers=column.cellRenderers.concat(cellRenderer.getAwCellRenderers());});lodash_default.a.forEach(_tableColumns,function(column,index){column.index=index;if(!column.headerRenderers){column.headerRenderers=[];}column.headerRenderers=column.headerRenderers.concat(cellRenderer.getAwHeaderRenderers());});menuService.loadDefaultColumnMenus();};let getObjects=function(){if(!dataProvider.viewModelCollection){return[];}if(gridOptions.transpose===true){return splmTableTranspose.getTransposedVmos(dataProvider.cols,dataProvider.viewModelCollection.loadedVMObjects);}return dataProvider.viewModelCollection.loadedVMObjects;};let resetColumns=function(){_updateColumnDefs();awColumnFilterService[\"default\"].removeStaleFilters(columnProvider,_tableColumns);// property loading has completed\ntableCtrl.resetColumnDefs(_tableColumns);// Table headers recreated, need to initialize column rearrangement\ncolumnRearrangementService.initialize();// Trick for update scroll container position\nif(tableScroll.isInitialized()){cellRenderer.resetHoverCommandElement();tableScroll.setLoadedVMObjects(getObjects());tableScroll.handleScroll();}};/**\n     * Finds VMOs with undefined props within the specified range.\n     *\n     * @param {int} startIndex - starting VMO index\n     * @param {int} endIndex - edning VMO index\n     */var findVMOsWithMissingProps=function(startIndex,endIndex){var emptyVMOs=[];for(var i=startIndex;i<=endIndex;i++){var vmo=dataProvider.viewModelCollection.loadedVMObjects[i];if(vmo.isPropLoading){continue;}else if(!vmo.props){emptyVMOs.push(vmo);}else{var keys=Object.keys(vmo.props);if(keys.length===0){emptyVMOs.push(vmo);}}}return emptyVMOs;};let loadMissingProps=function(){var firstRenderedItemIndex=tableScroll.getFirstRenderedItemIndex();var lastRenderedItemIndex=tableScroll.getLastRenderedItemIndex();var emptyVMOs=findVMOsWithMissingProps(firstRenderedItemIndex,lastRenderedItemIndex);if(emptyVMOs.length>0){eventBus[\"a\" /* default */].publish(gridid+'.plTable.loadProps',{VMOs:emptyVMOs});}};if(gridid){var instanceEventSubcr=[];// Do essential table DOM Element initialization for further processing\ntable.id=gridid;table.classList.add(splmTableConstants[\"a\" /* default */].CLASS_TABLE);table.classList.add(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_GRID);table.classList.add(splmTableConstants[\"a\" /* default */].CLASS_LAYOUT_COLUMN);table.classList.add(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TABLE_DROP);table.classList.add(splmTableConstants[\"a\" /* default */].CLASS_SELECTION_ENABLED);splmTableUtils[\"a\" /* default */].setSortCriteriaOnColumns(columnProvider,dataProvider);var getContainerHeight=function(){if(containerHeight!==undefined){return containerHeight;}if(gridOptions.maxRowsToShow!==undefined){return(_rowHeight+_rowBorderWidth)*gridOptions.maxRowsToShow+splmTableConstants[\"a\" /* default */].HEIGHT_HEADER;}return undefined;};tableScroll=new splmTableInfiniteScrollService(getContainerHeight());table._tableInstance={ctx:appCtxService[\"default\"].ctx,messages:splmTableFactory_splmTableMessages,declViewModel:declViewModel,dataProvider:dataProvider,viewModelCollection:viewModelCollection,columnProvider:columnProvider,gridId:gridid,gridOptions:gridOptions,isBulkEditing:false,isCellEditing:false,renderer:tableScroll,dynamicRowHeightStatus:false,cellRenderer:cellRenderer,runActionWithViewModel:runActionWithViewModel,tableInstanceCallbacks,tableContext:tableContext?tableContext:{},showCheckBox:showCheckBox};tableEditor=new splmTableEditor(table,directiveElement,gridContextDispatcher);table._tableInstance.editor=tableEditor;keyboardService=new splmTableKeyboardService(table,tableEditor);keyboardService.setupKeyListener();table._tableInstance.keyboardService=keyboardService;menuService=new splmTableMenuService(table,directiveElement,table._tableInstance,gridContextDispatcher);if(gridOptions.enableGridMenu){menuService.addGridMenu();}if(gridOptions.showContextMenu===true){menuService.setContextSelectionHelper(selectionHelper[\"a\" /* default */]);}if(gridOptions.enableDynamicRowHeight){table._tableInstance.dynamicRowHeightStatus=true;}_updateColumnDefs();tableCtrl=new splmTableDomController(table,_tableColumns,tableEditor,gridContextDispatcher);table._tableInstance.controller=tableCtrl;table._tableInstance.editor=tableEditor;// LCS-13247 Pagination SOA performance issue for Objectset Table\n// - Put a debounce here to avoid possible sending traffic jam, the number\n//   is from _pingRedrawDebounce from aw.table.controller\n// - With debounce IE performance improves a lot and no impact to chrome performance,\n//   so leave the debounce for all\nvar _loadMorePageDebounce=lodash_default.a.debounce(function(firstRenderedItem,lastRenderedItem){eventBus[\"a\" /* default */].publish(gridid+'.plTable.loadMorePages',{firstRenderedItem:firstRenderedItem,lastRenderedItem:lastRenderedItem});},500);var pendingUpdatedProps={};var updateRowContents=function(updatedPropsMaps){var rowElements=_trv.queryAllRowCellElementsFromTable();lodash_default.a.forEach(updatedPropsMaps,function(updatedProps,vmoUid){lodash_default.a.forEach(rowElements,function(rowElem){lodash_default.a.forEach(rowElem.children,function(cellElem){// Check if the vmo has been updated, if not continue to next cell\nlet updatedVmo=null;if(rowElem.vmo&&rowElem.vmo.uid===vmoUid){updatedVmo=rowElem.vmo;}else if(gridOptions.transpose===true&&cellElem.columnDef.vmo&&cellElem.columnDef.vmo.uid===vmoUid){updatedVmo=cellElem.columnDef.vmo;}else{return;}var needsUpdate=false;if(cellElem.columnDef&&cellElem.columnDef.name==='icon'||gridOptions.transpose===true&&rowElem.vmo.props.transposedColumnProperty.dbValue==='icon'){var imgElem=cellElem.getElementsByTagName('img')[0];if(imgElem&&imgElem.getAttribute('src')!==splmTableUtils[\"a\" /* default */].getImgURL(updatedVmo)){needsUpdate=true;}}else{for(var i=0;i<updatedProps.length;i++){if(cellElem.propName===updatedProps[i]||gridOptions.transpose===true&&rowElem.vmo.props.transposedColumnProperty.dbValue===updatedProps[i]){needsUpdate=true;break;}}}if(needsUpdate){splmTableCellRenderer[\"a\" /* default */].updateCell(cellElem,rowElem,table,tableEditor);if(rowElem.vmo.selected&&(cellElem.columnDef.isTableCommand||cellElem.columnDef.isTreeNavigation)){let cellTop=cellElem.children[0];if(cellElem.columnDef.isTreeNavigation){cellTop=cellElem.getElementsByClassName('aw-jswidgets-tableNonEditContainer')[0];}if(cellTop.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_AW_CELL_COMMANDS_CONTAINER).length===0){if(dataProvider.selectionModel&&!dataProvider.selectionModel.multiSelectEnabled&&dataProvider.selectionModel.getCurrentSelectedCount()===1){let cellCommand=awSPLMTableCellRendererFactory[\"a\" /* default */].createCellCommandElement(cellElem.columnDef,rowElem.vmo,true);cellTop.appendChild(cellCommand);}}}}});});});};var updatePendingProps=lodash_default.a.debounce(function(){// prevent from calling if table has been destroyed in meantime\nif(!table._tableInstance.isDestroyed){updateRowContents(pendingUpdatedProps);pendingUpdatedProps={};}},250);instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('viewModelObject.propsUpdated',function(updatedProps){// Merge the updatedVmos into pendingUpdatedVmos\nfor(var vmoUid in updatedProps){if(pendingUpdatedProps[vmoUid]===undefined){pendingUpdatedProps[vmoUid]=updatedProps[vmoUid];}else{for(var i=0;i<updatedProps[vmoUid].length;i++){var updatedPropName=updatedProps[vmoUid][i];if(pendingUpdatedProps[vmoUid].indexOf(updatedPropName)===-1){pendingUpdatedProps[vmoUid].push(updatedPropName);}}}}updatePendingProps();}));var loadProps=function(emptyVMOs){eventBus[\"a\" /* default */].publish(gridid+'.plTable.loadProps',{VMOs:emptyVMOs});};var editCellElement;columnRearrangementService=new splmTableColumnRearrangement(table);// 20180927: This is not related to global isEdit anymore, feel free\n// to refactor:)\nvar updateEditStatusForTableCanvas=function(isEditing){tableCtrl.setDraggable(!isEditing);tableEditor.updateEditStatus(isEditing);};var _setupTreeForRestrictiveEditing=function(isEditing){tableScroll.setupTreeEditScroll(isEditing);};updateEditState=function(eventData){// We should not start edit for any non table cases.\n// This should be started only for table cases and also based on the grid id you are on.\n// PWA case the dataSource is the dataProvider, thus has no .dataProviders property (we check if it is the dataProvider in scope with .name)\n// SWA case we have dataSource.dataProvider and can check with dataProviders[ dataProvider.name ]\nif(tableCtrl&&eventData.dataSource&&(eventData.dataSource.getAtomicData&&eventData.dataSource.getAtomicData().dpRef&&eventData.dataSource.getAtomicData().dpRef.current||eventData.dataSource.name===dataProvider.name)){var isEditing=eventData.state==='partialSave'||eventData.state==='starting';// If saving, set all column filters to be stale as data could have changed\nif(eventData.state==='saved'){lodash_default.a.forEach(dataProvider.cols,function(column){awColumnFilterService[\"default\"].setColumnFilterStale(column);});if(!splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(table)){tableEditor.clearPropIsEditableCache();}splmTableUtils[\"a\" /* default */].setIsCellEditing(table,false);}else if(eventData.state==='canceling'){tableEditor.clearPropIsEditableCache();splmTableUtils[\"a\" /* default */].setIsCellEditing(table,false);}// Enable vmo caching on collapse in edit mode\ndataProvider.cacheCollapse=true;splmTableUtils[\"a\" /* default */].setIsBulkEditing(table,isEditing);gridContextDispatcher({type:'UPDATE_VALUES',isBulkEditing:table._tableInstance.isBulkEditing,dynamicRowHeightStatus:table._tableInstance.dynamicRowHeightStatus});tableCtrl.setSelectable(!isEditing);if(splmTableUtils[\"a\" /* default */].isCellEditing(table)===false||splmTableUtils[\"a\" /* default */].isCellEditing(table)&&!splmTableUtils[\"a\" /* default */].isAutoSaveEnabled(table)){updateEditStatusForTableCanvas(isEditing);}if(gridOptions.useTree&&!splmTableUtils[\"a\" /* default */].isExpandOrPaginationAllowedInEdit(table)){_setupTreeForRestrictiveEditing(isEditing);}if(!isEditing){// Restore original cache collapse state when leaving edit mode\ndataProvider.restoreInitialCacheCollapseState();}if(table._tableInstance.dynamicRowHeightStatus===true){resetDynamicRowHeights();clientRefresh();}}};instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(dataProvider._eventTopicEditInProgress,function(){if(reusable!==true){const eventData={dataSource:dataProvider,state:dataProvider._editingState};updateEditState(eventData);}}));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(declViewModel._internal.eventTopicEditInProgress,function(){const eventData={dataSource:declViewModel,state:declViewModel._editingState};updateEditState(eventData);}));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('plTable.editStateChange',function(eventData){updateEditState(eventData);}));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('editHandlerStateChange',function(eventData){updateEditState(eventData);}));var _updateAllRowsVisibilityDebounce=lodash_default.a.debounce(function(){var rowElements=_trv.queryAllRowCellElementsFromTable();lodash_default.a.forEach(rowElements,function(row){if(row.vmo){var cellTopElem=row.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_SPLM_TABLE_ICON_CELL)[0];if(!cellTopElem){cellTopElem=row.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_AW_TREE_COMMAND_CELL)[0];}if(cellTopElem){var iconCellElem=cellTopElem.parentElement;var columnDef=iconCellElem.columnDef;var newCellTop=splmTableCellRenderer[\"a\" /* default */].createElement(columnDef,row.vmo,table,row);iconCellElem.replaceChild(newCellTop,cellTopElem);}}});},100);/**\n         * Subscribe to resetScroll. Clear the tables rendered items cache and scroll to top of table.\n         */instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(dataProvider.name+'.resetScroll',function(){resetInfiniteScroll();}));var verdict=splmTableUtils[\"a\" /* default */].validateRowHeightGridOption(table._tableInstance.gridOptions);/**\n         * Subscribe to LayoutChangeEvent. Update row height to correct value\n         */if(verdict===false){instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('LayoutChangeEvent',function(data){var oldHeight=_rowHeight;_rowHeight=data.rowHeight;if(oldHeight===_rowHeight){return;}if(tableScroll.isInitialized()){tableScroll.setRowHeight(_rowHeight+_rowBorderWidth);var newContainerHeight=getContainerHeight();if(newContainerHeight!==undefined){tableScroll.setContainerHeight(newContainerHeight);}// Reinitialize properties so that the rendering calculations are valid\ntableScroll.initializeProperties();// Reset dynamic row height if enabled\nif(table._tableInstance.dynamicRowHeightStatus){resetDynamicRowHeights();}tableScroll.updateRowAlignment();// Scroll to rows in that were in view before layout change\nvar scrollContainer=_trv.getScrollCanvasElementFromTable();var oldScrollTop=scrollContainer.scrollTop;scrollContainer.scrollTop=oldScrollTop/oldHeight*_rowHeight;tableScroll.handleScroll();}}));}// Reusable table does not need below named events for selection changes, it will now work with selectionData.\nlet isReusable=lodash_default.a.isString(reusable)?reusable==='true':reusable;if(isReusable!==true){instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(dataProvider.name+'.selectionChangeEvent',function(){splmTableSelectionHelper[\"default\"].updateContentRowSelection(dataProvider.selectionModel,dataProvider.cols,_trv.getPinContentRowElementsFromTable(),_trv.getScrollContentRowElementsFromTable(),table);}));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(dataProvider.name+'.selectAll',function(){splmTableSelectionHelper[\"default\"].updateContentRowSelection(dataProvider.selectionModel,dataProvider.cols,_trv.getPinContentRowElementsFromTable(),_trv.getScrollContentRowElementsFromTable(),table);}));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(dataProvider.name+'.selectNone',function(){splmTableSelectionHelper[\"default\"].updateContentRowSelection(dataProvider.selectionModel,dataProvider.cols,_trv.getPinContentRowElementsFromTable(),_trv.getScrollContentRowElementsFromTable(),table);}));}instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(gridid+'.plTable.visibilityStateChanged',_updateAllRowsVisibilityDebounce));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(gridid+'.plTable.resizeCheck',function(){if(tableScroll.isInitialized()){tableScroll.checkForResize();}}));var scrollToRow=function(gridId,rowUids){if(gridid===gridId){if(splmTableUtils[\"a\" /* default */].isBulkEditing(table)){return;}var rowIndexes=[];for(var i=0;i<rowUids.length;i++){var uid=rowUids[i].uid?rowUids[i].uid:rowUids[i];var rowIndex=dataProvider.viewModelCollection.findViewModelObjectById(uid);if(rowIndex!==-1){rowIndexes.push(rowIndex);}}if(rowIndexes.length>0){tableScroll.scrollToRowIndex(rowIndexes);}}};instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('plTable.scrollToRow',function(eventData){scrollToRow(eventData.gridId,eventData.rowUids);}));var updateDecoratorVisibility=function(isEnabled){if(isEnabled===true&&gridOptions.showDecorators!==false){table.classList.add(splmTableConstants[\"a\" /* default */].CLASS_AW_SHOW_DECORATORS);}else{table.classList.remove(splmTableConstants[\"a\" /* default */].CLASS_AW_SHOW_DECORATORS);}};var decoratorToggle='decoratorToggle';var showDecorators=appCtxService[\"default\"].getCtx(decoratorToggle);updateDecoratorVisibility(showDecorators);instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('appCtx.register',function(event){if(event.name===decoratorToggle){updateDecoratorVisibility(event.value);}}));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('appCtx.update',function(event){if(event.name===decoratorToggle){updateDecoratorVisibility(event.value.decoratorToggle);}}));instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe('decoratorsUpdated',function(updateVMOs){updateVMOs=updateVMOs.length===undefined?[updateVMOs]:updateVMOs;tableCtrl.updateColorIndicatorElements(updateVMOs);}));/**\n         * React to request for node expansions.\n         */instanceEventSubcr.push(eventBus[\"a\" /* default */].subscribe(dataProvider.name+'.expandTreeNode',function(eventData){if(eventData.parentNode){var vmCollection=dataProvider.getViewModelCollection();var rowNdx=vmCollection.findViewModelObjectById(eventData.parentNode.id);if(rowNdx!==-1){var vmo=vmCollection.getViewModelObject(rowNdx);if(vmo.isExpanded!==true){vmo.isExpanded=true;if(tableInstanceCallbacks.toggleTreeNode){tableInstanceCallbacks.toggleTreeNode(vmo);}else{eventBus[\"a\" /* default */].publish(table.id+'.plTable.toggleTreeNode',vmo);}}}}}));const getTargetVmo=function(element,isTarget){/**\n             * Merge event 'target' with any other objects currently selected.\n             */var targetObjects=[];var elementRow=element.classList.contains(splmTableConstants[\"a\" /* default */].CLASS_ROW)?element:splmTableUtils[\"a\" /* default */].closestElement(element,'.'+splmTableConstants[\"a\" /* default */].CLASS_ROW);if(elementRow&&elementRow.vmo){targetObjects.push(elementRow.vmo);var targetUid=elementRow.vmo.uid;if(!isTarget){var sourceObjects=dragAndDropService[\"a\" /* default */].getSourceObjects(dataProvider,targetUid).filter(function(obj){return targetObjects.indexOf(obj)===-1;});targetObjects=targetObjects.concat(sourceObjects);}return targetObjects;}return null;};const clearRowSelection=targetVMO=>{// eslint-disable-line\ndataProvider.selectNone();};var listenToRelatedModifiedEvent=false;var targetVMOScoped=null;const selectTarget=(targetElement,targetVMO)=>{// eslint-disable-line\n/**\n             * Setup to listen when the 'drop' is complete\n             */if(!listenToRelatedModifiedEvent){listenToRelatedModifiedEvent=true;targetVMOScoped=targetVMO;}};const isTextNodeDragged=dataTranferObj=>{if(dataTranferObj&&dataTranferObj.types){return event.type==='dragstart'&&[...dataTranferObj.types].some(type=>type==='text/plain'||type==='Text');}return false;};let newCallbackApis={clearSelection:clearRowSelection,setSelection:targetVMO=>{selectTarget(null,targetVMO);},getTargetElementAndVmo:(event,isSourceEle)=>{let targetVMO=null;let target=null;if(!isTextNodeDragged(event.dataTransfer)){target=dom.closest(event.target,'.ui-grid-row')||dom.closest(event.target,'.aw-widgets-droppable');}if(target){targetVMO=getTargetVmo(target,!isSourceEle);}return{targetElement:target,targetVMO:targetVMO};},highlightTarget:eventData=>{splmTableDragHandler.handleDragDropHighlightPLTable(eventData);}};const registerSplmTableDndListner=(element,callbackApis,declViewModel,tableProvider)=>{const getEventCallbackFn=event=>{let target={};let isSourceEle=event.type==='dragstart';if(callbackApis.getTargetElementAndVmo){target=callbackApis.getTargetElementAndVmo(event,isSourceEle);}let fun=declViewModel.dndHandler[event.type];fun(event,target,callbackApis,tableProvider);};const setListener=eventType=>{let callBackFn=getEventCallbackFn.bind(null);element.addEventListener(eventType,callBackFn);};const setEventListener=providers=>{Object.keys(providers).forEach(providerName=>{setListener(providerName.toLowerCase());});};let dragProviders=declDragAndDropService[\"a\" /* default */].getDragHandler(declViewModel);if(dragProviders){setEventListener(dragProviders);}let dropProviders=declDragAndDropService[\"a\" /* default */].getDropHandler(declViewModel);if(dropProviders){setEventListener(dropProviders);}};table._tableInstance.subDefs=instanceEventSubcr;directiveElement.appendChild(table);// Drag and drop service needs to be setup after table has been attached to the directive element so\n// that it can properly get the scope.\nif(gridOptions.enableDragAndDrop!==false){/**\n             * LCS-315044: Setup the drag and drop with the new design pattern if drag and drop\n             * handlers are defined for table's container view.\n             *\n             * The branching is done to support AW, as AW is still consuming the old drag and drop pattern.\n             */if(declDragAndDropService[\"a\" /* default */].areDnDHandelersDefined(declViewModel)){registerSplmTableDndListner(table,newCallbackApis,declViewModel,dataProvider);}}else{dragAndDropService[\"a\" /* default */].disableDragAndDrop(table);}}var getIconCellSVG=function(vmo){if(vmo.loadingStatus){return{id:'miscInProcessIndicator',image:miscInProcessIndicator16[\"svgString\"]};}else if(vmo.isLeaf){// we made the decision to stop rendering 'typeBlankIcon' because (1) there is no visual difference, (2) we want\n// to decrease the number of DOM elements and (3) we don't know the history of why it was there.\nreturn{};}else if(vmo.isExpanded){return{id:'miscExpandedTree',image:miscExpandedTree12[\"svgString\"]};}return{id:'miscCollapsedTree',image:miscCollapsedTree12[\"svgString\"]};};let updateContentRowSelection=()=>{splmTableSelectionHelper[\"default\"].updateContentRowSelection(dataProvider.selectionModel,dataProvider.cols,_trv.getPinContentRowElementsFromTable(),_trv.getScrollContentRowElementsFromTable(),table);};let updateSortDirection=(currentColumnIndex,newColumnIndex,sortDirection)=>{tableCtrl.setHeaderCellSortDirection(currentColumnIndex,newColumnIndex,sortDirection);};let refresh=function(){var columnAttrs=[];// attributesToInflate at server side cannot accept full name i.e typename.propertyname.\n// we don't need to inflate the attributes or properties that are hidden.\nlodash_default.a.forEach(dataProvider.cols,function(uwColumnInfo){if(uwColumnInfo.field&&uwColumnInfo.hiddenFlag!==true){columnAttrs.push(uwColumnInfo.field);}});if(dataProvider&&dataProvider.action&&dataProvider.action.inputData){dataProvider.action.inputData.searchInput=dataProvider.action.inputData.searchInput||{};var searchInput=dataProvider.action.inputData.searchInput;if(searchInput.attributesToInflate){searchInput.attributesToInflate=lodash_default.a.union(searchInput.attributesToInflate,columnAttrs);}else{searchInput.attributesToInflate=columnAttrs;}}// Since VMOs represent columns, we need to reset the columns also for transpose mode\nif(gridOptions.transpose===true){resetColumns();}// REFACTOR: infinite scroll code should be refactor to follow:\n// 1. DOMElement should be the only interface for interaction between service and function\n// 2. Lot of code below should be pull out from anonymous function, a initialize grid which\n//    is taking 70 line of code is a bad smell.\nif(!tableScroll.isInitialized()){// Set initial scroll index before table initializes\nif(dataProvider.isFocusedLoad){var selection=dataProvider.getSelectedObjects();if(selection.length===1){scrollToRow(gridid,[selection[0].uid]);}}tableScroll.initializeGrid({tableElem:table,directiveElem:directiveElement,scrollViewportElem:_trv.getScrollCanvasElementFromTable(),pinViewportElem:_trv.getPinCanvasElementFromTable(),rowSelector:'.'+splmTableConstants[\"a\" /* default */].CLASS_ROW,rowHeight:_rowHeight+_rowBorderWidth,headerHeight:_headerHeight,dynamicRowHeightStatus:gridOptions.enableDynamicRowHeight,loadedVMObjects:getObjects(),updateVisibleCells:function(rowParentElem){tableCtrl.updateVisibleCells(rowParentElem);},updateScrollColumnsInView:function(scrollLeft,scrollContainerWidth){tableCtrl.updateScrollColumnsInView(scrollLeft,scrollContainerWidth);},onStartScroll:function(){if(!splmTableUtils[\"a\" /* default */].isBulkEditing(table)||!editCellElement){return;}// Close drop down if it is open on the edit cell\nvar cellListElement=editCellElement.getElementsByClassName('aw-jswidgets-popUpVisible')[0];if(cellListElement){editCellElement.click();}},syncHeader:function(isPin,scrollLeft){let traversalTable=new splmTableTraversal[\"a\" /* default */](table);splmTableUtils[\"a\" /* default */].syncHeader(traversalTable,isPin,scrollLeft);},renderRows:function(startIndex,endIndex){var subVMObjects=getObjects().slice(startIndex,endIndex+1);// Return if there is nothing to render\nif(subVMObjects.length===0){return;}if(gridOptions.useTree===true){let messages=gridOptions.textBundle?gridOptions.textBundle:splmTableFactory_splmTableMessages;lodash_default.a.forEach(subVMObjects,function(vmo){if(vmo.isLeaf){vmo._twistieTitle='';}else{vmo._twistieTitle=vmo.isExpanded?messages.TwistieTooltipExpanded:messages.TwistieTooltipCollapsed;}if(!splmTableUtils[\"a\" /* default */].isExpandAllowed(table)){vmo._twistieTitle='';}});}var insertBefore=false;var scrollContents=_trv.getScrollContentElementFromTable();var pinContents=_trv.getPinContentElementFromTable();var firstPinElement=pinContents.childElementCount>0?pinContents.childNodes[0]:0;var firstScrollElement=scrollContents.childElementCount>0?scrollContents.childNodes[0]:0;if(firstScrollElement&&firstScrollElement.getAttribute('data-indexNumber')){var firstRowIdx=parseInt(firstScrollElement.getAttribute('data-indexNumber'));insertBefore=firstRowIdx>startIndex;}var pinContentElement=tableCtrl.constructContentElement(subVMObjects,startIndex,_rowHeight,true);var scrollContentElement=tableCtrl.constructContentElement(subVMObjects,startIndex,_rowHeight,false);tableCtrl.setAriaLabelledAndDescribedBy(directiveElement,_trv.getTableContainerElementFromTable());tableCtrl.setAriaRowCount(_trv.getTableContainerElementFromTable());if(table._tableInstance.dynamicRowHeightStatus){tableCtrl.syncContentRowHeights(pinContentElement,scrollContentElement);}splmTableSelectionHelper[\"default\"].updateContentRowSelection(dataProvider.selectionModel,dataProvider.cols,pinContentElement.childNodes,scrollContentElement.childNodes,table);if(insertBefore){_trv.getPinContentElementFromTable().insertBefore(pinContentElement,firstPinElement);_trv.getScrollContentElementFromTable().insertBefore(scrollContentElement,firstScrollElement);}else{_trv.getPinContentElementFromTable().appendChild(pinContentElement);_trv.getScrollContentElementFromTable().appendChild(scrollContentElement);}if(table._tableInstance.focusTreeNodeExpandAfterRender){let node=table._tableInstance.focusTreeNodeExpandAfterRender;let rowContents=_trv.queryAllRowCellElementsFromTable();let rowElem=lodash_default.a.filter(rowContents,{vmo:node})[0];if(rowElem){let elementToFocus=rowElem.getElementsByClassName(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TREE_NODE_TOGGLE_CMD)[0];elementToFocus&&elementToFocus.focus();}}},removeRows:function(upperCount,lowerCounter){cellRenderer.resetHoverCommandElement();tableCtrl.removeContentElement(upperCount,lowerCounter);tableCtrl.setAriaRowCount(_trv.getTableContainerElementFromTable());},afterGridRenderCallback:function(firstRenderedItem,lastRenderedItem){let containerElement=_trv.getTableContainerElementFromTable();if(containerElement&&containerElement.hasAttribute('aria-activedescendant')){var activedescendantId=containerElement.getAttribute('aria-activedescendant');if(!document.getElementById(activedescendantId)){containerElement.removeAttribute('aria-activedescendant');}}var isEditing=splmTableUtils[\"a\" /* default */].isBulkEditing(table);let loadingProps=false;if(isEditing){updateEditStatusForTableCanvas(isEditing);}if(gridOptions.useTree===true){if(_nodeExpansionInProgress===true){return;}var nonPlaceholderFound=false;for(var i=lastRenderedItem.index;i>=firstRenderedItem.index;i--){var vmo=dataProvider.viewModelCollection.loadedVMObjects[i];if(dataProvider.focusAction){if(vmo._focusRequested){return;}if(vmo.isPlaceholder){// ...use .isPlaceholder or .isFocusParent instead\nif(nonPlaceholderFound){delete vmo.isPlaceholder;vmo._focusRequested=true;tableInstanceCallbacks.doFocusPlaceHolder(vmo);return;}}else{nonPlaceholderFound=true;}}}// Find and expand the first of any nodes that need to be expanded\nfor(var j=firstRenderedItem.index;j<=lastRenderedItem.index;j++){var vmObject=dataProvider.viewModelCollection.loadedVMObjects[j];var expandNode=false;if(vmObject.isLeaf!==true&&vmObject._expandRequested!==true&&vmObject.isExpanded!==true){// Mark for expansion if the node was already expanded\nif(splmTableUtils[\"a\" /* default */].performStateServiceAction('isNodeExpanded',declViewModel,gridid,vmObject)){expandNode=true;}}// Expand the node\nif(expandNode===true){vmObject.isExpanded=true;if(tableInstanceCallbacks.toggleTreeNode){tableInstanceCallbacks.toggleTreeNode(vmObject);}else{eventBus[\"a\" /* default */].publish(table.id+'.plTable.toggleTreeNode',vmObject);}return;}}// If any VMOs need props to be loaded, we will call for the props to be loaded and not\n// render the rows. The row rendering will then occur once they props have been loaded.\nvar emptyVMOs=findVMOsWithMissingProps(firstRenderedItem.index,lastRenderedItem.index);if(emptyVMOs.length>0){loadProps(emptyVMOs);loadingProps=true;}}if(splmTableUtils[\"a\" /* default */].isPaginationAllowed(table)){// _loadMorePageDebounce( firstRenderedItem, lastRenderedItem );\nif(tableInstanceCallbacks){_loadMorePageDebounce(firstRenderedItem,lastRenderedItem,tableInstanceCallbacks);tableInstanceCallbacks.loadMorePages({firstRenderedItem:firstRenderedItem,lastRenderedItem:lastRenderedItem});}}// Set scrollToRow to false after row is scrolled to and all\n// visible nodes around the scrolled to row are expanded\nif(dataProvider.scrollToRow===true&&tableScroll.isInitialRowIndexInView()===true){dataProvider.scrollToRow=false;}}});tableScroll.renderInitialRows();var setContainerHeightEvent=eventBus[\"a\" /* default */].subscribe(gridid+'.plTable.containerHeightUpdated',function(heightVal){updateContainerHeight(heightVal);});instanceEventSubcr.push(setContainerHeightEvent);}else{// reset the row height cache\ntableScroll.resetRowHeightCache();// Set the loaded view model objects\ntableScroll.setLoadedVMObjects(getObjects());// Render initial rows if at top of table\nif(_trv.getScrollCanvasElementFromTable().scrollTop===0){tableScroll.renderInitialRows();}else{tableScroll.handleScroll();}}};let clientRefresh=function(){if(table&&table._tableInstance){table._tableInstance.showCheckBox=_showCheckBox;}splmTableUtils[\"a\" /* default */].cleanupComponents(table);refresh();};let updateContainerHeight=function(heightVal){tableScroll.setContainerHeight(heightVal);tableScroll.initializeProperties();tableScroll.handleScrollDown();};let updateDynamicRowHeight=function(dynamicRowHeightStatus){table._tableInstance.dynamicRowHeightStatus=dynamicRowHeightStatus;tableScroll.setDynamicRowHeight(table._tableInstance.dynamicRowHeightStatus);clientRefresh();if(!table._tableInstance.dynamicRowHeightStatus){resetDynamicRowHeights();}};let updatePinColumn=(columnDef,isFreezeAction,defaultColumnPinIndex)=>{const pinColumnIndex=isFreezeAction?columnDef.index:defaultColumnPinIndex;tableCtrl.pinToColumn(pinColumnIndex);if(!isFreezeAction){tableCtrl.resetFreezeScroll(columnDef.field);}tableScroll.handlePinViewportScrollbarPadding();};let hideColumn=columnFieldName=>{let columnDef;var columns=dataProvider.cols;lodash_default.a.forEach(columns,function(currentColumn){if(currentColumn.field===columnFieldName){columnDef=currentColumn;return false;}});if(columnDef){var columnIndex=columnDef.index;let isOnlyVisibleColumn=true;lodash_default.a.forEach(columns,function(currentColumn){if(currentColumn.name!==columnDef.name&&currentColumn.visible===true&&currentColumn.name!=='icon'){isOnlyVisibleColumn=false;return false;}});if(!isOnlyVisibleColumn){if(columnProvider.isArrangeSupported()&&columnProvider.hideColumn){// account for hidden columns\nif(dataProvider.cols[columnIndex].propertyName!==columnDef.propertyName){for(var i=0;i<columns.length;i++){if(columns[i].propertyName===columnDef.propertyName){columnIndex=i;break;}}}columnProvider.hideColumn(columnIndex);}tableCtrl.updateColumnVisibility(columnDef.field);if(columnDef.filter&&columnDef.filter.isFilterApplied){const eventData={gridId:gridid,column:columnDef};eventBus[\"a\" /* default */].publish('pltable.columnFilterApplied',eventData);}}else{localeService[\"default\"].getLocalizedText('UIMessages','hideColumnOnlyVisibleError').then(function(message){messagingService[\"a\" /* default */].showError(message);});}}};let resetDynamicRowHeights=function(){if(dataProvider.viewModelCollection){lodash_default.a.forEach(dataProvider.viewModelCollection.loadedVMObjects,function(vmo){delete vmo.rowHeight;});}};let resetInfiniteScroll=function(){if(tableScroll&&tableScroll.isInitialized()){tableScroll.resetInfiniteScroll();}};let maintainScrollPosition=function(){tableScroll.setScrollPositionToBeMaintained();};let unsetScrollToRowIndex=function(){if(tableScroll&&tableScroll.isInitialized()){tableScroll.resetInitialRowIndex();}};let relatedModified=function(){if(listenToRelatedModifiedEvent){listenToRelatedModifiedEvent=false;var selectionModel=dataProvider.selectionModel;if(selectionModel){selectionHelper[\"a\" /* default */].handleSelectionEvent([targetVMOScoped],selectionModel,null,dataProvider);splmTableSelectionHelper[\"default\"].updateContentRowSelection(dataProvider.selectionModel,dataProvider.cols,_trv.getPinContentRowElementsFromTable(),_trv.getScrollContentRowElementsFromTable(),table);}}};let columnsResized=function(eventData){// Prevent columnSizeChanged for transpose mode since the columns in transpose represent VMOs\n// and not the columns in the columnProvider\nif(gridOptions.transpose!==true){columnProvider.columnSizeChanged(eventData.name,eventData.delta);}if(table._tableInstance.dynamicRowHeightStatus){resetDynamicRowHeights();clientRefresh();}};let columnsRearranged=function(eventData){if(gridOptions.transpose===true){// Update the dom columns so they reflect correct data\n// and return since the columns represent VMOs and not the columns in\n// the columnProvider\nresetColumns();return;}// Get column position in relation to all columns, not just visible columns\nvar originalPosition=eventData.originalPosition;var newPosition=null;// Get new position index\nlodash_default.a.forEach(dataProvider.cols,function(column){if(eventData.name===column.name){newPosition=column.index;}});// Adjust for hidden columns\nlodash_default.a.forEach(dataProvider.cols,function(column,index){if(column.hiddenFlag===true&&index<=newPosition){newPosition+=1;}if(column.hiddenFlag===true&&index<=originalPosition){originalPosition+=1;}});// awColumnService adjusts the column positions when the icon column is not present.\n// By incrementing the positions by 1, we are able to ensure awColumnService still uses\n// the correct column positions. Once  UI-Grid is removed, we can remove this hack and update awColumnService\n// to not adjust positions when icon column is not present.\nif(dataProvider.cols&&dataProvider.cols[0].name!=='icon'){originalPosition+=1;newPosition+=1;}if(originalPosition!==null&&newPosition!==null){columnProvider.columnOrderChanged(eventData.name,originalPosition,newPosition);}};return{getDynamicRowHeightStatus:function(){return table._tableInstance.dynamicRowHeightStatus;},resetDynamicRowHeights:resetDynamicRowHeights,updateDynamicRowHeight:updateDynamicRowHeight,maintainScrollPosition:maintainScrollPosition,unsetScrollToRowIndex:unsetScrollToRowIndex,relatedModified:relatedModified,columnsResized:columnsResized,columnsRearranged:columnsRearranged,resetInfiniteScroll:resetInfiniteScroll,getTableElement:function(){return table;},updateContentRowSelection:updateContentRowSelection,updateContainerHeight:updateContainerHeight,updateSortDirection:updateSortDirection,updatePinColumn:updatePinColumn,hideColumn:hideColumn,/**\n         * Reset columns for PL Table\n         * this method out of exports.initializeTable, cannot do it now since it depends on dataProvider\n         * any other members whose scope is inside initializeTable.\n         */resetColumns:function(){resetColumns();},updateEditState:updateEditState,removeStaleFilters:function(columns){awColumnFilterService[\"default\"].removeStaleFilters(columnProvider,columns||_tableColumns);},setNodeExpansionInProgress:function(isInProgress){_nodeExpansionInProgress=isInProgress;},updateFilterIcons:function(columnName){if(columnName){tableCtrl.updateFilterIcon(columnName);}else{tableCtrl.updateAllFilterIcons();}},setFilterDisability:function(isDisabled){menuService.setFilterDisability(isDisabled);},loadMissingProps:function(){loadMissingProps();},updateTreeCellIcon:function(vmo){const rowContents=_trv.queryAllRowCellElementsFromTable();lodash_default.a.forEach(rowContents,function(rowElem){if(rowElem.vmo){const matchingId=_contentFilter.isIdOfObject(rowElem.vmo,uwUtilService[\"a\" /* default */].getEvaluatedId(vmo));if(matchingId===true){// Only update if there is expand/collapse button available\nlet treeNodeCommandElement=rowElem.querySelector(\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_WIDGET_TREE_NODE_TOGGLE_CMD));if(treeNodeCommandElement){const iconCell=getIconCellSVG(vmo);// this if check is for the vmo.isLeaf use case where there is no need to render an icon\nlet iconContainerElement=treeNodeCommandElement.querySelector(\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_ICON_BASE));if(iconContainerElement&&iconCell&&iconCell.image&&iconCell.image.length>0){// add both for consistency, same as AwIcon\niconContainerElement=splmTableUtils[\"a\" /* default */].addAttributeToDOMElement(iconContainerElement,'iconId',iconCell.id);iconContainerElement=splmTableUtils[\"a\" /* default */].addAttributeToDOMElement(iconContainerElement,'icon-id',iconCell.id);treeNodeCommandElement.title=vmo._twistieTitle;iconContainerElement.innerHTML=iconCell.image;}}}}});},/**\n         * Refreshes the content in the table with the data currently in the dataProvider\n         */refresh:refresh,updateInstanceState:function(newState){declViewModel=newState;table._tableInstance.declViewModel=newState;}};};/**\n *  Release the resources occupied by SPLM table\n *\n * @param {String} gridId - Grid ID to be destroyed\n * @param {Element} tableElement - The table element\n * @param {Object} columnDefs - The column defs\n */let destroyTable=function(gridId,tableElement,columnDefs){var table=tableElement.querySelector(\".\".concat(splmTableConstants[\"a\" /* default */].CLASS_TABLE));var instance=table&&table._tableInstance||{};var instanceEventSubcr=instance.subDefs;lodash_default.a.forEach(instanceEventSubcr,function(eventBusSub){if(eventBusSub!==null){eventBus[\"a\" /* default */].unsubscribe(eventBusSub);}});for(var i=0;i<columnDefs.length;i++){var cellRenderers=columnDefs[i].cellRenderers;if(cellRenderers){for(var j=0;j<cellRenderers.length;j++){if(lodash_default.a.isFunction(cellRenderers[j].destroy)){cellRenderers[j].destroy();}}}}// Cleanup any leftover components\nsplmTableUtils[\"a\" /* default */].cleanupComponents(tableElement);// Destroy the column/table menu\nvar menu=document.getElementById(gridId+'_menuContainer');if(menu!==null){menu.parentElement.removeChild(menu);}// Destroy table renderer\nif(instance.renderer){instance.renderer.destroyGrid();}// table editor eventBusSubs unsubscribe\nif(instance.editor){instance.editor.destroy();}// NOTE: This is not need for now since we force every\n// angularJS Compile must based on table scope. But leave\n// it here for now by commenting it out.\n// var cellRenderer = _cellRendererDefs[gridId];\n// cellRenderer.destroyHoverCommandElement();\n// delete _cellRendererDefs[gridId];\ninstance.isDestroyed=true;eventBus[\"a\" /* default */].publish('tableDestroyed');};splmTableFactory_splmTableMessages.arrangeMenu=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.arrangeMenu');splmTableFactory_splmTableMessages.removeAllFilters=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.removeAllFilters');splmTableFactory_splmTableMessages.TwistieTooltipExpanded=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.TwistieTooltipExpanded');splmTableFactory_splmTableMessages.TwistieTooltipCollapsed=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.TwistieTooltipCollapsed');splmTableFactory_splmTableMessages.hideColumn=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.hideColumn');splmTableFactory_splmTableMessages.sortAscending=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.sortAscending');splmTableFactory_splmTableMessages.sortDescending=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.sortDescending');splmTableFactory_splmTableMessages.removeSort=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.removeSort');splmTableFactory_splmTableMessages.freezeMenu=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.freezeMenu');splmTableFactory_splmTableMessages.unfreezeMenu=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.unfreezeMenu');splmTableFactory_splmTableMessages.visibilityControlsTitle=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.visibilityControlsTitle');splmTableFactory_splmTableMessages.gridMenu=localeService[\"default\"].getLoadedTextFromKey('treeTableMessages.gridMenu');splmTableFactory_exports={createTableObject,destroyTable};/* harmony default export */ var splmTableFactory = (splmTableFactory_exports);\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/propertyrender/src/js/awTableService.js\nvar awTableService = __webpack_require__(134);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/layout/src/js/resizeObserver.service.js\nvar resizeObserver_service = __webpack_require__(128);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/propertyrender/src/js/awTableStateService.js\nvar awTableStateService = __webpack_require__(507);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/propertyrender/src/js/viewModelObjectService.js + 1 modules\nvar viewModelObjectService = __webpack_require__(31);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/kernel/src/js/awConfiguration.js\nvar awConfiguration = __webpack_require__(55);\n\n// EXTERNAL MODULE: ./node_modules/@swf/core/src/declarativeui/src/js/declarativeDataCtxService.js + 2 modules\nvar declarativeDataCtxService = __webpack_require__(47);\n\n// CONCATENATED MODULE: ./node_modules/@swf/core/src/pltable/src/js/awSPLMTableNativeService.js\n// Copyright (c) 2021 Siemens\n/**\n * @module js/awSPLMTableNativeService\n */const initializeTable=function(element,viewModelCollection,dataCtxNode,declGridParam,runActionWithViewModel){// revisitme:\n// tstark - leave for refactor\n// - viewModelCollection has no use here.\n// - passing element as ref can save one factor of memory leak.\n// - But the dataCtxNode and declGridParam is too complex, we have viewModel -> data -> dataProvider,\n//   almost impossible to know where the closure is getting hold. The fact I know is by dummy the data,\n//   the symptom will go away\nlet tableCallbacks={};let declGridObj={...declGridParam};const gridid=declGridObj.gridid;const dataProvider=declGridObj.dataProviderInstance;const columnProvider=declGridObj.columnProviderInstance;declarativeDataCtxService[\"a\" /* default */].applyScope(dataCtxNode.data,declGridObj.gridOptions,null,dataCtxNode,null);let gridOptions=declGridObj.gridOptions;let declViewModel=dataCtxNode.data;var instanceEventSubcr=[];var tableInstance=null;let tableElem=null;var _previousSelections=[];const tableInstanceCallbacks={};columnProvider.setColumnFilters([]);/**\n      * Refresh the table content by invoking the action to reload first page of data provider\n      */var reloadDataProvider=function(){if(gridid){if(dataProvider&&dataProvider.json&&dataProvider.json.firstPage){delete dataProvider.json.firstPage;}dataProvider.resetDataProvider();/**\n              * revisitme Shaishav: This code should be deleted as we rely on react to reload data\n              * tstark - leave for refactor\n              * Delete firstPage results only on dataProvider reset\n             if( dataProvider && dataProvider.json && dataProvider.json.firstPage ) {\n                 delete dataProvider.json.firstPage;\n             }\n             viewModelSvc.executeCommand( declViewModel, dataProvider, dataCtxNode );\n              */}};if(gridid){var propertyProvider=declViewModel.dataProviders[declGridObj.propertyProvider];if(!columnProvider.sortCallback){columnProvider.sortCallback=function(){reloadDataProvider();};}// Attach enableArrangeMenu to gridOptions because we are not passing grid into splmTable\ngridOptions=gridOptions||{};gridOptions.enableArrangeMenu=declGridObj.enableArrangeMenu;gridOptions.showContextMenu=!lodash_default.a.isNil(declGridObj.showContextMenu)?declGridObj.showContextMenu:gridOptions.showContextMenu;gridOptions.showDecorators=declGridObj.showDecorators;gridOptions.useTree=declGridObj.useTree;// Turn on grid menu if arrange command is enabled, only if not set by grid\nif(gridOptions.enableGridMenu===undefined&&gridOptions.enableArrangeMenu){gridOptions.enableGridMenu=true;}// Turn on XXLARGE header height if enableHeaderIcon is enabled\nif(gridOptions.enableHeaderIcon===true){gridOptions.headerHeight='XXLARGE';}var _loadTreeProperties=function(propertyLoadRequest){var propertyLoadInput=awTableService[\"a\" /* default */].createPropertyLoadInput([propertyLoadRequest]);return propertyProvider.getProperties(dataCtxNode,propertyLoadInput).then(function(propertyLoadResult){if(dataProvider.topNodeUid){lodash_default.a.forEach(propertyLoadResult.updatedNodes,function(vmo){if(vmo.uid===dataProvider.topNodeUid){// Assign on props doesn't work if it's undefined, doing this for now to make it work.\nif(dataProvider.topTreeNode.props===undefined){dataProvider.topTreeNode.props={};}lodash_default.a.assign(dataProvider.topTreeNode.props,vmo.props);}// Reset edit state since props have loaded\nviewModelObjectService[\"default\"].setEditState(vmo,false);delete vmo.isPropLoading;});if(propertyLoadResult.updatedNodes){tableInstance.refresh();}}if(!propertyLoadResult.columnConfig){// Notify table to refresh if no columnConfig change to reflect new prop values in vmos\ntableInstance.refresh();}else if(propertyLoadResult.columnConfig.columns.length!==dataProvider.cols.length){/** revisitme Shaishav: Can we make the new condition similar to old condition? Will there\n                       * be extra refreshes because of new condition?\n                       * tstark - leave for refactor\n                  //} else if( !_.isEqual( propertyLoadResult.columnConfig.columns, dataProvider.columnConfig.columns ) ) {\n                       */ // LCS-178290 - Redundant refresh in page load\n// Do column Refresh only in the case we have new columnConfig from server\ncolumnProvider.buildDynamicColumns(propertyLoadResult.columnConfig.columns,true).then(()=>{tableInstance.resetColumns();});}if(splmTableUtils[\"a\" /* default */].shouldRequestStartEditPropsLoaded(tableElem)){splmTableUtils[\"a\" /* default */].requestStartEdit(tableElem);}});};var _loadProps=lodash_default.a.debounce(function(emptyVMOs){/**\n              * Since debounced functions have a slight chance of being fired off after a maxWait and after the\n              * declViewModelhas been destroyed (and before the debounce 'cancel' function is called), we want to\n              * check for that case here.\n              */if(declViewModel.isDestroyed()){return;}/**\n              * Include 'top' node if it does not have 'props' set yet.\n              */if(!dataProvider.topTreeNode.props){var topNodeUid=dataProvider.topTreeNode.uid;var foundTop=false;for(var i=0;i<emptyVMOs.length;i++){if(emptyVMOs[i].uid===topNodeUid){foundTop=true;break;}}if(!foundTop){emptyVMOs.push(dataProvider.topTreeNode);}}// Return if there are no props to load\nif(emptyVMOs.length===0){return;}var columnInfos=[];lodash_default.a.forEach(dataProvider.cols,function(columnInfo){if(!columnInfo.isTreeNavigation){columnInfos.push(columnInfo);}});lodash_default.a.forEach(emptyVMOs,function(vmo){vmo.isPropLoading=true;});var propertyLoadRequest={parentNode:null,childNodes:emptyVMOs,columnInfos:columnInfos};_loadTreeProperties(propertyLoadRequest);},500,{maxWait:10000,trailing:true,leading:false});var initializeProvider=function(dataProvider,columnProvider,passedState){return columnProvider.initialize(passedState).then(function(dynamicColumns){dataProvider.cols=dataProvider.cols?dataProvider.cols:dynamicColumns;/**\n                  * Dont re-initialize DP if it already exists => Doesn't matter if empty table or table with rows\n                  */if(dataProvider.json&&dataProvider.json.firstPage){/**\n                      * revisitme Shaishav: This code should be deleted as we rely on react to reload data\n                      * tstark - leave for refactor\n                      * Delete firstPage results only on dataProvider reset\n                     // If first page but no data loaded in loadedVMObjects, try viewModelSvc executing the dataprovider\n                     if( dataProvider.json.firstPage.length > 0 && dataProvider.viewModelCollection &&\n                         dataProvider.viewModelCollection.loadedVMObjects && dataProvider.viewModelCollection.loadedVMObjects.length === 0 ) {\n                             viewModelSvc.executeCommand( declViewModel, declGrid.dataProvider, $scope );\n                     }\n                     */ // Do Nothing\nreturn null;}return dataProvider.initialize(dataCtxNode).then(function(){if(!dataProvider.cols||dataProvider.cols.length===0){if(!dataProvider.columnConfig){return Promise.reject(new Error('Column config not loaded'));}return columnProvider.buildDynamicColumns(dataProvider.columnConfig.columns,true);}return null;});});};tableCallbacks.completeInitialization=()=>{if(dataProvider.columnConfig){dataProvider.initializationComplete='InProgress';return columnProvider.buildDynamicColumns(dataProvider.columnConfig.columns,true).then(()=>{var gridContextDispatcher=dataCtxNode.gridContextDispatcher;if(declGridObj.reusable){gridContextDispatcher=declGridObj.gridContextDispatcher;}tableInstance=splmTableFactory.createTableObject(element,gridid,dataProvider,viewModelCollection,columnProvider,declViewModel,declGridObj.contentFilter,gridOptions,declGridObj.containerheight,gridContextDispatcher,runActionWithViewModel,tableInstanceCallbacks,declGridObj.tableContext,declGridObj.reusable,declGridObj.showCheckBox);tableInstance.showCheckBox=declGridObj.showCheckBox;tableInstance.resetColumns();tableInstance.viewModelCollection=viewModelCollection;tableInstance.refresh();initializeObserver();tableElem=tableInstance.getTableElement();dataProvider.initializationComplete=true;if(declGridObj.containerHeight){tableInstance.updateContainerHeight(declGridObj.containerHeight);}// Event Interface to rerender the table with data currently on the client\ninstanceEventSubcr.push(eventBus[\"c\" /* subscribe */](gridid+'.plTable.clientRefresh',function(){lodash_default.a.defer(function(){tableInstance.showCheckBox=declGridObj.showCheckBox;if(tableElem&&tableElem._tableInstance){tableElem._tableInstance.showCheckBox=declGridObj.showCheckBox;}splmTableUtils[\"a\" /* default */].cleanupComponents(element);tableInstance.refresh();});}));});}};tableCallbacks.updateTableColumns=updatedColumns=>{if(updatedColumns&&updatedColumns.length>0){columnProvider.buildDynamicColumns(updatedColumns,true).then(()=>{if(tableInstance!==null){tableInstance.resetColumns();}});}};tableCallbacks.updateContentRowSelection=()=>{tableInstance&&tableInstance.updateContentRowSelection();};tableCallbacks.selectTableColumn=columnDef=>{if(columnDef){splmTableSelectionHelper[\"default\"].selectColumnCells(tableInstance.getTableElement(),columnDef.field);}};tableCallbacks.updateSortDirection=(currentColumnIndex,newColumnIndex,sortDirection)=>{if(newColumnIndex>-1){tableInstance&&tableInstance.updateSortDirection(currentColumnIndex,newColumnIndex,sortDirection);reloadDataProvider();}};tableCallbacks.updateDynamicRowHeight=dynamicRowHeightStatus=>{tableInstance&&tableInstance.updateDynamicRowHeight(dynamicRowHeightStatus);};tableCallbacks.updatePinColumn=(columnDef,isFreezeAction,defaultColumnPinIndex)=>{if(columnDef&&defaultColumnPinIndex>-1){tableInstance&&tableInstance.updatePinColumn(columnDef,isFreezeAction,defaultColumnPinIndex);}};tableCallbacks.hideColumn=columnDef=>{if(columnDef){tableInstance&&tableInstance.hideColumn(columnDef);}};tableCallbacks.columnFilterApplied=columnFilterInfo=>{// viewModel columnProvider needed because columnFilters with be needed by the viewModel action inputs\n// revisitme - Send event to all application listeners, remove when converted\nconst eventData={isInternalTableEvent:true,gridId:gridid,...columnFilterInfo};eventBus[\"b\" /* publish */]('pltable.columnFilterApplied',eventData);const menuService=splmTableUtils[\"a\" /* default */].getTableMenuService(tableElem);menuService.ensureAllTableMenusDismissed();if(columnFilterInfo.filters&&columnFilterInfo.filters.length){awColumnFilterService[\"default\"].setFilters(columnProvider,dataProvider,columnFilterInfo.filters,columnFilterInfo.column);}else if(columnFilterInfo.column){awColumnFilterService[\"default\"].removeFilter(columnFilterInfo.column,columnProvider,dataProvider);}else{awColumnFilterService[\"default\"].removeAllFilters(dataProvider,columnProvider);}dataProvider.isColumnFilterApplied=awColumnFilterService[\"default\"].isColumnFilterApplied(dataProvider);const columnName=columnFilterInfo.column?columnFilterInfo.column.field:null;tableInstance.updateFilterIcons(columnName);reloadDataProvider();};tableCallbacks.editStateUpdated=()=>{const data={dataSource:dataProvider,state:dataProvider._editingState};tableInstance.updateEditState(data);};tableCallbacks.updateEditState=async props=>{if(props&&props.tableContext){if(props.tableContext.startEdit&&props.tableContext.startEdit.value===true){await dataProvider.startEdit(props.dataCtxNode,props.dataCtxNode.data);if(props.tableContext.startEdit.update){props.tableContext.startEdit.update(false);}if(props.tableContext.isBulkEditing&&props.tableContext.isBulkEditing.update){props.tableContext.isBulkEditing.update(true);}}else if(props.tableContext.cancelEdit&&props.tableContext.cancelEdit.value===true){await dataProvider.cancelEdits(props.dataCtxNode,props.dataCtxNode.data);if(props.tableContext.cancelEdit.update){props.tableContext.cancelEdit.update(false);}if(props.tableContext.isBulkEditing&&props.tableContext.isBulkEditing.update){props.tableContext.isBulkEditing.update(false);}}else if(props.tableContext.saveEdit&&props.tableContext.saveEdit.value===true){await dataProvider.saveEdits(props.dataCtxNode,props.dataCtxNode.data);if(props.tableContext.saveEdit.update){props.tableContext.saveEdit.update(false);}if(props.tableContext.isBulkEditing&&props.tableContext.isBulkEditing.update){props.tableContext.isBulkEditing.update(false);}}}};const initializeObserver=()=>{if(resizeObserver_service[\"a\" /* default */].supportsResizeObserver()){const callback=lodash_default.a.debounce(()=>{eventBus[\"b\" /* publish */](gridid+'.plTable.resizeCheck');},200,{maxWait:10000,trailing:true,leading:false});resizeObserver_service[\"a\" /* default */].observe(element,callback);}};if(gridOptions.useTree===true){instanceEventSubcr.push(eventBus[\"c\" /* subscribe */](gridid+'.plTable.loadProps',function(eventData){_loadProps(eventData.VMOs);}));instanceEventSubcr.push(eventBus[\"c\" /* subscribe */]('primaryWorkarea.reloadTop',function(event){var clearAllStates=!(event&&event.retainAllStates);if(clearAllStates){awTableStateService[\"a\" /* default */].clearAllStates(declViewModel,gridid);}/*\n                  * delete firstPage results if any before re-initializing dataProvider\n                  */if(dataProvider.json.firstPage){delete dataProvider.json.firstPage;}dataProvider.initialize(dataCtxNode);}));const toggleTreeNode=function(node){if(!node.loadingStatus){node.loadingStatus=true;tableInstance.updateTreeCellIcon(node);// get the current copy of data\nObject.assign(dataCtxNode.data.data,dataCtxNode.data.getData());if(node.isExpanded===true){tableInstance.setNodeExpansionInProgress(true);node._expandRequested=true;var preExpandVMObjectsLength=dataProvider.viewModelCollection.loadedVMObjects.length;dataProvider.expandObject(dataCtxNode,node).then(function(updatedViewModelCollection){// LCS-180794: If Expand did not return any new objects or\n//if node has previous expansion state and dataProvider.cacheCollapse=true which means it didn't get new objects from server,\n// continue updating the rest of the table\ntableInstance.setNodeExpansionInProgress(false);if(preExpandVMObjectsLength===updatedViewModelCollection.loadedVMObjects.length){delete node.loadingStatus;tableInstance.refresh();}//view model collection is updated so update table with new set of VMOs.\ndataProvider.update(updatedViewModelCollection.loadedVMObjects);}).finally(function(){// Make sure even when errored that the expansion in progress is set to false\ntableInstance.setNodeExpansionInProgress(false);//ensure properties are loaded after expansion\n// If any VMOs need props to be loaded, we will call for the props to be loaded and not\n// render the rows. The row rendering will then occur once they props have been loaded.\ntableInstance.loadMissingProps();delete node.loadingStatus;delete node._expandRequested;tableInstance.updateTreeCellIcon(node);tableElem._tableInstance.focusTreeNodeExpandAfterRender=node;if(splmTableUtils[\"a\" /* default */].shouldRequestStartEditTreeExpand(tableElem,node,propertyProvider)){splmTableUtils[\"a\" /* default */].requestStartEdit(tableElem);}});awTableStateService[\"a\" /* default */].saveRowExpanded(declViewModel,gridid,node);}else{dataProvider.collapseObject(dataCtxNode,node).then(function(updatedViewModelCollection){dataProvider.update(updatedViewModelCollection.loadedVMObjects);if(preExpandVMObjectsLength===updatedViewModelCollection.loadedVMObjects.length){tableInstance.refresh();}}).finally(function(){delete node.loadingStatus;tableInstance.updateTreeCellIcon(node);tableElem._tableInstance.focusTreeNodeExpandAfterRender=node;});awTableStateService[\"a\" /* default */].saveRowCollapsed(declViewModel,gridid,node);}}};instanceEventSubcr.push(eventBus[\"c\" /* subscribe */](gridid+'.plTable.toggleTreeNode',toggleTreeNode));if(declGridObj.reusable){tableInstanceCallbacks.toggleTreeNode=toggleTreeNode;}const doFocusPlaceHolder=function(vmNode){var vmCollection=dataProvider.viewModelCollection;var cursorNdx=vmCollection.findViewModelObjectById(uwUtilService[\"a\" /* default */].getEvaluatedId(vmNode));/**\n                 * Find 'parent' node of the 'placeholder' node in the vmCollection\n                 */var phParentNode=null;var cursorNode=vmCollection.getViewModelObject(cursorNdx);var parentLevelNdx=cursorNode.levelNdx-1;if(parentLevelNdx===-1){phParentNode=dataProvider.topTreeNode;}else{for(var rowNdx=cursorNdx-1;rowNdx>=0;rowNdx--){var currRow=vmCollection.getViewModelObject(rowNdx);if(currRow.levelNdx===parentLevelNdx){phParentNode=currRow;break;}}}if(phParentNode===null){return null;}/**\n                 * Load, using the 'focusAction', the siblings of the 'placeholder' in the context of its immediate\n                 * 'parent'.\n                 * <P>\n                 * Note: We want to use a smaller page size here to minimize the loading.\n                 */var treeLoadInput=awTableService[\"a\" /* default */].createTreeLoadInput(phParentNode,0,null,vmNode.id,dataProvider.treePageSize,true,null);var loadIDs={t_uid:dataProvider.topTreeNode.uid,o_uid:phParentNode.uid,c_uid:vmNode.uid,uid:null};var actionRequestObj={treeLoadInput:treeLoadInput,loadIDs:loadIDs};/**\n                 * Change 'suffix' text to indicate we are attempting to load more rows.\n                 */vmNode.loadingStatus=true;// get the current copy of data\nObject.assign(dataCtxNode.data.data,dataCtxNode.data.getData());return dataProvider.someDataProviderSvc.executeLoadAction(dataProvider.nextAction,dataProvider.json,dataCtxNode,actionRequestObj).then(function(response){/**\n                     * Locate cursor node in original collection & find/collect all contained 'child' nodes.\n                     */var cursorId=uwUtilService[\"a\" /* default */].getEvaluatedId(cursorNode);var cursorLevel=cursorNode.levelNdx;var vmCollection=dataProvider.viewModelCollection;var cursorNdxInOrig=vmCollection.findViewModelObjectById(cursorId);var loadedVMObjects=vmCollection.loadedVMObjects;var cursorVMObjects=[loadedVMObjects[cursorNdxInOrig]];for(var l=cursorNdxInOrig+1;l<loadedVMObjects.length;l++){var currNode=loadedVMObjects[l];if(currNode.levelNdx<=cursorLevel){break;}cursorVMObjects.push(currNode);}/**\n                     * Re-order the childNdx values of the sibling nodes relative to initial placeholder as 0;\n                     */var treeLoadResult=response.actionResultObj.responseObj.treeLoadResult;var newVMObjects=treeLoadResult.childNodes;var cursorNdxInNew=0;for(var i=0;i<newVMObjects.length;i++){if(newVMObjects[i].id===cursorId){cursorNdxInNew=i;break;}}for(var j=0;j<newVMObjects.length;j++){newVMObjects[j].childNdx=j-cursorNdxInNew;}/**\n                     * Check if the 'fresh' cursor node is at either end of the 'sibling' list and is now known to be an\n                     * 'incompleteHead' or 'incompleteTail'\n                     * <P>\n                     * If so: Move that status over to the 'original' cursor node.\n                     * <P>\n                     * Note: We are about to replace the 'fresh' node in the set of its siblings just returned and we do\n                     * not want to lose this important information.\n                     */if(cursorNdxInNew===0&&newVMObjects[0].incompleteHead){cursorNode.incompleteHead=true;}var lastNodeNdx=newVMObjects.length-1;if(cursorNdxInNew===lastNodeNdx&&newVMObjects[lastNodeNdx].incompleteTail){cursorNode.incompleteTail=true;}/**\n                     * Make sure the placeholder 'parent' node gets its 'children' set (a shallow clone is good enough).\n                     * <P>\n                     * Replace the 'fresh' cursor node with the 'original' cursor node since it holds important state\n                     * and hierarchy info.\n                     */phParentNode.children=lodash_default.a.clone(newVMObjects);phParentNode.children[cursorNdxInNew]=cursorNode;/**\n                     * Remove the 'fresh' cursor node from the array of its siblings.\n                     * <P>\n                     * Insert the cursor node (and all of its children from the original array) into the array of new\n                     * nodes.\n                     * <P>\n                     * Remove the cursor node (and all of its children) from the original array\n                     * <P>\n                     * Insert the new nodes (updated with the cursor node and all of its children from the original\n                     * array) into the vmCollection array of nodes.\n                     * <P>\n                     * Clear the loading status of the cursor node.\n                     */newVMObjects.splice(cursorNdxInNew,1);// LCS-230184 - In the case where no changes are made to the loadedVMObjects, we must manually refresh\n// so that the table can process the remaining rendered nodes for more focus placeholder, expansion\n// restoration, or prop loading.\nif(newVMObjects.length===0){delete vmNode.loadingStatus;delete vmNode._focusRequested;tableInstance.refresh();return;}var insertNdx=cursorNdxInNew-1;arrayUtils[\"a\" /* default */].insert(newVMObjects,insertNdx,cursorVMObjects);loadedVMObjects.splice(cursorNdxInOrig,cursorVMObjects.length);arrayUtils[\"a\" /* default */].insert(loadedVMObjects,cursorNdxInOrig-1,newVMObjects);delete vmNode.loadingStatus;delete vmNode._focusRequested;dataProvider.update(loadedVMObjects);/**\n                     * Fire a 'treeNodesLoaded' event, sourced to the uwDataProvider, for all tree-table changes. This\n                     * event includes only the input/result structures for the current load operation. This event is\n                     * used to load additional properties in an async fashion.\n                     */eventBus[\"b\" /* publish */](dataProvider.name+'.treeNodesLoaded',{treeLoadInput:treeLoadInput,treeLoadResult:treeLoadResult});/**\n                     * Fire a 'modelObjectsUpdated' event, sourced to the uwDataProvider, for all tree-table changes.\n                     * This event includes the complete array of nodes in the collection.\n                     */eventBus[\"b\" /* publish */](dataProvider.name+'.modelObjectsUpdated',{viewModelObjects:loadedVMObjects,noResults:false});});};tableInstanceCallbacks.doFocusPlaceHolder=doFocusPlaceHolder;}else{instanceEventSubcr.push(eventBus[\"c\" /* subscribe */](dataProvider.name+'.modelObjectsUpdated',function(event){if(event&&!event.arrangeColumnEvent){tableCallbacks.columnsArranged(event);}}));}tableCallbacks.columnsArranged=columnArrangeData=>{if(columnArrangeData.arrangeType&&columnArrangeData.arrangeType==='saveColumnAndLoadAction'&&columnArrangeData.viewModelObjects){// Just update data provider with vmos changed by columnArrangeService\ntableInstance.resetInfiniteScroll();dataProvider.update(columnArrangeData.viewModelObjects,columnArrangeData.totalFound);// Need to refresh the table since there is no watch anymore on loadedVMObjects\ntableInstance.refresh();}};/**\n          * Subscribe to resetState. Clear all states and set isFocusedLoad to true.\n          */instanceEventSubcr.push(eventBus[\"c\" /* subscribe */](dataProvider.name+'.resetState',function(){awTableStateService[\"a\" /* default */].clearAllStates(declViewModel,gridid);dataProvider.isFocusedLoad=true;}));awConfiguration[\"b\" /* get */]('propertyRendererTemplates');initializeProvider(dataProvider,columnProvider,dataCtxNode).then(()=>{var gridContextDispatcher=dataCtxNode.gridContextDispatcher;if(declGridObj.reusable){gridContextDispatcher=declGridObj.gridContextDispatcher;}tableInstance=splmTableFactory.createTableObject(element,gridid,dataProvider,viewModelCollection,columnProvider,declViewModel,declGridObj.contentFilter,gridOptions,declGridObj.containerheight,gridContextDispatcher,runActionWithViewModel,tableInstanceCallbacks,declGridObj.tableContext,declGridObj.reusable,declGridObj.showCheckBox);tableInstance.showCheckBox=declGridObj.showCheckBox;tableElem=tableInstance.getTableElement();initializeObserver();// Following refresh is for cases like object sets. Where first page is already loaded by stylesheet SOA\ntableInstance.viewModelCollection=viewModelCollection;tableInstance.refresh();dataProvider.initializationComplete=true;if(declGridObj.containerHeight){tableInstance.updateContainerHeight(declGridObj.containerHeight);}// Event Interface to rerender the table with data currently on the client\ninstanceEventSubcr.push(eventBus[\"c\" /* subscribe */](gridid+'.plTable.clientRefresh',function(){lodash_default.a.defer(function(){tableInstance.showCheckBox=declGridObj.showCheckBox;if(tableElem&&tableElem._tableInstance){tableElem._tableInstance.showCheckBox=declGridObj.showCheckBox;}splmTableUtils[\"a\" /* default */].cleanupComponents(element);tableInstance.refresh();});}));},error=>{dataProvider.initializationComplete=false;logger[\"a\" /* default */].trace(error);});}instanceEventSubcr.push(eventBus[\"c\" /* subscribe */]('columnArrange',function(eventData){if(eventData.name===gridid||eventData.columnConfigId&&dataProvider.columnConfig&&eventData.columnConfigId===dataProvider.columnConfig.columnConfigId){if(eventData.columns.length){tableInstance.removeStaleFilters(eventData.columns);}else{awColumnFilterService[\"default\"].removeAllFilters(dataProvider,columnProvider);}}if(tableInstance.getDynamicRowHeightStatus()){tableInstance.resetDynamicRowHeights();}}));var relatedModifiedEvent=eventBus[\"c\" /* subscribe */]('cdm.relatedModified',function(eventData){tableInstance.relatedModified();});instanceEventSubcr.push(relatedModifiedEvent);// Event Interface to rerender table with reloaded data from the dataprovider\ninstanceEventSubcr.push(eventBus[\"c\" /* subscribe */](gridid+'.plTable.reload',reloadDataProvider));// revisitme - tstark - Need to keep event until all application teams convert away from events\ninstanceEventSubcr.push(eventBus[\"c\" /* subscribe */]('pltable.columnFilterApplied',function(eventData){if(gridid===eventData.gridId&&eventData.isInternalTableEvent!==true){if(eventData.filters&&eventData.filters.length){awColumnFilterService[\"default\"].setFilters(columnProvider,dataProvider,eventData.filters,eventData.column);}else if(eventData.column){awColumnFilterService[\"default\"].removeFilter(eventData.column,columnProvider,dataProvider);}else{awColumnFilterService[\"default\"].removeAllFilters(dataProvider,columnProvider);}dataProvider.isColumnFilterApplied=awColumnFilterService[\"default\"].isColumnFilterApplied(dataProvider);const columnName=eventData.column?eventData.column.field:null;tableInstance.updateFilterIcons(columnName);reloadDataProvider();}}));tableCallbacks.updateColumnMenuData=function(columnMenuData){lodash_default.a.forEach(dataProvider.cols,function(currentColumn){if(columnMenuData.columnName===currentColumn.field){currentColumn.filter={...currentColumn.filter,...columnMenuData};currentColumn.filter.columnMenuData=columnMenuData;if(currentColumn.filter.showFilters){if(currentColumn.filter.showFilters.dbValue&&currentColumn.filter.showFilters.dbValue!=='false'){currentColumn.filter.showFilterFacets=true;}else{currentColumn.filter.showFilterFacets=false;}}return false;}});};// revisitme - tstark - Need to keep event until all application teams convert away from events\ninstanceEventSubcr.push(eventBus[\"c\" /* subscribe */](gridid+'.plTable.setFilterDisability',function(eventData){if(gridid===eventData.gridId){tableInstance.setFilterDisability(eventData.isFilterDisabled);}}));/**\n      *  destroy the table\n      */tableCallbacks.destroy=function(){var columns=[];if(dataProvider.columnConfig&&dataProvider.columnConfig.columns){columns=dataProvider.columnConfig.columns;}lodash_default.a.forEach(instanceEventSubcr,function(eventBusSub){eventBus[\"d\" /* unsubscribe */](eventBusSub);});splmTableFactory.destroyTable(gridid,element,columns);};tableCallbacks.updateVmCollection=viewModelCollection=>{if(tableInstance){tableInstance.viewModelCollection=viewModelCollection;if(splmTableUtils[\"a\" /* default */].shouldRequestStartEditPagination(tableElem)){splmTableUtils[\"a\" /* default */].requestStartEdit(tableElem);}tableInstance.refresh();}};tableCallbacks.updateDeclGridObject=declGridParam=>{declGridObj=declGridParam;};tableCallbacks.updateMenuContext=menuContext=>{declGridObj.menuContext=menuContext;};tableCallbacks.updateState=newState=>{declViewModel=newState;if(tableInstance){tableInstance.updateInstanceState(newState);}};tableCallbacks.refreshTable=()=>{if(tableInstance){tableInstance.refresh();}};tableCallbacks.updateGridOptionsForTableInstance=props=>{if(tableElem&&tableElem._tableInstance&&props&&props.showCheckBox!==undefined){tableElem._tableInstance.showCheckBox=props.showCheckBox;}};/**\n      * Setup to react to changes in selection within the dataProvider.\n      *\n      * @param {Object} event -\n      * @param {Object} data -\n      */instanceEventSubcr.push(eventBus[\"c\" /* subscribe */](dataProvider.name+'.selectionChangeEvent',function(event){var selections=event.selectionModel.getSelection();// Set scroll to row in progress\nif(dataProvider.isFocusedLoad===true&&selections.length>0){dataProvider.isFocusedLoad=false;dataProvider.scrollToRow=true;}if(selections.length>0&&selections.length>=_previousSelections.length&&lodash_default.a.isEqual(_previousSelections,selections)===false||dataProvider.scrollToRow===true){dataProvider.scrollToRow=true;eventBus[\"b\" /* publish */]('plTable.scrollToRow',{gridId:gridid,rowUids:selections});}_previousSelections=selections.slice();}));var pageLoadInProgress=false;const getTreeNodePageCallback=function(results){logger[\"a\" /* default */].trace('AW simple table: Loaded next tree page data');pageLoadInProgress=false;if(splmTableUtils[\"a\" /* default */].shouldRequestStartEditTreePagination(tableElem,propertyProvider)){splmTableUtils[\"a\" /* default */].requestStartEdit(tableElem);}dataProvider.update(results.loadedVMObjects,results.totalFound);};// eslint-disable-next-line complexity\nconst loadMorePages=function(eventData){if(tableInstance.viewModelCollection){var lastItemIndex=eventData.lastRenderedItem.index;// get the current copy of data\nObject.assign(dataCtxNode.data.data,dataCtxNode.data.getData());if(lastItemIndex!==0&&lastItemIndex===tableInstance.viewModelCollection.loadedVMObjects.length-1){if(dataProvider.nextAction||dataProvider.action){var lastNode=dataProvider.viewModelCollection.loadedVMObjects[lastItemIndex];if(dataProvider.hasMorePages()&&lastNode.incompleteTail){delete lastNode.incompleteTail;if(eventData.lastRenderedItem.levelNdx>0){pageLoadInProgress=true;dataProvider.getTreeNodePage(dataCtxNode,null,eventData.lastRenderedItem.uid,true,null).then(getTreeNodePageCallback);return;}pageLoadInProgress=true;dataProvider.pageDispatcher({type:'NEXT_PAGE'});return;}logger[\"a\" /* default */].trace('AW simple table: Rendering of all rows below completed');}}var firstItemIndex=eventData.firstRenderedItem.index;if(firstItemIndex===0){if(dataProvider.previousAction){var firstNode=dataProvider.viewModelCollection.loadedVMObjects[firstItemIndex];if(dataProvider.hasMorePagesUp()&&firstNode.incompleteHead){delete firstNode.incompleteHead;tableInstance.maintainScrollPosition();if(eventData.firstRenderedItem.levelNdx>0){pageLoadInProgress=true;dataProvider.getTreeNodePage(dataCtxNode,null,eventData.firstRenderedItem.uid,false,null).then(getTreeNodePageCallback);return;}pageLoadInProgress=true;dataProvider.pageDispatcher({type:'PREVIOUS_PAGE'});return;}logger[\"a\" /* default */].trace('AW simple table: Rendering of all rows above completed');}}// Check for incomplete head/tail on tree node in rendered range\nif(gridOptions.useTree===true){var incompleteNode=dataProvider.findIncompleteNodeInRange(firstItemIndex,lastItemIndex);if(incompleteNode!==null&&incompleteNode.levelNdx>0){var loadNextPage=incompleteNode.incompleteTail===true;if(loadNextPage===true&&!(dataProvider.nextAction||dataProvider.action)){return;}else if(loadNextPage===false&&!dataProvider.previousAction){return;}delete incompleteNode.incompleteHead;delete incompleteNode.incompleteTail;pageLoadInProgress=true;dataProvider.getTreeNodePage(dataCtxNode,null,incompleteNode.uid,loadNextPage,null).then(getTreeNodePageCallback);return;}}}/** revisitme Radhika: We havesome logic below around pageLoadInProgress. We might need some\n           * tstark - leave for refactor\n               * in the new system. The code needs to be cleaned up and the necessary lines needs to be reused\n              if( dataProvider.viewModelCollection && pageLoadInProgress === false ) {\n                  // Check if next page should be loaded\n                  var lastItemIndex = eventData.lastRenderedItem.index;\n                  if( lastItemIndex !== 0 && lastItemIndex === dataProvider.viewModelCollection.loadedVMObjects.length - 1 ) {\n                      if( dataProvider.nextAction || dataProvider.action ) {\n                          var lastNode = dataProvider.viewModelCollection.loadedVMObjects[ lastItemIndex ];\n                          if( dataProvider.hasMorePages() && lastNode.incompleteTail ) {\n                              delete lastNode.incompleteTail;\n                              if( eventData.lastRenderedItem.levelNdx > 0 ) {\n                                  pageLoadInProgress = true;\n                                  dataProvider.getTreeNodePage( dataCtxNode, null, eventData.lastRenderedItem.uid, true, null ).then( getTreeNodePageCallback );\n                                  return;\n                              }\n                              /**\n                               * REFACTOR: This is how UI Grid checks to see if we actually have more pages to load or not since\n                               * dataProvider.hasMorePages() will always return true, because it sets dataProvider.update(firstPageObjs, firstPageObjs.length + 1)\n                               * in dataProviderFactory and uses these two values for checking for if more pages to load or not.\n                               * Will remove this code in 4.2 when all UIgrid replaced by PL Table\n                              var maxToLoad;\n                              if( dataProvider.action && dataProvider.action.inputData ) {\n                                  var actionInputData = dataProvider.action.inputData;\n                                  if( actionInputData.searchInput ) {\n                                      maxToLoad = actionInputData.searchInput.maxToLoad;\n                                  }\n                              }\n\n                              /**\n                               *\n                               * If we have a firstPage and its length is less than maxToLoad, we dont need to load another page.\n                               * All other cases, handle like normally => Try to get next page of data\n                               *\n                              if( maxToLoad && dataProvider.json.firstPage && dataProvider.json.firstPage.length < maxToLoad ) {\n                                  logger.trace( 'AW simple table: Rendering of all rows below completed' );\n                              } else {\n                                  pageLoadInProgress = true;\n                                  dataProvider.getNextPage( dataCtxNode ).then( function() {\n                                      logger.trace( 'AW simple table: Loaded next page data' );\n                                      pageLoadInProgress = false;\n                                      if( util.shouldRequestStartEditPagination( tableElem ) ) {\n                                          util.requestStartEdit( tableElem );\n                                      }\n                                  } );\n                                  return;\n                              }\n                          } else {\n                              logger.trace( 'AW simple table: Rendering of all rows below completed' );\n                          }\n                      }\n                  }\n\n                  // Check if previous page should be loaded as long as next page has not already been requested\n                  var firstItemIndex = eventData.firstRenderedItem.index;\n                  if( firstItemIndex === 0 ) {\n                      if( dataProvider.previousAction ) {\n                          var firstNode = dataProvider.viewModelCollection.loadedVMObjects[ firstItemIndex ];\n                          if( dataProvider.hasMorePagesUp() && firstNode.incompleteHead ) {\n                              delete firstNode.incompleteHead;\n                              eventBus.publish( dataProvider.name + '.plTable.maintainScrollPosition' );\n                              if( eventData.firstRenderedItem.levelNdx > 0 ) {\n                                  pageLoadInProgress = true;\n                                  dataProvider.getTreeNodePage( dataCtxNode, null, eventData.firstRenderedItem.uid, false, null ).then( getTreeNodePageCallback );\n                                  return;\n                              }\n\n                              pageLoadInProgress = true;\n                              dataProvider.getPreviousPage( dataCtxNode ).then( function() {\n                                  logger.trace( 'AW simple table: Loaded previous page data' );\n                                  pageLoadInProgress = false;\n                                  if( util.shouldRequestStartEditPagination( tableElem ) ) {\n                                      util.requestStartEdit( tableElem );\n                                  }\n                              } );\n                              return;\n                          }\n\n                          logger.trace( 'AW simple table: Rendering of all rows above completed' );\n                      }\n                  }\n\n                  // Check for incomplete head/tail on tree node in rendered range\n                  if( gridOptions.useTree === true ) {\n                      var incompleteNode = dataProvider.findIncompleteNodeInRange( firstItemIndex, lastItemIndex );\n                      if( incompleteNode !== null && incompleteNode.levelNdx > 0 ) {\n                          var loadNextPage = incompleteNode.incompleteTail === true;\n                          if( loadNextPage === true && !( dataProvider.nextAction || dataProvider.action ) ) {\n                              return;\n                          } else if( loadNextPage === false && !dataProvider.previousAction ) {\n                              return;\n                          }\n                          delete incompleteNode.incompleteHead;\n                          delete incompleteNode.incompleteTail;\n                          pageLoadInProgress = true;\n                          dataProvider.getTreeNodePage( dataCtxNode, null, incompleteNode.uid, loadNextPage, null ).then( getTreeNodePageCallback );\n                          return;\n                      }\n                  }\n              }\n          */};tableInstanceCallbacks.loadMorePages=loadMorePages;let unsetScrollToRowIndex=function(){tableInstance.unsetScrollToRowIndex();};tableInstanceCallbacks.unsetScrollToRowIndex=unsetScrollToRowIndex;let columnsRearranged=function(eventData){tableInstance.columnsRearranged(eventData);};tableInstanceCallbacks.columnsRearranged=columnsRearranged;let columnsResized=function(eventData){tableInstance.columnsResized(eventData);};tableInstanceCallbacks.columnsResized=columnsResized;return tableCallbacks;};/* harmony default export */ var awSPLMTableNativeService = __webpack_exports__[\"default\"] = ({initializeTable});\n\n/***/ })\n\n}]);","inputSourceMap":null,"banner":"For license information please see 76.8cd0efcd.chunk.js.LICENSE.txt","extractedComments":"/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n","commentsFilename":"static/js/76.8cd0efcd.chunk.js.LICENSE.txt"}