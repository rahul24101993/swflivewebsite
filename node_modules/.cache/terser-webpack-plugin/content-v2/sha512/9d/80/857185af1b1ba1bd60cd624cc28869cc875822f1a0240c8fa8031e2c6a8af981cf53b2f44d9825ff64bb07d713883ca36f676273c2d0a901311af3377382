{"code":"(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[101],{3103:function(e,r,a){\"use strict\";a.r(r),a.d(r,\"populateSupportedViewModes\",(function(){return c})),a.d(r,\"handleViewModechange\",(function(){return y})),a.d(r,\"setViewMode\",(function(){return w}));var t=a(6),o=a(12),n=a(3059),i=a(65),s=a(598),d=a(11);const c=e=>{let r=e||{SummaryView:{primaryWorkArea:\"list\",secondaryWorkArea:!0},TableSummaryView:{primaryWorkArea:\"table\",secondaryWorkArea:!0},ListView:{primaryWorkArea:\"list\",secondaryWorkArea:!1},TableView:{primaryWorkArea:\"table\",secondaryWorkArea:!1},ImageView:{primaryWorkArea:\"image\",secondaryWorkArea:!1}};return n.a.setAvailableViewModes(Object.keys(r)),r},l=(e,r)=>{const a=()=>({viewSuffix:r.primaryWorkArea,showSecondaryWorkArea:r.secondaryWorkArea}),t=i.a.getActiveEditHandler();return t&&!t.editInProgress()?d.a.instance.resolve(a()):i.a.leaveConfirmation().then((()=>a()))},u=e=>\"AW_SubLocation_\"+(-1!==e.indexOf(\":\")?e.split(\":\")[1]:\"Generic\")+\"_ViewMode\",p=e=>{let r=o.default.getCtx(\"preferences.\"+u(e));return r?r[0]:r},y=(e,r,a)=>{if(e){var n=e[a];n||(a=r.defaultDisplayMode?r.defaultDisplayMode:Object.keys(e)[0],t.a.warn(\"Unknown view mode, defaulting to\",a),n=e[a]);const i=o.default.getCtx(\"tcSessionData\");return p(r.nameToken)!==a&&i&&((e,r)=>{o.default.updatePartialCtx(\"preferences.\"+u(r),[e])})(a,r.nameToken),l(0,n)}},w=(e,r)=>{let{defaultDisplayMode:a,nameToken:t}=r,o=t&&p(t);if(!a||o&&e[o]){if(s.default.isNarrowMode()){let r=e.hasOwnProperty(a)?e[a]:{primaryWorkArea:\"list\",secondaryWorkArea:!0};return l(0,r)}o=t&&p(t),o?n.a.changeViewMode(o):e.hasOwnProperty(\"SummaryView\")?n.a.changeViewMode(\"SummaryView\"):n.a.changeViewMode(Object.keys(e)[0])}else n.a.changeViewMode(a)}}}]);","name":"static/js/101.ed492d53.chunk.js","input":"(this[\"webpackJsonpcreatingjsxcomponent\"] = this[\"webpackJsonpcreatingjsxcomponent\"] || []).push([[101],{\n\n/***/ 3103:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"populateSupportedViewModes\", function() { return populateSupportedViewModes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"handleViewModechange\", function() { return handleViewModechange; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setViewMode\", function() { return setViewMode; });\n/* harmony import */ var js_logger__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6);\n/* harmony import */ var js_appCtxService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12);\n/* harmony import */ var js_viewMode_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3059);\n/* harmony import */ var js_editHandlerService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65);\n/* harmony import */ var js_aw_narrowMode_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(598);\n/* harmony import */ var js_awPromiseService__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11);\n// Copyright (c) 2021 Siemens\n/**\n * @module js/viewModeManagementService\n */const populateSupportedViewModes=viewModes=>{let supportedViewModes=viewModes?viewModes:{SummaryView:{primaryWorkArea:'list',secondaryWorkArea:true},TableSummaryView:{primaryWorkArea:'table',secondaryWorkArea:true},ListView:{primaryWorkArea:'list',secondaryWorkArea:false},TableView:{primaryWorkArea:'table',secondaryWorkArea:false},ImageView:{primaryWorkArea:'image',secondaryWorkArea:false}};js_viewMode_service__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].setAvailableViewModes(Object.keys(supportedViewModes));return supportedViewModes;};const updateViewMode=(viewModeKey,viewModeValue)=>{const getViewMode=()=>{//var shouldBroadcastUpdate = $scope.view !== newViewMode.primaryWorkArea;\n//Reset selection back to base when SWA is hidden\n// if( !viewModeValue.secondaryWorkArea ) {\n//     $scope.updateSecondarySelection( [], null );\n// }\n// if( shouldBroadcastUpdate ) {\n//     $scope.$broadcast( 'viewModeChanged', newViewMode );\n// }\nreturn{viewSuffix:viewModeValue.primaryWorkArea,showSecondaryWorkArea:viewModeValue.secondaryWorkArea};};const editHandler=js_editHandlerService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].getActiveEditHandler();if(editHandler&&!editHandler.editInProgress()){return js_awPromiseService__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].instance.resolve(getViewMode());}return js_editHandlerService__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].leaveConfirmation().then(()=>{return getViewMode();});};const getViewModePref=nameToken=>{return'AW_SubLocation_'+(nameToken.indexOf(':')!==-1?nameToken.split(':')[1]:'Generic')+'_ViewMode';};const getViewModeFromPref=nameToken=>{let viewModePref=js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCtx('preferences.'+getViewModePref(nameToken));if(viewModePref){return viewModePref[0];}return viewModePref;};const setViewModeToPref=(viewModeKey,nameToken)=>{js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updatePartialCtx('preferences.'+getViewModePref(nameToken),[viewModeKey]);};const handleViewModechange=(supportedViewModes,provider,viewModeKey)=>{if(supportedViewModes){var viewModeValue=supportedViewModes[viewModeKey];if(!viewModeValue){viewModeKey=provider.defaultDisplayMode?provider.defaultDisplayMode:Object.keys(supportedViewModes)[0];js_logger__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].warn('Unknown view mode, defaulting to',viewModeKey);viewModeValue=supportedViewModes[viewModeKey];}//This is an existing tech debt in ng-afx, fixing this is a big change and not a priority right now\nconst hasTcSessionData=js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCtx('tcSessionData');if(getViewModeFromPref(provider.nameToken)!==viewModeKey&&hasTcSessionData){setViewModeToPref(viewModeKey,provider.nameToken);}return updateViewMode(viewModeKey,viewModeValue);}};const setViewMode=(viewModes,_ref)=>{let{defaultDisplayMode,nameToken}=_ref;let viewMode=nameToken&&getViewModeFromPref(nameToken);if(defaultDisplayMode&&(!viewMode||!viewModes[viewMode])){js_viewMode_service__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].changeViewMode(defaultDisplayMode);}else{if(js_aw_narrowMode_service__WEBPACK_IMPORTED_MODULE_4__[\"default\"].isNarrowMode()){let newViewMode=viewModes.hasOwnProperty(defaultDisplayMode)?viewModes[defaultDisplayMode]:{primaryWorkArea:'list',secondaryWorkArea:true};return updateViewMode(null,newViewMode);}viewMode=nameToken&&getViewModeFromPref(nameToken);if(viewMode){js_viewMode_service__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].changeViewMode(viewMode);}else if(viewModes.hasOwnProperty('SummaryView')){js_viewMode_service__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].changeViewMode('SummaryView');}else{js_viewMode_service__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].changeViewMode(Object.keys(viewModes)[0]);}}};\n\n/***/ })\n\n}]);","inputSourceMap":null}