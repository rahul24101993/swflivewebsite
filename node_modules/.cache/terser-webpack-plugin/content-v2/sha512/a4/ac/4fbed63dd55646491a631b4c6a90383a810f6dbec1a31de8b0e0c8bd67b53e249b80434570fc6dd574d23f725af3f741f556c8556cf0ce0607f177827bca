{"code":"(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[37],{2993:function(e,t,a){\"use strict\";var n=a(11),r=a(12),i=a(28),o=a(31),u=a(1),c=a.n(u),s=a(7);let l={};var d=\"selected\",f=\"mselected\",p=\"pselected\",g=\"relationContext\";l={updateSelection:function(e,t,a){var i=l.getSelection(),o=a?{relationInfo:a}:void 0,u=null,s=[];if(c.a.isArray(e)){u=e[0];for(var b=0;b<e.length;b++)s.push(e[b])}else e&&(u=e,s=[e]);var x=!1;return i.selected&&c.a.isEqual(u,i.selected[0])||(r.default.registerCtx(d,u),x=!0),c.a.isEqual(s,i.selected)||(r.default.registerCtx(f,s),x=!0),c.a.isEqual(t,i.parent)||(r.default.registerCtx(p,t),x=!0),c.a.isEqual(o,i.relationInfo)||(r.default.registerCtx(g,o),x=!0),x?l.updateCommandContext():n.a.instance.resolve()},getSelection:function(){return{selected:r.default.getCtx(f),parent:r.default.getCtx(p),relationInfo:r.default.getCtx(g)}},getAlternateSelectedObjects:function(e){var t=[],a=[];return e&&(c.a.forEach(e,(function(e){e&&e.dbValues&&c.a.forEach(e.dbValues,(function(e){var n=i.a.getObject(e);n&&!c.a.isEmpty(n.props)?t.push(n):a.push(e)}))})),c.a.isEmpty(a)||c.a.forEach(a,(function(e){var a=i.a.getObject(e);t.push(a)}))),t},updateCommandContext:function(){return n.a.instance.resolve()}},t.a=l,s.a.subscribe(\"cdm.modified\",(function(e){var t=r.default.getCtx(f),a=r.default.getCtx(d);c.a.forEach(e.modifiedObjects,(function(e){c.a.forEach(t,(function(n){if(e.uid===n.uid&&o.default.isViewModelObject(n)){var r=o.default.createViewModelObject(e,\"EDIT\");r&&r.props&&(o.default.updateSourceObjectPropertiesByViewModelObject(r,t),a.uid===n.uid&&o.default.updateSourceObjectPropertiesByViewModelObject(r,[a]))}}))}))}))}}]);","name":"static/js/37.bee4b050.chunk.js","input":"(this[\"webpackJsonpcreatingjsxcomponent\"] = this[\"webpackJsonpcreatingjsxcomponent\"] || []).push([[37],{\n\n/***/ 2993:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export updateSelection */\n/* unused harmony export getSelection */\n/* unused harmony export getAlternateSelectedObjects */\n/* unused harmony export updateCommandContext */\n/* harmony import */ var js_awPromiseService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11);\n/* harmony import */ var js_appCtxService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12);\n/* harmony import */ var soa_kernel_clientDataModel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28);\n/* harmony import */ var js_viewModelObjectService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(31);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var js_eventBus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7);\n// Copyright (c) 2020 Siemens\n/**\n * Defines {@link NgServices.selectionService}  which helps manage selection.\n *\n * @module js/selection.service\n */let exports={};// eslint-disable-line no-invalid-this\n/**\n * selection name space\n */var _selected='selected';/**\n * multi selection name space\n */var _mselected='mselected';/**\n * parent selection name space\n */var _pselected='pselected';/**\n * relation info name space\n */var _relationInfo='relationContext';let updateSelection=function(selection,parentSelection,relationInformation){var currentSelection=exports.getSelection();var rInfo=relationInformation?{relationInfo:relationInformation}:undefined;var singleSelection=null;var multiSelection=[];if(lodash__WEBPACK_IMPORTED_MODULE_4___default.a.isArray(selection)){singleSelection=selection[0];for(var i=0;i<selection.length;i++){multiSelection.push(selection[i]);}}else if(selection){singleSelection=selection;multiSelection=[selection];}var contextChanged=false;if(!currentSelection.selected||!lodash__WEBPACK_IMPORTED_MODULE_4___default.a.isEqual(singleSelection,currentSelection.selected[0])){js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerCtx(_selected,singleSelection);contextChanged=true;}if(!lodash__WEBPACK_IMPORTED_MODULE_4___default.a.isEqual(multiSelection,currentSelection.selected)){js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerCtx(_mselected,multiSelection);contextChanged=true;}if(!lodash__WEBPACK_IMPORTED_MODULE_4___default.a.isEqual(parentSelection,currentSelection.parent)){js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerCtx(_pselected,parentSelection);contextChanged=true;}if(!lodash__WEBPACK_IMPORTED_MODULE_4___default.a.isEqual(rInfo,currentSelection.relationInfo)){js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerCtx(_relationInfo,rInfo);contextChanged=true;}if(contextChanged){return exports.updateCommandContext();}return js_awPromiseService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.resolve();};let getSelection=function(){return{selected:js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCtx(_mselected),parent:js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCtx(_pselected),relationInfo:js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCtx(_relationInfo)};};let getAlternateSelectedObjects=function(propObjects){var modelObjects=[];var uidsToLoad=[];if(propObjects){lodash__WEBPACK_IMPORTED_MODULE_4___default.a.forEach(propObjects,function(property){if(property&&property.dbValues){lodash__WEBPACK_IMPORTED_MODULE_4___default.a.forEach(property.dbValues,function(dbValue){var modelObject=soa_kernel_clientDataModel__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].getObject(dbValue);if(modelObject&&!lodash__WEBPACK_IMPORTED_MODULE_4___default.a.isEmpty(modelObject.props)){modelObjects.push(modelObject);}else{uidsToLoad.push(dbValue);}});}});if(!lodash__WEBPACK_IMPORTED_MODULE_4___default.a.isEmpty(uidsToLoad)){lodash__WEBPACK_IMPORTED_MODULE_4___default.a.forEach(uidsToLoad,function(uid){var modelObject=soa_kernel_clientDataModel__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].getObject(uid);modelObjects.push(modelObject);});}}return modelObjects;};let updateCommandContext=function(){return js_awPromiseService__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"].instance.resolve();};exports={updateSelection,getSelection,getAlternateSelectedObjects,updateCommandContext};/* harmony default export */ __webpack_exports__[\"a\"] = (exports);/**\n * Set of utility functions to manage selection\n *\n * @member selectionService\n * @memberof NgServices\n *\n * @param {AwPromiseService.instance} AwPromiseService.instance - Service to use.\n * @param {appCtxService} appCtxService - Service to use.\n * @param {soa_kernel_clientDataModel} cdm - Service to use.\n */ /**\n * Update the selection context\n *\n * @function updateSelection\n * @memberOf NgServices.selectionService\n *\n * @param {Object | Object[]} selection - The new selection\n * @param {Object} parentSelection - The new parent selection\n * @param {Object[]} relationInformation - The new relation information\n *\n * @return {Promise} A promise resolved once selection and command context are updated.\n */ /**\n * Get the selection from the context\n *\n * @function getSelection\n * @memberOf NgServices.selectionService\n *\n * @return {Object} An object containing the selection and the parent selection\n */ /**\n * Returns the model objects based off input property objects\n *\n * @function getTargetModelObjects\n * @memberOf NgServices.selectionService\n *\n * @param {Array} propObjects - array of property objects\n *\n * @return {Array} array of alternate selected model objects containing the results\n */ /**\n * Update the command context\n *\n * @function updateCommandContext\n * @memberOf NgServices.selectionService\n *\n * @return {Promise} A promise resolved once command context is updated.\n */js_eventBus__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].subscribe('cdm.modified',function(event){// Update the VMOs in context for the modified model objects\nvar mSelectedInCtx=js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCtx(_mselected);var selectedInCtx=js_appCtxService__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCtx(_selected);lodash__WEBPACK_IMPORTED_MODULE_4___default.a.forEach(event.modifiedObjects,function _iterateModifiedObjects(updatedObj){lodash__WEBPACK_IMPORTED_MODULE_4___default.a.forEach(mSelectedInCtx,function _updateAppCtxSelection(selectedObj){// Verifying the object is same. Also, we need to ensure that object is a View Model object.\n// For model objects, the data binding should be handled already. So we don't need this\nif(updatedObj.uid===selectedObj.uid&&js_viewModelObjectService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isViewModelObject(selectedObj)){var updatedVmo=js_viewModelObjectService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].createViewModelObject(updatedObj,'EDIT');if(updatedVmo&&updatedVmo.props){js_viewModelObjectService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateSourceObjectPropertiesByViewModelObject(updatedVmo,mSelectedInCtx);// No need for object name check here because if 'mselected' is a VMO, 'selected' has to be VMO\nif(selectedInCtx.uid===selectedObj.uid){js_viewModelObjectService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateSourceObjectPropertiesByViewModelObject(updatedVmo,[selectedInCtx]);}}}});});});\n\n/***/ })\n\n}]);","inputSourceMap":null}