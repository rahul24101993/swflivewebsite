{"ast":null,"code":"// Copyright (c) 2020 Siemens\n\n/* eslint-env es6 */\n\n/**\n * This utility module provides helpful functions for table column content.\n *\n * @module js/splmTableMenuUtility\n */\nimport _ from 'lodash';\nimport eventBus from 'js/eventBus';\nimport appCtxService from 'js/appCtxService';\nimport localeService from 'js/localeService';\nimport messagingService from 'js/messagingService';\nvar exports = {};\n\nexports.columnSortChanged = (gridId, columnDef, gridContextDispatcher, sortDirection, currentColumnIndex, isBulkEditing, columnProvider) => {\n  if (isBulkEditing) {\n    return;\n  }\n\n  var newColumnIdx = columnDef.index;\n  var columnField = columnDef.field;\n  var targetDirection = sortDirection;\n\n  if (columnProvider.sortCriteria && columnProvider.sortCriteria.length > 0) {\n    var oldSortCriteria = columnProvider.sortCriteria[0];\n\n    if (currentColumnIndex === newColumnIdx && oldSortCriteria.fieldName === columnField && oldSortCriteria.sortDirection.toUpperCase() === sortDirection.toUpperCase()) {\n      return;\n    }\n  }\n\n  if (!columnProvider.sortCriteria) {\n    columnProvider.sortCriteria = [];\n  } else {\n    columnProvider.sortCriteria.pop();\n  }\n\n  if (targetDirection !== '') {\n    columnProvider.sortCriteria.push({\n      fieldName: columnField,\n      sortDirection: targetDirection\n    });\n  } // revisitme tstark set the focusHeader\n  // tstark - leave for refactor\n  // tableElement._tableInstance.focusHeader = columnField;\n  // Sets sort criteria on declColumnProviderJSON\n\n\n  columnProvider.setSortCriteria(columnProvider.sortCriteria); // Update sort criteria in sublocation context\n\n  var sublocationCtx = appCtxService.getCtx('sublocation');\n\n  if (sublocationCtx) {\n    // LCS-137109 - Sorting new AW table elements by column not working\n    // Copy columnProvider.sortCriteria instead of using reference\n    let sortCriteria = _.clone(columnProvider.sortCriteria);\n\n    appCtxService.updatePartialCtx(sublocationCtx.clientScopeURI + '.sortCriteria', sortCriteria);\n    appCtxService.updatePartialCtx('sublocation.sortCriteria', sortCriteria);\n  } // revisitme tstark call setHeaderCellSortDirection\n  // tstark - leave for refactor\n  // tableCtrl.setHeaderCellSortDirection( currentColumnIndex, newColumnIdx, targetDirection );\n\n\n  if (gridContextDispatcher) {\n    gridContextDispatcher({\n      type: 'UPDATE_VALUES',\n      newColumnIndex: newColumnIdx,\n      sortDirection: targetDirection,\n      currentColumnIndex: currentColumnIndex\n    });\n  }\n};\n\nexports.closeColumnMenu = popupRef => {\n  if (popupRef) {\n    popupRef.hide();\n  }\n};\n\nexports.setFilterDisability = function (gridId, isDisabled) {\n  var filterButtonElement = document.querySelector('.' + gridId + '_menu .filter-button');\n\n  if (filterButtonElement) {\n    if (isDisabled) {\n      filterButtonElement.classList.add('disabled');\n    } else {\n      filterButtonElement.classList.remove('disabled');\n    }\n  }\n};\n/**\n * Determines if server is available, calls function to hide the column based on columnDef\n * @param {AwColumnInfo} columnDef - The column Def\n * @param {Object} gridContextDispatcher - dispatcher for table\n */\n\n\nexports.hideColumn = function (columnDef, gridContextDispatcher) {\n  if (gridContextDispatcher && columnDef) {\n    gridContextDispatcher({\n      type: 'UPDATE_VALUES',\n      hideColumnField: columnDef.field\n    });\n  }\n};\n\nexports.freezeColumn = function (gridId, columnDef, isFreezeAction, defaultColumnPinIndex, gridContextDispatcher) {\n  if (gridContextDispatcher) {\n    let pinColumnData = {};\n    pinColumnData.columnDef = columnDef;\n    pinColumnData.isFreezeAction = isFreezeAction;\n    pinColumnData.defaultColumnPinIndex = defaultColumnPinIndex;\n    gridContextDispatcher({\n      type: 'UPDATE_VALUES',\n      pinColumnData: pinColumnData\n    });\n  }\n};\n\nexports.toggleDynamicRowHeight = function (gridContextDispatcher, dynamicRowHeightStatus) {\n  if (gridContextDispatcher) {\n    gridContextDispatcher({\n      type: 'UPDATE_VALUES',\n      dynamicRowHeightStatus: !dynamicRowHeightStatus\n    });\n  }\n};\n\nexport default exports;","map":{"version":3,"names":["_","eventBus","appCtxService","localeService","messagingService","exports","columnSortChanged","gridId","columnDef","gridContextDispatcher","sortDirection","currentColumnIndex","isBulkEditing","columnProvider","newColumnIdx","index","columnField","field","targetDirection","sortCriteria","length","oldSortCriteria","fieldName","toUpperCase","pop","push","setSortCriteria","sublocationCtx","getCtx","clone","updatePartialCtx","clientScopeURI","type","newColumnIndex","closeColumnMenu","popupRef","hide","setFilterDisability","isDisabled","filterButtonElement","document","querySelector","classList","add","remove","hideColumn","hideColumnField","freezeColumn","isFreezeAction","defaultColumnPinIndex","pinColumnData","toggleDynamicRowHeight","dynamicRowHeightStatus"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/pltable/src/js/splmTableMenuUtility.js"],"sourcesContent":["// Copyright (c) 2020 Siemens\n/* eslint-env es6 */\n\n/**\n * This utility module provides helpful functions for table column content.\n *\n * @module js/splmTableMenuUtility\n */\nimport _ from 'lodash';\nimport eventBus from 'js/eventBus';\nimport appCtxService from 'js/appCtxService';\nimport localeService from 'js/localeService';\nimport messagingService from 'js/messagingService';\n\nvar exports = {};\n\nexports.columnSortChanged = ( gridId, columnDef, gridContextDispatcher, sortDirection, currentColumnIndex, isBulkEditing, columnProvider ) => {\n    if( isBulkEditing ) {\n        return;\n    }\n    var newColumnIdx = columnDef.index;\n    var columnField = columnDef.field;\n    var targetDirection = sortDirection;\n\n    if( columnProvider.sortCriteria && columnProvider.sortCriteria.length > 0 ) {\n        var oldSortCriteria = columnProvider.sortCriteria[ 0 ];\n\n        if( currentColumnIndex === newColumnIdx && oldSortCriteria.fieldName === columnField &&\n            oldSortCriteria.sortDirection.toUpperCase() === sortDirection.toUpperCase() ) {\n            return;\n        }\n    }\n\n    if( !columnProvider.sortCriteria ) {\n        columnProvider.sortCriteria = [];\n    } else {\n        columnProvider.sortCriteria.pop();\n    }\n\n    if( targetDirection !== '' ) {\n        columnProvider.sortCriteria.push( {\n            fieldName: columnField,\n            sortDirection: targetDirection\n        } );\n    }\n\n    // revisitme tstark set the focusHeader\n    // tstark - leave for refactor\n    // tableElement._tableInstance.focusHeader = columnField;\n\n    // Sets sort criteria on declColumnProviderJSON\n    columnProvider.setSortCriteria( columnProvider.sortCriteria );\n\n    // Update sort criteria in sublocation context\n    var sublocationCtx = appCtxService.getCtx( 'sublocation' );\n    if( sublocationCtx ) {\n        // LCS-137109 - Sorting new AW table elements by column not working\n        // Copy columnProvider.sortCriteria instead of using reference\n        let sortCriteria = _.clone( columnProvider.sortCriteria );\n        appCtxService.updatePartialCtx( sublocationCtx.clientScopeURI + '.sortCriteria', sortCriteria );\n        appCtxService.updatePartialCtx( 'sublocation.sortCriteria', sortCriteria );\n    }\n\n    // revisitme tstark call setHeaderCellSortDirection\n    // tstark - leave for refactor\n    // tableCtrl.setHeaderCellSortDirection( currentColumnIndex, newColumnIdx, targetDirection );\n\n    if ( gridContextDispatcher ) {\n        gridContextDispatcher( {\n            type: 'UPDATE_VALUES',\n            newColumnIndex: newColumnIdx,\n            sortDirection: targetDirection,\n            currentColumnIndex: currentColumnIndex\n        } );\n    }\n};\n\nexports.closeColumnMenu = ( popupRef ) => {\n    if( popupRef ) {\n        popupRef.hide();\n    }\n};\n\nexports.setFilterDisability = function( gridId, isDisabled ) {\n    var filterButtonElement = document.querySelector( '.' + gridId + '_menu .filter-button' );\n\n    if( filterButtonElement ) {\n        if( isDisabled ) {\n            filterButtonElement.classList.add( 'disabled' );\n        } else {\n            filterButtonElement.classList.remove( 'disabled' );\n        }\n    }\n};\n\n/**\n * Determines if server is available, calls function to hide the column based on columnDef\n * @param {AwColumnInfo} columnDef - The column Def\n * @param {Object} gridContextDispatcher - dispatcher for table\n */\nexports.hideColumn = function( columnDef, gridContextDispatcher ) {\n    if ( gridContextDispatcher && columnDef ) {\n        gridContextDispatcher( {\n            type: 'UPDATE_VALUES',\n            hideColumnField: columnDef.field\n        } );\n    }\n};\n\nexports.freezeColumn = function( gridId, columnDef, isFreezeAction, defaultColumnPinIndex, gridContextDispatcher ) {\n    if ( gridContextDispatcher ) {\n        let pinColumnData = {};\n        pinColumnData.columnDef = columnDef;\n        pinColumnData.isFreezeAction = isFreezeAction;\n        pinColumnData.defaultColumnPinIndex = defaultColumnPinIndex;\n        gridContextDispatcher( {\n            type: 'UPDATE_VALUES',\n            pinColumnData:pinColumnData\n        } );\n    }\n};\n\nexports.toggleDynamicRowHeight = function( gridContextDispatcher, dynamicRowHeightStatus ) {\n    if ( gridContextDispatcher ) {\n        gridContextDispatcher( {\n            type: 'UPDATE_VALUES',\n            dynamicRowHeightStatus: !dynamicRowHeightStatus\n        } );\n    }\n};\n\nexport default exports;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}