{"ast":null,"code":"import _ from'lodash';import appCtxSvc from'js/appCtxService';import eventBus from'js/eventBus';import resizeObserverSvc from'js/resizeObserver.service';import AwContextControl from'viewmodel/AwContextControlViewModel';import AwIconButton from'viewmodel/AwIconButtonViewModel';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const onMoreClick=e=>{e.stopPropagation();const sideNavConfig=appCtxSvc.getCtx('awSidenavConfig.globalSidenavContext.globalNavigationSideNav');if(!sideNavConfig||!sideNavConfig.open){eventBus.publish('awsidenav.openClose',{id:'globalNavigationSideNav',commandId:'avatarCommandId',includeView:'AwGlobalAvatar',keepOthersOpen:true});}};/**\n * Checks if overflow occurred on the specified for the header context properties.\n *\n * The closure function arguments:\n * @param {Element} headerContainerElement the header context element\n * @returns {Boolean} A boolean telling whether overflow occurred or not.\n */export let hasOverflownProps=headerContainerElement=>{//We just check the element's offsetTop against the container's offset top to determine if there's an overflow\nif(!headerContainerElement){return false;}const headerContainer=headerContainerElement.querySelectorAll('.sw-contextControl');const currentHeaderElems=headerContainer&&headerContainer.length?headerContainer[0].children:null;const headerElement=currentHeaderElems?currentHeaderElems[currentHeaderElems.length-1]:null;let showMoreLink=headerElement&&headerElement.offsetTop>headerContainerElement.offsetTop;showHideElements(headerContainer,currentHeaderElems);return showMoreLink;};const showHideElements=function(headerContainer,allElements){for(var i=allElements.length-1;i>=0;i--){if(allElements[i].offsetTop>headerContainer[0].offsetTop){allElements[i].classList.add('hidden');}else if(allElements[i].offsetTop<headerContainer[0].offsetTop&&allElements[i].offsetTop!==0){allElements[i].classList.remove('hidden');}}};const resetElementVisibility=allElements=>{for(var i=allElements.length-1;i>=0;i--){allElements[i].classList.remove('hidden');}};const initializeObserver=(data,dispatch,headerContextRef)=>{if(resizeObserverSvc.supportsResizeObserver()){const callback=_.debounce(()=>{resetElementVisibility(headerContextRef.querySelectorAll('.sw-contextControl')[0].children);data.showMore=hasOverflownProps(headerContextRef);dispatch({path:'data',value:{...data}});},200,{maxWait:10000,trailing:true,leading:false});if(headerContextRef!==null&&headerContextRef!==undefined&&headerContextRef.classList.contains('sw-headerContext-horizontalContainer')){resizeObserverSvc.observe(headerContextRef.parentElement,callback);}}};const getIconDefs=(_ref,anchor)=>{let{data,actions}=_ref;if(data&&actions){const userSettingProp=anchor;if(userSettingProp){const dockUserSettingsLabel={...userSettingProp.dockUserSettingsLabel};const undockUserSettingsWhileLHNUnPinnedIconButton={...userSettingProp.undockUserSettingsWhileLHNUnPinnedIconButton};const undockUserSettingsWhileLHNPinnedIconButton={...userSettingProp.undockUserSettingsWhileLHNPinnedIconButton};const dockUserSettingsIconButton={...userSettingProp.dockUserSettingsIconButton};undockUserSettingsWhileLHNUnPinnedIconButton.action=actions[undockUserSettingsWhileLHNUnPinnedIconButton.action];undockUserSettingsWhileLHNPinnedIconButton.action=actions[undockUserSettingsWhileLHNPinnedIconButton.action];dockUserSettingsIconButton.action=actions[dockUserSettingsIconButton.action];return{dockUserSettingsLabel,undockUserSettingsWhileLHNUnPinnedIconButton,undockUserSettingsWhileLHNPinnedIconButton,dockUserSettingsIconButton};}}};export const awHeaderContextRenderFn=props=>{const{ctx,viewModel,elementRefList,i18n}=props;let commandIcon=null;let userSettingLabel='';const headerContextRef=elementRefList.get('headerContext').current;const{data,dispatch}=viewModel;const headerContainerClass=props.alignment==='HORIZONTAL'?'sw-headerContext-horizontalContainer':'sw-headerContext-container';if(props.anchor){const{updateHook,anchor}=props;const{dockUserSettingsLabel,undockUserSettingsWhileLHNUnPinnedIconButton,undockUserSettingsWhileLHNPinnedIconButton,dockUserSettingsIconButton}=getIconDefs(updateHook,anchor);const globalSidenavCtx=ctx.awSidenavConfig&&ctx.awSidenavConfig.globalSidenavContext&&ctx.awSidenavConfig.globalSidenavContext.globalNavigationSideNav;if(ctx.showUserSettingsBar!=='true'&&globalSidenavCtx&&!globalSidenavCtx.pinned){commandIcon=undockUserSettingsWhileLHNUnPinnedIconButton;}else if(ctx.showUserSettingsBar!=='true'&&globalSidenavCtx&&globalSidenavCtx.pinned){commandIcon=undockUserSettingsWhileLHNPinnedIconButton;}else if(ctx.showUserSettingsBar){commandIcon=dockUserSettingsIconButton;}userSettingLabel=dockUserSettingsLabel;}initializeObserver(data,dispatch,headerContextRef);return/*#__PURE__*/_jsxs(\"div\",{className:'sw-column '+headerContainerClass,ref:elementRefList.get('headerContext'),children:[props.anchor?/*#__PURE__*/_jsxs(\"div\",{className:\"sw-row demo-h-3f justify-flex-end aw-user-settings-anchor\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sw-column justify-center flex-auto\",children:ctx.showUserSettingsBar==='true'?/*#__PURE__*/_jsx(\"div\",{className:\"\",children:userSettingLabel&&userSettingLabel.displayName}):''}),/*#__PURE__*/_jsx(\"div\",{className:\"sw-column justify-center sw-headercontext-userSettingContainer\",children:commandIcon?/*#__PURE__*/_jsx(AwIconButton,{command:commandIcon}):''})]}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"sw-row flex-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sw-column\",children:/*#__PURE__*/_jsx(AwContextControl,{anchor:\"headerContextPosition\"})}),props.alignment==='HORIZONTAL'&&data.showMore?/*#__PURE__*/_jsx(\"a\",{href:\"javscript: void(0);\",className:\"sw-headerContext-more\",onClick:onMoreClick,title:i18n.MORE_LINK_TEXT,children:i18n.MORE_LINK_TEXT}):'']})]});};","map":null,"metadata":{},"sourceType":"module"}