{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahukl57\\\\Desktop\\\\SWF\\\\CreatingOwnComponentUsingJsx\\\\node_modules\\\\@swf\\\\core\\\\src\\\\components\\\\src\\\\js\\\\AwContextControlService.js\";\nimport viewModelObjectService from 'js/viewModelObjectService';\nimport cfgSvc from 'js/configurationService';\nimport workSvc from 'js/workspaceService';\nimport contextSvc from 'js/contextContributionService';\nimport _ from 'lodash';\nimport { includeComponent } from 'js/moduleLoader';\nimport appCtxService from 'js/appCtxService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst loadView = (viewname, idx) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: includeComponent(viewname, {\n      key: idx\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 12\n  }, this);\n};\n\nconst getContributedContextViews = (contextJson, workspaceContexts, anchor, ctx) => {\n  let filterContextList;\n  let allActivePlacements = [];\n  let sortedActiveList;\n  let allContexts = {};\n\n  if (contextJson && contextJson.contexts) {\n    let availContexts = Object.keys(contextJson.contexts);\n\n    let allowedContexts = _.intersection(availContexts, workspaceContexts);\n\n    if (allowedContexts && allowedContexts.length > 0) {\n      filterContextList = allowedContexts;\n    } else {\n      filterContextList = availContexts;\n    } // get only active sortedlist\n\n\n    _.forEach(filterContextList, function (contextId) {\n      let activePlacement = contextSvc.getAllPlacements(allContexts, contextJson.placements, contextId, {\n        ctx: ctx\n      });\n      let isActivePlacementVisible = contextSvc.isPlacementVisible(activePlacement, {\n        ctx: ctx\n      });\n\n      if (isActivePlacementVisible) {\n        let activeView = _.get(contextJson.contexts, contextId);\n\n        let headerContri = _.assign(activePlacement, activeView);\n\n        allActivePlacements.push(headerContri);\n      }\n    });\n\n    let anchorFilteredList = _.filter(allActivePlacements, {\n      anchor: anchor\n    });\n\n    sortedActiveList = _.sortBy(anchorFilteredList, 'priority');\n    return _.map(sortedActiveList, 'view');\n  }\n\n  return [];\n};\n\nexport const fetchContributedViews = async ctx => {\n  const workspaceContexts = ctx.workspace && (await workSvc.getAvailableContexts(ctx.workspace.workspaceId));\n  const contextJson = await cfgSvc.getCfg('contextConfiguration');\n  return {\n    workspaceContexts,\n    contextJson\n  };\n};\nexport const registerUserInfo = ctx => {\n  if (ctx.user && ctx.tcSessionData) {\n    const userVMO = viewModelObjectService.createViewModelObject(ctx.user);\n\n    if (userVMO) {\n      appCtxService.registerCtx('user', userVMO);\n    }\n  }\n\n  if (ctx.userSession && ctx.userSession.uid) {\n    const userSession = viewModelObjectService.createViewModelObject(ctx.userSession.uid, 'Edit');\n    appCtxService.registerCtx('userSession', userSession);\n  }\n};\nexport const awContextControlRenderFunction = props => {\n  //revisitMe:\n  //the ctxMin used in some complex method like conditionService.evaluateCondition() cause some issues\n  //use ctxDeprecated to resolve them\n  const {\n    ctxDeprecated,\n    viewModel\n  } = props;\n  const {\n    data\n  } = viewModel;\n  const contributedViews = data.contextJson && getContributedContextViews(data.contextJson, data.workspaceContexts, props.anchor, ctxDeprecated);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"sw-row flex-auto sw-contextControl\",\n    children: [contributedViews && contributedViews.map(loadView), props.children]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n};","map":{"version":3,"names":["viewModelObjectService","cfgSvc","workSvc","contextSvc","_","includeComponent","appCtxService","loadView","viewname","idx","key","getContributedContextViews","contextJson","workspaceContexts","anchor","ctx","filterContextList","allActivePlacements","sortedActiveList","allContexts","contexts","availContexts","Object","keys","allowedContexts","intersection","length","forEach","contextId","activePlacement","getAllPlacements","placements","isActivePlacementVisible","isPlacementVisible","activeView","get","headerContri","assign","push","anchorFilteredList","filter","sortBy","map","fetchContributedViews","workspace","getAvailableContexts","workspaceId","getCfg","registerUserInfo","user","tcSessionData","userVMO","createViewModelObject","registerCtx","userSession","uid","awContextControlRenderFunction","props","ctxDeprecated","viewModel","data","contributedViews","children"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/components/src/js/AwContextControlService.js"],"sourcesContent":["import viewModelObjectService from 'js/viewModelObjectService';\nimport cfgSvc from 'js/configurationService';\nimport workSvc from 'js/workspaceService';\nimport contextSvc from 'js/contextContributionService';\nimport _ from 'lodash';\nimport { includeComponent } from 'js/moduleLoader';\nimport appCtxService from 'js/appCtxService';\n\nconst loadView = ( viewname, idx ) => {\n    return <div>{includeComponent( viewname, { key: idx } )}</div>;\n};\n\nconst getContributedContextViews = ( contextJson, workspaceContexts, anchor, ctx ) => {\n    let filterContextList;\n    let allActivePlacements = [];\n    let sortedActiveList;\n    let allContexts = {};\n    if( contextJson && contextJson.contexts ) {\n        let availContexts = Object.keys( contextJson.contexts );\n        let allowedContexts = _.intersection( availContexts, workspaceContexts );\n\n        if( allowedContexts && allowedContexts.length > 0 ) {\n            filterContextList = allowedContexts;\n        } else {\n            filterContextList = availContexts;\n        }\n\n        // get only active sortedlist\n        _.forEach( filterContextList, function( contextId ) {\n            let activePlacement = contextSvc.getAllPlacements( allContexts, contextJson.placements, contextId, { ctx: ctx } );\n            let isActivePlacementVisible = contextSvc.isPlacementVisible( activePlacement, { ctx: ctx } );\n            if( isActivePlacementVisible ) {\n                let activeView = _.get( contextJson.contexts, contextId );\n                let headerContri = _.assign( activePlacement, activeView );\n                allActivePlacements.push( headerContri );\n            }\n        } );\n        let anchorFilteredList = _.filter( allActivePlacements, {\n            anchor: anchor\n        } );\n        sortedActiveList = _.sortBy( anchorFilteredList, 'priority' );\n        return _.map( sortedActiveList, 'view' );\n    }\n    return [];\n};\n\nexport const fetchContributedViews = async( ctx ) => {\n    const workspaceContexts = ctx.workspace && await workSvc.getAvailableContexts( ctx.workspace.workspaceId );\n    const contextJson = await cfgSvc.getCfg( 'contextConfiguration' );\n    return {\n        workspaceContexts,\n        contextJson\n    };\n};\n\nexport const registerUserInfo = ( ctx ) => {\n    if( ctx.user && ctx.tcSessionData ) {\n        const userVMO = viewModelObjectService.createViewModelObject( ctx.user );\n        if( userVMO ) {\n            appCtxService.registerCtx( 'user', userVMO );\n        }\n    }\n\n    if( ctx.userSession && ctx.userSession.uid ) {\n        const userSession = viewModelObjectService.createViewModelObject(\n            ctx.userSession.uid, 'Edit' );\n        appCtxService.registerCtx( 'userSession', userSession );\n    }\n};\n\nexport const awContextControlRenderFunction = ( props ) => {\n    //revisitMe:\n    //the ctxMin used in some complex method like conditionService.evaluateCondition() cause some issues\n    //use ctxDeprecated to resolve them\n    const { ctxDeprecated, viewModel } = props;\n    const { data } = viewModel;\n    const contributedViews = data.contextJson && getContributedContextViews( data.contextJson, data.workspaceContexts, props.anchor, ctxDeprecated );\n\n    return (\n        <div className='sw-row flex-auto sw-contextControl'>\n            {contributedViews && contributedViews.map( loadView )}\n            {props.children}\n        </div>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}