{"ast":null,"code":"// Copyright (c) 2022 Siemens\n\n/**\n * Defines Service which provides access to the SubLocationService from native code\n *\n * @module js/postLoginPipeline.service\n */\nimport _ from 'lodash';\nimport localStrg from 'js/localStorage';\nvar exports = {};\n/**\n * get the Post Login Stages from server\n *\n * @return all the Post Login Stages\n */\n\nexport let getPostLoginStages = function () {\n  var postLoginStages = [];\n  var postLoginStagesString = localStrg.get('postLoginStagesKey');\n\n  if (postLoginStagesString && postLoginStagesString.length > 0) {\n    postLoginStages = JSON.parse(postLoginStagesString);\n  }\n\n  return postLoginStages;\n};\n/**\n *\n * Reset Post Login Stages while signing in\n *\n */\n\nexport let resetPostLoginStages = function () {\n  var postLoginStagesString = localStrg.get('postLoginStagesKey');\n\n  if (postLoginStagesString && postLoginStagesString.length > 0) {\n    localStrg.removeItem('postLoginStagesKey');\n  }\n};\n/**\n * sorts the post login stages\n *\n * @param {list} get the list of step Definition from each contribution\n *\n * @return sorted pipeline steps\n */\n\nexport let sortPostLoginPipeline = function (contributors) {\n  var postLoginStages = exports.getPostLoginStages();\n  var pipeLineStepsUnsorted = [];\n\n  _.forEach(contributors, function (contrib) {\n    var step = contrib.getPipelineStepDefinition();\n\n    for (var stageIndex = 0; stageIndex < postLoginStages.length; stageIndex++) {\n      if (step.name === postLoginStages[stageIndex].name) {\n        step.priority = stageIndex;\n        step.status = postLoginStages[stageIndex].status;\n        pipeLineStepsUnsorted.push(step);\n        break;\n      }\n    }\n  });\n\n  var pipeLineSteps = [];\n\n  if (pipeLineStepsUnsorted.length > 0) {\n    pipeLineSteps = _.sortBy(pipeLineStepsUnsorted, function (step) {\n      return step.priority;\n    });\n  }\n\n  return pipeLineSteps;\n};\n/**\n * Check for Post Login Authenticated Stages\n *\n * @return {Object} with a boolean flag if all post login stages are authenticated\n */\n\nexport let checkPostLoginAuthenticatedStages = function () {\n  var allStagesAuthenticated = true;\n  var postLoginStageString = localStrg.get('postLoginStagesKey');\n\n  if (postLoginStageString && postLoginStageString.length > 0) {\n    var postLoginStages = JSON.parse(postLoginStageString);\n\n    for (var stageIndex = 0; stageIndex < postLoginStages.length; stageIndex++) {\n      if (!postLoginStages[stageIndex].status) {\n        allStagesAuthenticated = false;\n        break;\n      }\n    }\n  }\n\n  return allStagesAuthenticated;\n};\nexports = {\n  getPostLoginStages,\n  resetPostLoginStages,\n  sortPostLoginPipeline,\n  checkPostLoginAuthenticatedStages\n};\nexport default exports;","map":{"version":3,"names":["_","localStrg","exports","getPostLoginStages","postLoginStages","postLoginStagesString","get","length","JSON","parse","resetPostLoginStages","removeItem","sortPostLoginPipeline","contributors","pipeLineStepsUnsorted","forEach","contrib","step","getPipelineStepDefinition","stageIndex","name","priority","status","push","pipeLineSteps","sortBy","checkPostLoginAuthenticatedStages","allStagesAuthenticated","postLoginStageString"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/ui/src/js/postLoginPipeline.service.js"],"sourcesContent":["// Copyright (c) 2022 Siemens\n\n/**\n * Defines Service which provides access to the SubLocationService from native code\n *\n * @module js/postLoginPipeline.service\n */\nimport _ from 'lodash';\nimport localStrg from 'js/localStorage';\n\nvar exports = {};\n\n/**\n * get the Post Login Stages from server\n *\n * @return all the Post Login Stages\n */\nexport let getPostLoginStages = function() {\n    var postLoginStages = [];\n    var postLoginStagesString = localStrg.get( 'postLoginStagesKey' );\n\n    if( postLoginStagesString && postLoginStagesString.length > 0 ) {\n        postLoginStages = JSON.parse( postLoginStagesString );\n    }\n\n    return postLoginStages;\n};\n\n/**\n *\n * Reset Post Login Stages while signing in\n *\n */\nexport let resetPostLoginStages = function() {\n    var postLoginStagesString = localStrg.get( 'postLoginStagesKey' );\n    if( postLoginStagesString && postLoginStagesString.length > 0 ) {\n        localStrg.removeItem( 'postLoginStagesKey' );\n    }\n};\n\n/**\n * sorts the post login stages\n *\n * @param {list} get the list of step Definition from each contribution\n *\n * @return sorted pipeline steps\n */\nexport let sortPostLoginPipeline = function( contributors ) {\n    var postLoginStages = exports.getPostLoginStages();\n    var pipeLineStepsUnsorted = [];\n\n    _.forEach( contributors, function( contrib ) {\n        var step = contrib.getPipelineStepDefinition();\n        for( var stageIndex = 0; stageIndex < postLoginStages.length; stageIndex++ ) {\n            if( step.name === postLoginStages[ stageIndex ].name ) {\n                step.priority = stageIndex;\n                step.status = postLoginStages[ stageIndex ].status;\n                pipeLineStepsUnsorted.push( step );\n                break;\n            }\n        }\n    } );\n\n    var pipeLineSteps = [];\n    if( pipeLineStepsUnsorted.length > 0 ) {\n        pipeLineSteps = _.sortBy( pipeLineStepsUnsorted, function( step ) {\n            return step.priority;\n        } );\n    }\n\n    return pipeLineSteps;\n};\n\n/**\n * Check for Post Login Authenticated Stages\n *\n * @return {Object} with a boolean flag if all post login stages are authenticated\n */\nexport let checkPostLoginAuthenticatedStages = function() {\n    var allStagesAuthenticated = true;\n    var postLoginStageString = localStrg.get( 'postLoginStagesKey' );\n\n    if( postLoginStageString && postLoginStageString.length > 0 ) {\n        var postLoginStages = JSON.parse( postLoginStageString );\n\n        for( var stageIndex = 0; stageIndex < postLoginStages.length; stageIndex++ ) {\n            if( !postLoginStages[ stageIndex ].status ) {\n                allStagesAuthenticated = false;\n                break;\n            }\n        }\n    }\n    return allStagesAuthenticated;\n};\n\nexports = {\n    getPostLoginStages,\n    resetPostLoginStages,\n    sortPostLoginPipeline,\n    checkPostLoginAuthenticatedStages\n};\nexport default exports;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}