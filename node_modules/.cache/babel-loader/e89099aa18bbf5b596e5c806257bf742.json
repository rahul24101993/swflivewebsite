{"ast":null,"code":"// Copyright (c) 2020 Siemens\n\n/**\n * @module js/tooltip\n */\nimport { DOMAPIs as dom } from 'js/domUtils';\nimport wcagSvc from 'js/wcagService';\nimport keyCode from 'js/keyCode';\n\nclass Tooltip {\n  constructor(target, options, show, hide) {\n    this.target = target;\n    this.options = options;\n    this._show = show;\n    this._hide = hide;\n    this.popupRef = null;\n    this.initialize();\n  }\n\n  initialize() {\n    this.show = () => {\n      this.showId = setTimeout(this._show, this.options.showDuration);\n    };\n\n    this.hide = () => {\n      clearTimeout(this.showId);\n      this.hideId = setTimeout(this._hide, this.options.hideDuration);\n    };\n\n    this.keyFocusHandler = this._keyFocusHandler.bind(this);\n    this.keyBlurHandler = this._keyBlurHandler.bind(this);\n    this.setHooks();\n  }\n\n  configure(tooltipObj) {\n    // attach trigger event\n    let focusTarget = this.target;\n\n    if (this.target.classList.contains('aw-command')) {\n      focusTarget = this.target.children[0];\n    }\n\n    dom.on(this.target, 'mouseenter', this.show);\n    dom.on(this.target, 'mouseleave,click', this.hide);\n    dom.on(focusTarget, 'focus', this.keyFocusHandler);\n    dom.on(focusTarget, 'blur', this.keyBlurHandler); // required by useEffect to clear resource\n\n    return () => {\n      dom.off(this.target, 'mouseenter', this.show);\n      dom.off(this.target, 'mouseleave,click', this.hide);\n      dom.off(focusTarget, 'focus', this.keyFocusHandler);\n      dom.off(focusTarget, 'blur', this.keyBlurHandler);\n      tooltipObj = null;\n    };\n  }\n\n  _keyFocusHandler() {\n    if (wcagSvc.areWeInKeyboardMode() && event) {\n      let key = wcagSvc.getKeyName(event);\n\n      if (key !== keyCode.ESC) {\n        // escape key should not directly impact tooltip popupRef\n        this.show();\n      }\n    }\n  }\n\n  _keyBlurHandler() {\n    if (wcagSvc.areWeInKeyboardMode() && event) {\n      let key = wcagSvc.getKeyName(event);\n\n      if (key !== keyCode.ESC) {\n        // escape key should not directly impact tooltip popupRef\n        this.hide();\n      }\n    }\n  }\n\n  setHooks() {\n    this.hooks = {\n      hooks: {\n        whenOpened: popupRef => {\n          this.popupRef = popupRef;\n          let {\n            panelEl\n          } = popupRef; // enable move-in feature when tooltip fully shows up\n\n          setTimeout(() => {\n            if (this.popupRef) {\n              panelEl.addEventListener('mouseenter', event => {\n                event.stopImmediatePropagation();\n                clearTimeout(this.hideId);\n              });\n              panelEl.addEventListener('mouseleave', event => {\n                event.stopImmediatePropagation();\n                this.hide();\n              });\n            }\n          }, 150);\n        },\n        whenClosed: popupRef => {\n          this.popupRef = null;\n        }\n      }\n    };\n  } // end\n\n\n}\n\nexport { Tooltip };","map":{"version":3,"names":["DOMAPIs","dom","wcagSvc","keyCode","Tooltip","constructor","target","options","show","hide","_show","_hide","popupRef","initialize","showId","setTimeout","showDuration","clearTimeout","hideId","hideDuration","keyFocusHandler","_keyFocusHandler","bind","keyBlurHandler","_keyBlurHandler","setHooks","configure","tooltipObj","focusTarget","classList","contains","children","on","off","areWeInKeyboardMode","event","key","getKeyName","ESC","hooks","whenOpened","panelEl","addEventListener","stopImmediatePropagation","whenClosed"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/popup/src/js/tooltip.js"],"sourcesContent":["// Copyright (c) 2020 Siemens\n\n/**\n * @module js/tooltip\n */\nimport { DOMAPIs as dom } from 'js/domUtils';\nimport wcagSvc from 'js/wcagService';\nimport keyCode from 'js/keyCode';\n\nclass Tooltip {\n    constructor( target, options, show, hide ) {\n        this.target = target;\n        this.options = options;\n        this._show = show;\n        this._hide = hide;\n        this.popupRef = null;\n        this.initialize();\n    }\n\n    initialize() {\n        this.show = () => { this.showId = setTimeout( this._show, this.options.showDuration ); };\n        this.hide = () => {\n            clearTimeout( this.showId );\n            this.hideId = setTimeout( this._hide, this.options.hideDuration );\n        };\n        this.keyFocusHandler = this._keyFocusHandler.bind( this );\n        this.keyBlurHandler = this._keyBlurHandler.bind( this );\n        this.setHooks();\n    }\n\n    configure( tooltipObj ) {\n        // attach trigger event\n        let focusTarget = this.target;\n        if( this.target.classList.contains( 'aw-command' ) ) {\n            focusTarget = this.target.children[ 0 ];\n        }\n        dom.on( this.target, 'mouseenter', this.show );\n        dom.on( this.target, 'mouseleave,click', this.hide );\n        dom.on( focusTarget, 'focus', this.keyFocusHandler );\n        dom.on( focusTarget, 'blur', this.keyBlurHandler );\n        // required by useEffect to clear resource\n        return () => {\n            dom.off( this.target, 'mouseenter', this.show );\n            dom.off( this.target, 'mouseleave,click', this.hide );\n            dom.off( focusTarget, 'focus', this.keyFocusHandler );\n            dom.off( focusTarget, 'blur', this.keyBlurHandler );\n            tooltipObj = null;\n        };\n    }\n\n    _keyFocusHandler() {\n        if( wcagSvc.areWeInKeyboardMode() && event ) {\n            let key = wcagSvc.getKeyName( event );\n            if( key !== keyCode.ESC ) { // escape key should not directly impact tooltip popupRef\n                this.show();\n            }\n        }\n    }\n\n    _keyBlurHandler() {\n        if( wcagSvc.areWeInKeyboardMode() && event ) {\n            let key = wcagSvc.getKeyName( event );\n            if( key !== keyCode.ESC ) { // escape key should not directly impact tooltip popupRef\n                this.hide();\n            }\n        }\n    }\n\n    setHooks() {\n        this.hooks = {\n            hooks: {\n                whenOpened: ( popupRef ) => {\n                    this.popupRef = popupRef;\n                    let { panelEl } = popupRef;\n\n                    // enable move-in feature when tooltip fully shows up\n                    setTimeout( () => {\n                        if( this.popupRef ) {\n                            panelEl.addEventListener( 'mouseenter', ( event ) => {\n                                event.stopImmediatePropagation();\n                                clearTimeout( this.hideId );\n                            } );\n\n                            panelEl.addEventListener( 'mouseleave', ( event ) => {\n                                event.stopImmediatePropagation();\n                                this.hide();\n                            } );\n                        }\n                    }, 150 );\n                },\n                whenClosed: ( popupRef ) => {\n                    this.popupRef = null;\n                }\n            }\n        };\n    }\n    // end\n}\n\nexport {\n    Tooltip\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}