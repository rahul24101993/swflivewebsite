{"ast":null,"code":"// Copyright (c) 2020 Siemens\n\n/**\n * Navigation service which wraps navigation mechanism from the consumers.\n *\n * @module js/navigationService\n */\nimport _ from 'lodash';\nimport navigationUtils from 'js/navigationUtils';\nimport browserUtils from 'js/browserUtils';\nimport parsingUtils from 'js/parsingUtils';\nimport AwStateService from 'js/awStateService';\nimport appCtxSvc from 'js/appCtxService';\nimport workspaceSvc from 'js/workspaceService';\nimport 'js/conditionService';\nimport 'js/contextContributionService';\nimport logger from 'js/logger';\n/**\n * Cached reference to the various AngularJS and AW services.\n */\n\nvar exports = {};\n/**\n * URL sanitizer.\n *\n * @private\n */\n\nvar REGEX_SEARCH_SANITIZE = /(javascript|data:|script|http)/;\n/**\n * Is logging on.\n *\n * @private\n */\n\nvar debug_logAuthActivity = browserUtils.getUrlAttributes().logAuthActivity !== undefined;\n/**\n * Create link to navigate the object.\n *\n * @param {Object} action - The 'declAction' object.\n * @param {Object} navigationParams - The 'navigationParams' object specific for \"Navigation\" action type\n */\n\nfunction navigateObject(action, navigationParams) {\n  var url = '';\n  var navObject = getWindowLocationObject(); // Check to see if they just want a raw url, and not a reference to some place in the application.\n  // There are three or four showcase examples using navigateTo with http and then using a single navigationParams value.\n  // We should support those cases too. MR 1582 in afx time frame is not considering the navigationParams at all and broke these cases.\n\n  if (action.navigateTo.indexOf('http') === 0 || action.navigateTo.indexOf('https') === 0) {\n    url = action.navigateTo;\n\n    _.forEach(navigationParams, function (value) {\n      if (!_.isObject(value)) {\n        url += value;\n        return false; // Limiting the parameter to only one single value as these are general http requests.\n      }\n\n      return undefined;\n    });\n  } else {\n    url = browserUtils.getBaseURL();\n    /**\n     * Check if there are any parameters 'before the #' AND we are NOT trying to launch some other\n     * application.\n     * <P>\n     * If so: Include these in the base URL since they are a necessary context for any 'internal' navigation\n     * operation. Specfically, used to preserve hosting and logging options.\n     * <P>\n     * Note: This is a fix for LCS-173770 (et al.) since any external application would/should be in control\n     * of any other context options.\n     */\n\n    if (navObject.search && !_.startsWith(action.navigateTo, 'launcher')) {\n      url += navObject.search;\n    }\n\n    var stateSvc = navigationUtils.getState(); // Since findState isn't public API, we need to use href to check whether path is registered\n    // in state or not.\n\n    var statePath = stateSvc.href(action.navigateTo, navigationParams, {\n      inherit: false\n    });\n\n    if (statePath) {\n      url += statePath;\n    } else {\n      url += action.navigateTo;\n      var first = true;\n\n      _.forEach(navigationParams, function (value, key) {\n        if (!_.isObject(value)) {\n          if (first) {\n            url += '?';\n            first = false;\n          } else {\n            url += '&';\n          }\n\n          url = url + key + '=' + value;\n        }\n      });\n    }\n  }\n\n  var navTarget = '_self'; //default target for navigation targets\n\n  var windowFeatures = null;\n\n  if (action.navigateIn === 'newTab') {\n    navTarget = '_blank';\n  } else if (action.navigateIn === 'newWindow') {\n    windowFeatures = 'location=yes,menubar=yes,titlebar=yes,toolbar=yes,resizable=yes,scrollbars=yes,';\n    var width = window.outerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n    var height = window.outerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n    var top = window.screenTop ? window.screenTop : window.screenY;\n    var left = window.screenLeft ? window.screenLeft : window.screenX;\n\n    if (action.options) {\n      for (var key in action.options) {\n        var value = action.options[key];\n\n        if (key === 'top') {\n          top = value;\n        } else if (key === 'left') {\n          left = value;\n        } else if (key === 'height') {\n          height = value;\n        } else if (key === 'width') {\n          width = value;\n        }\n      }\n    }\n\n    windowFeatures = windowFeatures + 'top=' + top + ',left=' + left + ',height=' + height + ',width=' + width;\n    navTarget = '_blank';\n  }\n\n  if (action.actionType === 'Navigate') {\n    if (action.navigateIn === 'newTab') {\n      var openInNewTab = window.open(url, navTarget);\n\n      if (openInNewTab) {\n        openInNewTab.location = url;\n      }\n    } else if (action.navigateIn === 'newWindow') {\n      var openInNewWindow = window.open(url, navTarget, windowFeatures);\n\n      if (openInNewWindow) {\n        openInNewWindow.location = url;\n      }\n    } else {\n      if (statePath) {\n        stateSvc.go(action.navigateTo, navigationParams, {\n          inherit: false\n        });\n      } else {\n        var openInNavTarget = window.open('', navTarget);\n\n        if (openInNavTarget) {\n          openInNavTarget.location = url;\n        }\n      }\n    }\n\n    return undefined;\n  } else if (evaluateIfHrefPopulateOperation) {\n    url = decodeURIComponent(url); // to ensure encoded uri is decoded or else $locationStateChangeSuccess does not get triggered thus losing state history\n\n    return {\n      urlContent: url,\n      target: navTarget\n    };\n  }\n\n  return undefined;\n}\n/**\n * wrap window object access in a function\n *\n * @return {Object} structure with window.location pathname, search, and href values\n */\n\n\nfunction getWindowLocationObject() {\n  return {\n    pathname: window.location.pathname,\n    search: sanitizeSearch(window.location.search),\n    href: window.location.href\n  };\n}\n/**\n * Basic sanitization routine that looks for redirection exploits.\n *\n * @return {String} value after fully decoded.\n */\n\n\nfunction sanitizeSearch(value) {\n  var decodedValue = decodeURIValue(value);\n\n  if (REGEX_SEARCH_SANITIZE.test(decodedValue)) {\n    if (debug_logAuthActivity) {\n      logger.info(decodedValue + ' has been removed from location search parameter after being found to contain unsafe data.');\n    }\n\n    return null;\n  }\n\n  return value;\n}\n/**\n * Multi level decode to get around double encoding exploits\n *\n * @return {String} value after fully decoded.\n */\n\n\nfunction decodeURIValue(value) {\n  var decodedValue = decodeURIComponent(value);\n\n  if (value === decodedValue) {\n    return value;\n  }\n\n  return decodeURIValue(decodedValue);\n}\n/**\n * Create link to navigate the object\n *\n * @param {Object} action - The 'declAction' object.\n * @param {Object} navigationParams - The 'navigationParams' object specific for \"Navigation\" action type\n */\n\n\nexport let navigate = function (action, navigationParams) {\n  var url = undefined;\n  return workspaceSvc.getAvailableNavigations(appCtxSvc.ctx.workspace.workspaceId).then(function (navigateConfigurations) {\n    var evaluationContext = {};\n    /*\n      Runtime evaluation context consisting of the ctx , state and navigation context\n    */\n\n    evaluationContext.ctx = appCtxSvc.ctx;\n    var navigateContext = evaluateParam(navigationParams.navigationContext, evaluationContext);\n    evaluationContext.navigationContext = navigateContext;\n    evaluationContext.state = AwStateService.instance; //evaluate navigateTo interpolations\n\n    const result = action.navigateTo.match(parsingUtils.REGEX_DATABINDING);\n\n    if (result && result.length === 4) {\n      action.navigateTo = _.get(evaluationContext, result[2], action.navigateTo);\n    }\n\n    var activeNavigation = navigationUtils.findActiveWorkspaceNavigation(navigateConfigurations, evaluationContext);\n\n    if (activeNavigation) {\n      action.navigateTo = activeNavigation.page;\n\n      var params = _.assign({}, navigationParams, activeNavigation.params);\n\n      var contextParam = evaluateParam(params, evaluationContext);\n      url = navigateObject(action, contextParam);\n    } else {\n      url = navigateObject(action, navigationParams);\n    }\n\n    return url;\n  });\n};\n/**\n * Evaluate if the operation is for population of href attribute of anchor <a> tag\n *\n * @param {Object} action param all params on the navigation\n * @return {Boolean} whether true or false\n */\n\nfunction evaluateIfHrefPopulateOperation(action) {\n  if (_.isUndefined(action.actionType) && !_.isUndefined(action.navigateTo) && !_.isUndefined(action.navigationParams)) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * Evaluate the param on the workspace\n *\n * @param {Object} param all params on the navigation\n * @param {Object} evaluationContext - Scope to execute  with\n * @return {Object} resolved param.\n */\n\n\nfunction evaluateParam(param, evaluationContext) {\n  _.forEach(param, function (value, key) {\n    var parameterKey = parsingUtils.getStringBetweenDoubleMustaches(value);\n\n    var val = _.get(evaluationContext, parameterKey, null);\n\n    if (val) {\n      _.set(param, key, _.get(evaluationContext, parameterKey, null));\n    }\n  });\n\n  return param;\n}\n\nexports = {\n  navigate\n};\nexport default exports;","map":{"version":3,"names":["_","navigationUtils","browserUtils","parsingUtils","AwStateService","appCtxSvc","workspaceSvc","logger","exports","REGEX_SEARCH_SANITIZE","debug_logAuthActivity","getUrlAttributes","logAuthActivity","undefined","navigateObject","action","navigationParams","url","navObject","getWindowLocationObject","navigateTo","indexOf","forEach","value","isObject","getBaseURL","search","startsWith","stateSvc","getState","statePath","href","inherit","first","key","navTarget","windowFeatures","navigateIn","width","window","outerWidth","document","documentElement","clientWidth","body","height","outerHeight","clientHeight","top","screenTop","screenY","left","screenLeft","screenX","options","actionType","openInNewTab","open","location","openInNewWindow","go","openInNavTarget","evaluateIfHrefPopulateOperation","decodeURIComponent","urlContent","target","pathname","sanitizeSearch","decodedValue","decodeURIValue","test","info","navigate","getAvailableNavigations","ctx","workspace","workspaceId","then","navigateConfigurations","evaluationContext","navigateContext","evaluateParam","navigationContext","state","instance","result","match","REGEX_DATABINDING","length","get","activeNavigation","findActiveWorkspaceNavigation","page","params","assign","contextParam","isUndefined","param","parameterKey","getStringBetweenDoubleMustaches","val","set"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/declarativeui/src/js/navigationService.js"],"sourcesContent":["// Copyright (c) 2020 Siemens\n\n/**\n * Navigation service which wraps navigation mechanism from the consumers.\n *\n * @module js/navigationService\n */\nimport _ from 'lodash';\nimport navigationUtils from 'js/navigationUtils';\nimport browserUtils from 'js/browserUtils';\nimport parsingUtils from 'js/parsingUtils';\nimport AwStateService from 'js/awStateService';\nimport appCtxSvc from 'js/appCtxService';\nimport workspaceSvc from 'js/workspaceService';\nimport 'js/conditionService';\nimport 'js/contextContributionService';\nimport logger from 'js/logger';\n\n/**\n * Cached reference to the various AngularJS and AW services.\n */\n\nvar exports = {};\n\n/**\n * URL sanitizer.\n *\n * @private\n */\nvar REGEX_SEARCH_SANITIZE = /(javascript|data:|script|http)/;\n\n/**\n * Is logging on.\n *\n * @private\n */\nvar debug_logAuthActivity = browserUtils.getUrlAttributes().logAuthActivity !== undefined;\n\n/**\n * Create link to navigate the object.\n *\n * @param {Object} action - The 'declAction' object.\n * @param {Object} navigationParams - The 'navigationParams' object specific for \"Navigation\" action type\n */\nfunction navigateObject( action, navigationParams ) {\n    var url = '';\n    var navObject = getWindowLocationObject();\n    // Check to see if they just want a raw url, and not a reference to some place in the application.\n    // There are three or four showcase examples using navigateTo with http and then using a single navigationParams value.\n    // We should support those cases too. MR 1582 in afx time frame is not considering the navigationParams at all and broke these cases.\n    if( action.navigateTo.indexOf( 'http' ) === 0 ||  action.navigateTo.indexOf( 'https' ) === 0 ) {\n        url = action.navigateTo;\n        _.forEach( navigationParams, function( value ) {\n            if( !_.isObject( value ) ) {\n                url += value;\n                return false; // Limiting the parameter to only one single value as these are general http requests.\n            }\n            return undefined;\n        } );\n    } else {\n        url = browserUtils.getBaseURL();\n\n        /**\n         * Check if there are any parameters 'before the #' AND we are NOT trying to launch some other\n         * application.\n         * <P>\n         * If so: Include these in the base URL since they are a necessary context for any 'internal' navigation\n         * operation. Specfically, used to preserve hosting and logging options.\n         * <P>\n         * Note: This is a fix for LCS-173770 (et al.) since any external application would/should be in control\n         * of any other context options.\n         */\n\n        if( navObject.search && !_.startsWith( action.navigateTo, 'launcher' ) ) {\n            url += navObject.search;\n        }\n\n        var stateSvc = navigationUtils.getState();\n\n        // Since findState isn't public API, we need to use href to check whether path is registered\n        // in state or not.\n        var statePath = stateSvc.href( action.navigateTo, navigationParams, {\n            inherit: false\n        } );\n\n        if( statePath ) {\n            url += statePath;\n        } else {\n            url += action.navigateTo;\n\n            var first = true;\n\n            _.forEach( navigationParams, function( value, key ) {\n                if( !_.isObject( value ) ) {\n                    if( first ) {\n                        url += '?';\n                        first = false;\n                    } else {\n                        url += '&';\n                    }\n\n                    url = url + key + '=' + value;\n                }\n            } );\n        }\n    }\n\n    var navTarget = '_self'; //default target for navigation targets\n    var windowFeatures = null;\n\n    if( action.navigateIn === 'newTab' ) {\n        navTarget = '_blank';\n    } else if( action.navigateIn === 'newWindow' ) {\n        windowFeatures = 'location=yes,menubar=yes,titlebar=yes,toolbar=yes,resizable=yes,scrollbars=yes,';\n\n        var width = window.outerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n        var height = window.outerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n        var top = window.screenTop ? window.screenTop : window.screenY;\n        var left = window.screenLeft ? window.screenLeft : window.screenX;\n\n        if( action.options ) {\n            for( var key in action.options ) {\n                var value = action.options[ key ];\n                if( key === 'top' ) {\n                    top = value;\n                } else if( key === 'left' ) {\n                    left = value;\n                } else if( key === 'height' ) {\n                    height = value;\n                } else if( key === 'width' ) {\n                    width = value;\n                }\n            }\n        }\n\n        windowFeatures = windowFeatures + 'top=' + top + ',left=' + left + ',height=' + height + ',width=' +\n            width;\n        navTarget = '_blank';\n    }\n\n    if( action.actionType === 'Navigate' ) {\n        if( action.navigateIn === 'newTab' ) {\n            var openInNewTab = window.open( url, navTarget );\n            if( openInNewTab ) {\n                openInNewTab.location = url;\n            }\n        } else if( action.navigateIn === 'newWindow' ) {\n            var openInNewWindow = window.open( url, navTarget, windowFeatures );\n            if( openInNewWindow ) {\n                openInNewWindow.location = url;\n            }\n        } else {\n            if( statePath ) {\n                stateSvc.go( action.navigateTo, navigationParams, {\n                    inherit: false\n                } );\n            } else {\n                var openInNavTarget = window.open( '', navTarget );\n                if( openInNavTarget ) {\n                    openInNavTarget.location = url;\n                }\n            }\n        }\n        return undefined;\n    } else if( evaluateIfHrefPopulateOperation ) {\n        url = decodeURIComponent( url ); // to ensure encoded uri is decoded or else $locationStateChangeSuccess does not get triggered thus losing state history\n        return {\n            urlContent: url,\n            target: navTarget\n        };\n    }\n    return undefined;\n}\n\n/**\n * wrap window object access in a function\n *\n * @return {Object} structure with window.location pathname, search, and href values\n */\nfunction getWindowLocationObject() {\n    return {\n        pathname: window.location.pathname,\n        search: sanitizeSearch( window.location.search ),\n        href: window.location.href\n    };\n}\n\n/**\n * Basic sanitization routine that looks for redirection exploits.\n *\n * @return {String} value after fully decoded.\n */\nfunction sanitizeSearch( value ) {\n    var decodedValue = decodeURIValue( value );\n    if( REGEX_SEARCH_SANITIZE.test( decodedValue ) ) {\n        if( debug_logAuthActivity ) {\n            logger.info( decodedValue + ' has been removed from location search parameter after being found to contain unsafe data.' );\n        }\n        return null;\n    }\n    return value;\n}\n\n/**\n * Multi level decode to get around double encoding exploits\n *\n * @return {String} value after fully decoded.\n */\nfunction decodeURIValue( value ) {\n    var decodedValue = decodeURIComponent( value );\n    if( value === decodedValue ) {\n        return value;\n    }\n    return decodeURIValue( decodedValue );\n}\n\n/**\n * Create link to navigate the object\n *\n * @param {Object} action - The 'declAction' object.\n * @param {Object} navigationParams - The 'navigationParams' object specific for \"Navigation\" action type\n */\nexport let navigate = function( action, navigationParams ) {\n    var url = undefined;\n\n    return workspaceSvc.getAvailableNavigations( appCtxSvc.ctx.workspace.workspaceId ).then( function( navigateConfigurations ) {\n        var evaluationContext = {};\n        /*\n          Runtime evaluation context consisting of the ctx , state and navigation context\n        */\n        evaluationContext.ctx = appCtxSvc.ctx;\n        var navigateContext = evaluateParam( navigationParams.navigationContext, evaluationContext );\n        evaluationContext.navigationContext = navigateContext;\n        evaluationContext.state = AwStateService.instance;\n\n        //evaluate navigateTo interpolations\n        const result = action.navigateTo.match( parsingUtils.REGEX_DATABINDING );\n        if( result && result.length === 4 ) {\n            action.navigateTo = _.get( evaluationContext, result[ 2 ], action.navigateTo );\n        }\n\n        var activeNavigation = navigationUtils.findActiveWorkspaceNavigation( navigateConfigurations, evaluationContext );\n\n        if( activeNavigation ) {\n            action.navigateTo = activeNavigation.page;\n            var params = _.assign( {}, navigationParams, activeNavigation.params );\n            var contextParam = evaluateParam( params, evaluationContext );\n            url = navigateObject( action, contextParam );\n        } else {\n            url = navigateObject( action, navigationParams );\n        }\n        return url;\n    } );\n};\n\n/**\n * Evaluate if the operation is for population of href attribute of anchor <a> tag\n *\n * @param {Object} action param all params on the navigation\n * @return {Boolean} whether true or false\n */\nfunction evaluateIfHrefPopulateOperation( action ) {\n    if( _.isUndefined( action.actionType ) && !_.isUndefined( action.navigateTo ) && !_.isUndefined( action.navigationParams ) ) {\n        return true;\n    }\n    return false;\n}\n\n/**\n * Evaluate the param on the workspace\n *\n * @param {Object} param all params on the navigation\n * @param {Object} evaluationContext - Scope to execute  with\n * @return {Object} resolved param.\n */\nfunction evaluateParam( param, evaluationContext ) {\n    _.forEach( param, function( value, key ) {\n        var parameterKey = parsingUtils.getStringBetweenDoubleMustaches( value );\n        var val = _.get( evaluationContext, parameterKey, null );\n        if( val ) {\n            _.set( param, key, _.get( evaluationContext, parameterKey, null ) );\n        }\n    } );\n    return param;\n}\n\nexports = {\n    navigate\n};\nexport default exports;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}