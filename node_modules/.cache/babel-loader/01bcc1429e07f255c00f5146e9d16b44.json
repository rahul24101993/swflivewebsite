{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahukl57\\\\Desktop\\\\SWF\\\\CreatingOwnComponentUsingJsx\\\\node_modules\\\\@swf\\\\core\\\\src\\\\components\\\\src\\\\js\\\\AwPopupService.js\"; // Copyright (c) 2021 Siemens\n\nimport AwPopupModal from 'viewmodel/AwPopupModalViewModel';\nimport AwInclude from 'viewmodel/AwIncludeViewModel';\nimport _ from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const awPopupRenderFunction = options => {\n  if (!options.open) {\n    return;\n  }\n\n  let {\n    // conditions\n    hasMask,\n    hasArrow,\n    resizable,\n    // children\n    children,\n    // controls\n    api,\n    popupReference,\n    // displayConstraints\n    width,\n    height,\n    maxHeight,\n    maxWidth,\n    minHeight,\n    minWidth,\n    innerClassName = '',\n    hasPadding,\n    hasCloseButton,\n    // view related\n    view,\n    subPanelContext\n  } = options; // legacy props for awpopup2\n\n  const {\n    caption,\n    commands,\n    anchor,\n    isModal,\n    context\n  } = options; // ensure value with unit\n\n  width = ensureUnit(width);\n  height = ensureUnit(height); // this determines which template to use\n\n  const modal = Boolean(options.preset === 'modal' || isModal || caption);\n\n  const generateContent = () => {\n    let finalChild = children; // process view if user have a view defined\n\n    if (view) {\n      // inject popupApi into subPanelContext, so that any sub view has full control on popup\n      let subPanelContextFinal = Object.assign({}, (context === null || context === void 0 ? void 0 : context.subPanelContext) || subPanelContext, {\n        popupApi: api\n      });\n      finalChild = /*#__PURE__*/_jsxDEV(AwInclude, {\n        name: view,\n        ...context,\n        subPanelContext: subPanelContextFinal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 26\n      }, this);\n    }\n\n    let result = finalChild;\n\n    if (modal) {\n      let finalProps = {\n        caption,\n        commands,\n        anchor,\n        context,\n        width,\n        height\n      };\n      result = /*#__PURE__*/_jsxDEV(AwPopupModal, { ...finalProps,\n        children: finalChild\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 22\n      }, this);\n    }\n\n    return result;\n  };\n\n  const getClassName = () => {\n    let result = 'sw-popup-contentContainer';\n\n    if (hasPadding) {\n      result += ' hasPadding';\n    }\n\n    if (hasCloseButton) {\n      result += ' hasCloseButton';\n    }\n\n    if (resizable) {\n      result += ' aw-popup-enableResize';\n    }\n\n    return result;\n  };\n\n  const getResizeHandles = () => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer-right\",\n        onMouseDown: initResizeElement,\n        role: \"button\",\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer-rightBottomCorner\",\n        onMouseDown: initResizeElement,\n        role: \"button\",\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer-bottom\",\n        onMouseDown: initResizeElement,\n        role: \"button\",\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer-left\",\n        onMouseDown: initResizeElement,\n        role: \"button\",\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"resizer-leftBottomCorner\",\n        onMouseDown: initResizeElement,\n        role: \"button\",\n        tabIndex: 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  };\n\n  const dataProps = generateDataAttribute({\n    maxHeight,\n    maxWidth,\n    minHeight,\n    minWidth\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    \"data-locator\": \"sw-popup\",\n    className: \"sw-popup\",\n    ref: popupReference,\n    children: [hasMask && /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-locator\": \"sw-popup-screenMask\",\n      className: \"sw-popup-screenMask\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-locator\": \"aw-layout-popup\",\n      className: 'sw-popup-layout aw-layout-popup ' + innerClassName,\n      role: \"complementary\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: getClassName(),\n        style: {\n          width,\n          height\n        },\n        ...dataProps,\n        children: [hasCloseButton && /*#__PURE__*/_jsxDEV(\"span\", {\n          role: \"button\",\n          tabIndex: \"0\",\n          \"data-locator\": \"popup-close-button\",\n          onKeyDown: api.hide,\n          onClick: api.hide,\n          className: \"aw-popup-close\",\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 37\n        }, this), generateContent(), getClassName().includes('aw-popup-enableResize') && getResizeHandles()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this), hasArrow && /*#__PURE__*/_jsxDEV(\"div\", {\n        \"data-locator\": \"sw-popup-arrow\",\n        className: \"sw-popup-arrow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 12\n  }, this);\n};\nexport const initResizeElement = function (onMouseDownEvent) {\n  let minWidth = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  let minHeight = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n  let initialWidth = parseInt(window.getComputedStyle(onMouseDownEvent.target.parentElement).width, 10);\n  let startHeight = parseInt(window.getComputedStyle(onMouseDownEvent.target.parentElement).height, 10);\n  var dialog = onMouseDownEvent.target.parentElement.parentElement.getBoundingClientRect();\n\n  var setDialogWidth = (initialWidth, diffWidth, element) => {\n    let finalWidth = initialWidth + diffWidth;\n\n    if (finalWidth < minWidth) {\n      finalWidth = minWidth;\n      diffWidth = finalWidth - initialWidth;\n    }\n\n    element.style.width = finalWidth + 'px';\n    return diffWidth;\n  };\n\n  const doDrag = _.throttle(function (onDragEvent) {\n    let className = onMouseDownEvent.target.className;\n    let element = onMouseDownEvent.target.parentElement;\n    let parentElement = onMouseDownEvent.target.parentElement.parentElement;\n    let startX = onMouseDownEvent.clientX;\n    let startY = onMouseDownEvent.clientY;\n\n    if (className === 'resizer-right' || className === 'resizer-rightBottomCorner') {\n      let differenceWidth = onDragEvent.clientX - startX;\n      setDialogWidth(initialWidth, differenceWidth, element);\n    }\n\n    if (className === 'resizer-left' || className === 'resizer-leftBottomCorner') {\n      let differenceWidth = startX - onDragEvent.clientX;\n      differenceWidth = setDialogWidth(initialWidth, differenceWidth, element);\n      parentElement.style.left = dialog.left - differenceWidth + 'px';\n    }\n\n    if (className === 'resizer-bottom' || className === 'resizer-rightBottomCorner' || className === 'resizer-leftBottomCorner') {\n      element.style.height = startHeight + onDragEvent.clientY - startY + 'px';\n\n      if (startHeight + onDragEvent.clientY - startY < minHeight) {\n        element.style.height = minHeight + 'px';\n      }\n    }\n  }, 50);\n\n  const stopDrag = () => {\n    document.documentElement.removeEventListener('mousemove', doDrag, false);\n    document.documentElement.removeEventListener('mouseup', stopDrag, false);\n  };\n\n  document.documentElement.addEventListener('mousemove', doDrag, false);\n  document.documentElement.addEventListener('mouseup', stopDrag, false);\n};\n\nconst generateDataAttribute = data => {\n  let result = {};\n\n  for (let key in data) {\n    let value = data[key];\n\n    if (value) {\n      let key2 = `data-${key.replace(/([A-Z])/, $1 => '-' + $1.toLowerCase())}`;\n      result[key2] = value;\n    }\n  }\n\n  return result;\n};\n\nconst ensureUnit = val => {\n  if (!isNaN(Number(val))) {\n    val += 'px';\n  }\n\n  return val;\n};","map":{"version":3,"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/components/src/js/AwPopupService.js"],"names":["awPopupRenderFunction","options","innerClassName","subPanelContext","context","width","ensureUnit","height","modal","Boolean","generateContent","finalChild","subPanelContextFinal","popupApi","api","result","finalProps","getClassName","getResizeHandles","dataProps","generateDataAttribute","minWidth","hasMask","hasCloseButton","hasArrow","initResizeElement","minHeight","initialWidth","parseInt","window","onMouseDownEvent","startHeight","dialog","setDialogWidth","finalWidth","diffWidth","element","doDrag","className","parentElement","startX","startY","differenceWidth","onDragEvent","stopDrag","document","data","value","key2","key","$1","val","isNaN","Number"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Siemens\nimport AwPopupModal from 'viewmodel/AwPopupModalViewModel';\nimport AwInclude from 'viewmodel/AwIncludeViewModel';\nimport _ from 'lodash';\n\nexport const awPopupRenderFunction = ( options ) => {\n    if( !options.open ) { return; }\n\n    let {\n        // conditions\n        hasMask,\n        hasArrow,\n        resizable,\n        // children\n        children,\n        // controls\n        api,\n        popupReference,\n        // displayConstraints\n        width,\n        height,\n        maxHeight,\n        maxWidth,\n        minHeight,\n        minWidth,\n        innerClassName = '',\n        hasPadding,\n        hasCloseButton,\n        // view related\n        view,\n        subPanelContext\n    } = options;\n\n    // legacy props for awpopup2\n    const {\n        caption,\n        commands,\n        anchor,\n        isModal,\n        context\n    } = options;\n\n    // ensure value with unit\n    width = ensureUnit( width );\n    height = ensureUnit( height );\n\n    // this determines which template to use\n    const modal = Boolean( options.preset === 'modal' || isModal || caption );\n    const generateContent = () => {\n        let finalChild = children;\n        // process view if user have a view defined\n        if( view ) {\n            // inject popupApi into subPanelContext, so that any sub view has full control on popup\n            let subPanelContextFinal = Object.assign( {}, context?.subPanelContext || subPanelContext, { popupApi: api } );\n            finalChild = <AwInclude name={view} {...context} subPanelContext={subPanelContextFinal}/>;\n        }\n\n        let result = finalChild;\n        if( modal ) {\n            let finalProps = { caption, commands, anchor, context, width, height };\n            result = <AwPopupModal {...finalProps}>{finalChild}</AwPopupModal>;\n        }\n        return result;\n    };\n\n    const getClassName = () => {\n        let result = 'sw-popup-contentContainer';\n        if( hasPadding ) {\n            result += ' hasPadding';\n        }\n        if( hasCloseButton ) {\n            result += ' hasCloseButton';\n        }\n        if( resizable ) {\n            result += ' aw-popup-enableResize';\n        }\n        return result;\n    };\n\n    const getResizeHandles = ()=>{\n        return  <>\n            <div className='resizer-right' onMouseDown={ initResizeElement } role='button' tabIndex={0}></div>\n            <div className='resizer-rightBottomCorner' onMouseDown={ initResizeElement } role='button' tabIndex={0}></div>\n            <div className='resizer-bottom' onMouseDown={ initResizeElement } role='button' tabIndex={0}></div>\n            <div className='resizer-left' onMouseDown={ initResizeElement } role='button' tabIndex={0}></div>\n            <div className='resizer-leftBottomCorner' onMouseDown={ initResizeElement } role='button' tabIndex={0}></div>\n        </>;\n    };\n\n    const dataProps = generateDataAttribute( { maxHeight, maxWidth, minHeight, minWidth } );\n    return <div data-locator='sw-popup' className='sw-popup' ref={popupReference}>\n        { hasMask && <div data-locator='sw-popup-screenMask' className='sw-popup-screenMask'></div> }\n        <div data-locator='aw-layout-popup' className={'sw-popup-layout aw-layout-popup ' + innerClassName} role='complementary'>\n            <div className={getClassName()} style={{ width, height }} {...dataProps}>\n                { hasCloseButton && <span role='button' tabIndex='0' data-locator='popup-close-button' onKeyDown={api.hide} onClick={api.hide} className='aw-popup-close'>&times;</span> }\n                { generateContent() }\n                { getClassName().includes( 'aw-popup-enableResize' ) && getResizeHandles() }\n            </div>\n            { hasArrow && <div data-locator='sw-popup-arrow' className='sw-popup-arrow'></div> }\n        </div>\n    </div>;\n};\n\nexport const initResizeElement = ( onMouseDownEvent, minWidth = 5, minHeight = 5 ) => {\n    let initialWidth = parseInt(\n        window.getComputedStyle( onMouseDownEvent.target.parentElement ).width,\n        10\n    );\n    let startHeight = parseInt(\n        window.getComputedStyle( onMouseDownEvent.target.parentElement ).height,\n        10\n    );\n\n    var dialog = onMouseDownEvent.target.parentElement.parentElement.getBoundingClientRect();\n    var setDialogWidth = ( initialWidth, diffWidth, element )=>{\n        let finalWidth = initialWidth + diffWidth;\n        if ( finalWidth < minWidth ) {\n            finalWidth = minWidth;\n            diffWidth = finalWidth - initialWidth;\n        }\n        element.style.width = finalWidth + 'px';\n        return diffWidth;\n    };\n    const doDrag = _.throttle( function( onDragEvent ) {\n        let className = onMouseDownEvent.target.className;\n        let element = onMouseDownEvent.target.parentElement;\n        let parentElement = onMouseDownEvent.target.parentElement.parentElement;\n\n        let startX = onMouseDownEvent.clientX;\n        let startY = onMouseDownEvent.clientY;\n        if( className === 'resizer-right' || className === 'resizer-rightBottomCorner' ) {\n            let differenceWidth = onDragEvent.clientX - startX;\n            setDialogWidth( initialWidth, differenceWidth, element );\n        }\n        if( className === 'resizer-left' || className === 'resizer-leftBottomCorner' ) {\n            let differenceWidth = startX - onDragEvent.clientX;\n            differenceWidth = setDialogWidth( initialWidth, differenceWidth, element );\n            parentElement.style.left = dialog.left - differenceWidth + 'px';\n        }\n        if( className === 'resizer-bottom' || className === 'resizer-rightBottomCorner' || className === 'resizer-leftBottomCorner' ) {\n            element.style.height = startHeight + onDragEvent.clientY - startY + 'px';\n            if( startHeight + onDragEvent.clientY - startY < minHeight ) {\n                element.style.height = minHeight + 'px';\n            }\n        }\n    }, 50 );\n    const stopDrag = () => {\n        document.documentElement.removeEventListener( 'mousemove', doDrag, false );\n        document.documentElement.removeEventListener( 'mouseup', stopDrag, false );\n    };\n    document.documentElement.addEventListener( 'mousemove', doDrag, false );\n    document.documentElement.addEventListener( 'mouseup', stopDrag, false );\n};\n\nconst generateDataAttribute = ( data ) => {\n    let result = {};\n    for( let key in data ) {\n        let value = data[ key ];\n        if( value ) {\n            let key2 = `data-${key.replace( /([A-Z])/, ( $1 )=>'-' + $1.toLowerCase() )}`;\n            result[ key2 ] = value;\n        }\n    }\n    return result;\n};\n\nconst ensureUnit = ( val ) => {\n    if( !isNaN( Number( val ) ) ) {\n        val += 'px';\n    }\n    return val;\n};\n"]},"metadata":{},"sourceType":"module"}