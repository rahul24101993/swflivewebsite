{"ast":null,"code":"// Copyright (c) 2022 Siemens\n\n/**\n * This service provides keyboard interaction for list.\n *\n * @module js/ariaList\n */\n\n/* eslint-disable require-jsdoc */\nimport keyCode from 'js/keyCode';\nimport _ from 'lodash';\nconst ARIA_SELECTED = 'aria-selected';\nconst LIST_SELECTOR = '.aw-widgets-cellListItem';\nconst ARRAY_LIST_SELECTOR = '.aw-jswidgets-arrayValueCellListItem';\n\nfunction ariaList() {}\n\nariaList.prototype.init = function (node, options, childSelector) {\n  this.ROLE_OPTION = `[role=\"${childSelector}\"]`;\n  this.childSelector = childSelector;\n  this.node = node;\n  this.options = options;\n  this.options.autoScroll = this.options.autoScroll !== false;\n  this.options.listSelector = options.listSelector || LIST_SELECTOR;\n  this.activeDescendant = null;\n  this.resources = [];\n\n  this.handleFocusChange = function () {};\n\n  this.registerEvents();\n};\n\nariaList.prototype.clean = function () {\n  this.resources.forEach(remove => {\n    remove();\n  });\n};\n\nariaList.prototype.registerEvents = function () {\n  if (!this.node) {\n    return;\n  }\n\n  this._setupFocus = this.setupFocus.bind(this);\n  this._setupBlur = this.setupBlur.bind(this);\n  this._checkKeyPress = this.checkKeyPress.bind(this);\n  this._checkClickItem = this.checkClickItem.bind(this);\n  this.node.addEventListener('focus', this._setupFocus);\n  this.node.addEventListener('blur', this._setupBlur);\n  this.node.addEventListener('keydown', this._checkKeyPress);\n  this.node.addEventListener('click', this._checkClickItem);\n  this.resources.push(() => {\n    this.node.removeEventListener('focus', this._setupFocus);\n    this.node.removeEventListener('blur', this._setupBlur);\n    this.node.removeEventListener('keydown', this._checkKeyPress);\n    this.node.removeEventListener('click', this._checkClickItem);\n  });\n};\n\nariaList.prototype.setupFocus = function () {\n  // with no elements in list. we still have activeDescent non-null.\n  //This will ensure it will try to set-up when we have some listItems.\n  if (this.activeDescendant && this.node.getAttribute('tabindex') !== '0') {\n    this.focusItem(this.activeDescendant);\n    return;\n  } // if any pre-selection exist\n\n\n  let preSelectedItem = this.node.querySelector(`li${this.ROLE_OPTION}[${ARIA_SELECTED}=\"true\"]`);\n\n  if (preSelectedItem) {\n    this.activeDescendant = preSelectedItem;\n    this.focusItem(this.activeDescendant);\n  } else {\n    this.focusFirstItem();\n  }\n};\n\nariaList.prototype.checkContextMenu = function (evt) {\n  evt.preventDefault();\n  this.options && this.options.apis && this.options.apis.handleContextMenu(evt);\n};\n\nariaList.prototype.setupBlur = function () {\n  if (this.activeDescendant) {\n    this.activeDescendant = null;\n  }\n};\n\nariaList.prototype.focusFirstItem = function () {\n  var firstItem = this.node.querySelector(this.ROLE_OPTION);\n  firstItem && this.focusItem(firstItem);\n};\n\nariaList.prototype.focusLastItem = function () {\n  var itemList = this.node.querySelectorAll(this.ROLE_OPTION);\n  itemList.length && this.focusItem(itemList[itemList.length - 1]);\n};\n\nariaList.prototype.focusNextItem = function (currentItem) {\n  let next = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var itemList = this.node.querySelectorAll(this.ROLE_OPTION);\n  var nextItem = next ? currentItem.nextElementSibling : currentItem.previousElementSibling; // if valid nextItem\n\n  if (nextItem && _.indexOf(itemList, nextItem) !== -1) {\n    this.focusItem(nextItem);\n  } else {\n    //Group List logic starts here\n    const currentItemIndx = _.indexOf(itemList, currentItem);\n\n    if (next && currentItemIndx > -1 && itemList.length > currentItemIndx + 1) {\n      this.focusItem(itemList[currentItemIndx + 1]);\n    } else if (!next && currentItemIndx - 1 > -1) {\n      this.focusItem(itemList[currentItemIndx - 1]);\n    }\n  }\n};\n\nariaList.prototype.isFocusableListItem = function (evt) {\n  return _.isEqual(evt.target.closest(this.options.listSelector), document.activeElement);\n};\n\nariaList.prototype.checkClickItem = function (evt) {\n  if (!this.isFocusableListItem(evt)) {\n    return;\n  }\n\n  let element = evt.target.closest(this.options.listSelector);\n  this.focusItem(element, true);\n\n  if (this.options.setAriaAttributes) {\n    this.toggleSelectItem(element);\n  }\n};\n\nariaList.prototype.toggleSelectItem = function (element) {\n  let existingSelectedItem = this.node.querySelector(`li${this.ROLE_OPTION}[${ARIA_SELECTED}=\"true\"]`);\n\n  if (existingSelectedItem && !_.isEqual(existingSelectedItem, element)) {\n    existingSelectedItem.setAttribute(ARIA_SELECTED, 'false');\n  }\n\n  element.setAttribute(ARIA_SELECTED, element.getAttribute(ARIA_SELECTED) === 'true' ? 'false' : 'true');\n};\n\nariaList.prototype.handleEnterKey = function (evt, ctrlKey, nextItem) {\n  // only valid based on options\n  // eg: input with dropdown, the input box already taken enter key, so drop down should pick a alternative\n  if (evt.target.getAttribute('role') === this.childSelector && !this.options.useCtrl || this.options.useCtrl && ctrlKey) {\n    evt.preventDefault();\n\n    if (this.options.setAriaAttributes) {\n      this.toggleSelectItem(nextItem);\n    } //selection of item should be retained if the tabIndex is still 0. Else follow existing behavior.\n\n\n    var selectItem;\n\n    if (evt.target.tabIndex === 0) {\n      selectItem = evt.target;\n    } else {\n      selectItem = nextItem;\n    }\n\n    this.options && this.options.apis && this.options.apis.selectItem(evt, selectItem);\n  }\n};\n\nariaList.prototype.handleTabKey = function (evt, shiftKey) {\n  // 1. aw-numeric tab  - ARRAY_LIST_SELECTOR\n  // tab key skipped focus once no element left selected.\n  // if tabindex is set on node, but no element selected, next focus should be on input element\n  // shift key to be false for a forward tabflow.\n  if (this.options.listSelector === ARRAY_LIST_SELECTOR && this.node.querySelectorAll(this.ROLE_OPTION).length > 0 && this.node.querySelectorAll('li.aw-state-selected').length === 0 && !shiftKey) {\n    evt.preventDefault();\n\n    if (this.node.parentNode && this.node.parentNode.nextElementSibling) {\n      this.node.parentNode.nextElementSibling.focus();\n    }\n  }\n}; // eslint-disable-next-line complexity\n\n\nariaList.prototype.checkKeyPress = function (evt) {\n  if (!this.isFocusableListItem(evt)) {\n    return;\n  }\n\n  var key = evt.key || evt.code;\n  var ctrlKey = evt.ctrlKey || evt.metaKey;\n  var shiftKey = evt.shiftKey || evt.metaKey; // once you remove the last element in the list, activeDescendant should be set to null since its already removed from the actual list.\n\n  if (!_.includes(this.node.querySelectorAll(this.ROLE_OPTION), this.activeDescendant)) {\n    this.activeDescendant = null;\n  }\n\n  var nextItem = this.activeDescendant || this.node.querySelector(`li${this.ROLE_OPTION}[${ARIA_SELECTED}=\"true\"]`); // if no pre - selections, we select the first one and return directly\n\n  if (!nextItem) {\n    this.setupFocus();\n    return;\n  }\n\n  switch (key) {\n    case keyCode.PAGE_UP:\n    case keyCode.PAGE_DOWN:\n    case keyCode.UP:\n    case keyCode.ARROW_UP:\n    case keyCode.DOWN:\n    case keyCode.ARROW_DOWN:\n    case keyCode.LEFT:\n    case keyCode.ARROW_LEFT:\n    case keyCode.RIGHT:\n    case keyCode.ARROW_RIGHT:\n      evt.preventDefault();\n\n      if (key === keyCode.PAGE_UP || key === keyCode.UP || key === keyCode.ARROW_UP || key === keyCode.LEFT || key === keyCode.ARROW_LEFT) {\n        this.focusNextItem(nextItem, false);\n      } else {\n        this.focusNextItem(nextItem);\n      }\n\n      break;\n\n    case keyCode.HOME:\n      evt.preventDefault();\n      this.focusFirstItem();\n      break;\n\n    case keyCode.END:\n      evt.preventDefault();\n      this.focusLastItem();\n      break;\n\n    case keyCode.SPACE:\n    case keyCode.RETURN:\n    case keyCode.ENTER:\n      this.handleEnterKey(evt, ctrlKey, nextItem);\n      break;\n\n    case keyCode.TAB:\n      // tabstop fix\n      this.handleTabKey(evt, shiftKey);\n      break;\n\n    case keyCode.CONTEXTMENU:\n      this.checkContextMenu(evt);\n      break;\n\n    default:\n      break;\n  }\n};\n\nariaList.prototype.roveTabIndex = function (activeElement) {\n  if (!activeElement) {\n    return;\n  }\n\n  activeElement.setAttribute('tabindex', -1);\n};\n\nariaList.prototype.focusItem = function (element, isMouseClick) {\n  this.roveTabIndex(this.activeDescendant); //Set tabindex='-1' on the element that needs JS focus\n\n  element.setAttribute('tabindex', 0);\n  element.focus();\n  this.setHandleFocusChangeOnItem(element);\n  this.activeDescendant = element;\n\n  if (this.options.autoScroll && !isMouseClick) {\n    element.scrollIntoView({\n      behavior: 'smooth',\n      block: 'center',\n      inline: 'nearest'\n    });\n  }\n\n  this.handleFocusChange(null, element); //Remove tabindex from parent(ul) as one of the child elements(li) now have tabindex set\n\n  if (this.node.getAttribute('tabindex') === '0') {\n    this.node.setAttribute('tabindex', -1);\n  }\n};\n\nariaList.prototype.setHandleFocusChange = function (focusChangeHandler) {\n  this.handleFocusChange = focusChangeHandler;\n};\n\nariaList.prototype.setHandleFocusChangeOnItem = function (element) {\n  let handleFocusChangeOnItem = () => {\n    this.handleFocusChange(null, element);\n  };\n\n  let handleBlurOnItem = () => {\n    setTimeout(() => {\n      // timeout is required to get the next focused element\n      this.options && this.options.apis && this.options.apis.handleBlurOnItem && this.options.apis.handleBlurOnItem(element, document.activeElement);\n    });\n  };\n\n  if (this.activeDescendant) {\n    this.activeDescendant.removeEventListener('focus', handleFocusChangeOnItem);\n    this.activeDescendant.removeEventListener('blur', handleBlurOnItem);\n  }\n\n  element.addEventListener('focus', handleFocusChangeOnItem);\n  element.addEventListener('blur', handleBlurOnItem);\n};\n\nexport default ariaList;","map":{"version":3,"names":["keyCode","_","ARIA_SELECTED","LIST_SELECTOR","ARRAY_LIST_SELECTOR","ariaList","prototype","init","node","options","childSelector","ROLE_OPTION","autoScroll","listSelector","activeDescendant","resources","handleFocusChange","registerEvents","clean","forEach","remove","_setupFocus","setupFocus","bind","_setupBlur","setupBlur","_checkKeyPress","checkKeyPress","_checkClickItem","checkClickItem","addEventListener","push","removeEventListener","getAttribute","focusItem","preSelectedItem","querySelector","focusFirstItem","checkContextMenu","evt","preventDefault","apis","handleContextMenu","firstItem","focusLastItem","itemList","querySelectorAll","length","focusNextItem","currentItem","next","nextItem","nextElementSibling","previousElementSibling","indexOf","currentItemIndx","isFocusableListItem","isEqual","target","closest","document","activeElement","element","setAriaAttributes","toggleSelectItem","existingSelectedItem","setAttribute","handleEnterKey","ctrlKey","useCtrl","selectItem","tabIndex","handleTabKey","shiftKey","parentNode","focus","key","code","metaKey","includes","PAGE_UP","PAGE_DOWN","UP","ARROW_UP","DOWN","ARROW_DOWN","LEFT","ARROW_LEFT","RIGHT","ARROW_RIGHT","HOME","END","SPACE","RETURN","ENTER","TAB","CONTEXTMENU","roveTabIndex","isMouseClick","setHandleFocusChangeOnItem","scrollIntoView","behavior","block","inline","setHandleFocusChange","focusChangeHandler","handleFocusChangeOnItem","handleBlurOnItem","setTimeout"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/uiwidget/src/js/ariaList.js"],"sourcesContent":["// Copyright (c) 2022 Siemens\n\n/**\n * This service provides keyboard interaction for list.\n *\n * @module js/ariaList\n */\n\n/* eslint-disable require-jsdoc */\nimport keyCode from 'js/keyCode';\nimport _ from 'lodash';\n\nconst ARIA_SELECTED = 'aria-selected';\nconst LIST_SELECTOR = '.aw-widgets-cellListItem';\nconst ARRAY_LIST_SELECTOR = '.aw-jswidgets-arrayValueCellListItem';\n\nfunction ariaList() {}\n\nariaList.prototype.init = function( node, options, childSelector ) {\n    this.ROLE_OPTION = `[role=\"${childSelector}\"]`;\n    this.childSelector = childSelector;\n    this.node = node;\n    this.options = options;\n    this.options.autoScroll = this.options.autoScroll !== false;\n    this.options.listSelector = options.listSelector || LIST_SELECTOR;\n    this.activeDescendant = null;\n    this.resources = [];\n    this.handleFocusChange = function() {};\n    this.registerEvents();\n};\n\nariaList.prototype.clean = function() {\n    this.resources.forEach( ( remove ) => { remove(); } );\n};\n\nariaList.prototype.registerEvents = function() {\n    if( !this.node ) { return; }\n    this._setupFocus = this.setupFocus.bind( this );\n    this._setupBlur = this.setupBlur.bind( this );\n    this._checkKeyPress = this.checkKeyPress.bind( this );\n    this._checkClickItem = this.checkClickItem.bind( this );\n    this.node.addEventListener( 'focus', this._setupFocus );\n    this.node.addEventListener( 'blur', this._setupBlur );\n    this.node.addEventListener( 'keydown', this._checkKeyPress );\n    this.node.addEventListener( 'click', this._checkClickItem );\n    this.resources.push( () => {\n        this.node.removeEventListener( 'focus', this._setupFocus );\n        this.node.removeEventListener( 'blur', this._setupBlur );\n        this.node.removeEventListener( 'keydown', this._checkKeyPress );\n        this.node.removeEventListener( 'click', this._checkClickItem );\n    } );\n};\n\nariaList.prototype.setupFocus = function() {\n    // with no elements in list. we still have activeDescent non-null.\n    //This will ensure it will try to set-up when we have some listItems.\n    if( this.activeDescendant && this.node.getAttribute( 'tabindex' ) !== '0' ) {\n        this.focusItem( this.activeDescendant );\n        return;\n    }\n\n    // if any pre-selection exist\n    let preSelectedItem = this.node.querySelector( `li${this.ROLE_OPTION}[${ARIA_SELECTED}=\"true\"]` );\n    if( preSelectedItem ) {\n        this.activeDescendant = preSelectedItem;\n        this.focusItem( this.activeDescendant );\n    } else {\n        this.focusFirstItem();\n    }\n};\n\nariaList.prototype.checkContextMenu = function( evt ) {\n    evt.preventDefault();\n    this.options && this.options.apis && this.options.apis.handleContextMenu( evt );\n};\n\nariaList.prototype.setupBlur = function() {\n    if( this.activeDescendant ) {\n        this.activeDescendant = null;\n    }\n};\n\nariaList.prototype.focusFirstItem = function() {\n    var firstItem = this.node.querySelector( this.ROLE_OPTION );\n    firstItem && this.focusItem( firstItem );\n};\nariaList.prototype.focusLastItem = function() {\n    var itemList = this.node.querySelectorAll( this.ROLE_OPTION );\n    itemList.length && this.focusItem( itemList[ itemList.length - 1 ] );\n};\nariaList.prototype.focusNextItem = function( currentItem, next = true ) {\n    var itemList = this.node.querySelectorAll( this.ROLE_OPTION );\n    var nextItem = next ? currentItem.nextElementSibling : currentItem.previousElementSibling;\n    // if valid nextItem\n    if( nextItem && _.indexOf( itemList, nextItem ) !== -1 ) {\n        this.focusItem( nextItem );\n    } else {\n        //Group List logic starts here\n        const currentItemIndx = _.indexOf( itemList, currentItem );\n        if( next && currentItemIndx > -1 && itemList.length > currentItemIndx + 1 ) {\n            this.focusItem( itemList[ currentItemIndx + 1 ] );\n        } else if( !next && currentItemIndx - 1 > -1 ) {\n            this.focusItem( itemList[ currentItemIndx - 1 ] );\n        }\n    }\n};\n\nariaList.prototype.isFocusableListItem = function( evt ) {\n    return _.isEqual( evt.target.closest( this.options.listSelector ), document.activeElement );\n};\n\nariaList.prototype.checkClickItem = function( evt ) {\n    if( !this.isFocusableListItem( evt ) ) {\n        return;\n    }\n\n    let element = evt.target.closest( this.options.listSelector );\n    this.focusItem( element, true );\n\n    if( this.options.setAriaAttributes ) {\n        this.toggleSelectItem( element );\n    }\n};\nariaList.prototype.toggleSelectItem = function( element ) {\n    let existingSelectedItem = this.node.querySelector( `li${this.ROLE_OPTION}[${ARIA_SELECTED}=\"true\"]` );\n    if( existingSelectedItem && !_.isEqual( existingSelectedItem, element ) ) {\n        existingSelectedItem.setAttribute( ARIA_SELECTED, 'false' );\n    }\n    element.setAttribute( ARIA_SELECTED, element.getAttribute( ARIA_SELECTED ) === 'true' ? 'false' : 'true' );\n};\n\nariaList.prototype.handleEnterKey = function( evt, ctrlKey, nextItem ) {\n    // only valid based on options\n    // eg: input with dropdown, the input box already taken enter key, so drop down should pick a alternative\n    if( evt.target.getAttribute( 'role' ) === this.childSelector && !this.options.useCtrl || this.options.useCtrl && ctrlKey ) {\n        evt.preventDefault();\n        if( this.options.setAriaAttributes ) {\n            this.toggleSelectItem( nextItem );\n        }\n        //selection of item should be retained if the tabIndex is still 0. Else follow existing behavior.\n        var selectItem;\n        if( evt.target.tabIndex === 0 ) {\n            selectItem = evt.target;\n        } else {\n            selectItem = nextItem;\n        }\n        this.options && this.options.apis && this.options.apis.selectItem( evt, selectItem );\n    }\n};\n\nariaList.prototype.handleTabKey = function( evt, shiftKey ) {\n    // 1. aw-numeric tab  - ARRAY_LIST_SELECTOR\n    // tab key skipped focus once no element left selected.\n    // if tabindex is set on node, but no element selected, next focus should be on input element\n    // shift key to be false for a forward tabflow.\n    if( this.options.listSelector === ARRAY_LIST_SELECTOR &&\n        this.node.querySelectorAll( this.ROLE_OPTION ).length > 0 &&\n        this.node.querySelectorAll( 'li.aw-state-selected' ).length === 0 && !shiftKey ) {\n        evt.preventDefault();\n        if( this.node.parentNode &&\n            this.node.parentNode.nextElementSibling ) {\n            this.node.parentNode.nextElementSibling.focus();\n        }\n    }\n};\n\n// eslint-disable-next-line complexity\nariaList.prototype.checkKeyPress = function( evt ) {\n    if( !this.isFocusableListItem( evt ) ) {\n        return;\n    }\n\n    var key = evt.key || evt.code;\n    var ctrlKey = evt.ctrlKey || evt.metaKey;\n    var shiftKey = evt.shiftKey || evt.metaKey;\n\n    // once you remove the last element in the list, activeDescendant should be set to null since its already removed from the actual list.\n    if( !_.includes( this.node.querySelectorAll( this.ROLE_OPTION ), this.activeDescendant ) ) {\n        this.activeDescendant = null;\n    }\n    var nextItem = this.activeDescendant || this.node.querySelector( `li${this.ROLE_OPTION}[${ARIA_SELECTED}=\"true\"]` );\n\n    // if no pre - selections, we select the first one and return directly\n    if( !nextItem ) {\n        this.setupFocus();\n        return;\n    }\n\n    switch ( key ) {\n        case keyCode.PAGE_UP:\n        case keyCode.PAGE_DOWN:\n        case keyCode.UP:\n        case keyCode.ARROW_UP:\n        case keyCode.DOWN:\n        case keyCode.ARROW_DOWN:\n        case keyCode.LEFT:\n        case keyCode.ARROW_LEFT:\n        case keyCode.RIGHT:\n        case keyCode.ARROW_RIGHT:\n            evt.preventDefault();\n            if( key === keyCode.PAGE_UP || key === keyCode.UP || key === keyCode.ARROW_UP || key === keyCode.LEFT || key === keyCode.ARROW_LEFT ) {\n                this.focusNextItem( nextItem, false );\n            } else {\n                this.focusNextItem( nextItem );\n            }\n            break;\n        case keyCode.HOME:\n            evt.preventDefault();\n            this.focusFirstItem();\n            break;\n        case keyCode.END:\n            evt.preventDefault();\n            this.focusLastItem();\n            break;\n        case keyCode.SPACE:\n        case keyCode.RETURN:\n        case keyCode.ENTER:\n            this.handleEnterKey( evt, ctrlKey, nextItem );\n            break;\n        case keyCode.TAB: // tabstop fix\n            this.handleTabKey( evt, shiftKey );\n            break;\n        case keyCode.CONTEXTMENU:\n            this.checkContextMenu( evt );\n            break;\n        default:\n            break;\n    }\n};\n\nariaList.prototype.roveTabIndex = function( activeElement ) {\n    if( !activeElement ) { return; }\n    activeElement.setAttribute( 'tabindex', -1 );\n};\n\nariaList.prototype.focusItem = function( element, isMouseClick ) {\n    this.roveTabIndex( this.activeDescendant );\n    //Set tabindex='-1' on the element that needs JS focus\n    element.setAttribute( 'tabindex', 0 );\n    element.focus();\n\n    this.setHandleFocusChangeOnItem( element );\n    this.activeDescendant = element;\n\n    if( this.options.autoScroll && !isMouseClick ) {\n        element.scrollIntoView( { behavior: 'smooth', block: 'center', inline: 'nearest' } );\n    }\n    this.handleFocusChange( null, element );\n\n    //Remove tabindex from parent(ul) as one of the child elements(li) now have tabindex set\n    if( this.node.getAttribute( 'tabindex' ) === '0' ) {\n        this.node.setAttribute( 'tabindex', -1 );\n    }\n};\nariaList.prototype.setHandleFocusChange = function( focusChangeHandler ) {\n    this.handleFocusChange = focusChangeHandler;\n};\n\nariaList.prototype.setHandleFocusChangeOnItem = function( element ) {\n    let handleFocusChangeOnItem = () => {\n        this.handleFocusChange( null, element );\n    };\n\n    let handleBlurOnItem = () => {\n        setTimeout( () => {\n            // timeout is required to get the next focused element\n            this.options && this.options.apis && this.options.apis.handleBlurOnItem && this.options.apis.handleBlurOnItem( element, document.activeElement );\n        } );\n    };\n\n    if( this.activeDescendant ) {\n        this.activeDescendant.removeEventListener( 'focus', handleFocusChangeOnItem );\n        this.activeDescendant.removeEventListener( 'blur', handleBlurOnItem );\n    }\n\n    element.addEventListener( 'focus', handleFocusChangeOnItem );\n    element.addEventListener( 'blur', handleBlurOnItem );\n};\n\nexport default ariaList;\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,OAAP,MAAoB,YAApB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,MAAMC,aAAa,GAAG,eAAtB;AACA,MAAMC,aAAa,GAAG,0BAAtB;AACA,MAAMC,mBAAmB,GAAG,sCAA5B;;AAEA,SAASC,QAAT,GAAoB,CAAE;;AAEtBA,QAAQ,CAACC,SAAT,CAAmBC,IAAnB,GAA0B,UAAUC,IAAV,EAAgBC,OAAhB,EAAyBC,aAAzB,EAAyC;EAC/D,KAAKC,WAAL,GAAoB,UAASD,aAAc,IAA3C;EACA,KAAKA,aAAL,GAAqBA,aAArB;EACA,KAAKF,IAAL,GAAYA,IAAZ;EACA,KAAKC,OAAL,GAAeA,OAAf;EACA,KAAKA,OAAL,CAAaG,UAAb,GAA0B,KAAKH,OAAL,CAAaG,UAAb,KAA4B,KAAtD;EACA,KAAKH,OAAL,CAAaI,YAAb,GAA4BJ,OAAO,CAACI,YAAR,IAAwBV,aAApD;EACA,KAAKW,gBAAL,GAAwB,IAAxB;EACA,KAAKC,SAAL,GAAiB,EAAjB;;EACA,KAAKC,iBAAL,GAAyB,YAAW,CAAE,CAAtC;;EACA,KAAKC,cAAL;AACH,CAXD;;AAaAZ,QAAQ,CAACC,SAAT,CAAmBY,KAAnB,GAA2B,YAAW;EAClC,KAAKH,SAAL,CAAeI,OAAf,CAA0BC,MAAF,IAAc;IAAEA,MAAM;EAAK,CAAnD;AACH,CAFD;;AAIAf,QAAQ,CAACC,SAAT,CAAmBW,cAAnB,GAAoC,YAAW;EAC3C,IAAI,CAAC,KAAKT,IAAV,EAAiB;IAAE;EAAS;;EAC5B,KAAKa,WAAL,GAAmB,KAAKC,UAAL,CAAgBC,IAAhB,CAAsB,IAAtB,CAAnB;EACA,KAAKC,UAAL,GAAkB,KAAKC,SAAL,CAAeF,IAAf,CAAqB,IAArB,CAAlB;EACA,KAAKG,cAAL,GAAsB,KAAKC,aAAL,CAAmBJ,IAAnB,CAAyB,IAAzB,CAAtB;EACA,KAAKK,eAAL,GAAuB,KAAKC,cAAL,CAAoBN,IAApB,CAA0B,IAA1B,CAAvB;EACA,KAAKf,IAAL,CAAUsB,gBAAV,CAA4B,OAA5B,EAAqC,KAAKT,WAA1C;EACA,KAAKb,IAAL,CAAUsB,gBAAV,CAA4B,MAA5B,EAAoC,KAAKN,UAAzC;EACA,KAAKhB,IAAL,CAAUsB,gBAAV,CAA4B,SAA5B,EAAuC,KAAKJ,cAA5C;EACA,KAAKlB,IAAL,CAAUsB,gBAAV,CAA4B,OAA5B,EAAqC,KAAKF,eAA1C;EACA,KAAKb,SAAL,CAAegB,IAAf,CAAqB,MAAM;IACvB,KAAKvB,IAAL,CAAUwB,mBAAV,CAA+B,OAA/B,EAAwC,KAAKX,WAA7C;IACA,KAAKb,IAAL,CAAUwB,mBAAV,CAA+B,MAA/B,EAAuC,KAAKR,UAA5C;IACA,KAAKhB,IAAL,CAAUwB,mBAAV,CAA+B,SAA/B,EAA0C,KAAKN,cAA/C;IACA,KAAKlB,IAAL,CAAUwB,mBAAV,CAA+B,OAA/B,EAAwC,KAAKJ,eAA7C;EACH,CALD;AAMH,CAhBD;;AAkBAvB,QAAQ,CAACC,SAAT,CAAmBgB,UAAnB,GAAgC,YAAW;EACvC;EACA;EACA,IAAI,KAAKR,gBAAL,IAAyB,KAAKN,IAAL,CAAUyB,YAAV,CAAwB,UAAxB,MAAyC,GAAtE,EAA4E;IACxE,KAAKC,SAAL,CAAgB,KAAKpB,gBAArB;IACA;EACH,CANsC,CAQvC;;;EACA,IAAIqB,eAAe,GAAG,KAAK3B,IAAL,CAAU4B,aAAV,CAA0B,KAAI,KAAKzB,WAAY,IAAGT,aAAc,UAAhE,CAAtB;;EACA,IAAIiC,eAAJ,EAAsB;IAClB,KAAKrB,gBAAL,GAAwBqB,eAAxB;IACA,KAAKD,SAAL,CAAgB,KAAKpB,gBAArB;EACH,CAHD,MAGO;IACH,KAAKuB,cAAL;EACH;AACJ,CAhBD;;AAkBAhC,QAAQ,CAACC,SAAT,CAAmBgC,gBAAnB,GAAsC,UAAUC,GAAV,EAAgB;EAClDA,GAAG,CAACC,cAAJ;EACA,KAAK/B,OAAL,IAAgB,KAAKA,OAAL,CAAagC,IAA7B,IAAqC,KAAKhC,OAAL,CAAagC,IAAb,CAAkBC,iBAAlB,CAAqCH,GAArC,CAArC;AACH,CAHD;;AAKAlC,QAAQ,CAACC,SAAT,CAAmBmB,SAAnB,GAA+B,YAAW;EACtC,IAAI,KAAKX,gBAAT,EAA4B;IACxB,KAAKA,gBAAL,GAAwB,IAAxB;EACH;AACJ,CAJD;;AAMAT,QAAQ,CAACC,SAAT,CAAmB+B,cAAnB,GAAoC,YAAW;EAC3C,IAAIM,SAAS,GAAG,KAAKnC,IAAL,CAAU4B,aAAV,CAAyB,KAAKzB,WAA9B,CAAhB;EACAgC,SAAS,IAAI,KAAKT,SAAL,CAAgBS,SAAhB,CAAb;AACH,CAHD;;AAIAtC,QAAQ,CAACC,SAAT,CAAmBsC,aAAnB,GAAmC,YAAW;EAC1C,IAAIC,QAAQ,GAAG,KAAKrC,IAAL,CAAUsC,gBAAV,CAA4B,KAAKnC,WAAjC,CAAf;EACAkC,QAAQ,CAACE,MAAT,IAAmB,KAAKb,SAAL,CAAgBW,QAAQ,CAAEA,QAAQ,CAACE,MAAT,GAAkB,CAApB,CAAxB,CAAnB;AACH,CAHD;;AAIA1C,QAAQ,CAACC,SAAT,CAAmB0C,aAAnB,GAAmC,UAAUC,WAAV,EAAqC;EAAA,IAAdC,IAAc,uEAAP,IAAO;EACpE,IAAIL,QAAQ,GAAG,KAAKrC,IAAL,CAAUsC,gBAAV,CAA4B,KAAKnC,WAAjC,CAAf;EACA,IAAIwC,QAAQ,GAAGD,IAAI,GAAGD,WAAW,CAACG,kBAAf,GAAoCH,WAAW,CAACI,sBAAnE,CAFoE,CAGpE;;EACA,IAAIF,QAAQ,IAAIlD,CAAC,CAACqD,OAAF,CAAWT,QAAX,EAAqBM,QAArB,MAAoC,CAAC,CAArD,EAAyD;IACrD,KAAKjB,SAAL,CAAgBiB,QAAhB;EACH,CAFD,MAEO;IACH;IACA,MAAMI,eAAe,GAAGtD,CAAC,CAACqD,OAAF,CAAWT,QAAX,EAAqBI,WAArB,CAAxB;;IACA,IAAIC,IAAI,IAAIK,eAAe,GAAG,CAAC,CAA3B,IAAgCV,QAAQ,CAACE,MAAT,GAAkBQ,eAAe,GAAG,CAAxE,EAA4E;MACxE,KAAKrB,SAAL,CAAgBW,QAAQ,CAAEU,eAAe,GAAG,CAApB,CAAxB;IACH,CAFD,MAEO,IAAI,CAACL,IAAD,IAASK,eAAe,GAAG,CAAlB,GAAsB,CAAC,CAApC,EAAwC;MAC3C,KAAKrB,SAAL,CAAgBW,QAAQ,CAAEU,eAAe,GAAG,CAApB,CAAxB;IACH;EACJ;AACJ,CAfD;;AAiBAlD,QAAQ,CAACC,SAAT,CAAmBkD,mBAAnB,GAAyC,UAAUjB,GAAV,EAAgB;EACrD,OAAOtC,CAAC,CAACwD,OAAF,CAAWlB,GAAG,CAACmB,MAAJ,CAAWC,OAAX,CAAoB,KAAKlD,OAAL,CAAaI,YAAjC,CAAX,EAA4D+C,QAAQ,CAACC,aAArE,CAAP;AACH,CAFD;;AAIAxD,QAAQ,CAACC,SAAT,CAAmBuB,cAAnB,GAAoC,UAAUU,GAAV,EAAgB;EAChD,IAAI,CAAC,KAAKiB,mBAAL,CAA0BjB,GAA1B,CAAL,EAAuC;IACnC;EACH;;EAED,IAAIuB,OAAO,GAAGvB,GAAG,CAACmB,MAAJ,CAAWC,OAAX,CAAoB,KAAKlD,OAAL,CAAaI,YAAjC,CAAd;EACA,KAAKqB,SAAL,CAAgB4B,OAAhB,EAAyB,IAAzB;;EAEA,IAAI,KAAKrD,OAAL,CAAasD,iBAAjB,EAAqC;IACjC,KAAKC,gBAAL,CAAuBF,OAAvB;EACH;AACJ,CAXD;;AAYAzD,QAAQ,CAACC,SAAT,CAAmB0D,gBAAnB,GAAsC,UAAUF,OAAV,EAAoB;EACtD,IAAIG,oBAAoB,GAAG,KAAKzD,IAAL,CAAU4B,aAAV,CAA0B,KAAI,KAAKzB,WAAY,IAAGT,aAAc,UAAhE,CAA3B;;EACA,IAAI+D,oBAAoB,IAAI,CAAChE,CAAC,CAACwD,OAAF,CAAWQ,oBAAX,EAAiCH,OAAjC,CAA7B,EAA0E;IACtEG,oBAAoB,CAACC,YAArB,CAAmChE,aAAnC,EAAkD,OAAlD;EACH;;EACD4D,OAAO,CAACI,YAAR,CAAsBhE,aAAtB,EAAqC4D,OAAO,CAAC7B,YAAR,CAAsB/B,aAAtB,MAA0C,MAA1C,GAAmD,OAAnD,GAA6D,MAAlG;AACH,CAND;;AAQAG,QAAQ,CAACC,SAAT,CAAmB6D,cAAnB,GAAoC,UAAU5B,GAAV,EAAe6B,OAAf,EAAwBjB,QAAxB,EAAmC;EACnE;EACA;EACA,IAAIZ,GAAG,CAACmB,MAAJ,CAAWzB,YAAX,CAAyB,MAAzB,MAAsC,KAAKvB,aAA3C,IAA4D,CAAC,KAAKD,OAAL,CAAa4D,OAA1E,IAAqF,KAAK5D,OAAL,CAAa4D,OAAb,IAAwBD,OAAjH,EAA2H;IACvH7B,GAAG,CAACC,cAAJ;;IACA,IAAI,KAAK/B,OAAL,CAAasD,iBAAjB,EAAqC;MACjC,KAAKC,gBAAL,CAAuBb,QAAvB;IACH,CAJsH,CAKvH;;;IACA,IAAImB,UAAJ;;IACA,IAAI/B,GAAG,CAACmB,MAAJ,CAAWa,QAAX,KAAwB,CAA5B,EAAgC;MAC5BD,UAAU,GAAG/B,GAAG,CAACmB,MAAjB;IACH,CAFD,MAEO;MACHY,UAAU,GAAGnB,QAAb;IACH;;IACD,KAAK1C,OAAL,IAAgB,KAAKA,OAAL,CAAagC,IAA7B,IAAqC,KAAKhC,OAAL,CAAagC,IAAb,CAAkB6B,UAAlB,CAA8B/B,GAA9B,EAAmC+B,UAAnC,CAArC;EACH;AACJ,CAjBD;;AAmBAjE,QAAQ,CAACC,SAAT,CAAmBkE,YAAnB,GAAkC,UAAUjC,GAAV,EAAekC,QAAf,EAA0B;EACxD;EACA;EACA;EACA;EACA,IAAI,KAAKhE,OAAL,CAAaI,YAAb,KAA8BT,mBAA9B,IACA,KAAKI,IAAL,CAAUsC,gBAAV,CAA4B,KAAKnC,WAAjC,EAA+CoC,MAA/C,GAAwD,CADxD,IAEA,KAAKvC,IAAL,CAAUsC,gBAAV,CAA4B,sBAA5B,EAAqDC,MAArD,KAAgE,CAFhE,IAEqE,CAAC0B,QAF1E,EAEqF;IACjFlC,GAAG,CAACC,cAAJ;;IACA,IAAI,KAAKhC,IAAL,CAAUkE,UAAV,IACA,KAAKlE,IAAL,CAAUkE,UAAV,CAAqBtB,kBADzB,EAC8C;MAC1C,KAAK5C,IAAL,CAAUkE,UAAV,CAAqBtB,kBAArB,CAAwCuB,KAAxC;IACH;EACJ;AACJ,CAdD,C,CAgBA;;;AACAtE,QAAQ,CAACC,SAAT,CAAmBqB,aAAnB,GAAmC,UAAUY,GAAV,EAAgB;EAC/C,IAAI,CAAC,KAAKiB,mBAAL,CAA0BjB,GAA1B,CAAL,EAAuC;IACnC;EACH;;EAED,IAAIqC,GAAG,GAAGrC,GAAG,CAACqC,GAAJ,IAAWrC,GAAG,CAACsC,IAAzB;EACA,IAAIT,OAAO,GAAG7B,GAAG,CAAC6B,OAAJ,IAAe7B,GAAG,CAACuC,OAAjC;EACA,IAAIL,QAAQ,GAAGlC,GAAG,CAACkC,QAAJ,IAAgBlC,GAAG,CAACuC,OAAnC,CAP+C,CAS/C;;EACA,IAAI,CAAC7E,CAAC,CAAC8E,QAAF,CAAY,KAAKvE,IAAL,CAAUsC,gBAAV,CAA4B,KAAKnC,WAAjC,CAAZ,EAA4D,KAAKG,gBAAjE,CAAL,EAA2F;IACvF,KAAKA,gBAAL,GAAwB,IAAxB;EACH;;EACD,IAAIqC,QAAQ,GAAG,KAAKrC,gBAAL,IAAyB,KAAKN,IAAL,CAAU4B,aAAV,CAA0B,KAAI,KAAKzB,WAAY,IAAGT,aAAc,UAAhE,CAAxC,CAb+C,CAe/C;;EACA,IAAI,CAACiD,QAAL,EAAgB;IACZ,KAAK7B,UAAL;IACA;EACH;;EAED,QAASsD,GAAT;IACI,KAAK5E,OAAO,CAACgF,OAAb;IACA,KAAKhF,OAAO,CAACiF,SAAb;IACA,KAAKjF,OAAO,CAACkF,EAAb;IACA,KAAKlF,OAAO,CAACmF,QAAb;IACA,KAAKnF,OAAO,CAACoF,IAAb;IACA,KAAKpF,OAAO,CAACqF,UAAb;IACA,KAAKrF,OAAO,CAACsF,IAAb;IACA,KAAKtF,OAAO,CAACuF,UAAb;IACA,KAAKvF,OAAO,CAACwF,KAAb;IACA,KAAKxF,OAAO,CAACyF,WAAb;MACIlD,GAAG,CAACC,cAAJ;;MACA,IAAIoC,GAAG,KAAK5E,OAAO,CAACgF,OAAhB,IAA2BJ,GAAG,KAAK5E,OAAO,CAACkF,EAA3C,IAAiDN,GAAG,KAAK5E,OAAO,CAACmF,QAAjE,IAA6EP,GAAG,KAAK5E,OAAO,CAACsF,IAA7F,IAAqGV,GAAG,KAAK5E,OAAO,CAACuF,UAAzH,EAAsI;QAClI,KAAKvC,aAAL,CAAoBG,QAApB,EAA8B,KAA9B;MACH,CAFD,MAEO;QACH,KAAKH,aAAL,CAAoBG,QAApB;MACH;;MACD;;IACJ,KAAKnD,OAAO,CAAC0F,IAAb;MACInD,GAAG,CAACC,cAAJ;MACA,KAAKH,cAAL;MACA;;IACJ,KAAKrC,OAAO,CAAC2F,GAAb;MACIpD,GAAG,CAACC,cAAJ;MACA,KAAKI,aAAL;MACA;;IACJ,KAAK5C,OAAO,CAAC4F,KAAb;IACA,KAAK5F,OAAO,CAAC6F,MAAb;IACA,KAAK7F,OAAO,CAAC8F,KAAb;MACI,KAAK3B,cAAL,CAAqB5B,GAArB,EAA0B6B,OAA1B,EAAmCjB,QAAnC;MACA;;IACJ,KAAKnD,OAAO,CAAC+F,GAAb;MAAkB;MACd,KAAKvB,YAAL,CAAmBjC,GAAnB,EAAwBkC,QAAxB;MACA;;IACJ,KAAKzE,OAAO,CAACgG,WAAb;MACI,KAAK1D,gBAAL,CAAuBC,GAAvB;MACA;;IACJ;MACI;EAtCR;AAwCH,CA7DD;;AA+DAlC,QAAQ,CAACC,SAAT,CAAmB2F,YAAnB,GAAkC,UAAUpC,aAAV,EAA0B;EACxD,IAAI,CAACA,aAAL,EAAqB;IAAE;EAAS;;EAChCA,aAAa,CAACK,YAAd,CAA4B,UAA5B,EAAwC,CAAC,CAAzC;AACH,CAHD;;AAKA7D,QAAQ,CAACC,SAAT,CAAmB4B,SAAnB,GAA+B,UAAU4B,OAAV,EAAmBoC,YAAnB,EAAkC;EAC7D,KAAKD,YAAL,CAAmB,KAAKnF,gBAAxB,EAD6D,CAE7D;;EACAgD,OAAO,CAACI,YAAR,CAAsB,UAAtB,EAAkC,CAAlC;EACAJ,OAAO,CAACa,KAAR;EAEA,KAAKwB,0BAAL,CAAiCrC,OAAjC;EACA,KAAKhD,gBAAL,GAAwBgD,OAAxB;;EAEA,IAAI,KAAKrD,OAAL,CAAaG,UAAb,IAA2B,CAACsF,YAAhC,EAA+C;IAC3CpC,OAAO,CAACsC,cAAR,CAAwB;MAAEC,QAAQ,EAAE,QAAZ;MAAsBC,KAAK,EAAE,QAA7B;MAAuCC,MAAM,EAAE;IAA/C,CAAxB;EACH;;EACD,KAAKvF,iBAAL,CAAwB,IAAxB,EAA8B8C,OAA9B,EAZ6D,CAc7D;;EACA,IAAI,KAAKtD,IAAL,CAAUyB,YAAV,CAAwB,UAAxB,MAAyC,GAA7C,EAAmD;IAC/C,KAAKzB,IAAL,CAAU0D,YAAV,CAAwB,UAAxB,EAAoC,CAAC,CAArC;EACH;AACJ,CAlBD;;AAmBA7D,QAAQ,CAACC,SAAT,CAAmBkG,oBAAnB,GAA0C,UAAUC,kBAAV,EAA+B;EACrE,KAAKzF,iBAAL,GAAyByF,kBAAzB;AACH,CAFD;;AAIApG,QAAQ,CAACC,SAAT,CAAmB6F,0BAAnB,GAAgD,UAAUrC,OAAV,EAAoB;EAChE,IAAI4C,uBAAuB,GAAG,MAAM;IAChC,KAAK1F,iBAAL,CAAwB,IAAxB,EAA8B8C,OAA9B;EACH,CAFD;;EAIA,IAAI6C,gBAAgB,GAAG,MAAM;IACzBC,UAAU,CAAE,MAAM;MACd;MACA,KAAKnG,OAAL,IAAgB,KAAKA,OAAL,CAAagC,IAA7B,IAAqC,KAAKhC,OAAL,CAAagC,IAAb,CAAkBkE,gBAAvD,IAA2E,KAAKlG,OAAL,CAAagC,IAAb,CAAkBkE,gBAAlB,CAAoC7C,OAApC,EAA6CF,QAAQ,CAACC,aAAtD,CAA3E;IACH,CAHS,CAAV;EAIH,CALD;;EAOA,IAAI,KAAK/C,gBAAT,EAA4B;IACxB,KAAKA,gBAAL,CAAsBkB,mBAAtB,CAA2C,OAA3C,EAAoD0E,uBAApD;IACA,KAAK5F,gBAAL,CAAsBkB,mBAAtB,CAA2C,MAA3C,EAAmD2E,gBAAnD;EACH;;EAED7C,OAAO,CAAChC,gBAAR,CAA0B,OAA1B,EAAmC4E,uBAAnC;EACA5C,OAAO,CAAChC,gBAAR,CAA0B,MAA1B,EAAkC6E,gBAAlC;AACH,CAnBD;;AAqBA,eAAetG,QAAf"},"metadata":{},"sourceType":"module"}