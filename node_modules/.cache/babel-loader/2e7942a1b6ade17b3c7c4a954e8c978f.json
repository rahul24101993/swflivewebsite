{"ast":null,"code":"// Copyright (c) 2021 Siemens\n\n/* eslint-env es6 */\n\n/**\n * This utility module provides low-level support for JS Injection.\n *\n * NOTE: better to install it in bootstrap step\n *\n * @module js/splmStatsJsService\n */\nlet _procs = [];\nlet _enabled = false;\nlet _setTimeout = null;\nlet _appendChildFn = null;\n/**\n * install JS service\n */\n\nexport const install = function () {\n  if (!_enabled) {\n    _setTimeout = window.setTimeout;\n\n    window.setTimeout = function () {\n      const _realFunc = arguments[0];\n      arguments[0] = wrapFunction(null, _realFunc);\n      return _setTimeout.apply(this, arguments);\n    }; // try to fix webpack script load issue\n\n\n    _appendChildFn = document.head.appendChild;\n\n    document.head.appendChild = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      if (enabled() && _procs.length > 0) {\n        const elem = args[0]; // restirct it to only onload script exist\n\n        if (elem.tagName === 'SCRIPT' && elem.src && elem.onload) {\n          // wrap onLoad script\n          const _onloadFn = elem.onload;\n\n          const _onerrorFn = elem.onerror || (() => {});\n\n          elem.onload = function () {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            if (enabled() && _procs.length > 0) {\n              const endTime = window.performance.now(); // console.log( `Done: ${elem.src}` );\n\n              const res = _onloadFn.apply(null, args);\n\n              try {\n                _procs.forEach(function (proc) {\n                  proc.done({\n                    name: name,\n                    startTime: endTime,\n                    endTime: endTime\n                  });\n                });\n              } catch (ex) {// TODO: Do nothing for now, will fill it up before EOD 1905\n              }\n\n              return res;\n            }\n\n            return _onloadFn.apply(null, args);\n          };\n\n          elem.onerror = function () {\n            for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n              args[_key3] = arguments[_key3];\n            }\n\n            if (enabled() && _procs.length > 0) {\n              const endTime = window.performance.now(); // console.log( `Done: ${elem.src}` );\n\n              const res = _onerrorFn.apply(null, args);\n\n              try {\n                _procs.forEach(function (proc) {\n                  proc.done({\n                    name: name,\n                    startTime: endTime,\n                    endTime: endTime\n                  });\n                });\n              } catch (ex) {// TODO: Do nothing for now, will fill it up before EOD 1905\n              }\n\n              return res;\n            }\n\n            return _onerrorFn.apply(null, args);\n          };\n\n          try {\n            _procs.forEach(function (proc) {\n              proc.start();\n            });\n          } catch (ex) {// TODO: Do nothing for now, will fill it up before EOD 1905\n          }\n\n          return _appendChildFn.apply(document.head, args);\n        }\n      }\n\n      return _appendChildFn.apply(document.head, args);\n    };\n\n    _enabled = true;\n  }\n};\n/**\n * Wrapping JS function with plStats injection\n *\n * @param {Object} thisArg - Explicit passing of the \"this\" object for whatever function we are replacing\n * @param {Function} func - Function we are replacing\n * @param {String} name - the name (if any) of the function/object we are replacing\n *\n * @returns {Object} result - The result of whatever function we are replacing. Must be careful to return this value for functions (not setTimeout) that\n * are expecting a return value\n */\n\nexport const wrapFunction = function (thisArg, func, name) {\n  return function _splmStatsJsWrapperFunction() {\n    if (!func || !func.apply) {\n      return undefined;\n    }\n\n    if (enabled() && _procs.length > 0) {\n      const startTime = window.performance.now();\n\n      try {\n        _procs.forEach(function (proc) {\n          proc.start();\n        });\n      } catch (ex) {// TODO: Do nothing for now, will fill it up before EOD 1905\n      }\n\n      const res = func.apply(thisArg, arguments);\n      const endTime = window.performance.now();\n\n      try {\n        _procs.forEach(function (proc) {\n          proc.done({\n            name: name,\n            startTime: startTime,\n            endTime: endTime\n          });\n        });\n      } catch (ex) {// TODO: Do nothing for now, will fill it up before EOD 1905\n      }\n\n      return res;\n    }\n\n    return func.apply(thisArg, arguments);\n  };\n};\n/**\n * @returns {Boolean} Has JSService already underwent wrapping? If so we dont want to do it again\n */\n\nexport const enabled = function () {\n  return _enabled;\n};\n/**\n * Angular caches setTimeout after it is initialized so this doesn't do anything\n */\n\nexport const uninstall = function () {\n  if (_enabled) {\n    window.setTimeout = _setTimeout;\n    document.head.appendChild = _appendChildFn;\n    _setTimeout = null;\n    _enabled = false;\n  }\n};\nexport const addProc = function (proc) {\n  _procs.push(proc);\n};\nexport const removeProc = function (proc) {\n  _procs = _procs.filter(procObj => proc !== procObj);\n};\nexport default {\n  install,\n  wrapFunction,\n  enabled,\n  uninstall,\n  addProc,\n  removeProc\n};","map":{"version":3,"names":["_procs","_enabled","_setTimeout","_appendChildFn","install","window","setTimeout","_realFunc","arguments","wrapFunction","apply","document","head","appendChild","args","enabled","length","elem","tagName","src","onload","_onloadFn","_onerrorFn","onerror","endTime","performance","now","res","forEach","proc","done","name","startTime","ex","start","thisArg","func","_splmStatsJsWrapperFunction","undefined","uninstall","addProc","push","removeProc","filter","procObj"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/plstats/src/js/splmStatsJsService.js"],"sourcesContent":["// Copyright (c) 2021 Siemens\n/* eslint-env es6 */\n\n/**\n * This utility module provides low-level support for JS Injection.\n *\n * NOTE: better to install it in bootstrap step\n *\n * @module js/splmStatsJsService\n */\n\nlet _procs = [];\n\nlet _enabled = false;\n\nlet _setTimeout = null;\n\nlet _appendChildFn = null;\n\n/**\n * install JS service\n */\nexport const install = function() {\n    if( !_enabled ) {\n        _setTimeout = window.setTimeout;\n        window.setTimeout = function() {\n            const _realFunc = arguments[ 0 ];\n            arguments[ 0 ] = wrapFunction( null, _realFunc );\n            return _setTimeout.apply( this, arguments );\n        };\n\n        // try to fix webpack script load issue\n        _appendChildFn = document.head.appendChild;\n        document.head.appendChild = ( ...args ) => {\n            if( enabled() && _procs.length > 0 ) {\n                const elem = args[ 0 ];\n                // restirct it to only onload script exist\n                if( elem.tagName === 'SCRIPT' && elem.src && elem.onload ) {\n                    // wrap onLoad script\n                    const _onloadFn = elem.onload;\n                    const _onerrorFn = elem.onerror || ( () => {} );\n\n                    elem.onload = ( ...args ) => {\n                        if( enabled() && _procs.length > 0 ) {\n                            const endTime = window.performance.now();\n                            // console.log( `Done: ${elem.src}` );\n                            const res = _onloadFn.apply( null, args );\n                            try {\n                                _procs.forEach( function( proc ) {\n                                    proc.done( {\n                                        name: name,\n                                        startTime: endTime,\n                                        endTime: endTime\n                                    } );\n                                } );\n                            } catch ( ex ) {\n                                // TODO: Do nothing for now, will fill it up before EOD 1905\n                            }\n                            return res;\n                        }\n                        return _onloadFn.apply( null, args );\n                    };\n\n                    elem.onerror = ( ...args ) => {\n                        if( enabled() && _procs.length > 0 ) {\n                            const endTime = window.performance.now();\n                            // console.log( `Done: ${elem.src}` );\n                            const res = _onerrorFn.apply( null, args );\n                            try {\n                                _procs.forEach( function( proc ) {\n                                    proc.done( {\n                                        name: name,\n                                        startTime: endTime,\n                                        endTime: endTime\n                                    } );\n                                } );\n                            } catch ( ex ) {\n                                // TODO: Do nothing for now, will fill it up before EOD 1905\n                            }\n                            return res;\n                        }\n                        return _onerrorFn.apply( null, args );\n                    };\n\n                    try {\n                        _procs.forEach( function( proc ) {\n                            proc.start();\n                        } );\n                    } catch ( ex ) {\n                        // TODO: Do nothing for now, will fill it up before EOD 1905\n                    }\n\n                    return _appendChildFn.apply( document.head, args );\n                }\n            }\n            return _appendChildFn.apply( document.head, args );\n        };\n\n        _enabled = true;\n    }\n};\n\n/**\n * Wrapping JS function with plStats injection\n *\n * @param {Object} thisArg - Explicit passing of the \"this\" object for whatever function we are replacing\n * @param {Function} func - Function we are replacing\n * @param {String} name - the name (if any) of the function/object we are replacing\n *\n * @returns {Object} result - The result of whatever function we are replacing. Must be careful to return this value for functions (not setTimeout) that\n * are expecting a return value\n */\nexport const wrapFunction = function( thisArg, func, name ) {\n    return function _splmStatsJsWrapperFunction() {\n        if( !func || !func.apply ) {\n            return undefined;\n        }\n\n        if( enabled() && _procs.length > 0 ) {\n            const startTime = window.performance.now();\n            try {\n                _procs.forEach( function( proc ) {\n                    proc.start();\n                } );\n            } catch ( ex ) {\n                // TODO: Do nothing for now, will fill it up before EOD 1905\n            }\n            const res = func.apply( thisArg, arguments );\n            const endTime = window.performance.now();\n\n            try {\n                _procs.forEach( function( proc ) {\n                    proc.done( {\n                        name: name,\n                        startTime: startTime,\n                        endTime: endTime\n                    } );\n                } );\n            } catch ( ex ) {\n                // TODO: Do nothing for now, will fill it up before EOD 1905\n            }\n\n            return res;\n        }\n        return func.apply( thisArg, arguments );\n    };\n};\n\n/**\n * @returns {Boolean} Has JSService already underwent wrapping? If so we dont want to do it again\n */\nexport const enabled = function() {\n    return _enabled;\n};\n\n/**\n * Angular caches setTimeout after it is initialized so this doesn't do anything\n */\nexport const uninstall = function() {\n    if( _enabled ) {\n        window.setTimeout = _setTimeout;\n        document.head.appendChild = _appendChildFn;\n        _setTimeout = null;\n        _enabled = false;\n    }\n};\n\nexport const addProc = function( proc ) {\n    _procs.push( proc );\n};\n\nexport const removeProc = function( proc ) {\n    _procs = _procs.filter( procObj => proc !== procObj );\n};\n\nexport default {\n    install,\n    wrapFunction,\n    enabled,\n    uninstall,\n    addProc,\n    removeProc\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}