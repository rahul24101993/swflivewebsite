{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahukl57\\\\Desktop\\\\SWF\\\\CreatingOwnComponentUsingJsx\\\\node_modules\\\\@swf\\\\core\\\\src\\\\declreact\\\\src\\\\js\\\\awHighlightPropertyHtmlHOC.js\";\n// Copyright (c) 2021 Siemens\n\n/* eslint-disable react/display-name */\n\n/* eslint-disable react-hooks/rules-of-hooks */\n\n/**\n * @module js/awHighlightPropertyHtmlHOC\n */\nimport React, { useEffect } from 'react';\nimport appCtxService from 'js/appCtxService';\nimport sanitizer from 'js/sanitizer';\nimport { convertToHtml } from 'js/reactHelper';\nimport _ from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AwHighlightPropertyHtmlDisplayName = 'AwHighlightPropertyHtml';\nconst AwParseHtmlDisplayName = 'AwParseHtml';\n\nconst awHighlightPropertyHtmlHOC = Component => {\n  var _s = $RefreshSig$();\n\n  // https://reactjs.org/docs/forwarding-refs.html#forwarding-refs-to-dom-components\n  return /*#__PURE__*/_s( /*#__PURE__*/React.forwardRef(_s((_ref, ref) => {\n    _s();\n\n    let {\n      children,\n      ...props\n    } = _ref;\n    let {\n      awHighlightPropertyHtml,\n      displayVal,\n      awParseHtml,\n      ...finalProps\n    } = props;\n    !ref && (ref = React.useRef(null));\n    useEffect(() => {\n      if (ref.current) {\n        var parsedHtml = displayVal;\n        let highlighter = appCtxService.getCtx('highlighter');\n\n        if (parsedHtml) {\n          parsedHtml = _.isNumber(parsedHtml) ? String(parsedHtml) : parsedHtml;\n          parsedHtml = sanitizer.htmlEscapeAllowEntities(parsedHtml, true, true);\n\n          if (highlighter) {\n            parsedHtml = parsedHtml.replace(highlighter.regEx, highlighter.style);\n          }\n\n          parsedHtml = !parsedHtml ? '' : parsedHtml;\n\n          if (_.isEmpty(ref.current.innerHTML) || displayVal !== parsedHtml) {\n            let isRichText = props[_.kebabCase('isRichText')];\n\n            isRichText = isRichText && isRichText.match(/true/i);\n            ref.current.innerHTML = isRichText ? convertToHtml(parsedHtml) : parsedHtml;\n          }\n        }\n      }\n    }, [displayVal]);\n\n    if (awHighlightPropertyHtml || awParseHtml) {\n      if (awHighlightPropertyHtml && typeof Component === 'object') {\n        finalProps.awHighlightPropertyHtml = awHighlightPropertyHtml;\n        Component.displayName = AwHighlightPropertyHtmlDisplayName;\n      } else if (awParseHtml && typeof Component === 'object') {\n        finalProps.awParseHtml = awParseHtml;\n        Component.displayName = AwParseHtmlDisplayName;\n      }\n\n      if (typeof Component === 'object') {\n        finalProps.displayval = displayVal;\n      }\n\n      return /*#__PURE__*/_jsxDEV(Component, { ...finalProps,\n        ref: ref,\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 20\n      }, this);\n    }\n\n    return null;\n  }, \"HI2rmkDStaXKpoO1B+Q8/ihvhA0=\")), \"HI2rmkDStaXKpoO1B+Q8/ihvhA0=\");\n};\n\nexport default awHighlightPropertyHtmlHOC;","map":{"version":3,"names":["React","useEffect","appCtxService","sanitizer","convertToHtml","_","AwHighlightPropertyHtmlDisplayName","AwParseHtmlDisplayName","awHighlightPropertyHtmlHOC","Component","forwardRef","ref","children","props","awHighlightPropertyHtml","displayVal","awParseHtml","finalProps","useRef","current","parsedHtml","highlighter","getCtx","isNumber","String","htmlEscapeAllowEntities","replace","regEx","style","isEmpty","innerHTML","isRichText","kebabCase","match","displayName","displayval"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/declreact/src/js/awHighlightPropertyHtmlHOC.js"],"sourcesContent":["// Copyright (c) 2021 Siemens\n/* eslint-disable react/display-name */\n/* eslint-disable react-hooks/rules-of-hooks */\n\n/**\n * @module js/awHighlightPropertyHtmlHOC\n */\nimport React, { useEffect } from 'react';\nimport appCtxService from 'js/appCtxService';\nimport sanitizer from 'js/sanitizer';\nimport { convertToHtml } from 'js/reactHelper';\nimport _ from 'lodash';\n\nconst AwHighlightPropertyHtmlDisplayName = 'AwHighlightPropertyHtml';\nconst AwParseHtmlDisplayName = 'AwParseHtml';\n\nconst awHighlightPropertyHtmlHOC = ( Component ) => {\n    // https://reactjs.org/docs/forwarding-refs.html#forwarding-refs-to-dom-components\n    return React.forwardRef( ( { children, ...props }, ref ) => {\n        let { awHighlightPropertyHtml, displayVal, awParseHtml, ...finalProps } = props;\n        !ref && ( ref = React.useRef( null ) );\n        useEffect( () => {\n            if( ref.current ) {\n                var parsedHtml = displayVal;\n                let highlighter = appCtxService.getCtx( 'highlighter' );\n\n                if( parsedHtml ) {\n                    parsedHtml = _.isNumber( parsedHtml ) ? String( parsedHtml ) : parsedHtml;\n                    parsedHtml = sanitizer.htmlEscapeAllowEntities( parsedHtml, true, true );\n\n                    if( highlighter ) {\n                        parsedHtml = parsedHtml.replace( highlighter.regEx, highlighter.style );\n                    }\n\n                    parsedHtml = !parsedHtml ? '' : parsedHtml;\n                    if( _.isEmpty( ref.current.innerHTML ) || displayVal !== parsedHtml ) {\n                        let isRichText = props[ _.kebabCase( 'isRichText' ) ];\n                        isRichText = isRichText && isRichText.match( /true/i );\n                        ref.current.innerHTML = isRichText ? convertToHtml( parsedHtml ) : parsedHtml;\n                    }\n                }\n            }\n        }, [ displayVal ] );\n\n        if( awHighlightPropertyHtml || awParseHtml ) {\n            if( awHighlightPropertyHtml && typeof Component === 'object' ) {\n                finalProps.awHighlightPropertyHtml = awHighlightPropertyHtml;\n                Component.displayName = AwHighlightPropertyHtmlDisplayName;\n            } else if( awParseHtml && typeof Component === 'object' ) {\n                finalProps.awParseHtml = awParseHtml;\n                Component.displayName = AwParseHtmlDisplayName;\n            }\n            if( typeof Component === 'object' ) {\n                finalProps.displayval = displayVal;\n            }\n            return <Component {...finalProps} ref={ref}>{children}</Component>;\n        }\n        return null;\n    } );\n};\n\nexport default awHighlightPropertyHtmlHOC;\n\n"],"mappings":";AAAA;;AACA;;AACA;;AAEA;AACA;AACA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,SAASC,aAAT,QAA8B,gBAA9B;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,MAAMC,kCAAkC,GAAG,yBAA3C;AACA,MAAMC,sBAAsB,GAAG,aAA/B;;AAEA,MAAMC,0BAA0B,GAAKC,SAAF,IAAiB;EAAA;;EAChD;EACA,qCAAOT,KAAK,CAACU,UAAN,IAAkB,OAA0BC,GAA1B,KAAmC;IAAA;;IAAA,IAAjC;MAAEC,QAAF;MAAY,GAAGC;IAAf,CAAiC;IACxD,IAAI;MAAEC,uBAAF;MAA2BC,UAA3B;MAAuCC,WAAvC;MAAoD,GAAGC;IAAvD,IAAsEJ,KAA1E;IACA,CAACF,GAAD,KAAUA,GAAG,GAAGX,KAAK,CAACkB,MAAN,CAAc,IAAd,CAAhB;IACAjB,SAAS,CAAE,MAAM;MACb,IAAIU,GAAG,CAACQ,OAAR,EAAkB;QACd,IAAIC,UAAU,GAAGL,UAAjB;QACA,IAAIM,WAAW,GAAGnB,aAAa,CAACoB,MAAd,CAAsB,aAAtB,CAAlB;;QAEA,IAAIF,UAAJ,EAAiB;UACbA,UAAU,GAAGf,CAAC,CAACkB,QAAF,CAAYH,UAAZ,IAA2BI,MAAM,CAAEJ,UAAF,CAAjC,GAAkDA,UAA/D;UACAA,UAAU,GAAGjB,SAAS,CAACsB,uBAAV,CAAmCL,UAAnC,EAA+C,IAA/C,EAAqD,IAArD,CAAb;;UAEA,IAAIC,WAAJ,EAAkB;YACdD,UAAU,GAAGA,UAAU,CAACM,OAAX,CAAoBL,WAAW,CAACM,KAAhC,EAAuCN,WAAW,CAACO,KAAnD,CAAb;UACH;;UAEDR,UAAU,GAAG,CAACA,UAAD,GAAc,EAAd,GAAmBA,UAAhC;;UACA,IAAIf,CAAC,CAACwB,OAAF,CAAWlB,GAAG,CAACQ,OAAJ,CAAYW,SAAvB,KAAsCf,UAAU,KAAKK,UAAzD,EAAsE;YAClE,IAAIW,UAAU,GAAGlB,KAAK,CAAER,CAAC,CAAC2B,SAAF,CAAa,YAAb,CAAF,CAAtB;;YACAD,UAAU,GAAGA,UAAU,IAAIA,UAAU,CAACE,KAAX,CAAkB,OAAlB,CAA3B;YACAtB,GAAG,CAACQ,OAAJ,CAAYW,SAAZ,GAAwBC,UAAU,GAAG3B,aAAa,CAAEgB,UAAF,CAAhB,GAAiCA,UAAnE;UACH;QACJ;MACJ;IACJ,CArBQ,EAqBN,CAAEL,UAAF,CArBM,CAAT;;IAuBA,IAAID,uBAAuB,IAAIE,WAA/B,EAA6C;MACzC,IAAIF,uBAAuB,IAAI,OAAOL,SAAP,KAAqB,QAApD,EAA+D;QAC3DQ,UAAU,CAACH,uBAAX,GAAqCA,uBAArC;QACAL,SAAS,CAACyB,WAAV,GAAwB5B,kCAAxB;MACH,CAHD,MAGO,IAAIU,WAAW,IAAI,OAAOP,SAAP,KAAqB,QAAxC,EAAmD;QACtDQ,UAAU,CAACD,WAAX,GAAyBA,WAAzB;QACAP,SAAS,CAACyB,WAAV,GAAwB3B,sBAAxB;MACH;;MACD,IAAI,OAAOE,SAAP,KAAqB,QAAzB,EAAoC;QAChCQ,UAAU,CAACkB,UAAX,GAAwBpB,UAAxB;MACH;;MACD,oBAAO,QAAC,SAAD,OAAeE,UAAf;QAA2B,GAAG,EAAEN,GAAhC;QAAA,UAAsCC;MAAtC;QAAA;QAAA;QAAA;MAAA,QAAP;IACH;;IACD,OAAO,IAAP;EACH,CAxCM,kCAAP;AAyCH,CA3CD;;AA6CA,eAAeJ,0BAAf"},"metadata":{},"sourceType":"module"}