{"ast":null,"code":"// Copyright (c) 2020 Siemens\n/**\n * This service provides helpful APIs to register key down event and handles ctrl+c, ctrl+v and ctrl+x keyboard\n * shortcuts.\n *\n * @module js/keyboardService\n */import $ from'jquery';import domUtils from'js/domUtils';/**\n * Define public API\n */var exports={};let dom=domUtils.DOMAPIs;let bodyElement=document.querySelector('body');export let keyCmdIdMap={67:['Awp0Copy'],86:['Awp0Paste','Awp0PasteGroup'],88:['Awp0Cut','Awb0RemoveElement']};/**\n * register keydown event\n */export let registerKeyDownEvent=function(){// unregister key down event before registering it.\nexports.unRegisterKeyDownEvent();dom.on(bodyElement,'keydown',()=>{exports.checkForPressedKey(event);});};/**\n * unRegister keydown event\n */export let unRegisterKeyDownEvent=function(){dom.off(bodyElement,'keydown');};/**\n * Get text selected in browser\n *\n * @return selectedText\n */export let getSelectionText=function(){var selectedText='';if(window.getSelection){selectedText=window.getSelection().toString();}return selectedText;};/**\n * Check if selection/range is valid to process hotkey\n */export let isSelectionValid=function(event){var selectedText=exports.getSelectionText();if(selectedText===''){var targetCss=event.target.getAttribute('class');if(!targetCss||targetCss.indexOf('sw-property-val')===-1&&targetCss.indexOf('aw-uiwidgets-searchBox')===-1){return true;}}return false;};/**\n * check for pressed key and do necessary actions\n */export let checkForPressedKey=function(event){var keyId=event.which||event.keyCode;var ctrl=event.ctrlKey;if(ctrl&&keyId!==17){var proceed=exports.isSelectionValid(event);if(proceed&&exports.keyCmdIdMap[keyId]){var cmdIds=exports.keyCmdIdMap[keyId];for(var i=0;i<cmdIds.length;i++){var commands=document.querySelectorAll('[command-id='+cmdIds[i]+']');// click on first active command\nif(commands[0]&&!$(commands[0]).hasClass('disabled')){commands[0].click();break;}}}}};exports={keyCmdIdMap,registerKeyDownEvent,unRegisterKeyDownEvent,getSelectionText,isSelectionValid,checkForPressedKey};export default exports;","map":null,"metadata":{},"sourceType":"module"}