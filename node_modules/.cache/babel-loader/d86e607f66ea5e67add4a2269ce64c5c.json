{"ast":null,"code":"// Copyright (c) 2021 Siemens\nimport _ from'lodash';import AwCommandBar from'viewmodel/AwCommandBarViewModel';import eventBus from'js/eventBus';import{includeComponent}from'js/moduleLoader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const awPanelSectionRenderFunction=props=>{let{anchor,caption,titlekey,name,collapsed,toggleAction,children,viewModel,ctx,includeComponentName}=props;const{data,dispatch}=viewModel;// section is expanded by default\nlet initiallyCollapsed=false;let isCollapsible=collapsed!=='disabled';// collapsed var is the initial state from props and is a string ('true'/'false'/undefined/'disabled')\nif(collapsed===true||collapsed==='true'){initiallyCollapsed=true;}const onToggle=e=>{// don't bubble event; stops propagation to parent in nested section case...\ne.stopPropagation();// get state from dom\nlet collapsedState=e.target.open!==true;if(!data._toggled){// trip gate on first expand\ndispatch({path:'data',value:{_toggled:true}});// smother event on the initial auto-expand from browser\nif(!initiallyCollapsed){return true;}}const publishData={isCollapsed:collapsedState,name:name,caption:caption};// publish event\nif(props.isCommandPanelSection){eventBus.publish('awCommandPanelSection.collapse',publishData);}else{eventBus.publish('awPanelSection.collapse',publishData);}if(toggleAction){// defer is added to let the render cycle complete\n_.defer(function(){toggleAction(publishData);});}};const getSummaryClass=()=>{let classVal='sw-column sw-panel-summary';return isCollapsible?classVal+' aw-layout-collapsiblePanelSectionTitle collapsible':classVal+' notCollapsible';};const getCommandbar=function(){let withLabel=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!anchor){return null;}if(Boolean(ctx.toggleLabel)===withLabel){if(withLabel){return/*#__PURE__*/_jsx(\"div\",{className:\"sw-row\",children:/*#__PURE__*/_jsx(AwCommandBar,{className:\"aw-layout-workareaCommandbar\",anchor:anchor,alignment:\"HORIZONTAL\",context:props.context})});}return/*#__PURE__*/_jsx(\"div\",{className:\"sw-column flex-grow align-right sw-panel-bar\",children:/*#__PURE__*/_jsx(AwCommandBar,{className:\"aw-layout-workareaCommandbar\",anchor:anchor,alignment:\"HORIZONTAL\",context:props.context})});}return null;};const getIncludeComponent=()=>{if(includeComponentName){return/*#__PURE__*/_jsxs(\"div\",{className:\"sw-column flex-grow align-right sw-panel-bar align-self-center\",children:[\" \",includeComponent(includeComponentName,{subPanelContext:props.context}),\" \"]});}return null;};// getContents should not get called until section is expanded\nconst getContents=()=>{// TODO: ssu remove sw-section after stepDef update\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"sw-section sw-section-content sw-column\",children:children});};return/*#__PURE__*/_jsxs(\"details\",{// TODO: rm aw-panelSection class\nclassName:\"sw-section aw-panelSection flex-shrink align-self-stretch\",caption:caption,titleKey:titlekey,open:!initiallyCollapsed,onToggle:onToggle,children:[caption&&/*#__PURE__*/_jsxs(\"summary\",{role:\"button\",tabIndex:isCollapsible?0:-1,className:getSummaryClass(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sw-row sw-sectionTitleContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sw-column sw-sectionTitle\",title:caption,children:caption}),getCommandbar(),getIncludeComponent()]}),caption&&getCommandbar(true)]}),!caption&&/*#__PURE__*/_jsx(\"summary\",{className:\"noSummary\"}),!initiallyCollapsed||data._toggled?getContents():'']});};","map":null,"metadata":{},"sourceType":"module"}