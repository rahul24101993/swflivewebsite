{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahukl57\\\\Desktop\\\\SWF\\\\CreatingOwnComponentUsingJsx\\\\node_modules\\\\@swf\\\\core\\\\src\\\\components\\\\src\\\\js\\\\AwHeaderContextService.js\";\nimport _ from 'lodash';\nimport appCtxSvc from 'js/appCtxService';\nimport eventBus from 'js/eventBus';\nimport resizeObserverSvc from 'js/resizeObserver.service';\nimport AwContextControl from 'viewmodel/AwContextControlViewModel';\nimport AwIconButton from 'viewmodel/AwIconButtonViewModel';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst onMoreClick = e => {\n  e.stopPropagation();\n  const sideNavConfig = appCtxSvc.getCtx('awSidenavConfig.globalSidenavContext.globalNavigationSideNav');\n\n  if (!sideNavConfig || !sideNavConfig.open) {\n    eventBus.publish('awsidenav.openClose', {\n      id: 'globalNavigationSideNav',\n      commandId: 'avatarCommandId',\n      includeView: 'AwGlobalAvatar',\n      keepOthersOpen: true\n    });\n  }\n};\n/**\n * Checks if overflow occurred on the specified for the header context properties.\n *\n * The closure function arguments:\n * @param {Element} headerContainerElement the header context element\n * @returns {Boolean} A boolean telling whether overflow occurred or not.\n */\n\n\nexport let hasOverflownProps = headerContainerElement => {\n  //We just check the element's offsetTop against the container's offset top to determine if there's an overflow\n  if (!headerContainerElement) {\n    return false;\n  }\n\n  const headerContainer = headerContainerElement.querySelectorAll('.sw-contextControl');\n  const currentHeaderElems = headerContainer && headerContainer.length ? headerContainer[0].children : null;\n  const headerElement = currentHeaderElems ? currentHeaderElems[currentHeaderElems.length - 1] : null;\n  let showMoreLink = headerElement && headerElement.offsetTop > headerContainerElement.offsetTop;\n  showHideElements(headerContainer, currentHeaderElems);\n  return showMoreLink;\n};\n\nconst showHideElements = function (headerContainer, allElements) {\n  for (var i = allElements.length - 1; i >= 0; i--) {\n    if (allElements[i].offsetTop > headerContainer[0].offsetTop) {\n      allElements[i].classList.add('hidden');\n    } else if (allElements[i].offsetTop < headerContainer[0].offsetTop && allElements[i].offsetTop !== 0) {\n      allElements[i].classList.remove('hidden');\n    }\n  }\n};\n\nconst resetElementVisibility = allElements => {\n  for (var i = allElements.length - 1; i >= 0; i--) {\n    allElements[i].classList.remove('hidden');\n  }\n};\n\nconst initializeObserver = (data, dispatch, headerContextRef) => {\n  if (resizeObserverSvc.supportsResizeObserver()) {\n    const callback = _.debounce(() => {\n      resetElementVisibility(headerContextRef.querySelectorAll('.sw-contextControl')[0].children);\n      data.showMore = hasOverflownProps(headerContextRef);\n      dispatch({\n        path: 'data',\n        value: { ...data\n        }\n      });\n    }, 200, {\n      maxWait: 10000,\n      trailing: true,\n      leading: false\n    });\n\n    if (headerContextRef !== null && headerContextRef !== undefined && headerContextRef.classList.contains('sw-headerContext-horizontalContainer')) {\n      resizeObserverSvc.observe(headerContextRef.parentElement, callback);\n    }\n  }\n};\n\nconst getIconDefs = (_ref, anchor) => {\n  let {\n    data,\n    actions\n  } = _ref;\n\n  if (data && actions) {\n    const userSettingProp = anchor;\n\n    if (userSettingProp) {\n      const dockUserSettingsLabel = { ...userSettingProp.dockUserSettingsLabel\n      };\n      const undockUserSettingsWhileLHNUnPinnedIconButton = { ...userSettingProp.undockUserSettingsWhileLHNUnPinnedIconButton\n      };\n      const undockUserSettingsWhileLHNPinnedIconButton = { ...userSettingProp.undockUserSettingsWhileLHNPinnedIconButton\n      };\n      const dockUserSettingsIconButton = { ...userSettingProp.dockUserSettingsIconButton\n      };\n      undockUserSettingsWhileLHNUnPinnedIconButton.action = actions[undockUserSettingsWhileLHNUnPinnedIconButton.action];\n      undockUserSettingsWhileLHNPinnedIconButton.action = actions[undockUserSettingsWhileLHNPinnedIconButton.action];\n      dockUserSettingsIconButton.action = actions[dockUserSettingsIconButton.action];\n      return {\n        dockUserSettingsLabel,\n        undockUserSettingsWhileLHNUnPinnedIconButton,\n        undockUserSettingsWhileLHNPinnedIconButton,\n        dockUserSettingsIconButton\n      };\n    }\n  }\n};\n\nexport const awHeaderContextRenderFn = props => {\n  const {\n    ctx,\n    viewModel,\n    elementRefList,\n    i18n\n  } = props;\n  let commandIcon = null;\n  let userSettingLabel = '';\n  const headerContextRef = elementRefList.get('headerContext').current;\n  const {\n    data,\n    dispatch\n  } = viewModel;\n  const headerContainerClass = props.alignment === 'HORIZONTAL' ? 'sw-headerContext-horizontalContainer' : 'sw-headerContext-container';\n\n  if (props.anchor) {\n    const {\n      updateHook,\n      anchor\n    } = props;\n    const {\n      dockUserSettingsLabel,\n      undockUserSettingsWhileLHNUnPinnedIconButton,\n      undockUserSettingsWhileLHNPinnedIconButton,\n      dockUserSettingsIconButton\n    } = getIconDefs(updateHook, anchor);\n    const globalSidenavCtx = ctx.awSidenavConfig && ctx.awSidenavConfig.globalSidenavContext && ctx.awSidenavConfig.globalSidenavContext.globalNavigationSideNav;\n\n    if (ctx.showUserSettingsBar !== 'true' && globalSidenavCtx && !globalSidenavCtx.pinned) {\n      commandIcon = undockUserSettingsWhileLHNUnPinnedIconButton;\n    } else if (ctx.showUserSettingsBar !== 'true' && globalSidenavCtx && globalSidenavCtx.pinned) {\n      commandIcon = undockUserSettingsWhileLHNPinnedIconButton;\n    } else if (ctx.showUserSettingsBar) {\n      commandIcon = dockUserSettingsIconButton;\n    }\n\n    userSettingLabel = dockUserSettingsLabel;\n  }\n\n  initializeObserver(data, dispatch, headerContextRef);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: 'sw-column ' + headerContainerClass,\n    ref: elementRefList.get('headerContext'),\n    children: [props.anchor ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sw-row demo-h-3f justify-flex-end aw-user-settings-anchor\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sw-column justify-center flex-auto\",\n        children: ctx.showUserSettingsBar === 'true' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: userSettingLabel && userSettingLabel.displayName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 64\n        }, this) : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sw-column justify-center sw-headercontext-userSettingContainer\",\n        children: commandIcon ? /*#__PURE__*/_jsxDEV(AwIconButton, {\n          command: commandIcon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 40\n        }, this) : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sw-row flex-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sw-column\",\n        children: /*#__PURE__*/_jsxDEV(AwContextControl, {\n          anchor: \"headerContextPosition\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), props.alignment === 'HORIZONTAL' && data.showMore ? /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"javscript: void(0);\",\n        className: \"sw-headerContext-more\",\n        onClick: onMoreClick,\n        title: i18n.MORE_LINK_TEXT,\n        children: i18n.MORE_LINK_TEXT\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }, this) : '']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 9\n  }, this);\n};","map":{"version":3,"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/components/src/js/AwHeaderContextService.js"],"names":["onMoreClick","e","sideNavConfig","appCtxSvc","eventBus","id","commandId","includeView","keepOthersOpen","hasOverflownProps","headerContainerElement","headerContainer","currentHeaderElems","headerElement","showMoreLink","showHideElements","i","allElements","resetElementVisibility","initializeObserver","resizeObserverSvc","callback","headerContextRef","data","dispatch","path","value","maxWait","trailing","leading","getIconDefs","actions","userSettingProp","dockUserSettingsLabel","undockUserSettingsWhileLHNUnPinnedIconButton","undockUserSettingsWhileLHNPinnedIconButton","dockUserSettingsIconButton","awHeaderContextRenderFn","props","i18n","commandIcon","userSettingLabel","elementRefList","headerContainerClass","anchor","globalSidenavCtx","ctx","displayName","MORE_LINK_TEXT"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport appCtxSvc from 'js/appCtxService';\nimport eventBus from 'js/eventBus';\nimport resizeObserverSvc from 'js/resizeObserver.service';\nimport AwContextControl from 'viewmodel/AwContextControlViewModel';\nimport AwIconButton from 'viewmodel/AwIconButtonViewModel';\n\nconst onMoreClick = ( e ) => {\n    e.stopPropagation();\n    const sideNavConfig = appCtxSvc.getCtx( 'awSidenavConfig.globalSidenavContext.globalNavigationSideNav' );\n\n    if( !sideNavConfig || !sideNavConfig.open ) {\n        eventBus.publish( 'awsidenav.openClose', {\n            id: 'globalNavigationSideNav',\n            commandId: 'avatarCommandId',\n            includeView: 'AwGlobalAvatar',\n            keepOthersOpen: true\n        } );\n    }\n};\n\n/**\n * Checks if overflow occurred on the specified for the header context properties.\n *\n * The closure function arguments:\n * @param {Element} headerContainerElement the header context element\n * @returns {Boolean} A boolean telling whether overflow occurred or not.\n */\nexport let hasOverflownProps = ( headerContainerElement ) => {\n    //We just check the element's offsetTop against the container's offset top to determine if there's an overflow\n    if( !headerContainerElement ) {\n        return false;\n    }\n    const headerContainer = headerContainerElement.querySelectorAll( '.sw-contextControl' );\n    const currentHeaderElems = headerContainer && headerContainer.length ? headerContainer[ 0 ].children : null;\n    const headerElement = currentHeaderElems ? currentHeaderElems[ currentHeaderElems.length - 1 ] : null;\n    let showMoreLink = headerElement && headerElement.offsetTop > headerContainerElement.offsetTop;\n    showHideElements( headerContainer, currentHeaderElems );\n    return showMoreLink;\n};\n\nconst showHideElements = function( headerContainer, allElements ) {\n    for( var i = allElements.length - 1; i >= 0; i-- ) {\n        if( allElements[ i ].offsetTop > headerContainer[ 0 ].offsetTop ) {\n            allElements[ i ].classList.add( 'hidden' );\n        } else if( allElements[ i ].offsetTop < headerContainer[ 0 ].offsetTop && allElements[ i ].offsetTop !== 0 ) {\n            allElements[ i ].classList.remove( 'hidden' );\n        }\n    }\n};\n\nconst resetElementVisibility = ( allElements ) => {\n    for( var i = allElements.length - 1; i >= 0; i-- ) {\n        allElements[ i ].classList.remove( 'hidden' );\n    }\n};\n\nconst initializeObserver = ( data, dispatch, headerContextRef ) => {\n    if( resizeObserverSvc.supportsResizeObserver() ) {\n        const callback = _.debounce( () => {\n            resetElementVisibility( headerContextRef.querySelectorAll( '.sw-contextControl' )[ 0 ].children );\n            data.showMore = hasOverflownProps( headerContextRef );\n            dispatch( { path: 'data', value: { ...data } } );\n        }, 200, {\n            maxWait: 10000,\n            trailing: true,\n            leading: false\n        } );\n        if( headerContextRef !== null && headerContextRef !== undefined && headerContextRef.classList.contains( 'sw-headerContext-horizontalContainer' ) ) {\n            resizeObserverSvc.observe( headerContextRef.parentElement, callback );\n        }\n    }\n};\n\nconst getIconDefs = ( { data, actions }, anchor ) => {\n    if( data && actions ) {\n        const userSettingProp = anchor;\n        if( userSettingProp ) {\n            const dockUserSettingsLabel = { ...userSettingProp.dockUserSettingsLabel };\n            const undockUserSettingsWhileLHNUnPinnedIconButton = { ...userSettingProp.undockUserSettingsWhileLHNUnPinnedIconButton };\n            const undockUserSettingsWhileLHNPinnedIconButton = { ...userSettingProp.undockUserSettingsWhileLHNPinnedIconButton };\n            const dockUserSettingsIconButton = { ...userSettingProp.dockUserSettingsIconButton };\n            undockUserSettingsWhileLHNUnPinnedIconButton.action = actions[ undockUserSettingsWhileLHNUnPinnedIconButton.action ];\n            undockUserSettingsWhileLHNPinnedIconButton.action = actions[ undockUserSettingsWhileLHNPinnedIconButton.action ];\n            dockUserSettingsIconButton.action = actions[ dockUserSettingsIconButton.action ];\n            return {\n                dockUserSettingsLabel,\n                undockUserSettingsWhileLHNUnPinnedIconButton,\n                undockUserSettingsWhileLHNPinnedIconButton,\n                dockUserSettingsIconButton\n            };\n        }\n    }\n};\n\nexport const awHeaderContextRenderFn = ( props ) => {\n    const { ctx, viewModel, elementRefList, i18n } = props;\n    let commandIcon = null;\n    let userSettingLabel = '';\n    const headerContextRef = elementRefList.get( 'headerContext' ).current;\n    const { data, dispatch } = viewModel;\n    const headerContainerClass = props.alignment === 'HORIZONTAL' ? 'sw-headerContext-horizontalContainer' : 'sw-headerContext-container';\n\n    if( props.anchor ) {\n        const { updateHook, anchor } = props;\n        const {\n            dockUserSettingsLabel,\n            undockUserSettingsWhileLHNUnPinnedIconButton,\n            undockUserSettingsWhileLHNPinnedIconButton,\n            dockUserSettingsIconButton\n        } = getIconDefs( updateHook, anchor );\n\n        const globalSidenavCtx = ctx.awSidenavConfig && ctx.awSidenavConfig.globalSidenavContext && ctx.awSidenavConfig.globalSidenavContext.globalNavigationSideNav;\n        if( ctx.showUserSettingsBar !== 'true' && globalSidenavCtx && !globalSidenavCtx.pinned ) {\n            commandIcon = undockUserSettingsWhileLHNUnPinnedIconButton;\n        } else if( ctx.showUserSettingsBar !== 'true' && globalSidenavCtx && globalSidenavCtx.pinned ) {\n            commandIcon = undockUserSettingsWhileLHNPinnedIconButton;\n        } else if( ctx.showUserSettingsBar ) {\n            commandIcon = dockUserSettingsIconButton;\n        }\n        userSettingLabel = dockUserSettingsLabel;\n    }\n\n    initializeObserver( data, dispatch, headerContextRef );\n    return (\n        <div className={'sw-column ' + headerContainerClass} ref={elementRefList.get( 'headerContext' )}>\n            {props.anchor ?\n                <div className='sw-row demo-h-3f justify-flex-end aw-user-settings-anchor'>\n                    <div className='sw-column justify-center flex-auto'>\n                        { ctx.showUserSettingsBar === 'true' ? <div className=''>{userSettingLabel && userSettingLabel.displayName}</div> : ''}\n                    </div>\n                    <div className='sw-column justify-center sw-headercontext-userSettingContainer'>\n                        {commandIcon ? <AwIconButton command={commandIcon}></AwIconButton> : ''}\n                    </div>\n                </div> : ''}\n            <div className='sw-row flex-auto'>\n                <div className='sw-column'>\n                    <AwContextControl anchor='headerContextPosition'>\n                    </AwContextControl>\n                </div>\n                { props.alignment === 'HORIZONTAL' && data.showMore ?\n                    <a href='javscript: void(0);'\n                        className='sw-headerContext-more'\n                        onClick={onMoreClick}\n                        title={i18n.MORE_LINK_TEXT}>{i18n.MORE_LINK_TEXT}</a> : ''}\n            </div>\n        </div> );\n};\n"]},"metadata":{},"sourceType":"module"}