{"ast":null,"code":"// Copyright (c) 2020 Siemens\n\n/**\n * This module defines the primary classes used to manage the 'aw-table' directive (used by decl grid).\n *\n * @module js/awTableService\n */\nimport awColumnSvc from 'js/awColumnService';\nimport viewModelObjectSvc from 'js/viewModelObjectService';\nimport declModelRegistrySvc from 'js/declModelRegistryService';\nimport vmPropSvc from 'js/uwPropertyService';\nimport assert from 'js/assert';\nimport _ from 'lodash';\nimport declUtils from 'js/declUtils';\nimport logger from 'js/logger';\n/**\n * revisitme yogesh\n * in whole file lot of jquery and scope usages\n */\n\nimport $ from 'jquery';\n/**\n * {Number} The maximum # of nodes/rows to request to be returned in a single call to the dataProviderService\n * for the table.\n * <P>\n * Note: This number could be changed dynamically in the future to be based on the number of rows actually being\n * displayed.\n */\n\nvar _defaultPageSizeTable = 40;\n/**\n * {Number} The maximum # of nodes/rows to request to be returned in a single call to the dataProviderService\n * for the tree.\n * <P>\n * Note: This number could be changed dynamically in the future to be based on the number of rows actually being\n * displayed.\n */\n\nvar _defaultPageSizeTree = 40;\n/**\n * -------------------------------------------------------------------------<BR>\n * Define Service Objects<BR>\n * -------------------------------------------------------------------------<BR>\n */\n\n/**\n * This class is the overall model used to control the contents and behavior of the 'aw-table' directive. This\n * model allows for functional pieces to be overridden and implemented in application specific ways. Defaults\n * are specified here.\n *\n * @class AwTableViewModel\n *\n * @param {DeclViewModel} declViewModel - The 'declViewModel' containing properties to base the new\n *            'awTableViewModel' upon.\n *\n * @param {String} gridId - ID of the {declGrid} this model is wrapping.\n *\n * @param {Object} $scope - the scope object\n *\n */\n\nvar AwTableViewModel = function (declViewModel, gridId, $scope) {\n  var vmSelf = this; // eslint-disable-line consistent-this\n\n  /**\n   * @property {String} selectionMode - 'single' or 'multi'\n   *\n   * @memberOf module:js/awTableService~AwTableViewModel\n   */\n\n  vmSelf.selectionMode = 'single';\n  /**\n   * @property {String} selectionScope - 'row' or 'cell'\n   *\n   * @memberOf module:js/awTableService~AwTableViewModel\n   */\n\n  vmSelf.selectionScope = 'row';\n  /**\n   * @property {Boolean} enableArrangeMenu - default is false\n   *\n   * @memberOf module:js/awTableService~AwTableViewModel\n   */\n\n  vmSelf.enableArrangeMenu = false;\n  /**\n   * @property {Boolean} enableFilterMenu - default is false\n   *\n   * @memberOf module:js/awTableService~AwTableViewModel\n   */\n\n  vmSelf.enableFilterMenu = false;\n  /**\n   * @property {Boolean} isEditable - default is false\n   */\n\n  vmSelf.isEditable = false;\n  /**\n   * ---------------------------------------------------------------------------<BR>\n   * Property & Function definition complete....Finish initialization. <BR>\n   * ---------------------------------------------------------------------------<BR>\n   */\n\n  /**\n   * Check if we do NOT have a valid 'declViewModel' and 'gridId' to work with.\n   */\n\n  assert(declViewModel, 'No DeclViewModel specified');\n  assert(gridId, 'No DeclGrid ID specified');\n\n  if (declViewModel._internal.isDestroyed) {\n    assert(false, 'Invalid to create objects on a destroyed DeclViewModel: ' + declViewModel);\n  }\n  /**\n   * The ID of the 'declViewModel' to use for this 'aw-table'.\n   */\n\n\n  vmSelf._declViewModelId = declViewModel.getPanelId();\n  /**\n   * Remember this 'declGrid' ID\n   * The ID of the 'declGrid' in the 'declViewModel' to use for this 'aw-table'.\n   */\n\n  vmSelf._declGridId = gridId;\n  declModelRegistrySvc.registerModel('AwTableViewModel', vmSelf, '_declGridId', '_modelId');\n  /**\n   * Initialize all properties based on the 'declViewModel' defined information.\n   * <P>\n   * Check if the 'declGrid' exists\n   */\n\n  var declGrid = declViewModel._internal.grids[gridId];\n  assert(declGrid, 'Invalid DeclGrid ID specified');\n  /**\n   * Set options from v-m json data\n   */\n\n  vmSelf.gridOptions = declGrid.gridOptions;\n  /**\n   * Check if declGrid has a valid 'dataProvider'.\n   */\n\n  assert(declGrid.dataProvider, 'No DeclDataProvider ID specified');\n  assert(declViewModel.dataProviders[declGrid.dataProvider], 'Invalid DeclDataProvider ID specified');\n  /**\n   * Set reference to the 'declGrid's UwDataProvider.\n   */\n\n  var uwDataProvider = declViewModel.dataProviders[declGrid.dataProvider];\n  /**\n   * The 'UwDataProvider' used to access information about the rows and column value of this 'aw-table'.\n   */\n\n  vmSelf._uwDataProvider = uwDataProvider;\n\n  if (uwDataProvider.selectionModel && uwDataProvider.selectionModel.mode) {\n    vmSelf.selectionMode = uwDataProvider.selectionModel.mode;\n  }\n\n  if (uwDataProvider.selectionModel && uwDataProvider.selectionModel.scope) {\n    vmSelf.selectionScope = uwDataProvider.selectionModel.scope;\n  }\n  /**\n   * Setup columns information\n   * The 'AwTableColumnProvider' used to access information about the columns of this 'aw-table'.\n   */\n\n\n  vmSelf._tableColumnProvider = awColumnSvc.createColumnProvider(declViewModel, $scope, uwDataProvider.commands, gridId, uwDataProvider.json.commandsAnchor);\n\n  vmSelf._tableColumnProvider.initialize().then(function () {// DO nothing\n  }, function (err) {\n    logger.error('Failure during table tableColumnProvider initialization: ' + err);\n  });\n  /**\n   * Set 'enableArrangeMenu' if the declGrid indicated an override of the default.\n   */\n\n\n  if (!declUtils.isNil(declGrid.enableArrangeMenu)) {\n    vmSelf.enableArrangeMenu = declGrid.enableArrangeMenu;\n  }\n  /**\n   * Set 'enableFilterMenu' if the declGrid indicated an override of the default.\n   */\n\n\n  if (!declUtils.isNil(declGrid.enableFilterMenu)) {\n    vmSelf.enableFilterMenu = declGrid.enableFilterMenu;\n  }\n  /**\n   * Check if declGrid has a valid 'propertyProvider'.\n   * The 'UwDataProvider' used to access properties for the rows and column value of this 'aw-table'.\n   */\n\n\n  if (declGrid.propertyProvider && declViewModel.dataProviders[declGrid.propertyProvider]) {\n    vmSelf._uwPropProvider = declViewModel.dataProviders[declGrid.propertyProvider];\n  }\n}; // AwTableViewModel\n\n/**\n * Override the default implementation to return more helpful information.\n *\n * @return {String} Text used to identify the ID of the AwTableViewModel (e.g. 'modelId' + optional model IDs).\n */\n\n\n_c = AwTableViewModel;\n\nAwTableViewModel.prototype.toString = function () {\n  if (this) {\n    if (this._declViewModelId) {\n      return this._modelId + //\n      '  viewModel: ' + this._declViewModelId + //\n      '  grid: ' + this._declGridId + //\n      '  dataProvider: ' + this._uwDataProvider;\n    }\n\n    return this._modelId + '  viewModelId: ' + '???';\n  }\n\n  return 'AwTableViewModel' + '(Destroyed)';\n};\n/**\n * Get the 'provider' used to access information about the rows and column values of this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {UwDataProvider} Reference to the currently registered 'UwDataProvider'.\n */\n\n\nAwTableViewModel.prototype.getDataProvider = function () {\n  return this._uwDataProvider;\n};\n/**\n * Get the 'provider' used to access properties for the rows and column values of this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {UwDataProvider} Reference to the currently registered 'UwDataProvider' that provides property\n *         information.\n */\n\n\nAwTableViewModel.prototype.getPropertyProvider = function () {\n  return this._uwPropProvider;\n};\n/**\n * Get the 'provider' used to access information about the columns of this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {AwTableColumnProvider} Reference to the currently registered 'AwTableColumnProvider'.\n */\n\n\nAwTableViewModel.prototype.getColumnProvider = function () {\n  assert(this._tableColumnProvider, 'No AwTableColumnProvider set');\n  return this._tableColumnProvider;\n};\n/**\n * Get the ID of the 'declGridId' in the 'declViewModel' to be used with this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {String} The ID of the 'declGridId' in the 'declViewModel' to be used with this 'aw-table'.\n */\n\n\nAwTableViewModel.prototype.getGridId = function () {\n  return this._declGridId;\n};\n/**\n * Free up all resources held/managed by this object.\n * <P>\n * Note: After this function, no API call should be considered valid. This function is intended to be called\n * when the $scope of any associated viewModel is also being 'destroyed'. After this call (and a GC event), any\n * objects managed by this class may be considered a 'memory leak'.\n */\n\n\nAwTableViewModel.prototype.destroy = function () {\n  declModelRegistrySvc.unregisterModel('AwTableViewModel', this, '_declGridId', '_modelId');\n\n  if (this._tableColumnProvider) {\n    this._tableColumnProvider.destroy();\n\n    this._tableColumnProvider = null;\n  }\n\n  this._uwDataProvider = null;\n  this._uwPropProvider = null;\n};\n/**\n * Instances of this class represent the input structure to a request to load a page of rows (nodes) into a flat\n * table/list.\n *\n * @class ListLoadInput\n *\n * @param {String} parentUid - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {Number} pageSize - (Optional) (See property description below)\n * @param {Boolean} addAfter - (Optional) (See property description below)\n * @param {Object} filter - (Optional) The string used to filter the list.\n *            <P>\n *            <P>\n *\n * @property {String} parentUid - The 'parent' ViewModelTreeNode used to access any 'child' nodes in the next\n *           level down in the hierarchy.\n * @property {Number} startChildNdx - The 'childNdx' of the node to start the 'next' page loading at (Default:\n *           0).\n * @property {Number} pageSize - The maximum # of 'child' node to return in any single paged access (Default:\n *           See _defaultPageSizeTable ).\n * @property {String} startChildId - The 'id' of the node to start the 'next' page loading at.\n * @property {Boolean} addAfter - TRUE if any new children should be added AFTER the optional 'cursorNodeId'\n *           (Default: TRUE)\n * @property {String} filter - The string used to filter the list.\n */\n\n\nvar ListLoadInput = function (parentUid, startChildNdx, pageSize, addAfter, filter) {\n  this.parentUid = parentUid;\n  this.startChildNdx = declUtils.isNil(startChildNdx) ? 0 : startChildNdx;\n  this.pageSize = declUtils.isNil(pageSize) ? _defaultPageSizeTable : pageSize;\n  this.addAfter = declUtils.isNil(addAfter) ? true : addAfter;\n  this.filter = filter;\n};\n/**\n * The class is used to communicate the results of a single paged loading of 'child' nodes in a 'parent' node.\n *\n * @class ListLoadResult\n *\n * @param {ViewModelObject} parentNode - (See property description below)\n * @param {ViewModelObjectArray} childNodes - (See property description below)\n * @param {Number} totalChildCount - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {ViewModelObject} newTopNode - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelObject} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *           the next level down in the hierarchy.\n *\n * @property {ViewModelObjectArray} childNodes - Array of 'child' nodes resulting from a single load execution\n *           in the context of a 'parent' node (i.e. 'children' in the next level down in the hierarchy).\n *\n * @property {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *           loaded into the 'parent' 'children' array.\n *\n * @property {Number} startChildNdx - The 'childNdx' provided in the ListLoadInput that was used to load this\n *           data. This is returned as part of the result to handle cases when multiple loads are being\n *           performed on the same 'parent' and the original closure data could have changed during the async\n *           processing.\n *\n * @property {ViewModelObject} newTopNode - (Optional) If this property is defined, it will be used to replace\n *           the (unseen) 'top' node associated with the overall list.\n *           <P>\n *           Note: If 'children' array of this node is not empty it will be ignored and the 'childNodes' of this\n *           result will be set as the 1st level children of this 'parent' node.\n */\n\n\n_c2 = ListLoadInput;\n\nvar ListLoadResult = function (parentNode, childNodes, totalChildCount, startChildNdx, newTopNode) {\n  this.parentNode = parentNode;\n  this.childNodes = childNodes;\n  this.totalChildCount = totalChildCount;\n  this.startChildNdx = startChildNdx;\n  /**\n   * We want to keep the following undefined until when know we need them to be defined.\n   */\n\n  if (newTopNode) {\n    this.newTopNode = newTopNode;\n  }\n};\n/**\n * Instances of this class represent the input structure to a request to load properties of a collection of\n * tree-table nodes.\n *\n * @class PropertyLoadRequest\n * @param {ViewModelTreeNode} parentNode - (See property description below)\n * @param {ViewModelTreeNodeArray} childNodes - (See property description below)\n * @param {AwTableColumnInfoArray} columnInfos - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNode} parentNode - The 'parent' node the 'child' nodes belong to.\n * @property {ViewModelTreeNodeArray} childNodes - Array of nodes to load ViewModelProperty objects for.\n * @property {AwTableColumnInfoArray} columnInfos - Array of AwTableColumnInfo object containing property names\n *           to load.\n */\n\n\n_c3 = ListLoadResult;\n\nvar PropertyLoadRequest = function (parentNode, childNodes, columnInfos) {\n  this.parentNode = parentNode;\n  this.childNodes = childNodes;\n  this.columnInfos = columnInfos;\n};\n/**\n * Instances of this class represent the input structure to a request to load properties of a collection of\n * tree-table nodes.\n *\n * @class PropertyLoadInput\n * @param {PropertyLoadRequestArray} propertyLoadRequests - (See property description below)\n *            <P>\n *            <P>\n * @property {PropertyLoadRequestArray} propertyLoadRequests - Array requests to fulfill.\n */\n\n\n_c4 = PropertyLoadRequest;\n\nvar PropertyLoadInput = function (propertyLoadRequests) {\n  this.propertyLoadRequests = propertyLoadRequests;\n};\n/**\n * The class is used to communicate the results of incremental loading of properties for ViewModelTreeNodes.\n *\n * @class PropertyLoadResult\n * @param {ViewModelTreeNodeArray} updatedNodes - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNodeArray} updatedNodes - Array of ViewModelTreeNodes who's ViewModelProperties have\n *           been loaded/updated.\n */\n\n\n_c5 = PropertyLoadInput;\n\nvar PropertyLoadResult = function (updatedNodes) {\n  this.updatedNodes = updatedNodes;\n};\n/**\n * The class is used to communicate the results of a single paged loading of 'child' nodes in a 'parent' node.\n *\n * @class TableLoadResult\n * @param {Number} totalFound - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelObjectArray} rowsLoaded - Array of ViewModelObjects resulting from a single load\n *           execution in the context of a flat table.\n * @property {Number} totalFound - The total # of known rows regardless of how many are currently loaded into\n *           the flat table.\n * @property {Number} nextSearchIndex - The 'page' to start the 'next' page loading at (or -1 if no more rows\n *           exist).\n */\n\n\n_c6 = PropertyLoadResult;\n\nvar TableLoadResult = function (totalFound) {\n  this.rowsLoaded = [];\n  this.totalFound = totalFound;\n  this.nextSearchIndex = -1;\n};\n/**\n * Instances of this class represent the input structure to a request to load a page of rows (nodes) into a\n * tree-table.\n *\n * @class TreeLoadInput\n *\n * @param {ViewModelTreeNode} parentNode - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {String} startChildId - (See property description below)\n * @param {String} cursorNodeId - (Optional) (See property description below)\n * @param {Number} pageSize - (Optional) (See property description below)\n * @param {Boolean} addAfter - (Optional) (See property description below)\n * @param {ViewModelTreeNode} rootNode - (Optional) (See property description below)\n * @param {Boolean} focusLoadAction - (Optional) (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *           the next level down in the hierarchy.\n * @property {Number} startChildNdx - The 'childNdx' of the node to start the 'next' page loading at.\n * @property {String} startChildId - The 'id' of the node to start the 'next' page loading at.\n * @property {String} cursorNodeId - ID of an existing node in the 'parent' (and, presumably a\n *           ViewModelCollection) to insert any new nodes after (or before...depending on value of 'addAfter').\n *           <P>\n *           Note: If not defined, the 'child' nodes will be added at the end (or beginning) of the 'parent'\n *           node's 'children'.\n * @property {Boolean} addAfter - TRUE if any new children should be added AFTER the optional 'cursorNodeId'\n *           (Default: TRUE)\n * @property {Number} pageSize - The maximum # of 'child' nodes to return in any single paged access (Default:\n *           See _defaultPageSizeTree).\n * @property {ViewModelTreeNode} rootNode - The 'tree' ViewModelTreeNode used to access any 'child' nodes in the\n *           next level down in the hierarchy.\n * @property {Boolean} focusLoadAction - (Optional) TRUE if action is called to load selected object that is\n *           currently not present in tree\n */\n\n\n_c7 = TableLoadResult;\n\nvar TreeLoadInput = function (parentNode, startChildNdx, startChildId, cursorNodeId, pageSize, addAfter, rootNode, focusLoadAction) {\n  this.parentNode = parentNode;\n  this.rootNode = rootNode;\n  this.startChildNdx = startChildNdx;\n  this.startChildId = startChildId;\n  this.cursorNodeId = cursorNodeId;\n  this.pageSize = declUtils.isNil(pageSize) ? _defaultPageSizeTree : pageSize;\n  this.addAfter = declUtils.isNil(addAfter) ? true : addAfter;\n  /**\n   * We want to keep following parameter undefined until when know we need them to be defined.\n   */\n\n  if (focusLoadAction) {\n    this.focusLoadAction = focusLoadAction;\n  }\n};\n/**\n * The class is used to communicate the results of a single paged loading of 'child' nodes in a 'parent' node.\n *\n * @class TreeLoadResult\n *\n * @param {ViewModelTreeNode} parentNode - (See property description below)\n * @param {ViewModelTreeNodeArray} childNodes - (See property description below)\n * @param {Number} totalChildCount - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {String} cursorNodeId - (See property description below)\n * @param {ViewModelTreeNode} newTopNode - (See property description below)\n * @param {ViewModelTreeNodeArray} vmNodesInTreeHierarchyLevels - (See property description below)\n * @param {Boolean} mergeNewNodesInCurrentlyLoadedTree - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *           the next level down in the hierarchy.\n *\n * @property {ViewModelTreeNodeArray} childNodes - Array of 'child' ViewModelTreeNode objects resulting from a\n *           single load execution in the context of a 'parent' node (i.e. 'children' in the next level down in\n *           the hierarchy).\n *\n * @property {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *           loaded into the 'parent' 'children' array.\n *\n * @property {Number} startChildNdx - The 'childNdx' provided in the TreeLoadInput that was used to load this\n *           data. This is returned as part of the result to handle cases when multiple loads are being\n *           performed on the same 'parent' and the original closure data could have changed during the async\n *           processing.\n *\n * @property {String} cursorNodeId - (Optional) ID of an existing node in the 'parent' (and, presumably a\n *           ViewModelCollection) to insert any new nodes after (or before) depending on value of 'addAfter'.\n *\n * @property {ViewModelTreeNode} newTopNode - (Optional) If this property is defined, it will be used to replace\n *           the (unseen) 'top' tree node associated with the overall tree-table.\n *           <P>\n *           Note: If 'children' array of this node is not empty it will be ignored and the 'childNodes' of this\n *           result will be set as the 1st level children of this 'parent' node.\n *\n * @property {ViewModelTreeNodeArray} vmNodesInTreeHierarchyLevels - (Optional) Array of arrays. Each array\n *           index represents ViewModelTreeNode objects at given level.Array at index 0 in represents level -1, ,\n *           index 1 level 0 and so on. Each level will have ViewModelTreeNode where next level nodes need to be\n *           inserted.\n *\n * @property {Boolean} mergeNewNodesInCurrentlyLoadedTree - (Optional) If this property is true,\n *           vmNodesInTreeHierarchyLevels array will be merged in currently loaded tree at proper merge point if\n *           present in tree. All existing nodes in Tree and their properties will be retained.\n *\n */\n\n\n_c8 = TreeLoadInput;\n\nvar TreeLoadResult = function (parentNode, childNodes, totalChildCount, startChildNdx, cursorNodeId, newTopNode, vmNodesInTreeHierarchyLevels, mergeNewNodesInCurrentlyLoadedTree) {\n  this.parentNode = parentNode;\n  this.childNodes = childNodes;\n  this.totalChildCount = totalChildCount;\n  this.startChildNdx = startChildNdx;\n  this.cursorNodeId = cursorNodeId;\n  /**\n   * We want to keep the following parameters undefined until when know we need them to be defined.\n   */\n\n  if (newTopNode) {\n    this.newTopNode = newTopNode;\n  }\n\n  if (vmNodesInTreeHierarchyLevels) {\n    this.vmNodesInTreeHierarchyLevels = vmNodesInTreeHierarchyLevels;\n  }\n\n  if (mergeNewNodesInCurrentlyLoadedTree) {\n    this.mergeNewNodesInCurrentlyLoadedTree = mergeNewNodesInCurrentlyLoadedTree;\n  }\n};\n/**\n * Instances of this class represent the properties, hierarchy and status of a single row in a tree-table.\n *\n * @class ViewModelTreeNode\n * @param {String} nodeId - Unique ID for this node within the tree-table.\n * @param {String} type - (See property description below)\n * @param {String} displayName - (See property description below)\n * @param {Number} levelNdx - (See property description below)\n * @param {Number} childNdx - (See property description below)\n * @param {String} iconURL - (See property description below)\n * @param {String} svgString - (See property description below)\n *            <P>\n *            <P>\n * @property {String} id - Unique ID for this node within the tree-table.\n * @property {String} type - The type of model object represented by this tree node (i.e. 'Item'\n *           'DocumentRevision', etc.).\n * @property {String} displayName - The name to display in the 'navigation' column of the tree node.\n * @property {Number} levelNdx - The # of levels down from the 'root' of the tree-table.\n * @property {Number} childNdx - The index to this 'child' within the immediate 'parent'. This information is\n *           meant to help in when only a partial (or sparse) range of children have been loaded. This index is\n *           stable within the 'parent' and not representative of the order based on the 'id'.\n * @property {String} iconURL - The URL to the icon associated with the display of this node in the 'navigation'\n *           column of the tree-table.\n *           <P>\n * @property {String} svgString - The String svg icon associated with the display of this node in the 'navigation'\n *           column of the tree-table.\n *           <P>\n * @property {ViewModelPropertyMap} props - Map of propertyName to ViewModelProperty object holding the\n *           value/state of that property (or 'undefined' if no properties have been loaded yet).\n *           <P>\n * @property {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *           loaded into the 'children' array (or 'undefined' if no expansion has been occured or there are no\n *           children).\n *           <P>\n * @property {ViewModelTreeNodeArray} children - Array of currently loaded ViewModelTreeNode children in the\n *           next level down in the hierarchy (or 'undefined' if no expansion has been occurred or there are no\n *           children).\n *           <P>\n * @property {Boolean} isLeaf - TRUE if we have checked and there are NO 'child' nodes beneath this 'parent'\n *           node (or 'undefined' if no expansion has been occurred or there are children).\n */\n\n\n_c9 = TreeLoadResult;\n\nvar ViewModelTreeNode = function (nodeId, type, displayName, levelNdx, childNdx, iconURL, svgString) {\n  this.uid = nodeId;\n  this.id = nodeId;\n  this.type = type;\n  this.displayName = displayName;\n  this.levelNdx = levelNdx;\n  this.childNdx = childNdx;\n  this.iconURL = iconURL;\n  this.svgString = svgString;\n  this.visible = true;\n  /**\n   * We want to keep the following undefined until when know we need them to be defined.\n   */\n  // this.props;              // Defined for all ViewModelObjects\n  // this.selected;           // Defined for all ViewModelObjects\n  //\n  // this.totalChildCount;\n  // this.children;\n  // this.isLeaf;\n  // this.isExpanded;\n\n  /**\n   * @private\n   * @property {Number} level number property used by ui-grid\n   */\n\n  this.$$treeLevel = levelNdx;\n  /**\n   * Note: This property is only defined when needed and then deleted after use.\n   *\n   * @private\n   * @property {Boolean} TRUE if this node is known to have >0 siblings before it in the ordered collection of\n   *           'child' nodes of its 'parent' node.\n   */\n  // this.incompleteHead = false;\n\n  /**\n   * Note: This property is only defined when needed and then deleted after use.\n   *\n   * @private\n   * @property {Boolean} TRUE if this node is known to have >0 siblings after it in the ordered collection of\n   *           'child' nodes of its 'parent' node.\n   */\n  // this.incompleteTail = false;\n};\n/**\n * Note: This property is only defined when needed and then deleted after use.\n *\n * @private\n * @property {String} A localized suffix string shown when async loading operations are being performed on this\n *           node.\n */\n// this.loadingStatus;\n\n\n_c10 = ViewModelTreeNode;\n\nViewModelTreeNode.prototype.clearEditiableStates = function () {\n  _.forEach(this.props, function (prop2) {\n    vmPropSvc.resetUpdates(prop2);\n    vmPropSvc.setIsEditable(prop2, false);\n  });\n};\n/**\n * Sets the 'isEditable' of viewModelProperties if property in the associated IModelObject can be modified.\n *\n * @param {Boolean} editable - TRUE if the properties are to be marked as 'editable'.\n * @param {Boolean} override - TRUE if the editing state should be updated an announced even if not currently\n *            different than the desired state.\n * @param {Boolean} skipDigest - (Optional) TRUE if the 'triggerDigestCycle' function should NOT be called.\n */\n\n\nViewModelTreeNode.prototype.setEditableStates = function (editable, override, skipDigest) {\n  viewModelObjectSvc.setEditableStates(this, editable, override, skipDigest);\n};\n/**\n * Override the default implementation to return more helpful information.\n *\n * @return {String} Text used to identify this ViewModelTreeNode (e.g. 'displayName', 'levelNdx', etc.).\n */\n\n\nViewModelTreeNode.prototype.toString = function () {\n  if (this.displayName) {\n    return 'node: displayName: ' + this.displayName + ' levelNdx: ' + this.levelNdx + ' childNdx: ' + this.childNdx;\n  }\n\n  return 'node: displayName: ' + '???';\n};\n/**\n * -------------------------------------------------------------------------<BR>\n * Define Service API<BR>\n * -------------------------------------------------------------------------<BR>\n */\n\n\nvar exports = {};\n/**\n * @param {String} parentUid - UID of the 'parent' IModelObject used to access any 'child' nodes in the next\n *            level down in the hierarchy.\n *\n * @param {Number} startChildNdx - The index to start the 'next' page loading at.\n *\n * @param {Number} pageSize - (Optional) The maximum # of 'child' nodes to return in any single paged access\n *            (Default: See _defaultPageSize).\n *\n * @param {Boolean} addAfter - (Optional) TRUE if any new children should be added AFTER the optional\n *            'cursorNodeId' (Default: TRUE)\n *\n * @param {Boolean} skipFocusOccCheck - (Optional) TRUE if you do not want focus passed. (Default: FALSE)\n *\n * @param {String} filter - (Optional) Filter string.\n *\n * @return {ListLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createListLoadInput = function (parentUid, startChildNdx, pageSize, addAfter, skipFocusOccCheck, filter) {\n  return new ListLoadInput(parentUid, startChildNdx, pageSize, addAfter, filter);\n};\n/**\n * @param {ViewModelObject} parentNode - The 'parent' ViewModelObject used to access any 'child' nodes in the\n *            next level down in the hierarchy.\n *\n * @param {ViewModelObjectArray} childNodes - Array of 'child' nodes resulting from a single load execution in\n *            the context of a 'parent' node (i.e. 'children' in the next level down in the hierarchy).\n *\n * @param {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *            loaded into the 'parent' 'children' array.\n *\n * @param {Number} startChildNdx - The 'childNdx' provided in the ListLoadInput that was used to load this data.\n *            This is returned as part of the result to handle cases when multiple loads are being performed on\n *            the same 'parent' and the original closure data could have changed during the async processing.\n *\n * @param {ViewModelObject} newTopNode - (Optional) If this property is defined, it will be used to replace the\n *            (unseen) 'top' node associated with the overall list.\n *            <P>\n *            Note: If 'children' array of this node is not empty it will be ignored and the 'childNodes' of\n *            this result will be set as the 1st level children of this 'parent' node.\n *\n * @return {ListLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createListLoadResult = function (parentNode, childNodes, totalChildCount, startChildNdx, newTopNode) {\n  return new ListLoadResult(parentNode, childNodes, totalChildCount, startChildNdx, newTopNode);\n};\n/**\n * @param {TreeNodeInput} treeLoadInput - The input to a 'getTreeNodePage' operation that specified which\n *            'child' nodes to load dynamically.\n * @param {TreeNodeResult} treeLoadResult - The result of a 'getTreeNodePage' operation that resulted in\n *            ViewModelTreeNodes who's ViewModelProperties need to be loaded dynamically.\n * @param {AwTableColumnInfoArray} columnInfos - Array of AwTableColumnInfo containing property names to\n *            request.\n *\n * @return {PropertyLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createPropertyLoadRequest = function (treeLoadInput, treeLoadResult, columnInfos) {\n  return new PropertyLoadRequest(treeLoadInput.parentNode, treeLoadResult.childNodes, columnInfos);\n};\n/**\n * @param {ViewModelTreeNodeArray} owningNodes - Array of nodes to load ViewModelProperty objects for.\n * @param {StringArray} propertyNames - Array property names to request.\n *\n * @return {PropertyLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createPropertyLoadInput = function (owningNodes, propertyNames) {\n  return new PropertyLoadInput(owningNodes, propertyNames);\n};\n/**\n * @param {ViewModelTreeNodeArray} childNodes - Array of nodes who's ViewModelProperties have been\n *           loaded/updated.\n *\n * @return {PropertyLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createPropertyLoadResult = function (childNodes) {\n  return new PropertyLoadResult(childNodes);\n};\n/**\n * @param {Number} totalFound - Total # of rows in the overall table.\n *\n * @return {TableLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createTableLoadResult = function (totalFound) {\n  return new TableLoadResult(totalFound);\n};\n/**\n * @param {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *            the next level down in the hierarchy.\n *\n * @param {Number} startChildNdx - The 'childNdx' to start the 'next' page loading at.\n *\n * @param {String} startChildId - (Optional) The 'id' of the node to start the 'next' page loading at.\n *\n * @param {String} cursorNodeId - (Optional) ID of an existing node in the 'parent' (and, presumably a\n *            ViewModelCollection) to insert any new nodes after (or before) depending on value of 'addAfter'.\n *\n * @param {Number} pageSize - (Optional) The maximum # of 'child' nodes to return in any single paged access\n *            (Default: See _defaultPageSize).\n *\n * @param {Boolean} addAfter - (Optional) TRUE if any new children should be added AFTER the optional\n *            'cursorNodeId' (Default: TRUE)\n * @param {ViewModelTreeNode} rootNode - The 'root' ViewModelTreeNode used to access any 'child' nodes in the\n *            next level down in the hierarchy.\n *\n * @return {TreeLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createTreeLoadInput = function (parentNode, startChildNdx, startChildId, cursorNodeId, pageSize, addAfter, rootNode) {\n  return new TreeLoadInput(parentNode, startChildNdx, startChildId, cursorNodeId, pageSize, addAfter, rootNode);\n};\n/**\n * @param {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *            the next level down in the hierarchy.\n *\n * @param {ViewModelTreeNodeArray} childNodes - Array of 'child' ViewModelTreeNode objects resulting from a\n *            single load execution in the context of a 'parent' node (i.e. 'children' in the next level down in\n *            the hierarchy).\n *\n * @param {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *            loaded into the 'parent' 'children' array.\n *\n * @param {Number} startChildNdx - The 'childNdx' provided in the TreeLoadInput that was used to load this data.\n *            This is returned as part of the result to handle cases when multiple loads are being performed on\n *            the same 'parent' and the original closure data could have changed during the async processing.\n *\n * @param {String} cursorNodeId - (Optional) ID of an existing node in the 'parent' (and, presumably a\n *            ViewModelCollection) to insert any new nodes after (or before) depending on value of 'addAfter'.\n *\n * @param {Number} newTopNode - (Optional) The node to be considered the new top-most 'parent' node as a result\n *            of this loading operation.\n *            <P>\n *            Note: Often this will be an 'occurrence' object of the underlying 'productModelObject'.\n *\n * @return {TreeLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createTreeLoadResult = function (parentNode, childNodes, totalChildCount, startChildNdx, cursorNodeId, newTopNode) {\n  return new TreeLoadResult(parentNode, childNodes, totalChildCount, startChildNdx, cursorNodeId, newTopNode);\n};\n/**\n * @param {String} nodeId - Unique ID for this node within the tree-table. 'DocumentRevision', etc.).\n * @param {String} type - The type of model object represented by this tree node (i.e. 'Item'\n * @param {String} displayName - The name to display in the 'navigation' column of the tree-table.\n * @param {Number} levelNdx - The # of levels down from the 'root' of the tree-table.\n * @param {Number} childNdx - The index to this 'child' within the immediate 'parent'. This information is meant\n *            to help in when only a partial (or sparse) range of children have been loaded. This index is\n *            stable within the 'parent' and not representative of the order based on the 'id'.\n * @param {String} iconURL - The URL to the icon associated with the display of this node in the 'navigation'\n *            column of the tree-table.\n * @param {String} svgString - The String svg icon associated with the display of this node in the 'navigation'\n *            column of the tree-table.\n *\n * @return {ViewModelTreeNode} Newly created wrapper initialized with properties from the given inputs.\n */\n\nexport let createViewModelTreeNode = function (nodeId, type, displayName, levelNdx, childNdx, iconURL, svgString) {\n  return new ViewModelTreeNode(nodeId, type, displayName, levelNdx, childNdx, iconURL, svgString);\n};\n/**\n * Returns a class that is the overall model used to control the contents and behavior of the 'aw-table'\n * directive. This model allows for functional pieces to be overridden and implemented in application specific\n * ways. Defaults are specified here.\n *\n * @param {DeclViewModel} declViewModel - The 'declViewModel' containing properties to base the new\n *            'awTableViewModel' upon.\n * @param {String} gridId - ID of the {declGrid} the new model will wrap.\n * @param {Object} $scope - the scope object\n *\n * @returns {AwTableViewModel} New instance of this class.\n */\n\nexport let createViewModel = function (declViewModel, gridId, $scope) {\n  return new AwTableViewModel(declViewModel, gridId, $scope);\n};\n/**\n * Centralized handling of the 'start' phase of editing a cell in the table. This function is invoked by the\n * 'aw-table-cell' directive's controller.\n *\n * @param {Object} $scope - The AngularJS scope of the controller.\n * @param {Element} $element - The DOM Element the controller is attached to.\n * @param {ClickEvent} event - The ClickEvent on the cell where the editing is to take place.\n */\n\nexport let handleCellStartEdit = function ($scope, $element, event) {\n  if ($scope.prop && $scope.prop.isEditable && !$scope.prop.isEditing) {\n    // stop propagation to avoid firing the stopEdit event we are about to attach\n    event.stopPropagation(); // trigger any existing stopEdit event in case another cell is in edit mode\n\n    $('body').triggerHandler('click');\n    $scope.prop.autofocus = true;\n    $scope.prop.isEditing = true;\n\n    $scope._bodyClickListener = function (event2) {\n      exports.handleCellStopEdit($scope, $element, event2);\n    }; // click outside stops the edit\n\n\n    $('body').on('click touchstart', $scope._bodyClickListener);\n    /**\n     * Apply editing class on the parent row so CSS can increase the height\n     * <P>\n     * Would be better to set this on the row scope and let the row template style the DOM but 'ui-grid'\n     * doesn't seem to make that part of the template easily customizable.\n     */\n\n    var gridElem = $element.closest('.aw-jswidgets-grid');\n\n    if (gridElem) {\n      var gridScope = gridElem.scope();\n\n      if (gridScope && gridScope.findCellRowElement) {\n        var rowElem = gridScope.findCellRowElement($element);\n\n        if (rowElem) {\n          rowElem.addClass('aw-jswidgets-isEditing-row');\n        }\n      }\n    }\n    /**\n     * Add tabIndex so that it can be used by the control being opened for edit. Otherwise, that control is\n     * opened with the default tab index and tabbing does not move to the next control.\n     */\n\n\n    $scope.prop.tabIndex = event.currentTarget.tabIndex;\n    /**\n     * Set the cellTop element tab index to -1 so that backtab moves to the correct cell\n     */\n\n    if ($scope.prop.type !== 'DATE' && $scope.prop.type !== 'DATEARRAY') {\n      event.currentTarget.tabIndex = -1;\n    }\n  }\n};\n/**\n * Centralized handling of the 'end' phase of editing a cell in the table. This function is invoked by the\n * 'aw-table-cell' directive's controller.\n *\n * @param {Object} $scope - The AngularJS scope of the controller.\n * @param {Element} $element - The DOM Element the controller is attached to.\n * @param {ClickEvent} event - The ClickEvent on some other element indicating editing is to stop.\n */\n\nexport let handleCellStopEdit = function ($scope, $element, event) {\n  /**\n   * Ignore clicks in the date picker header and ckeditor toolbar.\n   * <P>\n   * Note: Can't reference with the standard datepicker id (#ui-datepicker-div) as the element has been\n   * detached at this point (month change destroys original div)\n   * <P>\n   * Could be better to flip and ensure target has \"#main-view\" parent, but that would tie to tc.html\n   */\n  var target = $(event.target);\n\n  if (target.parents('.ui-datepicker-header').length === 0 && target.closest('.cke').length === 0) {\n    var cell = target.closest('.aw-jswidgets-cellTop');\n\n    if (cell.length === 0 || !cell.scope() || !cell.scope().prop || !cell.scope().prop.isEditing) {\n      /**\n       * For non-LOV object reference property stay on edit widget until object Reference panel is active\n       */\n      if ($scope.prop.type === 'OBJECT' && !$scope.prop.hasLov) {\n        if ($scope.referencePanelLoaded) {\n          return;\n        }\n      }\n\n      $scope.$evalAsync(function () {\n        $scope.prop.isEditing = false;\n        /**\n         * Set or unset dirty state based on current value\n         */\n\n        var prevDisplayValues = $scope.prop.prevDisplayValues;\n        $scope.prop.dirty = prevDisplayValues && prevDisplayValues.length > 0 && !_.isEqual(prevDisplayValues[0], $scope.prop.uiValue);\n      });\n      var gridElem = $element.closest('.aw-jswidgets-grid');\n\n      if (gridElem) {\n        var gridScope = gridElem.scope();\n\n        if (gridScope && gridScope.findCellRowElement) {\n          var rowElem = gridScope.findCellRowElement($element);\n\n          if (rowElem) {\n            rowElem.removeClass('aw-jswidgets-isEditing-row');\n          }\n        }\n      }\n\n      $('body').off('click touchstart', $scope._bodyClickListener);\n      delete $scope._bodyClickListener;\n      /**\n       * Reset the cellTop element tab index\n       */\n\n      var $cellTop = $element.find('.aw-jswidgets-cellTop');\n\n      if ($cellTop && $scope.prop) {\n        $cellTop.prop('tabindex', $scope.prop.tabIndex);\n      }\n    }\n  }\n};\n/**\n * Test if the given object 'is-a' ListLoadInput created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a ListLoadInput.\n */\n\nexport let isListLoadInput = function (objectToTest) {\n  return objectToTest instanceof ListLoadInput;\n};\n/**\n * Test if the given object 'is-a' TreeLoadInput created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a TreeLoadInput.\n */\n\nexport let isTreeLoadInput = function (objectToTest) {\n  return objectToTest instanceof TreeLoadInput;\n};\n/**\n * Test if the given object 'is-a' ViewModelTreeNode created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a ViewModelTreeNode.\n */\n\nexport let isViewModelTreeNode = function (objectToTest) {\n  return objectToTest instanceof ViewModelTreeNode;\n};\n/**\n * Test if the given object 'is-a' PropertyLoadInput created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a PropertyLoadInput.\n */\n\nexport let isPropertyLoadInput = function (objectToTest) {\n  return objectToTest instanceof PropertyLoadInput;\n};\n/**\n * Resolve the row data for the 'next' page of 'children' nodes of the given 'parent'.\n * <P>\n * Note: The paging status is maintained in the 'parent' node.\n *\n * @param {TreeLoadInput} treeLoadInput - The original input to the load operation.\n *\n * @param {ViewModelTreeNodeArray} childNodesIn - The 'child' nodes just loaded.\n *\n * @param {Boolean} simplePage - TRUE if the 'childNodesIn' represents a 'page' (and NOT an array of all 'child'\n *            nodes). If TRUE, the nodes will be simply passed along as the result. If FALSE, the page of\n *            children will be extracted from this array.\n *\n * @param {Boolean} startReached - TRUE if the first page of the results has been reached.\n *\n * @param {Boolean} endReached - TRUE if the last page of the results has been reached.\n *\n * @param {ViewModelTreeNode} newTopNode - (Optional) The node to be considered the new top-most 'parent' node\n *            as a result of this loading operation.\n *\n * @return {TreeLoadResult} A new TreeLoadResult object containing result/status information.\n */\n\nexport let buildTreeLoadResult = function (treeLoadInput, childNodesIn, simplePage, startReached, endReached, newTopNode) {\n  var parentNode = newTopNode ? newTopNode : treeLoadInput.parentNode;\n  var currentChildCount = parentNode.children ? parentNode.children.length : 0;\n\n  if (simplePage) {\n    /**\n     * Determine if we already know how many 'child' nodes this 'parent' has OR we need to compute it now.\n     * <P>\n     * Assume we do not know a 'total' for the 'parent' and simply add these 'child' nodes to the total.\n     */\n    var totalChildCount;\n\n    if (_.isEmpty(childNodesIn)) {\n      totalChildCount = currentChildCount;\n    } else {\n      totalChildCount = currentChildCount + childNodesIn.length;\n      /**\n       * Get the 'head' and 'tail' from the collection of new 'child' nodes.\n       */\n\n      var headChild = _.head(childNodesIn);\n\n      var lastChild = _.last(childNodesIn);\n      /**\n       * Check if the 'tail' is known to NOT be the last 'child' of this 'parent'.<br>\n       * If so: Mark that 'child' as an 'incompleteTail' so we know to ask for more below it later.\n       */\n\n\n      if (!declUtils.isNil(endReached)) {\n        if (!endReached) {\n          lastChild.incompleteTail = true;\n          totalChildCount++;\n        }\n      } else if (lastChild.childNdx + 1 < totalChildCount) {\n        lastChild.incompleteTail = true;\n      }\n      /**\n       * Check if we are adding the 1st set of 'child' nodes to this 'parent' and the 'head' one is NOT\n       * the actual 1st child of that 'parent'<BR>\n       * If so: Mark that 'child' as an 'incompleteHead' so we know to ask for more above it later.\n       */\n\n\n      if (!declUtils.isNil(startReached)) {\n        if (!startReached) {\n          headChild.incompleteHead = true;\n        }\n      } else if (currentChildCount === 0 && headChild && headChild.childNdx > 0) {\n        headChild.incompleteHead = true;\n      }\n    }\n    /**\n     * Create the final data object returned to the dataProvider.\n     */\n\n\n    return exports.createTreeLoadResult(treeLoadInput.parentNode, childNodesIn, totalChildCount, treeLoadInput.startChildNdx, treeLoadInput.cursorNodeId, newTopNode);\n  }\n  /**\n   * Check for trival 'no child' case.\n   */\n\n\n  if (_.isEmpty(childNodesIn)) {\n    return exports.createTreeLoadResult(parentNode, [], currentChildCount, treeLoadInput.startChildNdx, treeLoadInput.cursorNodeId, newTopNode);\n  }\n  /**\n   * Determine starting/stop row range to resolve\n   */\n\n\n  var pageSize = treeLoadInput.pageSize;\n  var begNdx = treeLoadInput.startChildNdx;\n\n  if (begNdx >= childNodesIn.length) {\n    return exports.createTreeLoadResult(parentNode, [], childNodesIn.length, treeLoadInput.startChildNdx, treeLoadInput.cursorNodeId, newTopNode);\n  }\n\n  var endNdx = begNdx + pageSize;\n\n  if (endNdx > childNodesIn.length) {\n    endNdx = childNodesIn.length;\n  }\n\n  var childNodes = childNodesIn.slice(begNdx, endNdx);\n\n  if (endNdx < childNodesIn.length) {\n    _.last(childNodes).incompleteTail = true;\n  }\n  /**\n   * Resolve the async request.\n   */\n\n\n  return exports.createTreeLoadResult(parentNode, childNodes, childNodesIn.length, treeLoadInput.startChildNdx, treeLoadInput.cursorNodeId, newTopNode);\n};\n/**\n * Check if the given TreeLoadInput is valid.\n *\n * @param {TreeLoadInput} treeLoadInput - Object to validate.\n *\n * @return {String} The text of a failure message (or NULL if input is valid).\n */\n\nexport let validateTreeLoadInput = function (treeLoadInput) {\n  if (!treeLoadInput) {\n    return 'No TreeLoadInput specified';\n  } else if (!treeLoadInput.parentNode || treeLoadInput.startChildNdx < 0 || treeLoadInput.pageSize <= 0) {\n    return 'Invalid TreeLoadInput specified';\n  }\n\n  return undefined;\n};\n/**\n * Extract a parameter of a specific class from the given arguments array.\n * <P>\n * Note: The order or existence of parameters can vary when more-than-one property is specified in the\n * 'inputData' property of a DeclAction JSON. This code seeks out the requested one.\n *\n * @param {ObjectArray} argsIn - Array of argument objects\n *\n * @return {Object} ListLoadInput from the given arguments (or undefined if not found)\n */\n\nexport let findListLoadInput = function (argsIn) {\n  for (var ndx = 0; ndx < argsIn.length; ndx++) {\n    var arg = argsIn[ndx];\n\n    if (exports.isListLoadInput(arg)) {\n      return arg;\n    }\n  }\n\n  return undefined;\n};\n/**\n * Extract a parameter of a specific class from the given arguments array.\n * <P>\n * Note: The order or existence of parameters can vary when more-than-one property is specified in the\n * 'inputData' property of a DeclAction JSON. This code seeks out the requested one.\n *\n * @param {ObjectArray} argsIn - Array of argument objects\n *\n * @return {Object} PropertyLoadInput from the given arguments (or undefined if not found)\n */\n\nexport let findPropertyLoadInput = function (argsIn) {\n  var input;\n\n  for (var ndx = 0; ndx < argsIn.length; ndx++) {\n    var arg = argsIn[ndx];\n\n    if (exports.isPropertyLoadInput(arg)) {\n      input = arg;\n    } else if (arg && arg.hasOwnProperty('clientName') && arg.hasOwnProperty('clientScopeURI') && input) {\n      // add input context from v-m\n      input.propertyLoadContext = arg;\n    }\n  }\n\n  return input;\n};\n/**\n * Extract a parameter of a specific class from the given arguments array.\n * <P>\n * Note: The order or existence of parameters can vary when more-than-one property is specified in the\n * 'inputData' property of a DeclAction JSON. This code seeks out the requested one.\n *\n * @param {ObjectArray} argsIn - Array of argument objects\n *\n * @return {Object} TreeLoadInput from the given arguments (or undefined if not found)\n */\n\nexport let findTreeLoadInput = function (argsIn) {\n  for (var ndx = 0; ndx < argsIn.length; ndx++) {\n    var arg = argsIn[ndx];\n\n    if (exports.isTreeLoadInput(arg)) {\n      return arg;\n    }\n  }\n\n  return undefined;\n};\nexports = {\n  createListLoadInput,\n  createListLoadResult,\n  createPropertyLoadRequest,\n  createPropertyLoadInput,\n  createPropertyLoadResult,\n  createTableLoadResult,\n  createTreeLoadInput,\n  createTreeLoadResult,\n  createViewModelTreeNode,\n  createViewModel,\n  handleCellStartEdit,\n  handleCellStopEdit,\n  isListLoadInput,\n  isTreeLoadInput,\n  isViewModelTreeNode,\n  isPropertyLoadInput,\n  buildTreeLoadResult,\n  validateTreeLoadInput,\n  findListLoadInput,\n  findPropertyLoadInput,\n  findTreeLoadInput\n};\nexport default exports;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"AwTableViewModel\");\n$RefreshReg$(_c2, \"ListLoadInput\");\n$RefreshReg$(_c3, \"ListLoadResult\");\n$RefreshReg$(_c4, \"PropertyLoadRequest\");\n$RefreshReg$(_c5, \"PropertyLoadInput\");\n$RefreshReg$(_c6, \"PropertyLoadResult\");\n$RefreshReg$(_c7, \"TableLoadResult\");\n$RefreshReg$(_c8, \"TreeLoadInput\");\n$RefreshReg$(_c9, \"TreeLoadResult\");\n$RefreshReg$(_c10, \"ViewModelTreeNode\");","map":{"version":3,"names":["awColumnSvc","viewModelObjectSvc","declModelRegistrySvc","vmPropSvc","assert","_","declUtils","logger","$","_defaultPageSizeTable","_defaultPageSizeTree","AwTableViewModel","declViewModel","gridId","$scope","vmSelf","selectionMode","selectionScope","enableArrangeMenu","enableFilterMenu","isEditable","_internal","isDestroyed","_declViewModelId","getPanelId","_declGridId","registerModel","declGrid","grids","gridOptions","dataProvider","dataProviders","uwDataProvider","_uwDataProvider","selectionModel","mode","scope","_tableColumnProvider","createColumnProvider","commands","json","commandsAnchor","initialize","then","err","error","isNil","propertyProvider","_uwPropProvider","prototype","toString","_modelId","getDataProvider","getPropertyProvider","getColumnProvider","getGridId","destroy","unregisterModel","ListLoadInput","parentUid","startChildNdx","pageSize","addAfter","filter","ListLoadResult","parentNode","childNodes","totalChildCount","newTopNode","PropertyLoadRequest","columnInfos","PropertyLoadInput","propertyLoadRequests","PropertyLoadResult","updatedNodes","TableLoadResult","totalFound","rowsLoaded","nextSearchIndex","TreeLoadInput","startChildId","cursorNodeId","rootNode","focusLoadAction","TreeLoadResult","vmNodesInTreeHierarchyLevels","mergeNewNodesInCurrentlyLoadedTree","ViewModelTreeNode","nodeId","type","displayName","levelNdx","childNdx","iconURL","svgString","uid","id","visible","$$treeLevel","clearEditiableStates","forEach","props","prop2","resetUpdates","setIsEditable","setEditableStates","editable","override","skipDigest","exports","createListLoadInput","skipFocusOccCheck","createListLoadResult","createPropertyLoadRequest","treeLoadInput","treeLoadResult","createPropertyLoadInput","owningNodes","propertyNames","createPropertyLoadResult","createTableLoadResult","createTreeLoadInput","createTreeLoadResult","createViewModelTreeNode","createViewModel","handleCellStartEdit","$element","event","prop","isEditing","stopPropagation","triggerHandler","autofocus","_bodyClickListener","event2","handleCellStopEdit","on","gridElem","closest","gridScope","findCellRowElement","rowElem","addClass","tabIndex","currentTarget","target","parents","length","cell","hasLov","referencePanelLoaded","$evalAsync","prevDisplayValues","dirty","isEqual","uiValue","removeClass","off","$cellTop","find","isListLoadInput","objectToTest","isTreeLoadInput","isViewModelTreeNode","isPropertyLoadInput","buildTreeLoadResult","childNodesIn","simplePage","startReached","endReached","currentChildCount","children","isEmpty","headChild","head","lastChild","last","incompleteTail","incompleteHead","begNdx","endNdx","slice","validateTreeLoadInput","undefined","findListLoadInput","argsIn","ndx","arg","findPropertyLoadInput","input","hasOwnProperty","propertyLoadContext","findTreeLoadInput"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/propertyrender/src/js/awTableService.js"],"sourcesContent":["// Copyright (c) 2020 Siemens\n\n/**\n * This module defines the primary classes used to manage the 'aw-table' directive (used by decl grid).\n *\n * @module js/awTableService\n */\nimport awColumnSvc from 'js/awColumnService';\nimport viewModelObjectSvc from 'js/viewModelObjectService';\nimport declModelRegistrySvc from 'js/declModelRegistryService';\nimport vmPropSvc from 'js/uwPropertyService';\nimport assert from 'js/assert';\nimport _ from 'lodash';\nimport declUtils from 'js/declUtils';\nimport logger from 'js/logger';\n\n/**\n * revisitme yogesh\n * in whole file lot of jquery and scope usages\n */\nimport $ from 'jquery';\n\n/**\n * {Number} The maximum # of nodes/rows to request to be returned in a single call to the dataProviderService\n * for the table.\n * <P>\n * Note: This number could be changed dynamically in the future to be based on the number of rows actually being\n * displayed.\n */\nvar _defaultPageSizeTable = 40;\n\n/**\n * {Number} The maximum # of nodes/rows to request to be returned in a single call to the dataProviderService\n * for the tree.\n * <P>\n * Note: This number could be changed dynamically in the future to be based on the number of rows actually being\n * displayed.\n */\nvar _defaultPageSizeTree = 40;\n\n/**\n * -------------------------------------------------------------------------<BR>\n * Define Service Objects<BR>\n * -------------------------------------------------------------------------<BR>\n */\n\n/**\n * This class is the overall model used to control the contents and behavior of the 'aw-table' directive. This\n * model allows for functional pieces to be overridden and implemented in application specific ways. Defaults\n * are specified here.\n *\n * @class AwTableViewModel\n *\n * @param {DeclViewModel} declViewModel - The 'declViewModel' containing properties to base the new\n *            'awTableViewModel' upon.\n *\n * @param {String} gridId - ID of the {declGrid} this model is wrapping.\n *\n * @param {Object} $scope - the scope object\n *\n */\nvar AwTableViewModel = function( declViewModel, gridId, $scope ) {\n    var vmSelf = this; // eslint-disable-line consistent-this\n\n    /**\n     * @property {String} selectionMode - 'single' or 'multi'\n     *\n     * @memberOf module:js/awTableService~AwTableViewModel\n     */\n    vmSelf.selectionMode = 'single';\n\n    /**\n     * @property {String} selectionScope - 'row' or 'cell'\n     *\n     * @memberOf module:js/awTableService~AwTableViewModel\n     */\n    vmSelf.selectionScope = 'row';\n\n    /**\n     * @property {Boolean} enableArrangeMenu - default is false\n     *\n     * @memberOf module:js/awTableService~AwTableViewModel\n     */\n    vmSelf.enableArrangeMenu = false;\n\n    /**\n     * @property {Boolean} enableFilterMenu - default is false\n     *\n     * @memberOf module:js/awTableService~AwTableViewModel\n     */\n    vmSelf.enableFilterMenu = false;\n\n    /**\n     * @property {Boolean} isEditable - default is false\n     */\n    vmSelf.isEditable = false;\n\n    /**\n     * ---------------------------------------------------------------------------<BR>\n     * Property & Function definition complete....Finish initialization. <BR>\n     * ---------------------------------------------------------------------------<BR>\n     */\n\n    /**\n     * Check if we do NOT have a valid 'declViewModel' and 'gridId' to work with.\n     */\n    assert( declViewModel, 'No DeclViewModel specified' );\n    assert( gridId, 'No DeclGrid ID specified' );\n\n    if( declViewModel._internal.isDestroyed ) {\n        assert( false, 'Invalid to create objects on a destroyed DeclViewModel: ' + declViewModel );\n    }\n\n    /**\n     * The ID of the 'declViewModel' to use for this 'aw-table'.\n     */\n    vmSelf._declViewModelId = declViewModel.getPanelId();\n\n    /**\n     * Remember this 'declGrid' ID\n     * The ID of the 'declGrid' in the 'declViewModel' to use for this 'aw-table'.\n     */\n    vmSelf._declGridId = gridId;\n\n    declModelRegistrySvc.registerModel( 'AwTableViewModel', vmSelf, '_declGridId', '_modelId' );\n\n    /**\n     * Initialize all properties based on the 'declViewModel' defined information.\n     * <P>\n     * Check if the 'declGrid' exists\n     */\n    var declGrid = declViewModel._internal.grids[ gridId ];\n\n    assert( declGrid, 'Invalid DeclGrid ID specified' );\n\n    /**\n     * Set options from v-m json data\n     */\n    vmSelf.gridOptions = declGrid.gridOptions;\n\n    /**\n     * Check if declGrid has a valid 'dataProvider'.\n     */\n    assert( declGrid.dataProvider, 'No DeclDataProvider ID specified' );\n    assert( declViewModel.dataProviders[ declGrid.dataProvider ], 'Invalid DeclDataProvider ID specified' );\n\n    /**\n     * Set reference to the 'declGrid's UwDataProvider.\n     */\n    var uwDataProvider = declViewModel.dataProviders[ declGrid.dataProvider ];\n\n    /**\n     * The 'UwDataProvider' used to access information about the rows and column value of this 'aw-table'.\n     */\n    vmSelf._uwDataProvider = uwDataProvider;\n\n    if( uwDataProvider.selectionModel && uwDataProvider.selectionModel.mode ) {\n        vmSelf.selectionMode = uwDataProvider.selectionModel.mode;\n    }\n\n    if( uwDataProvider.selectionModel && uwDataProvider.selectionModel.scope ) {\n        vmSelf.selectionScope = uwDataProvider.selectionModel.scope;\n    }\n\n    /**\n     * Setup columns information\n     * The 'AwTableColumnProvider' used to access information about the columns of this 'aw-table'.\n     */\n    vmSelf._tableColumnProvider = awColumnSvc.createColumnProvider( declViewModel, $scope,\n        uwDataProvider.commands, gridId, uwDataProvider.json.commandsAnchor );\n\n    vmSelf._tableColumnProvider.initialize().then( function() {\n        // DO nothing\n    }, function( err ) {\n        logger.error( 'Failure during table tableColumnProvider initialization: ' + err );\n    } );\n\n    /**\n     * Set 'enableArrangeMenu' if the declGrid indicated an override of the default.\n     */\n    if( !declUtils.isNil( declGrid.enableArrangeMenu ) ) {\n        vmSelf.enableArrangeMenu = declGrid.enableArrangeMenu;\n    }\n\n    /**\n     * Set 'enableFilterMenu' if the declGrid indicated an override of the default.\n     */\n    if( !declUtils.isNil( declGrid.enableFilterMenu ) ) {\n        vmSelf.enableFilterMenu = declGrid.enableFilterMenu;\n    }\n\n    /**\n     * Check if declGrid has a valid 'propertyProvider'.\n     * The 'UwDataProvider' used to access properties for the rows and column value of this 'aw-table'.\n     */\n    if( declGrid.propertyProvider && declViewModel.dataProviders[ declGrid.propertyProvider ] ) {\n        vmSelf._uwPropProvider = declViewModel.dataProviders[ declGrid.propertyProvider ];\n    }\n}; // AwTableViewModel\n\n/**\n * Override the default implementation to return more helpful information.\n *\n * @return {String} Text used to identify the ID of the AwTableViewModel (e.g. 'modelId' + optional model IDs).\n */\nAwTableViewModel.prototype.toString = function() {\n    if( this ) {\n        if( this._declViewModelId ) {\n            return this._modelId + //\n                '  viewModel: ' + this._declViewModelId + //\n                '  grid: ' + this._declGridId + //\n                '  dataProvider: ' + this._uwDataProvider;\n        }\n\n        return this._modelId + '  viewModelId: ' + '???';\n    }\n\n    return 'AwTableViewModel' + '(Destroyed)';\n};\n\n/**\n * Get the 'provider' used to access information about the rows and column values of this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {UwDataProvider} Reference to the currently registered 'UwDataProvider'.\n */\nAwTableViewModel.prototype.getDataProvider = function() {\n    return this._uwDataProvider;\n};\n\n/**\n * Get the 'provider' used to access properties for the rows and column values of this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {UwDataProvider} Reference to the currently registered 'UwDataProvider' that provides property\n *         information.\n */\nAwTableViewModel.prototype.getPropertyProvider = function() {\n    return this._uwPropProvider;\n};\n\n/**\n * Get the 'provider' used to access information about the columns of this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {AwTableColumnProvider} Reference to the currently registered 'AwTableColumnProvider'.\n */\nAwTableViewModel.prototype.getColumnProvider = function() {\n    assert( this._tableColumnProvider, 'No AwTableColumnProvider set' );\n\n    return this._tableColumnProvider;\n};\n\n/**\n * Get the ID of the 'declGridId' in the 'declViewModel' to be used with this 'aw-table'.\n *\n * @memberOf module:js/awTableService~AwTableViewModel\n *\n * @return {String} The ID of the 'declGridId' in the 'declViewModel' to be used with this 'aw-table'.\n */\nAwTableViewModel.prototype.getGridId = function() {\n    return this._declGridId;\n};\n\n/**\n * Free up all resources held/managed by this object.\n * <P>\n * Note: After this function, no API call should be considered valid. This function is intended to be called\n * when the $scope of any associated viewModel is also being 'destroyed'. After this call (and a GC event), any\n * objects managed by this class may be considered a 'memory leak'.\n */\nAwTableViewModel.prototype.destroy = function() {\n    declModelRegistrySvc.unregisterModel( 'AwTableViewModel', this, '_declGridId', '_modelId' );\n\n    if( this._tableColumnProvider ) {\n        this._tableColumnProvider.destroy();\n        this._tableColumnProvider = null;\n    }\n\n    this._uwDataProvider = null;\n    this._uwPropProvider = null;\n};\n\n/**\n * Instances of this class represent the input structure to a request to load a page of rows (nodes) into a flat\n * table/list.\n *\n * @class ListLoadInput\n *\n * @param {String} parentUid - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {Number} pageSize - (Optional) (See property description below)\n * @param {Boolean} addAfter - (Optional) (See property description below)\n * @param {Object} filter - (Optional) The string used to filter the list.\n *            <P>\n *            <P>\n *\n * @property {String} parentUid - The 'parent' ViewModelTreeNode used to access any 'child' nodes in the next\n *           level down in the hierarchy.\n * @property {Number} startChildNdx - The 'childNdx' of the node to start the 'next' page loading at (Default:\n *           0).\n * @property {Number} pageSize - The maximum # of 'child' node to return in any single paged access (Default:\n *           See _defaultPageSizeTable ).\n * @property {String} startChildId - The 'id' of the node to start the 'next' page loading at.\n * @property {Boolean} addAfter - TRUE if any new children should be added AFTER the optional 'cursorNodeId'\n *           (Default: TRUE)\n * @property {String} filter - The string used to filter the list.\n */\nvar ListLoadInput = function( parentUid, startChildNdx, pageSize, addAfter, filter ) {\n    this.parentUid = parentUid;\n    this.startChildNdx = declUtils.isNil( startChildNdx ) ? 0 : startChildNdx;\n    this.pageSize = declUtils.isNil( pageSize ) ? _defaultPageSizeTable : pageSize;\n    this.addAfter = declUtils.isNil( addAfter ) ? true : addAfter;\n    this.filter = filter;\n};\n\n/**\n * The class is used to communicate the results of a single paged loading of 'child' nodes in a 'parent' node.\n *\n * @class ListLoadResult\n *\n * @param {ViewModelObject} parentNode - (See property description below)\n * @param {ViewModelObjectArray} childNodes - (See property description below)\n * @param {Number} totalChildCount - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {ViewModelObject} newTopNode - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelObject} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *           the next level down in the hierarchy.\n *\n * @property {ViewModelObjectArray} childNodes - Array of 'child' nodes resulting from a single load execution\n *           in the context of a 'parent' node (i.e. 'children' in the next level down in the hierarchy).\n *\n * @property {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *           loaded into the 'parent' 'children' array.\n *\n * @property {Number} startChildNdx - The 'childNdx' provided in the ListLoadInput that was used to load this\n *           data. This is returned as part of the result to handle cases when multiple loads are being\n *           performed on the same 'parent' and the original closure data could have changed during the async\n *           processing.\n *\n * @property {ViewModelObject} newTopNode - (Optional) If this property is defined, it will be used to replace\n *           the (unseen) 'top' node associated with the overall list.\n *           <P>\n *           Note: If 'children' array of this node is not empty it will be ignored and the 'childNodes' of this\n *           result will be set as the 1st level children of this 'parent' node.\n */\nvar ListLoadResult = function( parentNode, childNodes, totalChildCount, startChildNdx, newTopNode ) {\n    this.parentNode = parentNode;\n    this.childNodes = childNodes;\n    this.totalChildCount = totalChildCount;\n    this.startChildNdx = startChildNdx;\n\n    /**\n     * We want to keep the following undefined until when know we need them to be defined.\n     */\n    if( newTopNode ) {\n        this.newTopNode = newTopNode;\n    }\n};\n\n/**\n * Instances of this class represent the input structure to a request to load properties of a collection of\n * tree-table nodes.\n *\n * @class PropertyLoadRequest\n * @param {ViewModelTreeNode} parentNode - (See property description below)\n * @param {ViewModelTreeNodeArray} childNodes - (See property description below)\n * @param {AwTableColumnInfoArray} columnInfos - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNode} parentNode - The 'parent' node the 'child' nodes belong to.\n * @property {ViewModelTreeNodeArray} childNodes - Array of nodes to load ViewModelProperty objects for.\n * @property {AwTableColumnInfoArray} columnInfos - Array of AwTableColumnInfo object containing property names\n *           to load.\n */\nvar PropertyLoadRequest = function( parentNode, childNodes, columnInfos ) {\n    this.parentNode = parentNode;\n    this.childNodes = childNodes;\n    this.columnInfos = columnInfos;\n};\n\n/**\n * Instances of this class represent the input structure to a request to load properties of a collection of\n * tree-table nodes.\n *\n * @class PropertyLoadInput\n * @param {PropertyLoadRequestArray} propertyLoadRequests - (See property description below)\n *            <P>\n *            <P>\n * @property {PropertyLoadRequestArray} propertyLoadRequests - Array requests to fulfill.\n */\nvar PropertyLoadInput = function( propertyLoadRequests ) {\n    this.propertyLoadRequests = propertyLoadRequests;\n};\n\n/**\n * The class is used to communicate the results of incremental loading of properties for ViewModelTreeNodes.\n *\n * @class PropertyLoadResult\n * @param {ViewModelTreeNodeArray} updatedNodes - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNodeArray} updatedNodes - Array of ViewModelTreeNodes who's ViewModelProperties have\n *           been loaded/updated.\n */\nvar PropertyLoadResult = function( updatedNodes ) {\n    this.updatedNodes = updatedNodes;\n};\n\n/**\n * The class is used to communicate the results of a single paged loading of 'child' nodes in a 'parent' node.\n *\n * @class TableLoadResult\n * @param {Number} totalFound - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelObjectArray} rowsLoaded - Array of ViewModelObjects resulting from a single load\n *           execution in the context of a flat table.\n * @property {Number} totalFound - The total # of known rows regardless of how many are currently loaded into\n *           the flat table.\n * @property {Number} nextSearchIndex - The 'page' to start the 'next' page loading at (or -1 if no more rows\n *           exist).\n */\nvar TableLoadResult = function( totalFound ) {\n    this.rowsLoaded = [];\n    this.totalFound = totalFound;\n    this.nextSearchIndex = -1;\n};\n\n/**\n * Instances of this class represent the input structure to a request to load a page of rows (nodes) into a\n * tree-table.\n *\n * @class TreeLoadInput\n *\n * @param {ViewModelTreeNode} parentNode - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {String} startChildId - (See property description below)\n * @param {String} cursorNodeId - (Optional) (See property description below)\n * @param {Number} pageSize - (Optional) (See property description below)\n * @param {Boolean} addAfter - (Optional) (See property description below)\n * @param {ViewModelTreeNode} rootNode - (Optional) (See property description below)\n * @param {Boolean} focusLoadAction - (Optional) (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *           the next level down in the hierarchy.\n * @property {Number} startChildNdx - The 'childNdx' of the node to start the 'next' page loading at.\n * @property {String} startChildId - The 'id' of the node to start the 'next' page loading at.\n * @property {String} cursorNodeId - ID of an existing node in the 'parent' (and, presumably a\n *           ViewModelCollection) to insert any new nodes after (or before...depending on value of 'addAfter').\n *           <P>\n *           Note: If not defined, the 'child' nodes will be added at the end (or beginning) of the 'parent'\n *           node's 'children'.\n * @property {Boolean} addAfter - TRUE if any new children should be added AFTER the optional 'cursorNodeId'\n *           (Default: TRUE)\n * @property {Number} pageSize - The maximum # of 'child' nodes to return in any single paged access (Default:\n *           See _defaultPageSizeTree).\n * @property {ViewModelTreeNode} rootNode - The 'tree' ViewModelTreeNode used to access any 'child' nodes in the\n *           next level down in the hierarchy.\n * @property {Boolean} focusLoadAction - (Optional) TRUE if action is called to load selected object that is\n *           currently not present in tree\n */\nvar TreeLoadInput = function( parentNode, startChildNdx, startChildId, cursorNodeId, pageSize, addAfter,\n    rootNode, focusLoadAction ) {\n    this.parentNode = parentNode;\n    this.rootNode = rootNode;\n\n    this.startChildNdx = startChildNdx;\n    this.startChildId = startChildId;\n    this.cursorNodeId = cursorNodeId;\n    this.pageSize = declUtils.isNil( pageSize ) ? _defaultPageSizeTree : pageSize;\n    this.addAfter = declUtils.isNil( addAfter ) ? true : addAfter;\n\n    /**\n     * We want to keep following parameter undefined until when know we need them to be defined.\n     */\n    if( focusLoadAction ) {\n        this.focusLoadAction = focusLoadAction;\n    }\n};\n\n/**\n * The class is used to communicate the results of a single paged loading of 'child' nodes in a 'parent' node.\n *\n * @class TreeLoadResult\n *\n * @param {ViewModelTreeNode} parentNode - (See property description below)\n * @param {ViewModelTreeNodeArray} childNodes - (See property description below)\n * @param {Number} totalChildCount - (See property description below)\n * @param {Number} startChildNdx - (See property description below)\n * @param {String} cursorNodeId - (See property description below)\n * @param {ViewModelTreeNode} newTopNode - (See property description below)\n * @param {ViewModelTreeNodeArray} vmNodesInTreeHierarchyLevels - (See property description below)\n * @param {Boolean} mergeNewNodesInCurrentlyLoadedTree - (See property description below)\n *            <P>\n *            <P>\n * @property {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *           the next level down in the hierarchy.\n *\n * @property {ViewModelTreeNodeArray} childNodes - Array of 'child' ViewModelTreeNode objects resulting from a\n *           single load execution in the context of a 'parent' node (i.e. 'children' in the next level down in\n *           the hierarchy).\n *\n * @property {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *           loaded into the 'parent' 'children' array.\n *\n * @property {Number} startChildNdx - The 'childNdx' provided in the TreeLoadInput that was used to load this\n *           data. This is returned as part of the result to handle cases when multiple loads are being\n *           performed on the same 'parent' and the original closure data could have changed during the async\n *           processing.\n *\n * @property {String} cursorNodeId - (Optional) ID of an existing node in the 'parent' (and, presumably a\n *           ViewModelCollection) to insert any new nodes after (or before) depending on value of 'addAfter'.\n *\n * @property {ViewModelTreeNode} newTopNode - (Optional) If this property is defined, it will be used to replace\n *           the (unseen) 'top' tree node associated with the overall tree-table.\n *           <P>\n *           Note: If 'children' array of this node is not empty it will be ignored and the 'childNodes' of this\n *           result will be set as the 1st level children of this 'parent' node.\n *\n * @property {ViewModelTreeNodeArray} vmNodesInTreeHierarchyLevels - (Optional) Array of arrays. Each array\n *           index represents ViewModelTreeNode objects at given level.Array at index 0 in represents level -1, ,\n *           index 1 level 0 and so on. Each level will have ViewModelTreeNode where next level nodes need to be\n *           inserted.\n *\n * @property {Boolean} mergeNewNodesInCurrentlyLoadedTree - (Optional) If this property is true,\n *           vmNodesInTreeHierarchyLevels array will be merged in currently loaded tree at proper merge point if\n *           present in tree. All existing nodes in Tree and their properties will be retained.\n *\n */\nvar TreeLoadResult = function( parentNode, childNodes, totalChildCount, startChildNdx, cursorNodeId,\n    newTopNode, vmNodesInTreeHierarchyLevels, mergeNewNodesInCurrentlyLoadedTree ) {\n    this.parentNode = parentNode;\n    this.childNodes = childNodes;\n    this.totalChildCount = totalChildCount;\n    this.startChildNdx = startChildNdx;\n    this.cursorNodeId = cursorNodeId;\n\n    /**\n     * We want to keep the following parameters undefined until when know we need them to be defined.\n     */\n    if( newTopNode ) {\n        this.newTopNode = newTopNode;\n    }\n\n    if( vmNodesInTreeHierarchyLevels ) {\n        this.vmNodesInTreeHierarchyLevels = vmNodesInTreeHierarchyLevels;\n    }\n\n    if( mergeNewNodesInCurrentlyLoadedTree ) {\n        this.mergeNewNodesInCurrentlyLoadedTree = mergeNewNodesInCurrentlyLoadedTree;\n    }\n};\n\n/**\n * Instances of this class represent the properties, hierarchy and status of a single row in a tree-table.\n *\n * @class ViewModelTreeNode\n * @param {String} nodeId - Unique ID for this node within the tree-table.\n * @param {String} type - (See property description below)\n * @param {String} displayName - (See property description below)\n * @param {Number} levelNdx - (See property description below)\n * @param {Number} childNdx - (See property description below)\n * @param {String} iconURL - (See property description below)\n * @param {String} svgString - (See property description below)\n *            <P>\n *            <P>\n * @property {String} id - Unique ID for this node within the tree-table.\n * @property {String} type - The type of model object represented by this tree node (i.e. 'Item'\n *           'DocumentRevision', etc.).\n * @property {String} displayName - The name to display in the 'navigation' column of the tree node.\n * @property {Number} levelNdx - The # of levels down from the 'root' of the tree-table.\n * @property {Number} childNdx - The index to this 'child' within the immediate 'parent'. This information is\n *           meant to help in when only a partial (or sparse) range of children have been loaded. This index is\n *           stable within the 'parent' and not representative of the order based on the 'id'.\n * @property {String} iconURL - The URL to the icon associated with the display of this node in the 'navigation'\n *           column of the tree-table.\n *           <P>\n * @property {String} svgString - The String svg icon associated with the display of this node in the 'navigation'\n *           column of the tree-table.\n *           <P>\n * @property {ViewModelPropertyMap} props - Map of propertyName to ViewModelProperty object holding the\n *           value/state of that property (or 'undefined' if no properties have been loaded yet).\n *           <P>\n * @property {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *           loaded into the 'children' array (or 'undefined' if no expansion has been occured or there are no\n *           children).\n *           <P>\n * @property {ViewModelTreeNodeArray} children - Array of currently loaded ViewModelTreeNode children in the\n *           next level down in the hierarchy (or 'undefined' if no expansion has been occurred or there are no\n *           children).\n *           <P>\n * @property {Boolean} isLeaf - TRUE if we have checked and there are NO 'child' nodes beneath this 'parent'\n *           node (or 'undefined' if no expansion has been occurred or there are children).\n */\nvar ViewModelTreeNode = function( nodeId, type, displayName, levelNdx, childNdx, iconURL, svgString ) {\n    this.uid = nodeId;\n    this.id = nodeId;\n    this.type = type;\n\n    this.displayName = displayName;\n\n    this.levelNdx = levelNdx;\n    this.childNdx = childNdx;\n    this.iconURL = iconURL;\n    this.svgString = svgString;\n    this.visible = true;\n\n    /**\n     * We want to keep the following undefined until when know we need them to be defined.\n     */\n    // this.props;              // Defined for all ViewModelObjects\n    // this.selected;           // Defined for all ViewModelObjects\n    //\n    // this.totalChildCount;\n    // this.children;\n    // this.isLeaf;\n    // this.isExpanded;\n    /**\n     * @private\n     * @property {Number} level number property used by ui-grid\n     */\n    this.$$treeLevel = levelNdx;\n\n    /**\n     * Note: This property is only defined when needed and then deleted after use.\n     *\n     * @private\n     * @property {Boolean} TRUE if this node is known to have >0 siblings before it in the ordered collection of\n     *           'child' nodes of its 'parent' node.\n     */\n    // this.incompleteHead = false;\n    /**\n     * Note: This property is only defined when needed and then deleted after use.\n     *\n     * @private\n     * @property {Boolean} TRUE if this node is known to have >0 siblings after it in the ordered collection of\n     *           'child' nodes of its 'parent' node.\n     */\n    // this.incompleteTail = false;\n};\n\n/**\n * Note: This property is only defined when needed and then deleted after use.\n *\n * @private\n * @property {String} A localized suffix string shown when async loading operations are being performed on this\n *           node.\n */\n// this.loadingStatus;\nViewModelTreeNode.prototype.clearEditiableStates = function() {\n    _.forEach( this.props, function( prop2 ) {\n        vmPropSvc.resetUpdates( prop2 );\n        vmPropSvc.setIsEditable( prop2, false );\n    } );\n};\n\n/**\n * Sets the 'isEditable' of viewModelProperties if property in the associated IModelObject can be modified.\n *\n * @param {Boolean} editable - TRUE if the properties are to be marked as 'editable'.\n * @param {Boolean} override - TRUE if the editing state should be updated an announced even if not currently\n *            different than the desired state.\n * @param {Boolean} skipDigest - (Optional) TRUE if the 'triggerDigestCycle' function should NOT be called.\n */\nViewModelTreeNode.prototype.setEditableStates = function( editable, override, skipDigest ) {\n    viewModelObjectSvc.setEditableStates( this, editable, override, skipDigest );\n};\n\n/**\n * Override the default implementation to return more helpful information.\n *\n * @return {String} Text used to identify this ViewModelTreeNode (e.g. 'displayName', 'levelNdx', etc.).\n */\nViewModelTreeNode.prototype.toString = function() {\n    if( this.displayName ) {\n        return 'node: displayName: ' + this.displayName + ' levelNdx: ' + this.levelNdx + ' childNdx: ' +\n            this.childNdx;\n    }\n\n    return 'node: displayName: ' + '???';\n};\n\n/**\n * -------------------------------------------------------------------------<BR>\n * Define Service API<BR>\n * -------------------------------------------------------------------------<BR>\n */\nvar exports = {};\n\n/**\n * @param {String} parentUid - UID of the 'parent' IModelObject used to access any 'child' nodes in the next\n *            level down in the hierarchy.\n *\n * @param {Number} startChildNdx - The index to start the 'next' page loading at.\n *\n * @param {Number} pageSize - (Optional) The maximum # of 'child' nodes to return in any single paged access\n *            (Default: See _defaultPageSize).\n *\n * @param {Boolean} addAfter - (Optional) TRUE if any new children should be added AFTER the optional\n *            'cursorNodeId' (Default: TRUE)\n *\n * @param {Boolean} skipFocusOccCheck - (Optional) TRUE if you do not want focus passed. (Default: FALSE)\n *\n * @param {String} filter - (Optional) Filter string.\n *\n * @return {ListLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createListLoadInput = function( parentUid, startChildNdx, pageSize, addAfter, skipFocusOccCheck, filter ) {\n    return new ListLoadInput( parentUid, startChildNdx, pageSize, addAfter, filter );\n};\n\n/**\n * @param {ViewModelObject} parentNode - The 'parent' ViewModelObject used to access any 'child' nodes in the\n *            next level down in the hierarchy.\n *\n * @param {ViewModelObjectArray} childNodes - Array of 'child' nodes resulting from a single load execution in\n *            the context of a 'parent' node (i.e. 'children' in the next level down in the hierarchy).\n *\n * @param {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *            loaded into the 'parent' 'children' array.\n *\n * @param {Number} startChildNdx - The 'childNdx' provided in the ListLoadInput that was used to load this data.\n *            This is returned as part of the result to handle cases when multiple loads are being performed on\n *            the same 'parent' and the original closure data could have changed during the async processing.\n *\n * @param {ViewModelObject} newTopNode - (Optional) If this property is defined, it will be used to replace the\n *            (unseen) 'top' node associated with the overall list.\n *            <P>\n *            Note: If 'children' array of this node is not empty it will be ignored and the 'childNodes' of\n *            this result will be set as the 1st level children of this 'parent' node.\n *\n * @return {ListLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createListLoadResult = function( parentNode, childNodes, totalChildCount, startChildNdx, newTopNode ) {\n    return new ListLoadResult( parentNode, childNodes, totalChildCount, startChildNdx, newTopNode );\n};\n\n/**\n * @param {TreeNodeInput} treeLoadInput - The input to a 'getTreeNodePage' operation that specified which\n *            'child' nodes to load dynamically.\n * @param {TreeNodeResult} treeLoadResult - The result of a 'getTreeNodePage' operation that resulted in\n *            ViewModelTreeNodes who's ViewModelProperties need to be loaded dynamically.\n * @param {AwTableColumnInfoArray} columnInfos - Array of AwTableColumnInfo containing property names to\n *            request.\n *\n * @return {PropertyLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createPropertyLoadRequest = function( treeLoadInput, treeLoadResult, columnInfos ) {\n    return new PropertyLoadRequest( treeLoadInput.parentNode, treeLoadResult.childNodes, columnInfos );\n};\n\n/**\n * @param {ViewModelTreeNodeArray} owningNodes - Array of nodes to load ViewModelProperty objects for.\n * @param {StringArray} propertyNames - Array property names to request.\n *\n * @return {PropertyLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createPropertyLoadInput = function( owningNodes, propertyNames ) {\n    return new PropertyLoadInput( owningNodes, propertyNames );\n};\n\n/**\n * @param {ViewModelTreeNodeArray} childNodes - Array of nodes who's ViewModelProperties have been\n *           loaded/updated.\n *\n * @return {PropertyLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createPropertyLoadResult = function( childNodes ) {\n    return new PropertyLoadResult( childNodes );\n};\n\n/**\n * @param {Number} totalFound - Total # of rows in the overall table.\n *\n * @return {TableLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createTableLoadResult = function( totalFound ) {\n    return new TableLoadResult( totalFound );\n};\n\n/**\n * @param {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *            the next level down in the hierarchy.\n *\n * @param {Number} startChildNdx - The 'childNdx' to start the 'next' page loading at.\n *\n * @param {String} startChildId - (Optional) The 'id' of the node to start the 'next' page loading at.\n *\n * @param {String} cursorNodeId - (Optional) ID of an existing node in the 'parent' (and, presumably a\n *            ViewModelCollection) to insert any new nodes after (or before) depending on value of 'addAfter'.\n *\n * @param {Number} pageSize - (Optional) The maximum # of 'child' nodes to return in any single paged access\n *            (Default: See _defaultPageSize).\n *\n * @param {Boolean} addAfter - (Optional) TRUE if any new children should be added AFTER the optional\n *            'cursorNodeId' (Default: TRUE)\n * @param {ViewModelTreeNode} rootNode - The 'root' ViewModelTreeNode used to access any 'child' nodes in the\n *            next level down in the hierarchy.\n *\n * @return {TreeLoadInput} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createTreeLoadInput = function( parentNode, startChildNdx, startChildId, cursorNodeId, pageSize,\n    addAfter, rootNode ) {\n    return new TreeLoadInput( parentNode, startChildNdx, startChildId, cursorNodeId, pageSize, addAfter,\n        rootNode );\n};\n\n/**\n * @param {ViewModelTreeNode} parentNode - The 'parent' ViewModelTreeNode used to access any 'child' nodes in\n *            the next level down in the hierarchy.\n *\n * @param {ViewModelTreeNodeArray} childNodes - Array of 'child' ViewModelTreeNode objects resulting from a\n *            single load execution in the context of a 'parent' node (i.e. 'children' in the next level down in\n *            the hierarchy).\n *\n * @param {Number} totalChildCount - The total # of known 'child' nodes regardless of how many are currently\n *            loaded into the 'parent' 'children' array.\n *\n * @param {Number} startChildNdx - The 'childNdx' provided in the TreeLoadInput that was used to load this data.\n *            This is returned as part of the result to handle cases when multiple loads are being performed on\n *            the same 'parent' and the original closure data could have changed during the async processing.\n *\n * @param {String} cursorNodeId - (Optional) ID of an existing node in the 'parent' (and, presumably a\n *            ViewModelCollection) to insert any new nodes after (or before) depending on value of 'addAfter'.\n *\n * @param {Number} newTopNode - (Optional) The node to be considered the new top-most 'parent' node as a result\n *            of this loading operation.\n *            <P>\n *            Note: Often this will be an 'occurrence' object of the underlying 'productModelObject'.\n *\n * @return {TreeLoadResult} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createTreeLoadResult = function( parentNode, childNodes, totalChildCount, startChildNdx, cursorNodeId,\n    newTopNode ) {\n    return new TreeLoadResult( parentNode, childNodes, totalChildCount, startChildNdx, cursorNodeId, newTopNode );\n};\n\n/**\n * @param {String} nodeId - Unique ID for this node within the tree-table. 'DocumentRevision', etc.).\n * @param {String} type - The type of model object represented by this tree node (i.e. 'Item'\n * @param {String} displayName - The name to display in the 'navigation' column of the tree-table.\n * @param {Number} levelNdx - The # of levels down from the 'root' of the tree-table.\n * @param {Number} childNdx - The index to this 'child' within the immediate 'parent'. This information is meant\n *            to help in when only a partial (or sparse) range of children have been loaded. This index is\n *            stable within the 'parent' and not representative of the order based on the 'id'.\n * @param {String} iconURL - The URL to the icon associated with the display of this node in the 'navigation'\n *            column of the tree-table.\n * @param {String} svgString - The String svg icon associated with the display of this node in the 'navigation'\n *            column of the tree-table.\n *\n * @return {ViewModelTreeNode} Newly created wrapper initialized with properties from the given inputs.\n */\nexport let createViewModelTreeNode = function( nodeId, type, displayName, levelNdx, childNdx, iconURL, svgString ) {\n    return new ViewModelTreeNode( nodeId, type, displayName, levelNdx, childNdx, iconURL, svgString );\n};\n\n/**\n * Returns a class that is the overall model used to control the contents and behavior of the 'aw-table'\n * directive. This model allows for functional pieces to be overridden and implemented in application specific\n * ways. Defaults are specified here.\n *\n * @param {DeclViewModel} declViewModel - The 'declViewModel' containing properties to base the new\n *            'awTableViewModel' upon.\n * @param {String} gridId - ID of the {declGrid} the new model will wrap.\n * @param {Object} $scope - the scope object\n *\n * @returns {AwTableViewModel} New instance of this class.\n */\nexport let createViewModel = function( declViewModel, gridId, $scope ) {\n    return new AwTableViewModel( declViewModel, gridId, $scope );\n};\n\n/**\n * Centralized handling of the 'start' phase of editing a cell in the table. This function is invoked by the\n * 'aw-table-cell' directive's controller.\n *\n * @param {Object} $scope - The AngularJS scope of the controller.\n * @param {Element} $element - The DOM Element the controller is attached to.\n * @param {ClickEvent} event - The ClickEvent on the cell where the editing is to take place.\n */\nexport let handleCellStartEdit = function( $scope, $element, event ) {\n    if( $scope.prop && $scope.prop.isEditable && !$scope.prop.isEditing ) {\n        // stop propagation to avoid firing the stopEdit event we are about to attach\n        event.stopPropagation();\n\n        // trigger any existing stopEdit event in case another cell is in edit mode\n        $( 'body' ).triggerHandler( 'click' );\n\n        $scope.prop.autofocus = true;\n        $scope.prop.isEditing = true;\n\n        $scope._bodyClickListener = function( event2 ) {\n            exports.handleCellStopEdit( $scope, $element, event2 );\n        };\n\n        // click outside stops the edit\n        $( 'body' ).on( 'click touchstart', $scope._bodyClickListener );\n\n        /**\n         * Apply editing class on the parent row so CSS can increase the height\n         * <P>\n         * Would be better to set this on the row scope and let the row template style the DOM but 'ui-grid'\n         * doesn't seem to make that part of the template easily customizable.\n         */\n        var gridElem = $element.closest( '.aw-jswidgets-grid' );\n\n        if( gridElem ) {\n            var gridScope = gridElem.scope();\n\n            if( gridScope && gridScope.findCellRowElement ) {\n                var rowElem = gridScope.findCellRowElement( $element );\n\n                if( rowElem ) {\n                    rowElem.addClass( 'aw-jswidgets-isEditing-row' );\n                }\n            }\n        }\n\n        /**\n         * Add tabIndex so that it can be used by the control being opened for edit. Otherwise, that control is\n         * opened with the default tab index and tabbing does not move to the next control.\n         */\n        $scope.prop.tabIndex = event.currentTarget.tabIndex;\n\n        /**\n         * Set the cellTop element tab index to -1 so that backtab moves to the correct cell\n         */\n        if( $scope.prop.type !== 'DATE' && $scope.prop.type !== 'DATEARRAY' ) {\n            event.currentTarget.tabIndex = -1;\n        }\n    }\n};\n\n/**\n * Centralized handling of the 'end' phase of editing a cell in the table. This function is invoked by the\n * 'aw-table-cell' directive's controller.\n *\n * @param {Object} $scope - The AngularJS scope of the controller.\n * @param {Element} $element - The DOM Element the controller is attached to.\n * @param {ClickEvent} event - The ClickEvent on some other element indicating editing is to stop.\n */\nexport let handleCellStopEdit = function( $scope, $element, event ) {\n    /**\n     * Ignore clicks in the date picker header and ckeditor toolbar.\n     * <P>\n     * Note: Can't reference with the standard datepicker id (#ui-datepicker-div) as the element has been\n     * detached at this point (month change destroys original div)\n     * <P>\n     * Could be better to flip and ensure target has \"#main-view\" parent, but that would tie to tc.html\n     */\n    var target = $( event.target );\n    if( target.parents( '.ui-datepicker-header' ).length === 0 && target.closest( '.cke' ).length === 0 ) {\n        var cell = target.closest( '.aw-jswidgets-cellTop' );\n\n        if( cell.length === 0 || !cell.scope() || !cell.scope().prop || !cell.scope().prop.isEditing ) {\n            /**\n             * For non-LOV object reference property stay on edit widget until object Reference panel is active\n             */\n            if( $scope.prop.type === 'OBJECT' && !$scope.prop.hasLov ) {\n                if( $scope.referencePanelLoaded ) {\n                    return;\n                }\n            }\n\n            $scope.$evalAsync( function() {\n                $scope.prop.isEditing = false;\n\n                /**\n                 * Set or unset dirty state based on current value\n                 */\n                var prevDisplayValues = $scope.prop.prevDisplayValues;\n                $scope.prop.dirty = prevDisplayValues && prevDisplayValues.length > 0 &&\n                    !_.isEqual( prevDisplayValues[ 0 ], $scope.prop.uiValue );\n            } );\n\n            var gridElem = $element.closest( '.aw-jswidgets-grid' );\n\n            if( gridElem ) {\n                var gridScope = gridElem.scope();\n\n                if( gridScope && gridScope.findCellRowElement ) {\n                    var rowElem = gridScope.findCellRowElement( $element );\n\n                    if( rowElem ) {\n                        rowElem.removeClass( 'aw-jswidgets-isEditing-row' );\n                    }\n                }\n            }\n\n            $( 'body' ).off( 'click touchstart', $scope._bodyClickListener );\n\n            delete $scope._bodyClickListener;\n\n            /**\n             * Reset the cellTop element tab index\n             */\n            var $cellTop = $element.find( '.aw-jswidgets-cellTop' );\n\n            if( $cellTop && $scope.prop ) {\n                $cellTop.prop( 'tabindex', $scope.prop.tabIndex );\n            }\n        }\n    }\n};\n\n/**\n * Test if the given object 'is-a' ListLoadInput created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a ListLoadInput.\n */\nexport let isListLoadInput = function( objectToTest ) {\n    return objectToTest instanceof ListLoadInput;\n};\n\n/**\n * Test if the given object 'is-a' TreeLoadInput created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a TreeLoadInput.\n */\nexport let isTreeLoadInput = function( objectToTest ) {\n    return objectToTest instanceof TreeLoadInput;\n};\n\n/**\n * Test if the given object 'is-a' ViewModelTreeNode created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a ViewModelTreeNode.\n */\nexport let isViewModelTreeNode = function( objectToTest ) {\n    return objectToTest instanceof ViewModelTreeNode;\n};\n\n/**\n * Test if the given object 'is-a' PropertyLoadInput created by this service.\n *\n * @param {Object} objectToTest - Object to check prototype history of.\n * @return {Boolean} TRUE if the given object is a PropertyLoadInput.\n */\nexport let isPropertyLoadInput = function( objectToTest ) {\n    return objectToTest instanceof PropertyLoadInput;\n};\n\n/**\n * Resolve the row data for the 'next' page of 'children' nodes of the given 'parent'.\n * <P>\n * Note: The paging status is maintained in the 'parent' node.\n *\n * @param {TreeLoadInput} treeLoadInput - The original input to the load operation.\n *\n * @param {ViewModelTreeNodeArray} childNodesIn - The 'child' nodes just loaded.\n *\n * @param {Boolean} simplePage - TRUE if the 'childNodesIn' represents a 'page' (and NOT an array of all 'child'\n *            nodes). If TRUE, the nodes will be simply passed along as the result. If FALSE, the page of\n *            children will be extracted from this array.\n *\n * @param {Boolean} startReached - TRUE if the first page of the results has been reached.\n *\n * @param {Boolean} endReached - TRUE if the last page of the results has been reached.\n *\n * @param {ViewModelTreeNode} newTopNode - (Optional) The node to be considered the new top-most 'parent' node\n *            as a result of this loading operation.\n *\n * @return {TreeLoadResult} A new TreeLoadResult object containing result/status information.\n */\nexport let buildTreeLoadResult = function( treeLoadInput, childNodesIn, simplePage, startReached, endReached,\n    newTopNode ) {\n    var parentNode = newTopNode ? newTopNode : treeLoadInput.parentNode;\n\n    var currentChildCount = parentNode.children ? parentNode.children.length : 0;\n\n    if( simplePage ) {\n        /**\n         * Determine if we already know how many 'child' nodes this 'parent' has OR we need to compute it now.\n         * <P>\n         * Assume we do not know a 'total' for the 'parent' and simply add these 'child' nodes to the total.\n         */\n        var totalChildCount;\n\n        if( _.isEmpty( childNodesIn ) ) {\n            totalChildCount = currentChildCount;\n        } else {\n            totalChildCount = currentChildCount + childNodesIn.length;\n\n            /**\n             * Get the 'head' and 'tail' from the collection of new 'child' nodes.\n             */\n            var headChild = _.head( childNodesIn );\n            var lastChild = _.last( childNodesIn );\n\n            /**\n             * Check if the 'tail' is known to NOT be the last 'child' of this 'parent'.<br>\n             * If so: Mark that 'child' as an 'incompleteTail' so we know to ask for more below it later.\n             */\n            if( !declUtils.isNil( endReached ) ) {\n                if( !endReached ) {\n                    lastChild.incompleteTail = true;\n                    totalChildCount++;\n                }\n            } else if( lastChild.childNdx + 1 < totalChildCount ) {\n                lastChild.incompleteTail = true;\n            }\n\n            /**\n             * Check if we are adding the 1st set of 'child' nodes to this 'parent' and the 'head' one is NOT\n             * the actual 1st child of that 'parent'<BR>\n             * If so: Mark that 'child' as an 'incompleteHead' so we know to ask for more above it later.\n             */\n            if( !declUtils.isNil( startReached ) ) {\n                if( !startReached ) {\n                    headChild.incompleteHead = true;\n                }\n            } else if( currentChildCount === 0 && headChild && headChild.childNdx > 0 ) {\n                headChild.incompleteHead = true;\n            }\n        }\n\n        /**\n         * Create the final data object returned to the dataProvider.\n         */\n        return exports.createTreeLoadResult( treeLoadInput.parentNode, childNodesIn, totalChildCount,\n            treeLoadInput.startChildNdx, treeLoadInput.cursorNodeId, newTopNode );\n    }\n\n    /**\n     * Check for trival 'no child' case.\n     */\n    if( _.isEmpty( childNodesIn ) ) {\n        return exports.createTreeLoadResult( parentNode, [], currentChildCount, treeLoadInput.startChildNdx,\n            treeLoadInput.cursorNodeId, newTopNode );\n    }\n\n    /**\n     * Determine starting/stop row range to resolve\n     */\n    var pageSize = treeLoadInput.pageSize;\n\n    var begNdx = treeLoadInput.startChildNdx;\n\n    if( begNdx >= childNodesIn.length ) {\n        return exports.createTreeLoadResult( parentNode, [], childNodesIn.length, treeLoadInput.startChildNdx,\n            treeLoadInput.cursorNodeId, newTopNode );\n    }\n\n    var endNdx = begNdx + pageSize;\n\n    if( endNdx > childNodesIn.length ) {\n        endNdx = childNodesIn.length;\n    }\n\n    var childNodes = childNodesIn.slice( begNdx, endNdx );\n\n    if( endNdx < childNodesIn.length ) {\n        _.last( childNodes ).incompleteTail = true;\n    }\n\n    /**\n     * Resolve the async request.\n     */\n    return exports.createTreeLoadResult( parentNode, childNodes, childNodesIn.length,\n        treeLoadInput.startChildNdx, treeLoadInput.cursorNodeId, newTopNode );\n};\n\n/**\n * Check if the given TreeLoadInput is valid.\n *\n * @param {TreeLoadInput} treeLoadInput - Object to validate.\n *\n * @return {String} The text of a failure message (or NULL if input is valid).\n */\nexport let validateTreeLoadInput = function( treeLoadInput ) {\n    if( !treeLoadInput ) {\n        return 'No TreeLoadInput specified';\n    } else if( !treeLoadInput.parentNode || treeLoadInput.startChildNdx < 0 || treeLoadInput.pageSize <= 0 ) {\n        return 'Invalid TreeLoadInput specified';\n    }\n    return undefined;\n};\n\n/**\n * Extract a parameter of a specific class from the given arguments array.\n * <P>\n * Note: The order or existence of parameters can vary when more-than-one property is specified in the\n * 'inputData' property of a DeclAction JSON. This code seeks out the requested one.\n *\n * @param {ObjectArray} argsIn - Array of argument objects\n *\n * @return {Object} ListLoadInput from the given arguments (or undefined if not found)\n */\nexport let findListLoadInput = function( argsIn ) {\n    for( var ndx = 0; ndx < argsIn.length; ndx++ ) {\n        var arg = argsIn[ ndx ];\n\n        if( exports.isListLoadInput( arg ) ) {\n            return arg;\n        }\n    }\n    return undefined;\n};\n\n/**\n * Extract a parameter of a specific class from the given arguments array.\n * <P>\n * Note: The order or existence of parameters can vary when more-than-one property is specified in the\n * 'inputData' property of a DeclAction JSON. This code seeks out the requested one.\n *\n * @param {ObjectArray} argsIn - Array of argument objects\n *\n * @return {Object} PropertyLoadInput from the given arguments (or undefined if not found)\n */\nexport let findPropertyLoadInput = function( argsIn ) {\n    var input;\n    for( var ndx = 0; ndx < argsIn.length; ndx++ ) {\n        var arg = argsIn[ ndx ];\n\n        if( exports.isPropertyLoadInput( arg ) ) {\n            input = arg;\n        } else if( arg && arg.hasOwnProperty( 'clientName' ) && arg.hasOwnProperty( 'clientScopeURI' ) && input ) {\n            // add input context from v-m\n            input.propertyLoadContext = arg;\n        }\n    }\n    return input;\n};\n\n/**\n * Extract a parameter of a specific class from the given arguments array.\n * <P>\n * Note: The order or existence of parameters can vary when more-than-one property is specified in the\n * 'inputData' property of a DeclAction JSON. This code seeks out the requested one.\n *\n * @param {ObjectArray} argsIn - Array of argument objects\n *\n * @return {Object} TreeLoadInput from the given arguments (or undefined if not found)\n */\nexport let findTreeLoadInput = function( argsIn ) {\n    for( var ndx = 0; ndx < argsIn.length; ndx++ ) {\n        var arg = argsIn[ ndx ];\n\n        if( exports.isTreeLoadInput( arg ) ) {\n            return arg;\n        }\n    }\n    return undefined;\n};\n\nexports = {\n    createListLoadInput,\n    createListLoadResult,\n    createPropertyLoadRequest,\n    createPropertyLoadInput,\n    createPropertyLoadResult,\n    createTableLoadResult,\n    createTreeLoadInput,\n    createTreeLoadResult,\n    createViewModelTreeNode,\n    createViewModel,\n    handleCellStartEdit,\n    handleCellStopEdit,\n    isListLoadInput,\n    isTreeLoadInput,\n    isViewModelTreeNode,\n    isPropertyLoadInput,\n    buildTreeLoadResult,\n    validateTreeLoadInput,\n    findListLoadInput,\n    findPropertyLoadInput,\n    findTreeLoadInput\n};\nexport default exports;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}