{"ast":null,"code":"// Copyright (c) 2021 Siemens\n\n/**\n * @module js/urlArgsUtilsService\n */\nimport AwStateService from 'js/awStateService';\nimport AwTimeoutService from 'js/awTimeoutService';\nimport commandService from 'js/command.service';\nimport logger from 'js/logger';\nimport appCtxService from 'js/appCtxService';\nlet _urlCommandCheckPromise = null;\nexport const executeUrlCommand = function (commandContext) {\n  let {\n    runActionWithViewModel\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const commandId = AwStateService.instance.params.cmdId || AwStateService.instance.params.commandID;\n\n  if (commandId && !_urlCommandCheckPromise && runActionWithViewModel) {\n    //Flag to avoid execution of cmd action multiple times.\n    //Keeping this as a local variable for now, considering that even if there are\n    //multiple components calling this particular api, the url is singleton\n    //Hence, the execution should only happen once\n    _urlCommandCheckPromise = true;\n    return AwTimeoutService.instance(function () {\n      let cmdContext = {\n        ctx: appCtxService.getCtx(),\n        commandContext\n      };\n      return commandService.executeCommand(commandId, AwStateService.instance.params.cmdArg, {}, cmdContext, runActionWithViewModel) // Log error or success message\n      .then(function () {\n        logger.trace('Executed command: ' + commandId + ' with args ' + AwStateService.instance.params.cmdArg + ' from url');\n      }, function (errorMessage) {\n        logger.error(errorMessage);\n      }) // clear cmdId and cmdArg\n      .then(function () {\n        if (AwStateService.instance.params.commandId) {\n          return;\n        }\n\n        return AwStateService.instance.go('.', {\n          cmdId: null,\n          cmdArg: null\n        }, {\n          location: 'replace'\n        });\n      }).then(function () {\n        _urlCommandCheckPromise = null;\n      });\n    }, 500);\n  }\n};\nexport default {\n  executeUrlCommand\n};","map":{"version":3,"names":["AwStateService","AwTimeoutService","commandService","logger","appCtxService","_urlCommandCheckPromise","executeUrlCommand","commandContext","runActionWithViewModel","commandId","instance","params","cmdId","commandID","cmdContext","ctx","getCtx","executeCommand","cmdArg","then","trace","errorMessage","error","go","location"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/pagelevelcomponents/src/js/urlArgsUtilsService.js"],"sourcesContent":["// Copyright (c) 2021 Siemens\n\n/**\n * @module js/urlArgsUtilsService\n */\nimport AwStateService from 'js/awStateService';\nimport AwTimeoutService from 'js/awTimeoutService';\nimport commandService from 'js/command.service';\nimport logger from 'js/logger';\nimport appCtxService from 'js/appCtxService';\n\nlet _urlCommandCheckPromise = null;\n\nexport const executeUrlCommand = ( commandContext, { runActionWithViewModel } = {} ) => {\n    const commandId = AwStateService.instance.params.cmdId || AwStateService.instance.params.commandID;\n    if( commandId && !_urlCommandCheckPromise && runActionWithViewModel ) {\n        //Flag to avoid execution of cmd action multiple times.\n        //Keeping this as a local variable for now, considering that even if there are\n        //multiple components calling this particular api, the url is singleton\n        //Hence, the execution should only happen once\n        _urlCommandCheckPromise = true;\n        return AwTimeoutService.instance( function() {\n            let cmdContext = { ctx: appCtxService.getCtx(), commandContext };\n            return commandService.executeCommand( commandId,\n                AwStateService.instance.params.cmdArg, {}, cmdContext, runActionWithViewModel )\n                // Log error or success message\n                .then(\n                    function() {\n                        logger.trace( 'Executed command: ' + commandId +\n                            ' with args ' + AwStateService.instance.params.cmdArg + ' from url' );\n                    },\n                    function( errorMessage ) {\n                        logger.error( errorMessage );\n                    } )\n                // clear cmdId and cmdArg\n                .then( function() {\n                    if( AwStateService.instance.params.commandId ) {\n                        return;\n                    }\n                    return AwStateService.instance.go( '.', {\n                        cmdId: null,\n                        cmdArg: null\n                    }, {\n                        location: 'replace'\n                    } );\n                } ).then( function() {\n                    _urlCommandCheckPromise = null;\n                } );\n        }, 500 );\n    }\n};\n\nexport default {\n    executeUrlCommand\n};\n"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA,OAAOA,cAAP,MAA2B,mBAA3B;AACA,OAAOC,gBAAP,MAA6B,qBAA7B;AACA,OAAOC,cAAP,MAA2B,oBAA3B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AAEA,IAAIC,uBAAuB,GAAG,IAA9B;AAEA,OAAO,MAAMC,iBAAiB,GAAG,UAAEC,cAAF,EAAuD;EAAA,IAArC;IAAEC;EAAF,CAAqC,uEAAR,EAAQ;EACpF,MAAMC,SAAS,GAAGT,cAAc,CAACU,QAAf,CAAwBC,MAAxB,CAA+BC,KAA/B,IAAwCZ,cAAc,CAACU,QAAf,CAAwBC,MAAxB,CAA+BE,SAAzF;;EACA,IAAIJ,SAAS,IAAI,CAACJ,uBAAd,IAAyCG,sBAA7C,EAAsE;IAClE;IACA;IACA;IACA;IACAH,uBAAuB,GAAG,IAA1B;IACA,OAAOJ,gBAAgB,CAACS,QAAjB,CAA2B,YAAW;MACzC,IAAII,UAAU,GAAG;QAAEC,GAAG,EAAEX,aAAa,CAACY,MAAd,EAAP;QAA+BT;MAA/B,CAAjB;MACA,OAAOL,cAAc,CAACe,cAAf,CAA+BR,SAA/B,EACHT,cAAc,CAACU,QAAf,CAAwBC,MAAxB,CAA+BO,MAD5B,EACoC,EADpC,EACwCJ,UADxC,EACoDN,sBADpD,EAEH;MAFG,CAGFW,IAHE,CAIC,YAAW;QACPhB,MAAM,CAACiB,KAAP,CAAc,uBAAuBX,SAAvB,GACV,aADU,GACMT,cAAc,CAACU,QAAf,CAAwBC,MAAxB,CAA+BO,MADrC,GAC8C,WAD5D;MAEH,CAPF,EAQC,UAAUG,YAAV,EAAyB;QACrBlB,MAAM,CAACmB,KAAP,CAAcD,YAAd;MACH,CAVF,EAWH;MAXG,CAYFF,IAZE,CAYI,YAAW;QACd,IAAInB,cAAc,CAACU,QAAf,CAAwBC,MAAxB,CAA+BF,SAAnC,EAA+C;UAC3C;QACH;;QACD,OAAOT,cAAc,CAACU,QAAf,CAAwBa,EAAxB,CAA4B,GAA5B,EAAiC;UACpCX,KAAK,EAAE,IAD6B;UAEpCM,MAAM,EAAE;QAF4B,CAAjC,EAGJ;UACCM,QAAQ,EAAE;QADX,CAHI,CAAP;MAMH,CAtBE,EAsBCL,IAtBD,CAsBO,YAAW;QACjBd,uBAAuB,GAAG,IAA1B;MACH,CAxBE,CAAP;IAyBH,CA3BM,EA2BJ,GA3BI,CAAP;EA4BH;AACJ,CArCM;AAuCP,eAAe;EACXC;AADW,CAAf"},"metadata":{},"sourceType":"module"}