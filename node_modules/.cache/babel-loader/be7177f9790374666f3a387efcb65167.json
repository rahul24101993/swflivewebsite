{"ast":null,"code":"// Copyright (c) 2021 Siemens\nimport AwIcon from'viewmodel/AwIconViewModel';import wcagSvc from'js/wcagService';import{getCompClass}from'js/componentUtils';import sanitizer from'js/sanitizer';import _ from'lodash';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const awSearchBoxServiceRenderFunction=props=>{const{prop,onKeyDown,closeAction,resetAction,i18n,...allOtherProps}=props;const hasInput=prop&&prop.value&&prop.value.length>0||props.value&&props.value.length>0;let keyDownHandler=onKeyDown;if(!keyDownHandler){keyDownHandler=event=>{if(allOtherProps.changeAction){if(event.key!=='Enter'){_.defer(function(){allOtherProps.changeAction();});}else{event.preventDefault();}}else if(allOtherProps.action&&event.key==='Enter'){event.preventDefault();allOtherProps.action();}};}const doSearch=event=>{event.preventDefault();if(allOtherProps.changeAction){_.defer(function(){allOtherProps.changeAction();});}else if(allOtherProps.action){allOtherProps.action();}if(closeAction){closeAction();}};const doSearchKeyPress=event=>{if(wcagSvc.isValidKeyPress(event)){doSearch(event);}};const reset=event=>{const inputProp=prop?prop:props;if(inputProp){inputProp.value='';event.preventDefault();let evt={target:{value:inputProp.value}};inputProp.onChange(evt);if(resetAction){resetAction();}}};const clearContentKeyPress=event=>{if(wcagSvc.isValidKeyPress(event)){reset(event);}};const inputProps={...prop,...allOtherProps};let sanitizedProps=sanitizer.sanitizeHTMLTagProps(inputProps,'input');if(sanitizedProps&&sanitizedProps.value===null){delete sanitizedProps.value;}return/*#__PURE__*/_jsx(\"div\",{className:\"aw-in-content-search-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:getCompClass('aw-uiwidgets-searchBoxContainer',props),children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"off\",className:\"aw-uiwidgets-searchBox\",type:\"text\",...sanitizedProps,onKeyDown:keyDownHandler}),/*#__PURE__*/_jsxs(\"div\",{className:\"sw-search-iconContainer\",children:[hasInput&&/*#__PURE__*/_jsx(\"span\",{role:\"button\",tabIndex:\"0\",onClick:event=>reset(event),onKeyDown:event=>clearContentKeyPress(event),className:\"aw-uiwidgets-searchResetIcon\",\"aria-label\":i18n.RESET_SEARCH,children:/*#__PURE__*/_jsx(AwIcon,{iconId:\"cmdClearText\"})}),/*#__PURE__*/_jsx(\"span\",{role:\"button\",tabIndex:\"0\",\"aria-label\":i18n.SEARCH_LABEL,onClick:event=>doSearch(event),onKeyDown:event=>doSearchKeyPress(event),className:\"aw-uiwidgets-searchBoxIcon\",children:/*#__PURE__*/_jsx(AwIcon,{iconId:\"cmdSearch\"})})]})]})});};","map":null,"metadata":{},"sourceType":"module"}