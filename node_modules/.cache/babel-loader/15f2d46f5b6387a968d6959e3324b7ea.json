{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahukl57\\\\Desktop\\\\SWF\\\\CreatingOwnComponentUsingJsx\\\\node_modules\\\\@swf\\\\core\\\\src\\\\components\\\\src\\\\js\\\\AwPropertyNonEditValService.js\"; // Copyright (c) 2021 Siemens\n\nimport navigationTokenService from 'js/navigationTokenService';\nimport { AwHighlightPropertyHtml, DisplayVal } from 'js/hocCollection';\nimport AwCommandBar from 'viewmodel/AwCommandBarViewModel';\nimport sanitizer from 'js/sanitizer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SpanAwHighlightPropertyHtmlDisplayVal = DisplayVal(AwHighlightPropertyHtml('span'));\n_c = SpanAwHighlightPropertyHtmlDisplayVal;\nconst LinkAwHighlightPropertyHtmlDisplayVal = DisplayVal(AwHighlightPropertyHtml('a'));\n_c2 = LinkAwHighlightPropertyHtmlDisplayVal;\n\nconst openObjectLinkPage = (event, prop) => {\n  if (event.target.tagName.toLowerCase() === 'a' && event.target.href !== '') {\n    return;\n  } // This is to prevent this event being lost in table if link is in a cell.\n\n\n  event.stopPropagation();\n};\n\nconst hasOldValue = function (fieldData) {\n  return fieldData.oldValue !== undefined && fieldData.oldValue || fieldData.oldValues !== undefined && fieldData.oldValues;\n};\n\nexport const awPropertyNonEditValRenderFunction = props => {\n  const {\n    viewModel,\n    ctxMin,\n    actions,\n    i18n,\n    fields,\n    grids,\n    formProp,\n    messages,\n    ...prop\n  } = props;\n  const {\n    dispatch,\n    data\n  } = viewModel;\n  let filteredAttrs = sanitizer.sanitizeHTMLTagProps(prop, 'span');\n\n  if ((prop.typex === 'OBJECT' || prop.typex === 'OBJECTARRAY') && prop.value) {\n    if (!data.urlLoadingInprogress && data.propUid !== prop.value) {\n      let uidToBeEvaluated = null;\n\n      if (prop.fielddata && prop.fielddata.isArray) {\n        uidToBeEvaluated = prop.value[prop.index];\n      } else {\n        uidToBeEvaluated = prop.value;\n      }\n\n      dispatch({\n        path: 'data.urlLoadingInprogress',\n        value: true\n      });\n      navigationTokenService.getNavigationContent({}, uidToBeEvaluated).then(function (urlDetails) {\n        if (urlDetails) {\n          const associatedURL = {\n            url: urlDetails.urlContent,\n            target: urlDetails.target\n          };\n          dispatch({\n            path: 'data',\n            value: {\n              associatedURL,\n              propUid: prop.value,\n              urlLoadingInprogress: false\n            }\n          });\n        }\n      });\n    }\n\n    if (data.associatedURL) {\n      let oldValue = prop.typex === 'OBJECTARRAY' && prop.fielddata.oldValues ? prop.fielddata.oldValues[prop.index] : prop.fielddata.oldValue;\n      let uiValue = prop.typex === 'OBJECTARRAY' ? prop.fielddata.uiValues[prop.index] : prop.fielddata && prop.fielddata.uiValue;\n      return oldValue ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"propertyLabelTopContainer\",\n        children: [/*#__PURE__*/_jsxDEV(LinkAwHighlightPropertyHtmlDisplayVal, {\n          className: \"sw-widgets-propertyValueLink sw-property-val sw-aria-border\",\n          href: data.associatedURL.url,\n          target: data.associatedURL.target,\n          onClick: ev => openObjectLinkPage(ev, prop),\n          awHighlightPropertyHtml: true,\n          displayVal: prop.fielddata.uiValue,\n          children: [\" \", uiValue]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"aw-jswidgets-oldText\",\n          children: oldValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 31\n      }, this) : /*#__PURE__*/_jsxDEV(LinkAwHighlightPropertyHtmlDisplayVal, {\n        className: \"sw-widgets-propertyValueLink sw-property-val sw-aria-border\",\n        href: data.associatedURL.url,\n        target: data.associatedURL.target,\n        onClick: ev => openObjectLinkPage(ev, prop),\n        awHighlightPropertyHtml: true,\n        displayVal: prop.fielddata.uiValue,\n        children: [\" \", uiValue]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 22\n      }, this);\n    }\n  } else if (prop.typex === 'CHECKBOXARRAY') {\n    let str = prop.fielddata.displayValues.join(',');\n    return /*#__PURE__*/_jsxDEV(SpanAwHighlightPropertyHtmlDisplayVal, { ...filteredAttrs,\n      className: \"sw-property-val\",\n      awHighlightPropertyHtml: true,\n      displayVal: str,\n      children: str\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this);\n  } else {\n    if (prop.fielddata.uwAnchor && !prop.fielddata.isArray) {\n      const commandConext = { ...prop.fielddata,\n        dbValue: prop.fielddata.displayValues\n      };\n      return hasOldValue(prop.fielddata) ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sw-property-valWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(SpanAwHighlightPropertyHtmlDisplayVal, { ...filteredAttrs,\n          className: \"sw-property-val aw-jswidgets-change\",\n          awHighlightPropertyHtml: true,\n          displayVal: prop.fielddata.uiValue,\n          children: prop.fielddata.uiValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), prop.fielddata.oldValue && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"aw-jswidgets-oldText\",\n          children: prop.fielddata.oldValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 49\n        }, this), /*#__PURE__*/_jsxDEV(AwCommandBar, {\n          anchor: prop.fielddata.uwAnchor,\n          alignment: \"HORIZONTAL\",\n          context: commandConext\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 49\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sw-property-valWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(SpanAwHighlightPropertyHtmlDisplayVal, { ...filteredAttrs,\n          className: \"sw-property-val\",\n          awHighlightPropertyHtml: true,\n          displayVal: prop.fielddata.uiValue,\n          children: prop.fielddata.uiValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AwCommandBar, {\n          anchor: prop.fielddata.uwAnchor,\n          alignment: \"HORIZONTAL\",\n          context: commandConext\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 26\n      }, this);\n    } else if (prop.fielddata.isArray && prop.fielddata.displayValsModel) {\n      return prop.fielddata.oldValues !== undefined && prop.fielddata.oldValues ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"propertyLabelTopContainer\",\n        children: [/*#__PURE__*/_jsxDEV(SpanAwHighlightPropertyHtmlDisplayVal, {\n          className: \"sw-property-val aw-jswidgets-change\",\n          awHighlightPropertyHtml: true,\n          displayVal: prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue,\n          children: prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"aw-jswidgets-oldText\",\n          children: prop.fielddata.oldValues[prop.index]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 86\n      }, this) : /*#__PURE__*/_jsxDEV(SpanAwHighlightPropertyHtmlDisplayVal, {\n        className: \"sw-property-val\",\n        awHighlightPropertyHtml: true,\n        displayVal: prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue,\n        children: prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 26\n      }, this);\n    }\n\n    return hasOldValue(prop.fielddata) ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"propertyLabelTopContainer\",\n      children: [/*#__PURE__*/_jsxDEV(SpanAwHighlightPropertyHtmlDisplayVal, {\n        className: \"sw-property-val aw-jswidgets-change\",\n        awHighlightPropertyHtml: true,\n        displayVal: prop.fielddata.uiValue,\n        children: prop.fielddata.uiValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), prop.fielddata.oldValue && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"aw-jswidgets-oldText\",\n        children: prop.fielddata.oldValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 46\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 45\n    }, this) : /*#__PURE__*/_jsxDEV(SpanAwHighlightPropertyHtmlDisplayVal, { ...filteredAttrs,\n      className: \"sw-property-val\",\n      awHighlightPropertyHtml: true,\n      displayVal: prop.fielddata.uiValue,\n      children: prop.fielddata.uiValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this);\n  }\n};\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SpanAwHighlightPropertyHtmlDisplayVal\");\n$RefreshReg$(_c2, \"LinkAwHighlightPropertyHtmlDisplayVal\");","map":{"version":3,"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/components/src/js/AwPropertyNonEditValService.js"],"names":["SpanAwHighlightPropertyHtmlDisplayVal","DisplayVal","AwHighlightPropertyHtml","LinkAwHighlightPropertyHtmlDisplayVal","openObjectLinkPage","event","hasOldValue","fieldData","awPropertyNonEditValRenderFunction","props","prop","data","filteredAttrs","sanitizer","uidToBeEvaluated","dispatch","path","value","navigationTokenService","associatedURL","url","urlDetails","target","propUid","urlLoadingInprogress","oldValue","uiValue","ev","str","commandConext","dbValue","displayValues","displayValue"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Siemens\nimport navigationTokenService from 'js/navigationTokenService';\nimport { AwHighlightPropertyHtml, DisplayVal } from 'js/hocCollection';\nimport AwCommandBar from 'viewmodel/AwCommandBarViewModel';\nimport sanitizer from 'js/sanitizer';\n\nconst SpanAwHighlightPropertyHtmlDisplayVal = DisplayVal( AwHighlightPropertyHtml( 'span' ) );\nconst LinkAwHighlightPropertyHtmlDisplayVal = DisplayVal( AwHighlightPropertyHtml( 'a' ) );\n\nconst openObjectLinkPage = ( event, prop ) => {\n    if( event.target.tagName.toLowerCase() === 'a' && event.target.href !== '' ) {\n        return;\n    }\n\n    // This is to prevent this event being lost in table if link is in a cell.\n    event.stopPropagation();\n};\nconst hasOldValue = function( fieldData ) {\n    return fieldData.oldValue !== undefined && fieldData.oldValue || fieldData.oldValues !== undefined && fieldData.oldValues;\n};\nexport const awPropertyNonEditValRenderFunction = ( props ) => {\n    const {\n        viewModel,\n        ctxMin,\n        actions,\n        i18n,\n        fields,\n        grids,\n        formProp,\n        messages,\n        ...prop\n    } = props;\n    const { dispatch, data } = viewModel;\n\n    let filteredAttrs = sanitizer.sanitizeHTMLTagProps( prop, 'span' );\n\n    if( ( prop.typex === 'OBJECT' || prop.typex === 'OBJECTARRAY' ) && prop.value ) {\n        if( !data.urlLoadingInprogress && data.propUid !== prop.value ) {\n            let uidToBeEvaluated = null;\n            if( prop.fielddata && prop.fielddata.isArray ) {\n                uidToBeEvaluated = prop.value[ prop.index ];\n            } else {\n                uidToBeEvaluated = prop.value;\n            }\n            dispatch( { path: 'data.urlLoadingInprogress', value: true } );\n            navigationTokenService.getNavigationContent( {}, uidToBeEvaluated ).then( function( urlDetails ) {\n                if( urlDetails ) {\n                    const associatedURL = {\n                        url: urlDetails.urlContent,\n                        target: urlDetails.target\n                    };\n                    dispatch( { path: 'data', value: { associatedURL, propUid: prop.value, urlLoadingInprogress: false } } );\n                }\n            } );\n        }\n        if( data.associatedURL ) {\n            let oldValue = prop.typex === 'OBJECTARRAY' && prop.fielddata.oldValues ? prop.fielddata.oldValues[ prop.index ] : prop.fielddata.oldValue;\n            let uiValue = prop.typex === 'OBJECTARRAY' ? prop.fielddata.uiValues[ prop.index ] : prop.fielddata && prop.fielddata.uiValue;\n            return oldValue ? <div className='propertyLabelTopContainer'>\n                <LinkAwHighlightPropertyHtmlDisplayVal className='sw-widgets-propertyValueLink sw-property-val sw-aria-border'\n                    href={data.associatedURL.url}\n                    target={data.associatedURL.target}\n                    onClick={( ev ) => openObjectLinkPage( ev, prop )}\n                    awHighlightPropertyHtml displayVal={prop.fielddata.uiValue}\n                > { uiValue }</LinkAwHighlightPropertyHtmlDisplayVal>\n                <span className='aw-jswidgets-oldText' >{oldValue}</span>\n            </div> : <LinkAwHighlightPropertyHtmlDisplayVal className='sw-widgets-propertyValueLink sw-property-val sw-aria-border'\n                href={data.associatedURL.url}\n                target={data.associatedURL.target}\n                onClick={( ev ) => openObjectLinkPage( ev, prop )}\n                awHighlightPropertyHtml displayVal={prop.fielddata.uiValue}\n            > { uiValue }</LinkAwHighlightPropertyHtmlDisplayVal>;\n        }\n    } else if( prop.typex === 'CHECKBOXARRAY' ) {\n        let str = prop.fielddata.displayValues.join( ',' );\n        return (\n            <SpanAwHighlightPropertyHtmlDisplayVal {...filteredAttrs} className='sw-property-val' awHighlightPropertyHtml displayVal={str}>{str}</SpanAwHighlightPropertyHtmlDisplayVal>\n        );\n    } else {\n        if( prop.fielddata.uwAnchor && !prop.fielddata.isArray ) {\n            const commandConext = {\n                ...prop.fielddata,\n                dbValue: prop.fielddata.displayValues\n            };\n            return(\n                hasOldValue( prop.fielddata ) ? <div className='sw-property-valWrapper'>\n                    <SpanAwHighlightPropertyHtmlDisplayVal {...filteredAttrs} className='sw-property-val aw-jswidgets-change' awHighlightPropertyHtml displayVal={prop.fielddata.uiValue}>{prop.fielddata.uiValue}</SpanAwHighlightPropertyHtmlDisplayVal>\n                    {prop.fielddata.oldValue && <span className='aw-jswidgets-oldText' >{prop.fielddata.oldValue}</span>}\n                    <AwCommandBar anchor={prop.fielddata.uwAnchor} alignment='HORIZONTAL' context={commandConext}></AwCommandBar>\n                </div> : <div className='sw-property-valWrapper'>\n                    <SpanAwHighlightPropertyHtmlDisplayVal {...filteredAttrs} className='sw-property-val' awHighlightPropertyHtml displayVal={prop.fielddata.uiValue}>{prop.fielddata.uiValue}</SpanAwHighlightPropertyHtmlDisplayVal>\n                    <AwCommandBar anchor={prop.fielddata.uwAnchor} alignment='HORIZONTAL' context={commandConext}></AwCommandBar>\n                </div>\n            );\n        } else if( prop.fielddata.isArray && prop.fielddata.displayValsModel ) {\n            return (\n                prop.fielddata.oldValues !== undefined && prop.fielddata.oldValues ? <div className='propertyLabelTopContainer'>\n                    <SpanAwHighlightPropertyHtmlDisplayVal className='sw-property-val aw-jswidgets-change' awHighlightPropertyHtml displayVal={prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue}>\n                        {prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue}\n                    </SpanAwHighlightPropertyHtmlDisplayVal>\n                    <span className='aw-jswidgets-oldText' >{prop.fielddata.oldValues[prop.index]}</span>\n                </div> : <SpanAwHighlightPropertyHtmlDisplayVal className='sw-property-val' awHighlightPropertyHtml displayVal={prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue}>\n                    {prop.fielddata.displayValsModel[prop.index] && prop.fielddata.displayValsModel[prop.index].displayValue}\n                </SpanAwHighlightPropertyHtmlDisplayVal>\n            );\n        }\n        return (\n            hasOldValue( prop.fielddata ) ? <div className='propertyLabelTopContainer'>\n                <SpanAwHighlightPropertyHtmlDisplayVal className='sw-property-val aw-jswidgets-change' awHighlightPropertyHtml displayVal={prop.fielddata.uiValue}>{prop.fielddata.uiValue}</SpanAwHighlightPropertyHtmlDisplayVal>\n                { prop.fielddata.oldValue && <span className='aw-jswidgets-oldText' >{prop.fielddata.oldValue}</span> }\n            </div> :\n                <SpanAwHighlightPropertyHtmlDisplayVal {...filteredAttrs} className='sw-property-val' awHighlightPropertyHtml displayVal={prop.fielddata.uiValue}>{prop.fielddata.uiValue}</SpanAwHighlightPropertyHtmlDisplayVal>\n        );\n    }\n};\n"]},"metadata":{},"sourceType":"module"}