{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahukl57\\\\Desktop\\\\SWF\\\\CreatingOwnComponentUsingJsx\\\\node_modules\\\\@swf\\\\core\\\\src\\\\components\\\\src\\\\js\\\\AwTreeService.js\";\nimport eventBus from 'js/eventBus';\nimport AwNode from 'viewmodel/AwNodeViewModel';\nimport _ from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet treeEventSubscribe = null;\n\nlet searchTreeOnEnteredValue = (key, regex, node) => {\n  var keyStr = _.get(node, key);\n\n  if (regex.test(keyStr)) {\n    node.expanded = true;\n    return node;\n  } else if (node.children) {\n    for (var i = 0; i < node.children.length; i++) {\n      var outNode = searchTreeOnEnteredValue(key, regex, node.children[i]);\n\n      if (outNode) {\n        node.expanded = true;\n        return outNode;\n      }\n    }\n  }\n\n  return null;\n};\n\nexport const awTreeRenderFunction = props => {\n  const {\n    tree,\n    viewModel,\n    ...prop\n  } = props;\n  const {\n    data,\n    dispatch\n  } = viewModel;\n  let selectedNode = viewModel.data.selectedNode;\n  let treeName = prop.name.replace(/'/gi, '');\n\n  const selectionHandler = (event, node) => {\n    event.stopPropagation();\n\n    if (node) {\n      if (treeName) {\n        eventBus.publish(treeName + '.treeNodeSelected', {\n          node: node\n        });\n      }\n\n      if (selectedNode) {\n        selectedNode.selected = false;\n      }\n\n      selectedNode = node;\n      selectedNode.selected = true;\n    }\n\n    dispatch({\n      path: 'data.selectedNode',\n      value: node\n    });\n  };\n\n  treeEventSubscribe = eventBus.subscribe('awtree.updateSelection', function (eventData) {\n    if (eventData.name === treeName) {\n      var key = tree[0].value ? 'value' : 'label';\n      var val = '.*' + eventData.selectionValue + '.*';\n      var regex = new RegExp(val, 'i');\n      var searchedNode;\n\n      for (var i = 0; i < tree.length; i++) {\n        searchedNode = searchTreeOnEnteredValue(key, regex, tree[i]);\n\n        if (searchedNode) {\n          break;\n        }\n      }\n\n      if (searchedNode) {\n        if (selectedNode) {\n          selectedNode.selected = false;\n        }\n\n        selectedNode = searchedNode;\n        selectedNode.selected = true;\n        dispatch({\n          path: 'data.selectedNode',\n          value: searchedNode\n        });\n      }\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(AwNode, {\n    level: 0,\n    tree: tree,\n    toggleSelectionHandler: selectionHandler,\n    displayname: prop.displayname,\n    children: prop.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\nexport const cleanupPage = () => {\n  eventBus.unsubscribe(treeEventSubscribe);\n};","map":{"version":3,"names":["eventBus","AwNode","_","treeEventSubscribe","searchTreeOnEnteredValue","key","regex","node","keyStr","get","test","expanded","children","i","length","outNode","awTreeRenderFunction","props","tree","viewModel","prop","data","dispatch","selectedNode","treeName","name","replace","selectionHandler","event","stopPropagation","publish","selected","path","value","subscribe","eventData","val","selectionValue","RegExp","searchedNode","displayname","cleanupPage","unsubscribe"],"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/components/src/js/AwTreeService.js"],"sourcesContent":["import eventBus from 'js/eventBus';\nimport AwNode from 'viewmodel/AwNodeViewModel';\nimport _ from 'lodash';\n\nlet treeEventSubscribe = null;\n\nlet searchTreeOnEnteredValue = ( key, regex, node ) => {\n    var keyStr = _.get( node, key );\n    if( regex.test( keyStr ) ) {\n        node.expanded = true;\n        return node;\n    } else if( node.children ) {\n        for( var i = 0; i < node.children.length; i++ ) {\n            var outNode = searchTreeOnEnteredValue( key, regex, node.children[ i ] );\n            if( outNode ) {\n                node.expanded = true;\n                return outNode;\n            }\n        }\n    }\n    return null;\n};\n\nexport const awTreeRenderFunction = ( props ) => {\n    const { tree, viewModel, ...prop } = props;\n    const { data, dispatch } = viewModel;\n\n    let selectedNode = viewModel.data.selectedNode;\n    let treeName = prop.name.replace( /'/gi, '' );\n\n    const selectionHandler = ( event, node ) => {\n        event.stopPropagation();\n        if( node ) {\n            if( treeName ) {\n                eventBus.publish( treeName + '.treeNodeSelected', {\n                    node: node\n                } );\n            }\n            if( selectedNode ) {\n                selectedNode.selected = false;\n            }\n            selectedNode = node;\n            selectedNode.selected = true;\n        }\n        dispatch( { path: 'data.selectedNode', value: node } );\n    };\n\n    treeEventSubscribe = eventBus.subscribe( 'awtree.updateSelection', function( eventData ) {\n        if( eventData.name === treeName ) {\n            var key = tree[ 0 ].value ? 'value' : 'label';\n            var val = '.*' + eventData.selectionValue + '.*';\n            var regex = new RegExp( val, 'i' );\n            var searchedNode;\n            for( var i = 0; i < tree.length; i++ ) {\n                searchedNode = searchTreeOnEnteredValue( key, regex, tree[ i ] );\n                if( searchedNode ) {\n                    break;\n                }\n            }\n            if( searchedNode ) {\n                if( selectedNode ) {\n                    selectedNode.selected = false;\n                }\n                selectedNode = searchedNode;\n                selectedNode.selected = true;\n                dispatch( { path: 'data.selectedNode', value: searchedNode } );\n            }\n        }\n    } );\n    return (\n        <AwNode level = {0}  tree={tree} toggleSelectionHandler={selectionHandler} displayname = {prop.displayname}>\n            {prop.children}\n        </AwNode>\n    );\n};\n\nexport const cleanupPage = () => {\n    eventBus.unsubscribe( treeEventSubscribe );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}