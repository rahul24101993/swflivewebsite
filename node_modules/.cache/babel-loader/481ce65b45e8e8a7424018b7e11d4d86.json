{"ast":null,"code":"// Copyright (c) 2021 Siemens\nimport navigationTokenService from'js/navigationTokenService';import{AwHighlightPropertyHtml,DisplayVal}from'js/hocCollection';import AwCommandBar from'viewmodel/AwCommandBarViewModel';import sanitizer from'js/sanitizer';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const SpanAwHighlightPropertyHtmlDisplayVal=DisplayVal(AwHighlightPropertyHtml('span'));const LinkAwHighlightPropertyHtmlDisplayVal=DisplayVal(AwHighlightPropertyHtml('a'));const openObjectLinkPage=(event,prop)=>{if(event.target.tagName.toLowerCase()==='a'&&event.target.href!==''){return;}// This is to prevent this event being lost in table if link is in a cell.\nevent.stopPropagation();};const hasOldValue=function(fieldData){return fieldData.oldValue!==undefined&&fieldData.oldValue||fieldData.oldValues!==undefined&&fieldData.oldValues;};export const awPropertyNonEditValRenderFunction=props=>{const{viewModel,ctxMin,actions,i18n,fields,grids,formProp,messages,...prop}=props;const{dispatch,data}=viewModel;let filteredAttrs=sanitizer.sanitizeHTMLTagProps(prop,'span');if((prop.typex==='OBJECT'||prop.typex==='OBJECTARRAY')&&prop.value){if(!data.urlLoadingInprogress&&data.propUid!==prop.value){let uidToBeEvaluated=null;if(prop.fielddata&&prop.fielddata.isArray){uidToBeEvaluated=prop.value[prop.index];}else{uidToBeEvaluated=prop.value;}dispatch({path:'data.urlLoadingInprogress',value:true});navigationTokenService.getNavigationContent({},uidToBeEvaluated).then(function(urlDetails){if(urlDetails){const associatedURL={url:urlDetails.urlContent,target:urlDetails.target};dispatch({path:'data',value:{associatedURL,propUid:prop.value,urlLoadingInprogress:false}});}});}if(data.associatedURL){let oldValue=prop.typex==='OBJECTARRAY'&&prop.fielddata.oldValues?prop.fielddata.oldValues[prop.index]:prop.fielddata.oldValue;let uiValue=prop.typex==='OBJECTARRAY'?prop.fielddata.uiValues[prop.index]:prop.fielddata&&prop.fielddata.uiValue;return oldValue?/*#__PURE__*/_jsxs(\"div\",{className:\"propertyLabelTopContainer\",children:[/*#__PURE__*/_jsxs(LinkAwHighlightPropertyHtmlDisplayVal,{className:\"sw-widgets-propertyValueLink sw-property-val sw-aria-border\",href:data.associatedURL.url,target:data.associatedURL.target,onClick:ev=>openObjectLinkPage(ev,prop),awHighlightPropertyHtml:true,displayVal:prop.fielddata.uiValue,children:[\" \",uiValue]}),/*#__PURE__*/_jsx(\"span\",{className:\"aw-jswidgets-oldText\",children:oldValue})]}):/*#__PURE__*/_jsxs(LinkAwHighlightPropertyHtmlDisplayVal,{className:\"sw-widgets-propertyValueLink sw-property-val sw-aria-border\",href:data.associatedURL.url,target:data.associatedURL.target,onClick:ev=>openObjectLinkPage(ev,prop),awHighlightPropertyHtml:true,displayVal:prop.fielddata.uiValue,children:[\" \",uiValue]});}}else if(prop.typex==='CHECKBOXARRAY'){let str=prop.fielddata.displayValues.join(',');return/*#__PURE__*/_jsx(SpanAwHighlightPropertyHtmlDisplayVal,{...filteredAttrs,className:\"sw-property-val\",awHighlightPropertyHtml:true,displayVal:str,children:str});}else{if(prop.fielddata.uwAnchor&&!prop.fielddata.isArray){const commandConext={...prop.fielddata,dbValue:prop.fielddata.displayValues};return hasOldValue(prop.fielddata)?/*#__PURE__*/_jsxs(\"div\",{className:\"sw-property-valWrapper\",children:[/*#__PURE__*/_jsx(SpanAwHighlightPropertyHtmlDisplayVal,{...filteredAttrs,className:\"sw-property-val aw-jswidgets-change\",awHighlightPropertyHtml:true,displayVal:prop.fielddata.uiValue,children:prop.fielddata.uiValue}),prop.fielddata.oldValue&&/*#__PURE__*/_jsx(\"span\",{className:\"aw-jswidgets-oldText\",children:prop.fielddata.oldValue}),/*#__PURE__*/_jsx(AwCommandBar,{anchor:prop.fielddata.uwAnchor,alignment:\"HORIZONTAL\",context:commandConext})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"sw-property-valWrapper\",children:[/*#__PURE__*/_jsx(SpanAwHighlightPropertyHtmlDisplayVal,{...filteredAttrs,className:\"sw-property-val\",awHighlightPropertyHtml:true,displayVal:prop.fielddata.uiValue,children:prop.fielddata.uiValue}),/*#__PURE__*/_jsx(AwCommandBar,{anchor:prop.fielddata.uwAnchor,alignment:\"HORIZONTAL\",context:commandConext})]});}else if(prop.fielddata.isArray&&prop.fielddata.displayValsModel){return prop.fielddata.oldValues!==undefined&&prop.fielddata.oldValues?/*#__PURE__*/_jsxs(\"div\",{className:\"propertyLabelTopContainer\",children:[/*#__PURE__*/_jsx(SpanAwHighlightPropertyHtmlDisplayVal,{className:\"sw-property-val aw-jswidgets-change\",awHighlightPropertyHtml:true,displayVal:prop.fielddata.displayValsModel[prop.index]&&prop.fielddata.displayValsModel[prop.index].displayValue,children:prop.fielddata.displayValsModel[prop.index]&&prop.fielddata.displayValsModel[prop.index].displayValue}),/*#__PURE__*/_jsx(\"span\",{className:\"aw-jswidgets-oldText\",children:prop.fielddata.oldValues[prop.index]})]}):/*#__PURE__*/_jsx(SpanAwHighlightPropertyHtmlDisplayVal,{className:\"sw-property-val\",awHighlightPropertyHtml:true,displayVal:prop.fielddata.displayValsModel[prop.index]&&prop.fielddata.displayValsModel[prop.index].displayValue,children:prop.fielddata.displayValsModel[prop.index]&&prop.fielddata.displayValsModel[prop.index].displayValue});}return hasOldValue(prop.fielddata)?/*#__PURE__*/_jsxs(\"div\",{className:\"propertyLabelTopContainer\",children:[/*#__PURE__*/_jsx(SpanAwHighlightPropertyHtmlDisplayVal,{className:\"sw-property-val aw-jswidgets-change\",awHighlightPropertyHtml:true,displayVal:prop.fielddata.uiValue,children:prop.fielddata.uiValue}),prop.fielddata.oldValue&&/*#__PURE__*/_jsx(\"span\",{className:\"aw-jswidgets-oldText\",children:prop.fielddata.oldValue})]}):/*#__PURE__*/_jsx(SpanAwHighlightPropertyHtmlDisplayVal,{...filteredAttrs,className:\"sw-property-val\",awHighlightPropertyHtml:true,displayVal:prop.fielddata.uiValue,children:prop.fielddata.uiValue});}};","map":null,"metadata":{},"sourceType":"module"}