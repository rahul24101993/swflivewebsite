{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rahukl57\\\\Desktop\\\\SWF\\\\CreatingOwnComponentUsingJsx\\\\node_modules\\\\@swf\\\\core\\\\src\\\\components\\\\src\\\\js\\\\AwLinkPopupMenuService.js\";\nimport AwList from 'viewmodel/AwListViewModel';\nimport AwLinkPopupMenuItem from 'viewmodel/AwLinkPopupMenuItemViewModel';\nimport eventBus from 'js/eventBus';\nimport _ from 'lodash';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getDisplayText = displayProperty => item => {\n  let result = item.propDisplayValue || item.staticDisplayValue; // case object has props\n\n  if (item.props) {\n    let displayStr;\n\n    if (displayProperty) {\n      displayStr = _.get(item, displayProperty);\n    } else {\n      displayStr = _.get(item.props, 'object_string');\n    }\n\n    result = displayStr.uiValue;\n  }\n\n  return result;\n};\n\nexport const awLinkPopupMenuRenderFunction = props => {\n  const {\n    viewModel,\n    ctxMin,\n    actions,\n    i18n,\n    fields,\n    grids,\n    formProp,\n    messages,\n    ...prop\n  } = props;\n  const {\n    linkProp,\n    dataProvider,\n    options,\n    linkPopup,\n    propKey,\n    displayProperty,\n    updateCallback\n  } = prop;\n  const text = getDisplayText(displayProperty); // 1, set selection value back to awlink\n  // 2, close popup\n\n  const selectionHandler = vmo => {\n    // if selected a different item, then set selection value back to awlink\n    const displayValue = vmo && text(vmo);\n\n    if (displayValue && displayValue !== linkProp.fielddata[propKey]) {\n      // we don't need to cache title, it should always came from prop\n      // update link display value\n      // updateCallback( displayValue );\n      // update linkProp\n      // take care legacy\n      const lovEntry = {\n        propInternalValue: vmo.propInternalValue || vmo.staticInternalValue,\n        propDisplayValue: displayValue\n      };\n      linkProp.setLovVal({\n        lovEntry,\n        dataProvider\n      }, '').then(linkProp.setLovVal({\n        lovEntry,\n        dataProvider\n      }, 'validate'));\n    } // why event? remove this in future\n    // - dataProvider already have <dpName>.selectionChangeEvent\n    // aw require a propertyName in their conditions\n\n\n    let propertyName = linkProp.name && linkProp.name.split('.').pop();\n    let property = {\n      propertyName,\n      ...vmo,\n      dbValue: { ...vmo\n      }\n    };\n\n    if (displayProperty) {\n      const updatedprop = _.get(vmo, displayProperty);\n\n      property = {\n        propertyName,\n        ...updatedprop,\n        dbValue: { ...vmo\n        }\n      };\n    }\n\n    var eventData = {\n      property,\n      // previousSelect: $scope.previousSelect,\n      propScope: vmo\n    };\n    eventBus.publish('awlinkPopup.selected', eventData);\n    linkPopup.hide();\n  }; // ng-afx - link menu specific selection checker\n  // dp use uid as selection checker\n\n\n  const selectionCheck = vmo => {\n    return text(vmo) === linkProp.fielddata[propKey];\n  };\n\n  const listOptions = {\n    selectionHandler,\n    selectionCheck\n  };\n  const itemOptions = options;\n  return /*#__PURE__*/_jsxDEV(AwList, {\n    dataprovider: dataProvider,\n    listOptions: listOptions,\n    itemOptions: itemOptions,\n    children: /*#__PURE__*/_jsxDEV(AwLinkPopupMenuItem, {\n      text: text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n};","map":{"version":3,"sources":["C:/Users/rahukl57/Desktop/SWF/CreatingOwnComponentUsingJsx/node_modules/@swf/core/src/components/src/js/AwLinkPopupMenuService.js"],"names":["getDisplayText","displayProperty","item","result","displayStr","_","awLinkPopupMenuRenderFunction","props","prop","updateCallback","text","selectionHandler","vmo","displayValue","linkProp","lovEntry","propInternalValue","propDisplayValue","dataProvider","propertyName","property","dbValue","updatedprop","eventData","propScope","eventBus","linkPopup","selectionCheck","listOptions","itemOptions"],"mappings":"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","sourcesContent":["import AwList from 'viewmodel/AwListViewModel';\nimport AwLinkPopupMenuItem from 'viewmodel/AwLinkPopupMenuItemViewModel';\nimport eventBus from 'js/eventBus';\nimport _ from 'lodash';\n\nconst getDisplayText = displayProperty => item => {\n    let result = item.propDisplayValue || item.staticDisplayValue;\n\n    // case object has props\n    if( item.props ) {\n        let displayStr;\n        if( displayProperty ) {\n            displayStr = _.get( item, displayProperty );\n        } else {\n            displayStr = _.get( item.props, 'object_string' );\n        }\n        result = displayStr.uiValue;\n    }\n\n    return result;\n};\n\nexport const awLinkPopupMenuRenderFunction = ( props ) => {\n    const {\n        viewModel,\n        ctxMin,\n        actions,\n        i18n,\n        fields,\n        grids,\n        formProp,\n        messages,\n        ...prop\n    } = props;\n\n    const {\n        linkProp,\n        dataProvider,\n        options,\n        linkPopup,\n        propKey,\n        displayProperty,\n        updateCallback\n    } = prop;\n\n    const text = getDisplayText( displayProperty );\n\n    // 1, set selection value back to awlink\n    // 2, close popup\n    const selectionHandler = ( vmo ) => {\n        // if selected a different item, then set selection value back to awlink\n        const displayValue = vmo && text( vmo );\n        if( displayValue && displayValue !== linkProp.fielddata[ propKey ] ) {\n            // we don't need to cache title, it should always came from prop\n            // update link display value\n            // updateCallback( displayValue );\n\n            // update linkProp\n            // take care legacy\n            const lovEntry = {\n                propInternalValue: vmo.propInternalValue || vmo.staticInternalValue,\n                propDisplayValue: displayValue\n            };\n            linkProp.setLovVal( { lovEntry, dataProvider }, '' )\n                .then( linkProp.setLovVal( { lovEntry, dataProvider }, 'validate' ) );\n        }\n\n        // why event? remove this in future\n        // - dataProvider already have <dpName>.selectionChangeEvent\n\n        // aw require a propertyName in their conditions\n        let propertyName = linkProp.name && linkProp.name.split( '.' ).pop();\n\n        let property = { propertyName, ...vmo, dbValue: { ...vmo } };\n        if( displayProperty ) {\n            const updatedprop = _.get( vmo, displayProperty );\n            property = { propertyName, ...updatedprop, dbValue: { ...vmo } };\n        }\n        var eventData = {\n            property,\n            // previousSelect: $scope.previousSelect,\n            propScope: vmo\n        };\n        eventBus.publish( 'awlinkPopup.selected', eventData );\n\n        linkPopup.hide();\n    };\n\n    // ng-afx - link menu specific selection checker\n    // dp use uid as selection checker\n    const selectionCheck = ( vmo ) => {\n        return text( vmo ) === linkProp.fielddata[ propKey ];\n    };\n\n    const listOptions = { selectionHandler, selectionCheck };\n    const itemOptions = options;\n    return (\n        <AwList dataprovider={dataProvider}\n            listOptions={listOptions}\n            itemOptions={itemOptions} >\n            <AwLinkPopupMenuItem text={text}/>\n        </AwList>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}