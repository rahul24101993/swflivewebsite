{"ast":null,"code":"// Copyright (c) 2022 Siemens\n/**\n * Defines Service which provides access to the SubLocationService from native code\n *\n * @module js/postLoginPipeline.service\n */import _ from'lodash';import localStrg from'js/localStorage';var exports={};/**\n * get the Post Login Stages from server\n *\n * @return all the Post Login Stages\n */export let getPostLoginStages=function(){var postLoginStages=[];var postLoginStagesString=localStrg.get('postLoginStagesKey');if(postLoginStagesString&&postLoginStagesString.length>0){postLoginStages=JSON.parse(postLoginStagesString);}return postLoginStages;};/**\n *\n * Reset Post Login Stages while signing in\n *\n */export let resetPostLoginStages=function(){var postLoginStagesString=localStrg.get('postLoginStagesKey');if(postLoginStagesString&&postLoginStagesString.length>0){localStrg.removeItem('postLoginStagesKey');}};/**\n * sorts the post login stages\n *\n * @param {list} get the list of step Definition from each contribution\n *\n * @return sorted pipeline steps\n */export let sortPostLoginPipeline=function(contributors){var postLoginStages=exports.getPostLoginStages();var pipeLineStepsUnsorted=[];_.forEach(contributors,function(contrib){var step=contrib.getPipelineStepDefinition();for(var stageIndex=0;stageIndex<postLoginStages.length;stageIndex++){if(step.name===postLoginStages[stageIndex].name){step.priority=stageIndex;step.status=postLoginStages[stageIndex].status;pipeLineStepsUnsorted.push(step);break;}}});var pipeLineSteps=[];if(pipeLineStepsUnsorted.length>0){pipeLineSteps=_.sortBy(pipeLineStepsUnsorted,function(step){return step.priority;});}return pipeLineSteps;};/**\n * Check for Post Login Authenticated Stages\n *\n * @return {Object} with a boolean flag if all post login stages are authenticated\n */export let checkPostLoginAuthenticatedStages=function(){var allStagesAuthenticated=true;var postLoginStageString=localStrg.get('postLoginStagesKey');if(postLoginStageString&&postLoginStageString.length>0){var postLoginStages=JSON.parse(postLoginStageString);for(var stageIndex=0;stageIndex<postLoginStages.length;stageIndex++){if(!postLoginStages[stageIndex].status){allStagesAuthenticated=false;break;}}}return allStagesAuthenticated;};exports={getPostLoginStages,resetPostLoginStages,sortPostLoginPipeline,checkPostLoginAuthenticatedStages};export default exports;","map":null,"metadata":{},"sourceType":"module"}