// Copyright (c) 2022 Siemens

const { parseQuery } = require( 'loader-utils' );
const { Stopwatch } = require( './perfUtils' );

/**
 * main function of decl loader
 * @param {string} source input file content
 */
module.exports = function loader( source ) {
    const stopwatch = new Stopwatch( 'configImportLoader' );
    const output = `
    export default ${JSON.stringify( parseQuery( this.resourceQuery ) )};
        `.trim();
    stopwatch.end();
    return output;
};
