// Copyright (c) 2021 Siemens
import { convertToHtml } from 'js/reactHelper';
import awIconService from 'js/awIconService';
import { includeImage } from 'js/moduleLoader';
import { getImageAliasFromId } from 'js/imageRegistry';
export const AwIconRenderFunction = ( props ) => {
    let svg = null;
    let iconName = null;
    const { iconId } = props;

    // add icon-id for consistency
    const propFinal = { iconid: iconId, className: 'aw-icon', 'icon-id': iconId };
    let imgAlias = getImageAliasFromId( `cmd${iconId}` );
    if( props.cmdIcon && imgAlias ) {
        return <span {...propFinal}>{includeImage( imgAlias, true )}</span>;
    }

    if( props.iconId ) {
        iconName = props.iconId.replace( /.*[\\/]([^\\/]*).svg$/, '$1' ).replace( /[0-9]*$/, '' );
    }
    imgAlias = iconName && getImageAliasFromId( iconName );
    if( imgAlias ) {
        return <span {...propFinal}>{includeImage( imgAlias, true )}</span>;
    }
    svg = awIconService.getIconDef( iconName );
    //AwPropertyImage already has this implementation
    //We will be deprecating AwPropertyImage and use AwIcon instead
    if( svg ) {
        return <span {...propFinal}>{convertToHtml( svg )}</span>;
    }
};
