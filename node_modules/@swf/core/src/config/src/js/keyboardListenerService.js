// Copyright (c) 2020 Siemens

/**
 * @module js/keyboardListenerService
 */
/**
 * Initialize the mouse/keyboard state infomation on appCtxService
 * This function should be called after app initialize
 */
const addKeyBoardListner = () => {
    // Let the document know when the keyboard is being used
    document.body.addEventListener( 'keydown', function( ev ) {
        // only activate keyboard mode for tab or arrows
        if ( [ 'ArrowUp', 'ArrowRight', 'ArrowDown', 'ArrowLeft', 'Tab' ].indexOf( ev.code ) >= 0 ) {
            document.body.classList.add( 'keyboard' );

            // On Keyboard operate, start first with element having focus startpoint
            // TOOD: Not used in BA yet - remove later if not used after WCAG work in 2207
            let focusStartEle = document.querySelector( '.aw-focus-startpoint' );
            if ( focusStartEle !== null ) {
                focusStartEle.focus();
                focusStartEle.classList.remove( 'aw-focus-startpoint' );
            }
        }
    }, true );

    // disable focus styling when mouse is clicked
    document.body.addEventListener( 'mousedown', function() {
        document.body.classList.remove( 'keyboard' );
        let focusStartEle = document.querySelector( '.aw-focus-startpoint' );
        if( focusStartEle !== null ) {
            focusStartEle.classList.remove( 'aw-focus-startpoint' );
        }
    }, true );
};

addKeyBoardListner();
