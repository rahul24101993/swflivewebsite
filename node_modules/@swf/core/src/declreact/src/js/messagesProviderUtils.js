// Copyright (c) 2021 Siemens

/**
 * @module js/messagesProviderUtils
 */
import messagingService from 'js/messagingService';


export const useMessages = ( viewModel, fields ) => {
    let messages = {};
    const msgsList = viewModel._internal && viewModel._internal.messages;
    const { actions } = viewModel;
    for( const msg in msgsList ) {
        const msgDef = messagingService.generateMessage( viewModel, msgsList, msg, null );
        if( msgDef.messageDefn && msgDef.messageDefn.messageTextLinks ) {
            const textLinks = msgDef.messageDefn.messageTextLinks;
            for( const textLinkDef of textLinks ) {
                textLinkDef.prop = fields[ textLinkDef.prop.substring( 5 ) ];
                textLinkDef.action = actions[ textLinkDef.action ];
            }
        }
        messages[ msg ] = msgDef;
    }
    return messages;
};

export default {
    useMessages
};
