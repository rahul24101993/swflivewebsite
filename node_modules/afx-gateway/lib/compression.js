const trace = require( 'debug' )( 'expressServer:compression' );

/**
 * @param {Object} app - express application
 * @param {Object} logger - logger
 * @param { Object } options - options
 */
module.exports = function( app, logger, {
    level = 6,
    memLevel = 8
} ) {
    trace( 'level', level );
    trace( 'memLevel', memLevel );

    // https://www.npmjs.com/package/compression
    // https://github.com/expressjs/compression
    const compression = require( 'compression' );
    app.use( compression( {
        level: level,
        memLevel: memLevel
    } ) );
    logger.debug( '+ compression enabled' );
};
