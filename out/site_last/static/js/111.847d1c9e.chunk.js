(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[111],{2856:function(e,t,i){"use strict";i.r(t);var a=i(5),r=i(0),l=(i(10),i(4)),n=(i(8),i(3),i(3063));l.a.instance;Object(r.h)("js/AwSearchBreadcrumbChipsService",(()=>Promise.resolve().then(i.bind(null,3063)))),Object(r.h)("js/AwSearchBreadcrumbChipsUtils",(()=>Promise.resolve().then(i.bind(null,3064))));const s=Object(a.a)({schemaVersion:"1.0.0",imports:[],actions:{render:{method:"AwSearchBreadcrumbChipsRenderFunction",deps:"js/AwSearchBreadcrumbChipsService",options:{elementRefList:["chiplist"]}},chipOverflowPopup:{actionType:"popup",options:{placement:"bottom-start",toggleMode:!0,whenParentScrolls:"close",clickOutsideToClose:!0,anchor:"closePopupAnchor",resizeToClose:!0}},buildSearchChips:{actionType:"JSFunction",method:"buildSearchChips",inputData:{searchObject:"{{props.searchObject}}",existingBreadcrumbChips:"{{data.breadcrumbChips}}"},outputData:{breadcrumbChips:""},deps:"js/AwSearchBreadcrumbChipsUtils"},calculateOverflow:{actionType:"JSFunction",method:"calculateOverflow",inputData:{elementRefList:"{{parameters.elementRefList}}",totalVisibleArea:"{{data.visibleChipArea}}",totalVisibleHeight:"{{data.visibleHeightChipArea}}",breadcrumbChips:"{{data.breadcrumbChips}}",currentOverflowChips:"{{data.overflowConfig.overflownChips}}",displayBreadcrumbChips:"{{data.displayBreadcrumbChips}}",inHeader:"{{data.inHeader}}",searchFilterCategoryExpandMore:"{{i18n.searchFilterCategoryExpandMore}}",visibleChipAreaMaintained:!0},outputData:{displayBreadcrumbChips:"displayChips","overflowConfig.overflownChips":"overflownChips",displayOverflowButton:"displayOverflowButton",visibleChipArea:"totalVisibleArea",visibleHeightChipArea:"totalVisibleHeight"},deps:"js/AwSearchBreadcrumbChipsUtils"},attachResizeObserver:{actionType:"JSFunction",method:"attachResizeObserver",inputData:{data:"{{data}}",elementRefList:"{{parameters.elementRefList}}"},deps:"js/AwSearchBreadcrumbChipsService"},removeFilterAction:{actionType:"JSFunction",method:"removeSelectedChip",inputData:{searchObject:"{{props.searchObject}}",chipToRemove:"{{parameters.chip}}",data:"{{data}}"},outputData:{displayBreadcrumbChips:"displayChips","overflowConfig.overflownChips":"overflownChips"},deps:"js/AwSearchBreadcrumbChipsUtils"},clearAllAction:{actionType:"JSFunction",method:"clearAll",inputData:{searchObject:"{{props.searchObject}}"},deps:"js/AwSearchBreadcrumbChipsUtils"},onMount:{actionType:"JSFunction",method:"checkSearchLocation",inputData:{searchObject:"{{props.searchObject}}"},outputData:{inHeader:""},deps:"js/AwSearchBreadcrumbChipsUtils"},resizeOverflowCalculation:{actionType:"batchJob",steps:[{action:"buildSearchChips"},{action:"calculateOverflow"}]},onMountActions:{actionType:"batchJob",steps:[{action:"onMount"},{action:"attachResizeObserver"}]},onUnMount:{actionType:"JSFunction",method:"onUnMount",inputData:{elementRefList:"{{parameters.elementRefList}}"},deps:"js/AwSearchBreadcrumbChipsService"}},data:{breadcrumbChips:[],displayBreadcrumbChips:[],chipsModel:[],inHeader:"",displayOverflowButton:"",clearAllDisplayName:"",visibleHeightChipArea:"",visibleChipArea:"",searchFilterCategoryExpandMore:"{{i18n.searchFilterCategoryExpandMore}}",overflowConfig:{overflownChips:[],hideMore:!0},clearAll:{displayName:"{{i18n.clear}}",type:"STRING",uiValue:"{{i18n.clear}}",isRequired:"false"}},conditions:{shouldShowFilterChips:{expression:"data.breadcrumbChips && data.breadcrumbChips.length > 0"}},onEvent:[],lifecycleHooks:{render:"render",onMount:"onMountActions",onUpdate:[{action:"resizeOverflowCalculation",observers:["props.searchObject.activeFilters","props.searchObject.activeFilterString","props.searchObject.categories"]}]},props:{"search-object":{type:"object"}},i18n:{clear:["SearchMessages"],searchFilterCategoryExpandMore:["SearchMessages"]},_viewModelId:"AwSearchBreadcrumbChips",_uniqueViewModelId:"AwSearchBreadcrumbChips",ctx:{}},n.AwSearchBreadcrumbChipsRenderFunction,{elementRefList:["chiplist"]},{});t.default=s},3063:function(e,t,i){"use strict";i.r(t),i.d(t,"doNothing",(function(){return p})),i.d(t,"attachResizeObserver",(function(){return d})),i.d(t,"onUnMount",(function(){return u})),i.d(t,"AwSearchBreadcrumbChipsRenderFunction",(function(){return f}));var a=i(310),r=i(52),l=i(42),n=i(128),s=i(3064),c=i(1),o=i.n(c),h=i(2);let p=()=>{};const d=(e,t)=>{const i=t.get("chiplist"),{dispatch:a}=e;(()=>{if(n.a.supportsResizeObserver()){const r=o.a.debounce((()=>{if(i&&i.current&&i.current.parentElement&&i.current.parentElement.parentElement){const i=e.getData();var r=s.default.calculateOverflow(t,i.visibleChipArea,i.visibleHeightChipArea,i.breadcrumbChips,i.overflowConfig.overflownChips,i.displayBreadcrumbChips,i.inHeader,i.searchFilterCategoryExpandMore,!1),l={overflownChips:r.overflownChips,hideMore:!0};a&&a({path:"data",value:{displayBreadcrumbChips:r.displayChips,displayOverflowButton:r.displayOverflowButton,overflowConfig:l}})}}),5,{maxWait:50,trailing:!0,leading:!1});i.current.resizeObserver=n.a.observe(i.current.parentElement.parentElement,r)}})()},u=e=>{if(e){const t=e.get("chiplist");t.current&&t.current.resizeObserver&&t.current.resizeObserver()}},f=e=>{const{viewModel:t,actions:i,elementRefList:n}=e,{data:s,i18n:c}=t;let{chipOverflowPopup:o}=i;n.get("chiplist").current;const d={conditions:{}};let u=s.displayBreadcrumbChips;return Object(h.jsx)("div",{className:s.inHeader?"aw-search-breadcrumb-chips":"aw-search-breadcrumb-chipsPanel",children:Object(h.jsxs)("div",{className:"aw-layout-flexbox "+(s.inHeader?"aw-widgets-chipList":"aw-widgets-chipListPanel"),ref:n.get("chiplist"),children:[s.displayBreadcrumbChips&&s.displayBreadcrumbChips.length>0&&u.map(((e,t)=>Object(h.jsx)(a.default,{chip:e,action:p(),uiIconAction:i.removeFilterAction,chipCondition:d,children:e.children&&e.children.map(((e,t)=>Object(h.jsx)(a.default,{chip:e,action:p(),uiIconAction:i.removeFilterAction,chipCondition:d},t)))},t))),s.overflowConfig.overflownChips&&s.overflowConfig.overflownChips.length>0&&Object(h.jsxs)("div",{className:s.inHeader?"sw-chip-overflowContainer":"sw-chip-overflowContainerPanel",ref:o.reference,children:[Object(h.jsx)(r.default,{className:s.inHeader?"sw-chip-overflowButton":"sw-chip-overflowButtonPanel",action:()=>{o.open||o.show({width:"auto",height:"auto"})},closeAction:()=>{o.hide()},buttonType:"chromeless",label:s.displayOverflowButton,children:s.displayOverflowButton}),Object(h.jsx)(l.default,{...o.options,children:Object(h.jsx)("div",{className:"aw-layout-flexbox sw-column aw-search-overflow "+(s.inHeader?"aw-widgets-overflow-chipList":"aw-widgets-overflow-chipListPanel"),children:s.overflowConfig.overflownChips.map(((e,t)=>Object(h.jsx)(a.default,{chip:e,action:p(),uiIconAction:i.removeFilterAction,chipCondition:d,children:e.children&&e.children.map(((e,t)=>Object(h.jsx)(a.default,{chip:e,action:p(),uiIconAction:i.removeFilterAction,chipCondition:d},t)))},t)))})})]}),s.breadcrumbChips&&s.breadcrumbChips.length>0&&Object(h.jsx)(r.default,{className:"aw-search-clearAll",buttonType:"chromeless",action:i.clearAllAction,label:c.clear,children:c.clear})]})})}},3064:function(e,t,i){"use strict";i.r(t),i.d(t,"buildSearchChips",(function(){return s})),i.d(t,"removeSelectedChip",(function(){return c})),i.d(t,"checkSearchLocation",(function(){return v})),i.d(t,"clearAll",(function(){return F})),i.d(t,"calculateOverflow",(function(){return C}));var a=i(2996),r=i(2968),l=i(1),n=i.n(l);let s=(e,t)=>{let i=[];var a,r=[];let l=e&&e.appliedFilters&&e.appliedFilters.length>0,n=e.categories&&e.categories.length>0,s=e.categoriesForRangeSearches&&e.categoriesForRangeSearches.length>0,c=e.isFacetSearch;if(l&&n&&!c){r=h(e.appliedFilters);for(var o=0;o<r.length;o++)for(var u=0;u<e.categories.length;u++){switch(e.categories[u].type){case"StringFilter":a=p(e.categories[u],r[o],"StringFilter");break;case"NumericFilter":a=p(e.categories[u],r[o],"NumericFilter");break;case"DateFilter":a=d(e.categories[u],r[o],e.appliedFilters);break;case"RadioFilter":a=p(e.categories[u],r[o],"RadioFilter");break;case"ObjectFilter":a=p(e.categories[u],r[o],"ObjectFilter")}a&&(i.push(a),a=void 0)}}else if(l&&s&&!c){r=h(e.appliedFilters);for(o=0;o<r.length;o++)for(u=0;u<e.categoriesForRangeSearches.length;u++){switch(e.categoriesForRangeSearches[u].type){case"StringFilter":a=p(e.categoriesForRangeSearches[u],r[o],"StringFilter");break;case"NumericFilter":a=p(e.categoriesForRangeSearches[u],r[o],"NumericFilter");break;case"DateFilter":a=d(e.categoriesForRangeSearches[u],r[o],e.appliedFilters);break;case"RadioFilter":a=p(e.categoriesForRangeSearches[u],r[o],"RadioFilter");break;case"ObjectFilter":a=p(e.categoriesForRangeSearches[u],r[o],"ObjectFilter")}a&&(i.push(a),a=void 0)}}else if(c)return t;return i},c=function(e,t,i,a){let l=n.a.cloneDeep(i.displayBreadcrumbChips);switch(t.chipFilterType){case"StringFilter":case"NumericFilter":!function(e,t){const i={...e.value};t&&t.children&&0===t.children.length||t&&!t.children?g(i,t):b(i,t);i.bulkFiltersApplied=!0,e.update(i)}(e,t);break;case"DateFilter":!function(e,t){const i={...e.value};t&&t.children&&0===t.children.length||t&&!t.children?g(i,t):b(i,t);i.activeFilters=r.a.removeDependentDateFilters(i.activeFilters),i.bulkFiltersApplied=!0,e.update(i)}(e,t);break;case"RadioFilter":!function(e,t){const i={...e.value};for(var a=0;a<i.categories.length;a++)t.labelInternalCategoryName===i.categories[a].internalName&&(t.labelInternalFilterName===i.categories[a].filterValues[0].internalName?i.activeFilters[t.labelInternalCategoryName]=[i.categories[a].filterValues[1].internalName]:i.activeFilters[t.labelInternalCategoryName]=[i.categories[a].filterValues[0].internalName]);i.bulkFiltersApplied=!0,e.update(i)}(e,t);break;case"ObjectFilter":!function(e,t){const i={...e.value};let a=r.a.removeDependentClassificationFilters({internalName:t.labelInternalFilterName});a.length>0?i.activeFilters[t.labelInternalCategoryName]=a:delete i.activeFilters[t.labelInternalCategoryName];i.bulkFiltersApplied=!0,e.update(i)}(e,t)}for(let r=0;l.length>r;r++)l[r].labelDisplayName===t.labelDisplayName&&l.splice(r,1);return{displayChips:l,overflownChips:[]}};function o(e,t,i,a,r,l,n,s,c){let o;t>1&&e?(o=i+": "+t+" Selected",l="parentChip"):o=i+": "+a;let h={uiIconId:"miscRemoveBreadcrumb",chipType:"BUTTON",selected:!1,labelDisplayName:o,labelInternalCategoryName:r,labelInternalFilterName:l,chipFilterType:n,className:"aw-search-breadcrumb-chip"};return"RadioFilter"===n&&c&&(h.uiIconId=""),s&&s.length>1&&(h.children=s),h}function h(e){var t=[],i=!1;for(let a=0;a<e.length;a++)if(e[a].name.includes("_0Z0_"))e[a].name.includes("_month")||e[a].name.includes("_week")?e.slice(a,1):t.push(e[a]);else if("DateFilter"===e[a].type){for(let t=0;t<e.length;t++)e[a].name===e[t].name.substr(0,e[t].name.indexOf("_0Z0"))&&(i=!0);i?(e.slice(a,1),i=!1):(t.push(e[a]),i=!1)}else t.push(e[a]);return t}function p(e,t,i){var a,r=[],l=!1;if(e.internalName===t.name){for(var n=0;n<t.values.length;n++){var s=e.displayName,c=t.values.length,h=t.name,p=t.values[n],d=e.filterValues&&e.filterValues.length>0?e.filterValues[0].name:void 0;if(t.values[n].includes("_NumericRange_")&&(a=!1,d=m(t.values[n])),"RadioFilter"===e.type&&t.values[0]===e.filterValues[0].internalName&&(l=!0),c>1)if("StringFilter"===e.type||"ObjectFilter"===e.type){for(var u=0;u<e.filterValues.length;u++)if(e.filterValues[u].internalName===p){let t=o(a=!1,c,s,d=e.filterValues[u].name,h,p,i,null,!1);r.push(t)}}else if("NumericFilter"===e.type){a=!1,d=t.values[n].replace("_NumericFilter_",""),t.values[n].includes("_NumericRange_")&&(a=!1,d=m(t.values[n]));let e=o(a,c,s,d,h,p,i,null,!1);r.push(e)}}return o(a=!0,c,s,d,h,p,i,r,l)}}function d(e,t,i){var a,r,l=[];if(e.filterValues.length>0){for(var n=0;n<e.filterValues.length;n++)if(e.filterValues[n].categoryName===t.name||e.internalName===t.name){var s=e.displayName,c=f(i,e);let t=c.length;var h=c[0].values[0],p=c[0].name;if(r='"$NONE"'===c[0].values[0]?c[0].values[0]:e.filterValues[0].name,c[0].values[0].length>13&&"_DateFilter_"===c[0].values[0].substr(0,12)){r=u(c[0].values[0]).displayName}if(t>1)for(var d=0;d<c.length;d++){if(a=!1,p=c[d].name,h=c[d].values[0],c[d].values[0].length>13&&"_DateFilter_"===c[d].values[0].substr(0,12)){r=u(c[d].values[0]).displayName}else for(var m=0;m<e.filterValues.length;m++)e.filterValues[m].internalName===c[d].values[0]&&(r=e.filterValues[m].name);let i=o(a,t,s,r,p,h,"DateFilter",null,!1);l.push(i)}var g=o(a=!0,t,s,r,p,h,"DateFilter",l,!1);break}}else e.filterValues&&0===e.filterValues.length&&e.internalName===t.name&&e.dateRangeString&&e.dateRangeString.length>0&&(r=u(e.dateRangeString).displayName,g=o(a,1,e.displayName,r,e.internalName,e.dateRangeString,"DateFilter",[],!1));return g}function u(e){if(e.length>19){var t=e.substring(12);if(t.length>4)var i=t.substr(0,t.indexOf("_TO_")),l=t.substr(t.indexOf("_TO_")+4,t.length);"*"===i&&(i="0001-01-01T00:00:00+00:00"),i=a.a.getDate(r.a.processDateStringOffset(i)),l=a.a.getDate(r.a.processDateStringOffset(l));var n=a.a.getDateRangeDisplayString(i,l)}return n}function f(e,t){for(var i=[],a=0;a<e.length;a++)if(e[a].name===t.internalName)i.push(e[a]);else{e[a].name.substr(0,e[a].name.indexOf("_0Z0"))===t.internalName&&i.push(e[a])}return i}function m(e){if(e.length>4){let i=e.replace("_NumericRange_",""),a=i.substr(0,i.indexOf("_TO_")),r=i.substr(i.indexOf("_TO_")+4,i.length);if(a)if(r)t=a+" - "+r;else var t="From "+a;else var t="To "+r}return t}function g(e,t){let i=e.activeFilters&&e.activeFilters[t.labelInternalCategoryName]?e.activeFilters[t.labelInternalCategoryName]:[],a=[];for(let r=0;r<i.length;r++)i[r]!==t.labelInternalFilterName&&a.push(i[r]);a.length>0?e.activeFilters[t.labelInternalCategoryName]=a:delete e.activeFilters[t.labelInternalCategoryName],e.activeFilters&&Object.keys(e.activeFilters).length>0?e.activeFilterString=r.a.buildFilterString(e.activeFilters):e.activeFilterString=""}function b(e,t){let i=t.children;for(let a=0;a<i.length;a++)g(e,i[a])}let v=e=>{if(e&&e.criteria&&e.criteria.searchFromLocation){return"global"===n.a.cloneDeep(e.criteria.searchFromLocation)}return!0},F=e=>{const t={...e.value},i=r.a.clearAllSelectedFiltersAndRanges(t.categories,t.activeFilters,t.positivePendingFilters);if(t.categories=i,t.skipFiltersForClearAll&&t.activeFilters&&t.activeFilterMap&&Object.keys(t.activeFilters).length>0)for(const[a,r]of Object.entries(t.activeFilters))t.skipFiltersForClearAll.includes(a)||(delete t.activeFilters[a],delete t.activeFilterMap[a]);else t.activeFilterMap={},t.activeFilters={};delete t.positivePendingFilters,delete t.negativePendingFilters,delete t.allCategoriesVisible,t.bulkFiltersApplied=!0,e.update(t)},C=(e,t,i,a,r,l,n,s,c)=>{var o,h=[],p=[],d=null,u=!0;if(e){let l=e.get("chiplist").current;if(!l)return d;o||(o=l.querySelectorAll(".aw-widgets-chip"));let s=[...o];var f=16;let b=0;l.parentNode.parentElement&&l.parentNode.parentElement.firstChild&&l.parentNode.parentElement.firstChild.childNodes&&l.parentNode.parentElement.firstChild.childNodes.length>0&&l.parentNode.parentElement.firstChild.childNodes[0].clientWidth&&(b=l.parentNode.parentElement.firstChild.childNodes[0].clientWidth);let v=80,F=l.lastChild?l.lastChild.clientWidth+24:24;t&&c||(t=l.parentElement.parentElement?l.parentElement.parentElement.clientWidth:0);for(var m=f+b+v+F,g=0;g<s.length;g++)if((m=s[g].clientWidth+m)>t){d=g;break}if(!n){i&&c||(i=l.parentElement.parentElement.clientHeight/2);let e=l.parentElement.clientHeight,t=l.lastChild?l.lastChild.clientHeight:0;if(v=32,(m=(f=32)+t+v+e)>i)for(g=0;g<s.length;g++)if((m-=26)<i){d=s.length-g;break}}let C=t-m-200;m<t-200&&C>f&&(u=!1),0===d&&n?(h=[],p=a):d>0?(p=a.slice(d),h=a.slice(0,d)):a.length>=7?(p=a.slice(1),h=a.slice(0,1)):r.length>0&&s.length<a.length&&u?(p=a.slice(s.length),h=a.slice(0,s.length)):(h=a,p=[])}else 0!==r.length&&0!==l.length?(p=r,h=l):(p=[],h=a);return{displayChips:h,overflownChips:p,displayOverflowButton:p.length+" "+s,totalVisibleArea:t,totalVisibleHeight:i}};t.default={buildSearchChips:s,removeSelectedChip:c,checkSearchLocation:v,clearAll:F,calculateOverflow:C}}}]);