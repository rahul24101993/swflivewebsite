(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[38],{2967:function(t,e,a){"use strict";a.r(e),a.d(e,"initialize",(function(){return h})),a.d(e,"syncSublocationState",(function(){return P})),a.d(e,"clearSublocationState",(function(){return w})),a.d(e,"getTabToActivateAndVisibleTabs",(function(){return K})),a.d(e,"updateSelection",(function(){return V})),a.d(e,"getContext",(function(){return O})),a.d(e,"getVisibleTabs",(function(){return W}));var n=a(1),i=a.n(n),s=a(0),o=a(19),r=a(15),c=a(65),d=a(12),l=a(25),b=a(11),u=a(32),m=a(39),p=a.n(m),v=a(80),x=a(165);new p.a("selection");const y=t=>{"string"!==typeof t.name&&r.default.getLocalizedText(t.name.source,t.name.key).then((function(e){t.name=e}))},h=()=>(async()=>await o.default.getCfg("secondaryWorkareaTabs").then((t=>(t.tabs.forEach((function(t,e){t.pageId=t.pageId?t.pageId:e})),t.tabs.forEach(y),t))))().then((t=>{const{ctxParameters:e,additionalParameters:a}=H(t);return{tabsConfig:t,ctxParameters:e,additionalParameters:a}})),C=(t,e,a,n)=>{var s=t.visibleWhen;t.visibleWhen&&t.visibleWhen.condition&&(s=i.a.get(e,t.visibleWhen.condition).expression);return t.displayTab=!0,s&&(t.displayTab=l.a.evaluateCondition({ctx:d.default.ctx,selection:a,context:{...n,isXrtApplicable:n&&n.hasOwnProperty("isXrtApplicable")?n.isXrtApplicable:!i.a.isUndefined(d.default.ctx.tcSessionData)}},s)),t.displayTab},f=(t,e)=>t.filter((t=>t.tabContent?t.pageId===e.pageId&&i.a.isEqual(t.tabContent,e.tabContent):t.pageId===e.pageId)).length>0,T=(t,e)=>{let a=i.a.findIndex(t,(t=>t.pageId===e.pageId||t.name===e.name),0);return t=i.a.map(t,((t,e)=>(t.selectedTab=e===a||void 0,t)))},g=(t,e,a,n,o)=>{let r=((t,e)=>{if(e&&t&&t.length>0){let a=-1;return"object"===typeof e?a=i.a.findIndex(t,(t=>t.pageId===e.pageId||t.name===e.name),0):"string"===typeof e&&(a=i.a.findIndex(t,(t=>t.name===e||t.view===e),0)),a>-1}return!1})(n,a);a=!1===r?a:void 0;var c=b.a.instance.defer();if(t.deps){const n=n=>n[t.method](e,a,o,r);return s.b.loadDependentModule(t.deps).then(n)}return c.Promise},P=(t,e)=>{let a;a=e?{...e.value}:{},a.secondaryActiveTabId=t.tabKey?t.tabKey:t.view,e.secondaryActiveTabId!==a.secondaryActiveTabId&&e.update(a)},w=t=>{let e={...t.value};e.secondaryActiveTabId=void 0,t.update(e)},S=(t,e,a,n,s,o,r,c,d,l,b,m)=>{let p={},v=[],x=[];if(d){let e=t.getData().changedAllVisibleTabs,a=[];e?(e.map((t=>{let e={...t};e.hasChildTabs||a.push(e)})),0===a.length&&(a=r)):a=r,x=d.childTabs,i.a.forEach(x,(t=>{t.priority=l})),v=v.concat(x,a)}else v=b||r;v.sort((function(t,e){return t.priority-e.priority}));let y=c;if(c=I(v,c),!i.a.isEmpty(c)&&f(v,c))p=c,v=T(v,c);else if(i.a.isEmpty(c)){y=u.default.get("lastActiveTab");let c=I(v,y);if(!i.a.isEmpty(c)&&f(v,c)&&""!==y)return A(e,a,m,n,y,r,t,s,o,v);p=v[0],v=T(v,p)}else p=v[0],v=T(v,p);p&&(p.tabContent=d?d.activeTabContent:void 0,p.extraInfo=d?d.extraInfo:null);const h=p&&p.tabKey?p.tabKey:p?p.view:"";let C=t&&t.ctx&&t.ctx.visibleTabs?t.ctx.visibleTabs:void 0;return C&&0!==C.length||(C=t&&t.getData()&&t.getData().summaryContext&&t.getData().summaryContext.unExpandedVisibleTabs),{summaryContext:{activeTab:p,visibleTabs:v,api:(i,c,d)=>{u.default.publish("lastActiveTab",i),E(e),M(t,e,a,i,c,v,r,o,n,s,d,l)},selection:n,allVisibleTabs:b,activeTabKey:h,childTabs:x,unExpandedVisibleTabs:C}}},A=(t,e,a,n,i,s,o,r,c,d)=>g(a,n[0],i,s,r).then((l=>{const u=o.getData().summaryContext&&o.getData().summaryContext.selection?o.getData().summaryContext.selection:void 0;return!u||u&&1===u.length&&u[0].uid===n[0].uid?S(o,t,e,n,r,c,s,i,l,a.priority,d,a):u&&1===u.length?A(t,e,a,u,i,s,o,r,c):b.a.instance.resolve({summaryContext:o.getData().summaryContext})})),I=(t,e)=>{if("object"!==typeof e){let a=i.a.findIndex(t,(t=>t.pageId&&t.pageId===e||t.tabKey&&t.tabKey===e||t.name&&t.name===e||t.view&&t.view===e||t.id&&t.id===e),0);e=t[a]}return e},j=(t,e)=>!!(!t&&!e||t&&0===t.length&&e&&0===e.length)||t.length===e.length&&e.length>0&&i.a.isEqual(t[0].uid,e[0].uid),D=(t,e)=>{let a=e&&e.summaryContext&&e.summaryContext.activeTab&&e.summaryContext.activeTab.tabKey?e.summaryContext.activeTab.tabKey:e&&e.summaryContext&&e.summaryContext.activeTab&&e.summaryContext.activeTab.view?e.summaryContext.activeTab.view:"";return""!==t&&t!==a&&(a=e&&e.getData()&&e.getData().summaryContext&&e.getData().summaryContext.activeTab&&e.getData().summaryContext.activeTab.tabKey?e&&e.getData().summaryContext.activeTab.tabKey:e.getData()&&e.getData().summaryContext&&e.getData().summaryContext.activeTab&&e.getData().summaryContext.activeTab.view?e.getData().summaryContext.activeTab.view:"",""!==t&&t!==a&&(a=e&&e.summaryContext?e.summaryContext.activeTabKey:"",""!==t&&t!==a&&(a=e&&e.getData().summaryContext?e.getData().summaryContext.activeTabKey:"",""!==t&&t!==a)))},K=(t,e,a)=>{const n=()=>{let n=[],o=[];if(l){var r=[];l.tabs.map((t=>{let e={...t};C(e,l,m,d)&&r.push(e)}));for(const t of r)!0===t.hasChildTabs?n.push(t):o.push(t)}if(n.length>0&&!h)return s({path:"data.changedAllVisibleTabs",value:[]}),A(e.selectionData,e.tabsConfig,n[0],m,y,o,t,d,s,r);if(n.length>0){var c={childTabs:t.summaryContext?t.summaryContext.childTabs:[],activeTabContent:i.a.get(t,"summaryContext.activeTab.tabContent")};return c.extraInfo||(c.extraInfo=t.summaryContext&&t.summaryContext.activeTab?t.summaryContext.activeTab.extraInfo:null),c.childTabs&&0!==c.childTabs.length?b.a.instance.resolve(S(t,e.selectionData,e.tabsConfig,m,d,s,o,y,c,n[0].priority,r,n[0])):void s({path:"data.changedAllVisibleTabs",value:a})}return b.a.instance.resolve(S(t,e.selectionData,e.tabsConfig,m,d,s,o,y))};if(((t,e)=>!t||!t.selection||!e||!t.tabsConfig||!t.tabsConfig.tabs)(e,t))return;const{dispatch:s}=t,{summaryContext:o}=t.getData(),{selection:r,context:d,tabsConfig:l}=e;let m=Array.isArray(r)?r:[r],p=[];l&&l.tabs.map((t=>{let e={...t};C(e,l,m,d)&&p.push(e)}));let v=d&&d.pageContext&&d.pageContext.sublocationState&&""!==d.pageContext.sublocationState.secondaryActiveTabId?d.pageContext.sublocationState.secondaryActiveTabId:"";v||(v="");let x=o&&o.activeTabKey?o.activeTabKey:"",y=x;if(D(v,t)&&(y=v,u.default.publish("lastActiveTab",y)),o&&!D(v,t)&&j(o.selection,m)&&((t,e)=>{if(!t&&!e)return!0;if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if((t[a].tabKey?t[a].tabKey:t[a].name)!==(e[a].tabKey?e[a].tabKey:e[a].name))return!1;return!0})(o.unExpandedVisibleTabs,p))return;let h=!1;o&&(D(v,t)?y=v:j(o.selection,m)&&(h=!0,((t,e,a)=>t&&t.activeTab&&!t.activeTab.api&&e&&0===e.filter((t=>t.view===a)).length)(o,p,x)&&(h=!1))),""===y&&(y=u.default.get("lastActiveTab")?u.default.get("lastActiveTab"):y);let f={...t.summaryContext};f.selection=m,f.unExpandedVisibleTabs=p,f.activeTabKey=y,s({path:"data.summaryContext",value:f});let T=d?d.editContext:"";T&&""!==T||(T="TABLE_CONTEXT");let g=c.a.getEditHandler(T);const P=!o||void 0!==i.a.get(o,"activeTab.api")||j(o.selection,m);return!g||!g.editInProgress()&&P?c.a.leaveConfirmation().then((function(){return n()})):n()},M=(t,e,a,n,i,s,o,r,d,l,b,u)=>{const m=s.filter((function(t){return t.pageId===n||t.name===i}))[0],p=n=>{let{summaryContext:i}=S(t,e,a,d,l,r,o,m,n,u,s);r({path:"data.summaryContext",value:i})},v=()=>{if(m&&m.api){if(!m.tabContent||b){const t=m.tabKey?m.tabKey:m.view;r({path:"data.summaryContext.activeTabKey",value:t}),m.api(d[0],t,null,null,l).then((t=>{p(t)}))}}else p()};let x=l?l.editContext:"";x&&""!==x||(x="TABLE_CONTEXT");let y=c.a.getEditHandler(x);if(y&&y.editInProgress())return v();c.a.leaveConfirmation().then((function(){return v()}))},V=t=>Array.isArray(t)?t:[t],O=(t,e,a)=>[new v.a({ctxParameters:[],additionalParameters:[a.summaryContext,e.selection,e.context,e.selectionData],compute:()=>({activeTab:a.summaryContext?a.summaryContext.activeTab:void 0,selection:Array.isArray(e.selection)?e.selection:[e.selection],context:e.context,api:a.summaryContext?a.summaryContext.api:void 0,selectionData:e.selectionData})})],E=t=>{t&&t.getValue()&&t.getValue().selected&&t.getValue().selected.length>0&&t.update({selected:[],relationInfo:[]})},H=t=>t?(t.tabs||[]).reduce(((e,a)=>{let s={};a.visibleWhen&&a.visibleWhen.condition?s=i.a.get(t,a.visibleWhen.condition):s.expression=a.visibleWhen;const o=[Object(x.a)(s,["selection","context"])];return{ctxParameters:i.a.uniq(Object(n.concat)(Object(n.flatten)(o.map((t=>t.ctxParameters))),e.ctxParameters)),additionalParameters:i.a.uniq(Object(n.concat)(e.additionalParameters,Object(n.flatten)(o.map((t=>t.additionalParameters)))))}}),{ctxParameters:[],additionalParameters:[]}):{ctxParameters:[],additionalParameters:[]},W=(t,e,a)=>{let{context:n,tabsConfig:s,selection:o,additionalParameters:r,ctxParameters:c}=e,d=Array.isArray(o)?o:[o];const l={context:n,selection:o},b=r.map((t=>i.a.get(l,t)));return new v.a({ctxParameters:c,additionalParameters:b,compute:()=>{let t=[];if(s&&s.tabs.map((e=>{let a={...e};C(a,s,d,n)&&t.push(a)})),t)return t}})}},979:function(t,e,a){"use strict";a.r(e);var n=a(5),i=a(0),s=a(10),o=a(4),r=(a(8),a(3),a(273)),c=a(309),d=a(63),l=a(45),b=a(2967),u=a(2);o.a.instance;const m=Object(l.h)("div"),p=Object(l.h)(d.default),v={context:b.getContext,visibleTabs:b.getVisibleTabs};Object(i.h)("js/AwSelectionSummaryService",(()=>Promise.resolve().then(a.bind(null,2967))));const x=Object(n.a)({schemaVersion:"1.0.0",actions:{getTabToActivateAndVisibleTabs:{actionType:"JSFunctionAsync",method:"getTabToActivateAndVisibleTabs",inputData:{data:"{{data}}",props:"{{props}}",allVisibleTabs:"{{data.ctx.visibleTabs}}"},outputData:{summaryContext:"summaryContext"},deps:"js/AwSelectionSummaryService"},syncSublocationState:{actionType:"JSFunction",method:"syncSublocationState",inputData:{activeTab:"{{data.summaryContext.activeTab}}",sublocationState:"{{props.context.pageContext.sublocationState}}"},deps:"js/AwSelectionSummaryService"},clearSublocationState:{actionType:"JSFunction",method:"clearSublocationState",inputData:{sublocationState:"{{props.context.pageContext.sublocationState}}"},deps:"js/AwSelectionSummaryService"}},lifecycleHooks:{onMount:"getTabToActivateAndVisibleTabs",onUpdate:[{action:"syncSublocationState",observers:["viewModel.data.summaryContext.activeTab.tabKey","viewModel.data.summaryContext.activeTab.view"]},{action:"getTabToActivateAndVisibleTabs",observers:["viewModel.ctx.visibleTabs","props.selection.uid","props.selection[0].uid","props.selection.length","props.context.pageContext.sublocationState.secondaryActiveTabId"]}],onUnmount:"clearSublocationState"},ctx:{context:{parser:{method:"getContext",deps:"js/AwSelectionSummaryService"}},visibleTabs:{parser:{method:"getVisibleTabs",deps:"js/AwSelectionSummaryService"}}},props:{selection:{type:"object"},context:{type:"object"},"selection-data":{type:"object"},"tabs-config":{type:"object"},"ctx-parameters":{type:"object"},"additional-parameters":{type:"object"}},_viewModelId:"AwSelectionSummaryInternal",_uniqueViewModelId:"AwSelectionSummaryInternal"},(t=>{let e=t.subPanelContext,{viewModel:{data:a,dataProviders:n,dispatch:i,conditions:o,selectionModels:d,editHandlers:l,chartProviders:b,ports:v},grids:x,ctx:y,actions:h,fields:C,messages:f,i18n:T,formProp:g,viewPath:P}=t;a={...a,dataProviders:n},e&&e.fields&&(C={...C,...e.fields});return Object(u.jsxs)(m,{className:"aw-xrt-summaryXrt",existWhen:s.a.instance("data.summaryContext && data.summaryContext.activeTab && data.summaryContext.visibleTabs.length > 0")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),children:[Object(u.jsx)(m,{className:"aw-xrt-tabsContainer",existWhen:s.a.instance("(data.summaryContext && data.summaryContext.activeTab && data.summaryContext.visibleTabs) && ((data.summaryContext.activeTab.tabContent === undefined && data.summaryContext.visibleTabs.length > 1) || (data.summaryContext.activeTab.tabContent !== undefined))")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),children:Object(u.jsx)(r.default,{tabContainerModel:s.a.instance("data.summaryContext.visibleTabs")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),callback:s.a.instance("data.summaryContext.api")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),tabSetId:s.a.instance("props.context.tabSetId ? props.context.tabSetId : 'secondary'")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),children:Object.entries(s.a.instance("data.summaryContext.visibleTabs")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v})||[]).map((r=>{let[m,p]=r;return Object(u.jsx)(c.default,{tabModel:s.a.instance("tab")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v,tab:p,$index:m})},m)}))})}),Object(u.jsx)("div",{className:"aw-widgets-multiSelectContainer",children:Object(u.jsx)(p,{viewId:s.a.instance("data.summaryContext.activeTab.view")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),viewPath:s.a.instance("viewPath")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),name:s.a.instance("data.summaryContext.activeTab.view")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),subPanelContext:s.a.instance("props.ctx.context[0]")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v}),existWhen:s.a.instance("data.summaryContext && data.summaryContext.activeTab && data.summaryContext.activeTab.view")({props:t,data:a,fields:C,dataProviders:n,ctx:y,i18n:T,actions:h,subPanelContext:e,viewPath:P,conditions:o,formProp:g,dispatch:i,selectionModels:d,editHandlers:l,chartProviders:b,ports:v})})})]})}),void 0,v);e.default=x}}]);