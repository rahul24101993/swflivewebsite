(this.webpackJsonpcreatingjsxcomponent=this.webpackJsonpcreatingjsxcomponent||[]).push([[83],{962:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return l}));var a=s(7),i=s(6),n=s(12),r=s(139),o=s(43),c=s(86);const h=t=>e=>{switch(t){case"string":return Object(c.f)(e);case void 0:throw new Error("set type first using typeOf method")}};var S={instance:{type:t=>({decode:h(t)})}},p=s(15),m=s(29),_=s(1),u=s.n(_);class l extends r.a{static reset(){r.a.reset.apply(this),o.a.reset()}constructor(){super(),this._state=o.a.instance,this._stateStackNames=null,this._stateStack=null,this._popState=null,this._goBackInProgress=!1,this._xrtShowObjectState=["com_siemens_splm_clientfx_tcui_xrt_showObject","com_siemens_splm_clientfx_tcui_xrt_showMultiObject"],this._persistentStatesCount=24,this.init(),a.a.subscribe("locationChangeSuccess",(t=>{let{event:e,oldUrl:s,newUrl:n}=t;var r=this.parseUrl(n),o=this.parseUrl(s);r.params&&r.params.uid&&(o.params?(o.params.uid&&r.params.uid!==o.params.uid||r.params.uid===o.params.uid&&r.state.name!==o.state.name)&&this.routeStateChangeSuccess(r.state,r.params,o.state,o.params):this.routeStateChangeSuccess(r.state,r.params,o.state,o.params)),!0===this._goBackInProgress&&(this._goBackInProgress=!1),a.a.publish("$locationChangeSuccess",{event:e,newUrl:n,oldUrl:s}),i.a.trace("#### locationChangeSuccess changed! new: "+n+", oldUrl: "+s)})),window.addEventListener("resize",(()=>{a.a.publish("aw.windowResize")}))}init(){this._stateStack=[],this._stateStackNames=[];try{sessionStorage.getItem("STATES_ARRAY_NAMES")&&sessionStorage.getItem("STATES_ARRAY")&&(this._stateStackNames=JSON.parse(sessionStorage.getItem("STATES_ARRAY_NAMES")),this._stateStack=JSON.parse(sessionStorage.getItem("STATES_ARRAY")))}catch(t){i.a.trace("Error in location initiation",t)}}parseUrl(t){let e=S.instance;var s=t.lastIndexOf("#"),a=t.lastIndexOf("?"),i=t.substring(s+1),n={};if(a>-1){i=t.substring(s+1,a);for(var r=t.substr(a+1).split("&"),o=0;o<r.length;o++){var c=r[o].split("=");2===c.length&&(n[c[0]]=e.type("string").decode(decodeURIComponent(c[1])))}}return"/com.siemens.splm.clientfx.tcui.xrt.showObject"===i?i=this._xrtShowObjectState[0]:"/com.siemens.splm.clientfx.tcui.xrt.showMultiObject"===i?i=this._xrtShowObjectState[1]:"/"===i.charAt(0)&&(i=i.substring(1)),{state:{name:i.split("/").slice(-1)[0]},params:n,url:t}}goBack(){this._popState=this._stateStack.pop(),sessionStorage.setItem("STATES_ARRAY",JSON.stringify(this._stateStack)),this._stateStackNames.pop(),sessionStorage.setItem("STATES_ARRAY_NAMES",JSON.stringify(this._stateStackNames)),n.default.registerCtx("previousLocationDisplayName",this.getGoBackLocation()),this._popState&&this._popState.state&&(i.a.trace("&&&&& go pop state"+this._popState.state.name),this._goBackInProgress=!0,this._state.go(this._popState.state.name,this._popState.params,{inherit:!1}))}peekLastState(){if(this._stateStack&&this._stateStack.length>0)return this._stateStack[this._stateStack.length-1]}getGoBackLocation(){return this._stateStackNames&&this._stateStackNames.length>0?this._stateStackNames[this._stateStackNames.length-1]:p.default.getLoadedTextFromKey("UIMessages.noPreviousLocation")}updateCurrentDisplayName(){var t=document.title;if(this._stateStackNames&&this._stateStackNames.length>0){let e=this._stateStackNames.length;this._stateStackNames[e-1]=""!==t?t.substr(t.indexOf("-")+1):this._stateStackNames[e-1].substr(this._stateStackNames[e-1].indexOf("-")+1),sessionStorage.setItem("STATES_ARRAY",JSON.stringify(this._stateStack))}this._stateStackNames&&0===this._stateStackNames.length&&!u.a.isEmpty(t)&&(this._stateStackNames[0]=t.substr(t.indexOf("-")+1),sessionStorage.setItem("STATES_ARRAY",JSON.stringify(this._stateStack)))}ifCurrentDisplayNameToBeUpdated(t,e){(""===t.name&&"^"===t.url||t.parent&&e.parent||!e.parent&&e.name===t.name)&&this.updateCurrentDisplayName()}routeStateChangeSuccess(t,e,s,a){if(m.a.debug("routes",s.name,t.name),s&&"checkAuthentication"!==s.name){if(this._popState&&this._popState.state.name===t.name&&!0===this._goBackInProgress)return void(this._popState=null);if(!0===this._goBackInProgress&&null===this._popState)return void(this._goBackInProgress=!1);if(t&&t.parent&&s&&s.parent&&t.parent===s.parent)return;var r={state:s,params:a,displayName:u.a.isEmpty(document.title)?p.default.getLoadedTextFromKey("UIMessages.noPreviousLocation"):document.title};if(this._stateStack.length>0){var o=this.peekLastState();o.state.name!==r.state.name&&""!==r.state.name?(this._stateStack.push(r),this._stateStackNames.push(r.displayName),i.a.trace("^^^^1 pushing newState "+r.state.name)):""===r.state.name||o.params.uid===r.params.uid||r.params.uid===e.uid&&r.state.name===t.name||(this._stateStack.push(r),this._stateStackNames.push(r.displayName),i.a.trace("^^^^2 pushing newState "+r.state.name))}else r.state.abstract||(this._stateStack.push(r),this._stateStackNames.push(r.displayName),i.a.trace("^^^^3 pushing newState "+r.state.name));this._stateStack.length>this._persistentStatesCount&&(this._stateStack.shift(),this._stateStackNames.shift()),sessionStorage.setItem("STATES_ARRAY_NAMES",JSON.stringify(this._stateStackNames)),sessionStorage.setItem("STATES_ARRAY",JSON.stringify(this._stateStack)),this.ifCurrentDisplayNameToBeUpdated(s,t)}let c=document.querySelector(".aw-skip-to-main-container");null!==c&&c.focus(),n.default.registerCtx("previousLocationDisplayName",this.getGoBackLocation())}updateStateParameter(t,e){this._state.params[t]=e,this._state.go(".",this._state.params,{inherit:!0})}go(t,e,s){this._state.go(t,e,s)}}}}]);